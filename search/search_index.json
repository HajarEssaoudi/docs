{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Infyinvoices Docummentation","text":""},{"location":"#introduction","title":"Introduction","text":"<p>Welcome to the documentation for the InfyInvoice App, a powerful tool designed to simplify and streamline your invoicing process. This app offers two distinct roles - Admin and Client, each with its own set of features. In this documentation, we'll provide an overview of the MVC (Model-View-Controller) architecture used in Laravel, the framework on which this app is built.</p>"},{"location":"#mvc-architecture-in-laravel","title":"MVC Architecture in Laravel","text":"<p>The Model-View-Controller (MVC) architecture is a fundamental concept in Laravel, providing a structured way to develop web applications.</p>"},{"location":"#understanding-the-mvc-pattern","title":"Understanding the MVC Pattern","text":"<p>- Model: Represents the application's data and business logic. - View: Handles the presentation and user interface. - Controller: Manages the interaction between Model and View.</p>"},{"location":"#how-laravel-implements-mvc","title":"How Laravel Implements MVC","text":"<ul> <li>Models: In Laravel, models represent database tables and allow you to interact with the database using an object-oriented syntax.</li> <li>Views: Blade templates are used for views, providing a clean and expressive way to create user interfaces.</li> <li>Controllers: Controllers handle incoming requests, interact with models, and pass data to views.</li> </ul>"},{"location":"#benefits-of-using-mvc","title":"Benefits of Using MVC","text":"<ul> <li>Separation of Concerns: MVC promotes code organization and separation of business logic from presentation.</li> <li>Maintainability: Easier to maintain and extend the application.</li> <li>Reusability: Components like models and views can be reused across the application.</li> </ul>"},{"location":"#admin-features","title":"Admin Features","text":"<p>Explore the features available to Admin users:</p> <ul> <li>Dashboard: Overview of key metrics and activities.</li> <li>Admins: Create, edit, and manage admin user accounts.</li> <li>Clients: Manage client user accounts.</li> <li>Categories: Organize products or services into categories.</li> <li>Taxes: Configure tax rates.</li> <li>Products: Add, edit, and manage products or services.</li> <li>Quotes: Create and manage quotes for clients.</li> <li>Invoices: Generate and track invoices.</li> <li>Transactions: View and manage financial transactions.</li> <li>Payments: Record and track payments.</li> <li>Invoice Templates: Customize invoice templates.</li> <li>Settings: Configure application settings.</li> </ul>"},{"location":"#client-features","title":"Client Features","text":"<p>Explore the features available to Client users:</p> <ul> <li>Dashboard: Client-specific dashboard with relevant information.</li> <li>Quotes: Access and respond to quotes.</li> <li>Invoices: View and manage invoices.</li> <li>Transactions: Monitor transaction history.</li> </ul>"},{"location":"#technologies-used","title":"Technologies Used","text":"<p>This section provides an overview of the technologies and tools used to develop the InfyInvoice App. Understanding the technology stack is essential for developers and users who want to work with or customize the application.</p> <ul> <li> <p>Laravel Framework: The core framework used for building the application. Laravel is known for its elegant syntax, robust features, and MVC architecture.</p> </li> <li> <p>PHP: The server-side scripting language that powers Laravel. It is used to create dynamic web pages and interact with databases.</p> </li> <li> <p>MySQL Database: A relational database management system used to store and manage data such as invoices, user accounts, and product information.</p> </li> <li> <p>HTML/CSS: The standard markup language and stylesheets for creating the user interface and layout of the application.</p> </li> <li> <p>JavaScript: A programming language used to add interactivity and enhance the user experience on the client-side.</p> </li> <li> <p>Blade Templating Engine: A templating engine provided by Laravel for creating reusable and dynamic views.</p> </li> <li> <p>Bootstrap: A front-end framework used for responsive web design and UI components.</p> </li> <li> <p>Composer: A dependency management tool for PHP that simplifies the process of adding and updating packages and libraries.</p> </li> <li> <p>Git and GitHub: Version control system and hosting platform used for collaborative development and code management.</p> </li> <li> <p>Nginx (or Apache): A web server used to serve the Laravel application to users.</p> </li> <li> <p>PHP Artisan: Laravel's command-line tool used for tasks like migrations, database seeding, and generating boilerplate code.</p> </li> <li> <p>RESTful API: The app may use RESTful APIs for communication between the front-end and back-end, allowing for efficient data exchange.</p> </li> <li> <p>Composer Packages: Various third-party packages and libraries installed via Composer to extend Laravel's functionality.</p> </li> <li> <p>Custom Libraries: Specific libraries or components developed in-house to meet the unique requirements of the application.</p> </li> </ul> <p>Understanding the technology stack used in the Invoice Management App can be beneficial for developers looking to extend or customize the app's functionality and for users who want to ensure compatibility with their own infrastructure.</p>"},{"location":"Login/","title":"Authentication page","text":""},{"location":"Login/#introduction","title":"Introduction","text":"<p>The authentication Page is the entry point for users with existing accounts to access the application. It provides a secure way for users to authenticate themselves using their registered email or username and password.</p> <p>The Login Page is accessible at: https://invoices.infyom.com/login</p> <p>The code bellow creates a route for the login page, which is accessible at the '/login' URL path. The <code>AuthenticatedSessionController@create</code> method is responsible for handling the display of the login form. The route is protected by the 'guest' middleware, ensuring that only unauthenticated users can access the login page.</p> <pre><code>Route::get('/login', [AuthenticatedSessionController::class, 'create'])\n-&gt;middleware('guest')\n-&gt;name('login');\n</code></pre> <p>In the <code>AuthenticatedSessionController</code> we got:</p> <pre><code>class AuthenticatedSessionController extends Controller\n{\n/**\n     * Display the login view.\n     *\n     * @return Application|Factory|View|\\Illuminate\\View\\View\n     */\n    public function create()\n{\nreturn view('auth.login');\n}\n</code></pre> <p>When a user accesses the /login URL, the create() method of the AuthenticatedSessionController is invoked. The method then returns the <code>login.blade.php</code> view, which renders the login page for the user to enter their credentials and submit the login form. </p> <p>The route responsible of showing the Login page is InfyInvoices&gt;routes&gt;auth.php </p>"},{"location":"Login/#the-login-page","title":"The login page","text":""},{"location":"Login/#web-page-title","title":"Web page title","text":"<p>The code bellow allows you to dynamically set the title of the web page using language translation. The translated text (e.g., \"Login\") will be displayed as the title of the page, which helps provide context to users and search engines.</p> <pre><code>@section('title')\n{{ __('messages.login.login') }}\n@endsection\n</code></pre>"},{"location":"Login/#logo","title":"Logo","text":"<p>To modify the logo picture we access to the file: ressources&gt;views&gt;auth&gt;login.blade.php  in the line 7 we have the div: </p> <pre><code>&lt;div\n  class=\"d-flex flex-column flex-column-fluid align-items-center justify-content-center p-4\"\n&gt;\n  &lt;div class=\"col-12 text-center\"&gt;\n    &lt;a href=\"{{ url('/') }}\" class=\"image mb-7 mb-sm-10 image-medium\"&gt;\n      &lt;img\n        alt=\"Logo\"\n        src=\"{{ getLogoUrl() }}\"\n        class=\"img-fluid object-contain\"\n      /&gt;\n    &lt;/a&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>This is an HTML template code to create a centered container with a clickable logo image.</p> <p>Let's break down the code:</p> <ul> <li>The <code>&lt;a&gt;</code> element creates a hyperlink <code>&lt;a href=\"{{ url('/') }}\"&gt;</code> that wraps around the logo image.</li> <li><code>href=\"{{ url('/') }}</code> sets the URL to the root of the application, making the logo clickable, and clicking it will take the user to the home page.</li> <li>The classes image, <code>mb-7, mb-sm-10</code>, and <code>image-medium</code> are used for styling.</li> <li>The <code>&lt;img&gt;</code> element displays the logo image with the URL fetched from the <code>getLogoUrl()</code> function <code>src=\"{{ getLogoUrl() }}\"</code>.</li> <li>The <code>alt</code> attribute provides alternative text for the image, which is useful for accessibility and SEO purposes.</li> <li>The classes <code>img-fluid</code> and <code>object-contain</code> ensure that the image is responsive and fits within its container while maintaining its aspect ratio.</li> </ul> <p>To change the logo we have two options:  1.to replace <code>{{ getLogoUrl() }}</code> with a link to the picture with the correct path.  2.to replace <code>{{ getLogoUrl() }}</code> with the appropriate function that returns the logo URL in your actual application.</p> <p>To modify the <code>getLogoUrl()</code> function:  first, access to app&gt;helpers.php line 46:</p> <pre><code>function getLogoUrl(): string\n{\nstatic $appLogo;\n\nif (empty($appLogo)) {\n$appLogo = Setting::where('key', '=', 'app_logo')-&gt;first();\n}\n\nreturn asset($appLogo-&gt;logo_url);\n}\n</code></pre> <p>It is a PHP function that fetches the URL of the application's logo image using Laravel's Eloquent ORM and returns it as a string. Here's what the function does step by step:</p> <ul> <li> <p>Declares the function getLogoUrl() with a return type of string.</p> </li> <li> <p>Defines a static variable named <code>$appLogo</code> . Static variables retain their value across function calls, ensuring that the logo data persists between invocations of the function. This avoids redundant database queries for the logo URL.</p> </li> <li> <p>Checks if <code>$appLogo</code> is empty (null or false) using the empty() function.</p> </li> <li> <p>If <code>$appLogo</code> is empty, it means the logo data hasn't been fetched yet. The function executes the code inside the if block to fetch the logo data.</p> </li> <li> <p>The line <code>$appLogo = Setting::where('key', '=', 'app_logo')-&gt;first();</code> queries the database using Laravel's Eloquent ORM. It searches the Setting model for a row with 'app_logo' as the value in the 'key' column. The first() method retrieves the first matching result as an object and assigns it to the <code>$appLogo</code> variable.</p> </li> <li> <p>Finally, the function returns the absolute URL of the logo image using the asset() function. The asset() function generates an absolute URL for the asset (logo image) using the provided relative path stored in <code>$appLogo-&gt;logo_url</code>.</p> </li> </ul> <p>In models&gt;setting.php: This code defines an accessor method getLogoUrlAttribute() in a Laravel Eloquent model. Its role is to provide the URL of a logo associated with the model instance. It retrieves the first related Media item (presumably representing an uploaded image), and if found, returns its full URL. If no related media is found, it returns the URL of a default logo image named \"infyom.png\" located in the assets directory. This allows you to easily access the logo's URL as if it were a regular attribute on the model, handling both existing logos and a default logo in case of absence.</p> <pre><code>   public function getLogoUrlAttribute(): string\n    {\n$media = $this-&gt;media-&gt;first();\nif (! empty($media)) {\nreturn $media-&gt;getFullUrl();\n}\n\nreturn asset('assets/images/infyom.png');\n}\n}\n</code></pre> <p>N.B: We specified already in config&gt;filesystems.php that the storage of images going to be in app&gt;public .</p>"},{"location":"Login/#sign-in-section","title":"Sign in section","text":"<p>To sign in the application we have a <code>&lt;div&gt;</code> contains: </p>"},{"location":"Login/#sign-in-title","title":"Sign in Title","text":"<pre><code>&lt;h1 class=\"text-center mb-7\"&gt;{{ __('messages.login.sign_in') }}&lt;/h1&gt;\n</code></pre> <p><code>('messages.login.sign_in')</code>: in Laravel is used for language localization and returns the translation of \"Sign In\" based on the user's preferred language.</p>"},{"location":"Login/#form-register","title":"Form register","text":"<pre><code>&lt;form method=\"POST\" action=\"{{ route('login') }}\"&gt;&lt;/form&gt;\n</code></pre> <p>The code represents an HTML form with a POST method that sends data to the \"login\" route in a Laravel application.</p>"},{"location":"Login/#email","title":"Email","text":"<p>The Email <code>&lt;div&gt;</code> contains:</p> <ul> <li>label with <code>__('messages.login.email').':'</code> that translate the word 'Email' to the user's preferred language.</li> <li>a normal input with a name,type id,bootstrap class for styling, required attribute specifies that the input field must be filled out before submitting the form, placeholder with a message can be translate to the user's preferred languag, autofocus that automatically sets focus on an input element when a page loads,<code>aria-describedby=\"emailHelp\"</code> enhances input accessibility for visually impaired users.</li> </ul> <pre><code>&lt;div class=\"mb-sm-7 mb-4\"&gt;\n  &lt;label for=\"email\" class=\"form-label\"&gt;\n    {{ __('messages.login.email').':' }}&lt;span class=\"required\"&gt;&lt;/span&gt;\n  &lt;/label&gt;\n  &lt;input\n    name=\"email\"\n    type=\"email\"\n    class=\"form-control\"\n    autofocus\n    id=\"email\"\n    aria-describedby=\"emailHelp\"\n    required\n    placeholder=\" {{ __('messages.login.email') }}\"\n  /&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"Login/#password","title":"Password","text":"<p>The password div contains:</p> <ul> <li> <p>label with <code>__('messages.login.email').':'</code> that translate the word 'Email' to the user's preferred language.</p> </li> <li> <p>'if' statement checks if a particular route named <code>password.request</code> exists in the application's routing system. If the route exists, it displays an HTML anchor link with the text <code>Forget your password?</code> that points to the URL defined by the <code>password.request</code> route. The link is styled using the provided CSS classes. If the route does not exist, nothing is displayed.</p> </li> <li>a normal input with a name,type id,bootstrap class for styling, required attribute specifies that the input field must be filled out before submitting the form, placeholder with a message can be translate to the user's preferred language,aria-label This attribute provides an accessibility label for the input field,data-toggle This is a custom attribute, likely used with JavaScript or a JavaScript library, to enable some specific functionality related to password input. It might toggle password visibility to show/hide the actual password characters while typing.</li> </ul> <pre><code>&lt;div class=\"mb-sm-7 mb-4\"&gt;\n  &lt;div class=\"d-flex justify-content-between\"&gt;\n    &lt;label for=\"password\" class=\"form-label\"\n      &gt;{{ __('messages.login.password').':' }}&lt;span class=\"required\"&gt;&lt;/span\n    &gt;&lt;/label&gt;\n    @if (Route::has('password.request'))\n    &lt;a\n      href=\"{{ route('password.request') }}\"\n      class=\"link-info fs-6 text-decoration-none\"\n    &gt;\n      {{ __('messages.login.forget_your_password') }}\n    &lt;/a&gt;\n    @endif\n  &lt;/div&gt;\n  &lt;div class=\"mb-3 position-relative\"&gt;\n    &lt;input\n      name=\"password\"\n      type=\"password\"\n      class=\"form-control\"\n      id=\"password\"\n      required\n      placeholder=\"{{ __('messages.login.password')}}\"\n      aria-label=\"Password\"\n      data-toggle=\"password\"\n    /&gt;\n    &lt;span\n      class=\"position-absolute d-flex align-items-center top-0 bottom-0 end-0 me-4 input-icon input-password-hide cursor-pointer text-gray-600\"\n    &gt;\n      &lt;i class=\"bi bi-eye-slash-fill\"&gt;&lt;/i&gt;\n    &lt;/span&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"Login/#remember_me-check","title":"Remember_me check","text":"<p>this code snippet creates a styled checkbox input with a label that displays \"Remember me.\" When the user clicks on either the checkbox or the label, it will toggle the checkbox's state (checked or unchecked). The checkbox is typically used to provide users with an option to remember their login credentials on the website or application.</p> <pre><code>&lt;div class=\"mb-sm-7 mb-4 form-check\"&gt;\n  &lt;input type=\"checkbox\" class=\"form-check-input\" id=\"remember_me\" /&gt;\n  &lt;label class=\"form-check-label\" for=\"remember_me\"&gt;\n    {{ __('messages.login.remember_me') }}\n  &lt;/label&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"Login/#login-button","title":"Login button","text":"<pre><code>&lt;div class=\"d-grid\"&gt;\n  &lt;button type=\"submit\" class=\"btn btn-primary\"&gt;\n    {{ __('messages.login.login') }}\n  &lt;/button&gt;\n&lt;/div&gt;\n</code></pre> <p> What happened when we click on submit?</p> <p>When the user clicks on the \"Login\" button, the form will be submitted, and the server-side logic will process the login attempt. The behavior depends on the correctness of the entered email and password:  1- Correct Email and Password: The form will be submitted to the <code>{{ route('login') }}</code> which refers to the controller:</p> <pre><code>Route::post('/login', [AuthenticatedSessionController::class, 'store'])\n-&gt;middleware('guest');\n</code></pre> <p>The method <code>AuthenticatedSessionController</code>:</p> <pre><code>public function store(LoginRequest $request)\n{\n$request-&gt;authenticate();\n\n$request-&gt;session()-&gt;regenerate();\nif ($request-&gt;user()-&gt;hasRole('admin')) {\nreturn redirect()-&gt;intended(getDashboardURL());\n} elseif ($request-&gt;user()-&gt;hasRole('client')) {\nreturn redirect()-&gt;intended(getClientDashboardURL());\n}\n}\n</code></pre> <ul> <li>The method is responsible for authenticating the user based on the provided login credentials.</li> <li>The 'LoginRequest' class is used to validate the submitted form data before processing.</li> <li>If the user's credentials are valid:</li> <li>The 'authenticate()' method is called to perform the authentication process, allowing the user to log in.</li> <li> <p>The session is regenerated for security purposes.</p> </li> <li> <p>Depending on the user's role, the user will be redirected to the corresponding dashboard page using the 'redirect()-&gt;intended()' method.</p> </li> <li> <p>If the user has the 'admin' role, they will be redirected to the admin dashboard using the 'getDashboardURL()' function.</p> </li> <li> <p>If the user has the 'client' role, they will be redirected to the client dashboard using the 'getClientDashboardURL()' function.</p> </li> <li> <p>If the user's credentials are invalid, the authentication process will fail, and the user will be redirected back to the login page with appropriate error messages.</p> </li> </ul> <p>the error code in resources&gt;views&gt;layouts&gt;errors.blade.php</p> <pre><code>@if ($errors-&gt;any())\n&lt;div class=\"alert alert-danger\"&gt;\n        &lt;div&gt;\n            &lt;div class=\"d-flex\"&gt;\n                &lt;i class=\"fa-solid fa-face-frown me-5\"&gt;&lt;/i&gt;\n                &lt;span class=\"mt-1\"&gt;{{$errors-&gt;first()}}&lt;/span&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n@endif\n</code></pre> <p>How we know if the user is an admin or client?  The route configuration bellow is a a middleware named 'xss', used to determine the redirection behavior based on the user's authentication status and role.</p> <pre><code>Route::middleware(['xss'])-&gt;group(function () {\nRoute::get('/', function () {\nif (Auth::check()) {\nif (Auth::user()-&gt;hasRole('admin')) {\nreturn Redirect::to(getDashboardURL());\n}\n\nreturn Redirect::to(getClientDashboardURL());\n}\n\nreturn redirect(route('login'));\n});\n</code></pre> <ul> <li> <p><code>Route::middleware(['xss'])-&gt;group(function () { ... });:</code> This defines a group of routes that will be processed by the 'xss' middleware. The 'xss' middleware could be used to protect against cross-site scripting (XSS) attacks.</p> </li> <li> <p><code>Route::get('/', function () { ... });:</code> This defines a GET route for the root URL '/'.    Inside the closure function:  <code>Auth::check()</code>: Checks if a user is authenticated.   If the user is authenticated: <code>Auth::user()-&gt;hasRole('admin')</code>: Checks if the authenticated user has the 'admin' role.   If the user has the 'admin' role, the function redirects to the dashboard URL obtained from getDashboardURL().   If the user doesn't have the 'admin' role, the function redirects to the client dashboard URL obtained from getClientDashboardURL().   If the user is not authenticated, the function redirects to the login route using redirect(route('login')).</p> </li> </ul> <pre><code>function getDashboardURL(): string\n{\nreturn RouteServiceProvider::HOME;\n}\n\n\nfunction getClientDashboardURL(): string\n{\nreturn RouteServiceProvider::CLIENT_HOME;\n}\n</code></pre> <p>1- getDashboardURL(): This function returns the URL for the main dashboard of your application. It uses the <code>RouteServiceProvider::HOME</code> constant. Typically, this would be the default dashboard that is accessed by users who have an \"admin\" role or similar privileged access.</p> <p>2- getClientDashboardURL(): This function returns the URL for the client-specific dashboard of your application. It uses the <code>RouteServiceProvider::CLIENT_HOME</code> constant. This dashboard is likely intended for users who have a \"client\" role or similar non-administrative access.</p>"},{"location":"Login/#forget-your-password","title":"Forget your password?","text":"<p><code>Forgot your password?</code> is an anchor link in resources&gt;views&gt;auth&gt;login.blade.php</p> <pre><code>@if (Route::has('password.request'))\n        &lt;a href=\"{{ route('password.request') }}\" class=\"link-info fs-6 text-decoration-none\"&gt;\n                 {{ __('messages.login.forget_your_password') }}\n         &lt;/a&gt;\n@endif\n</code></pre> <p>the link reffers to 'password.request' route in routes&gt;auth.php</p> <pre><code>Route::get('/forgot-password', [PasswordResetLinkController::class, 'create'])\n-&gt;middleware('guest')\n-&gt;name('password.request');\n</code></pre> <p>This route definition establishes a route with the URL '/forgot-password', which points to the create() method of the <code>PasswordResetLinkController</code></p> <pre><code> public function create()\n{\nreturn view('auth.forgot-password');\n}\n</code></pre> <p>when a user accesses the <code>/forgot-password</code> URL, the create() method of the controller is invoked. The method then returns the 'forgot-password.blade.php' view, which renders the \"Forgot Password\" page containing the form or link to initiate the password reset process.</p>"},{"location":"Login/#the-forgot-password-page","title":"The forgot-password page","text":"<p>The The forgot-password Page is accessible at: https://invoices.infyom.com/login</p> <p>The code bellow creates a route for the The forgot-password page, which is accessible at the '/The forgot-password' URL path.</p> <pre><code>Route::get('/forgot-password', [PasswordResetLinkController::class, 'create'])\n-&gt;middleware('guest')\n-&gt;name('password.request');\n</code></pre> <p>The GET route is used to display the initial form where users can enter their email address to receive a password reset link.</p>"},{"location":"Login/#the-web-page-title","title":"The web page title","text":"<p>The code bellow allows you to dynamically set the title of the web page using language translation. The translated text (e.g., \"Forgot Password\") will be displayed as the title of the page, which helps provide context to users and search engines.</p> <pre><code>{@section('title')\n{{__(' Forgot Password')}}\n@endsection}\n</code></pre>"},{"location":"Login/#logo_1","title":"Logo","text":"<p>same as 'login page logo code '</p> <p>check it here: http://docummentation.test/Login/#logo</p>"},{"location":"Login/#the-container","title":"the container","text":"<p>contains the text 'Forgot your password? No problem. Just let us know your email address and we will email you a password reset link that will allow you to choose a new one.' in user's preffered language</p> <pre><code>&lt;h1 class=\"text-center mb-7\"&gt;{{__('Forgot Password ?')}}&lt;/h1&gt;\n&lt;div class=\"fw-bold fs-4 mb-5 text-center\"&gt;\n  Enter your email to reset your password.\n&lt;/div&gt;\n&lt;div class=\"fs-4 text-center mb-5\"&gt;\n  {{ __('Forgot your password? No problem. Just let us know your email address\n  and we will email you a password reset link that will allow you to choose a\n  new one.') }}\n&lt;/div&gt;\n</code></pre>"},{"location":"Login/#form","title":"Form","text":"<p>the form will send data to:</p> <p><code>&lt;form class=\"form w-100\" method=\"POST\" action=\"{{ route('password.email') }}\"&gt;</code></p> <p>refers to the route:</p> <pre><code>Route::post('/forgot-password', [PasswordResetLinkController::class, 'store'])\n-&gt;middleware('guest')\n-&gt;name('password.email');\n</code></pre> <p>The POST route is used to submit the email address and initiate the process of sending a password reset link to the user's email. </p> <pre><code>class PasswordResetLinkController extends Controller\n{\n/**\n     * Display the password reset link request view.\n     *\n     * @return \\Illuminate\\View\\View\n     */\n    public function create()\n{\nreturn view('auth.forgot-password');\n}\n/**\n     * Handle an incoming password reset link request.\n     *\n     * @param  \\Illuminate\\Http\\Request  $request\n* @return \\Illuminate\\Http\\RedirectResponse\n     *\n     * @throws \\Illuminate\\Validation\\ValidationException\n     */\n    public function store(Request $request)\n{\n$request-&gt;validate([\n'email' =&gt; 'required|email',\n        ]);\n\n// We will send the password reset link to this user. Once we have attempted\n        // to send the link, we will examine the response then see the message we\n        // need to show to the user. Finally, we'll send out a proper response.\n        $status = Password::sendResetLink(\n$request-&gt;only('email')\n);\n\nreturn $status == Password::RESET_LINK_SENT\n                    ? back()-&gt;with('status', __($status))\n: back()-&gt;withInput($request-&gt;only('email'))\n-&gt;withErrors(['email' =&gt; __($status)]);\n}\n}\n</code></pre>"},{"location":"Login/#email_1","title":"Email","text":"<p>an email input with attributes</p> <pre><code>&lt;div class=\"row\"&gt;\n  &lt;div class=\"mb-4\"&gt;\n    &lt;label for=\"email\" class=\"form-label\"&gt;\n      {{ __('Email').':' }}&lt;span class=\"required\"&gt;&lt;/span&gt;\n    &lt;/label&gt;\n    &lt;input\n      id=\"email\"\n      class=\"form-control\"\n      type=\"email\"\n      value=\"{{ old('email') }}\"\n      required\n      autofocus\n      name=\"email\"\n      autocomplete=\"off\"\n      placeholder=\"{{ __('Email') }}\"\n    /&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"Login/#the-submit-button","title":"the submit button","text":"<pre><code>&lt;div class=\"form-group col-sm-12 d-flex text-start justify-content-center\"&gt;\n  &lt;button type=\"submit\" class=\"btn btn-primary\"&gt;\n    &lt;span class=\"indicator-label\"&gt; {{ __('Email Password Reset Link') }}&lt;/span&gt;\n  &lt;/button&gt;\n  &lt;a href=\"{{ route('login') }}\" class=\"btn btn-secondary my-0 ms-5 me-0\"\n    &gt;{{__('messages.common.cancel')}}&lt;/a\n  &gt;\n&lt;/div&gt;\n</code></pre> <p>this code snippet creates a password reset form with buttons for submitting the request and canceling the operation, while also supporting localization through language translations.</p>"},{"location":"layout/","title":"Layout","text":"<p>we can find the layout folder in resources&gt;view&gt;layout</p>"},{"location":"layout/#auth-blade","title":"Auth blade","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"{{ str_replace('_', '-', app()-&gt;getLocale()) }}\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"UTF-8\" /&gt;\n    &lt;meta\n      name=\"viewport\"\n      content=\"width=device-width, initial-scale=1, shrink-to-fit=no\"\n    /&gt;\n    &lt;title&gt;@yield('title') | {{ getAppName() }}&lt;/title&gt;\n    &lt;!-- Favicon --&gt;\n    &lt;link\n      rel=\"icon\"\n      href=\"{{ getSettingValue('favicon_icon') }}\"\n      type=\"image/png\"\n    /&gt;\n    &lt;meta name=\"csrf-token\" content=\"{{ csrf_token() }}\" /&gt;\n    &lt;!-- Fonts --&gt;\n    &lt;link\n      rel=\"stylesheet\"\n      href=\"https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700\"\n    /&gt;\n    &lt;!-- General CSS Files --&gt;\n    &lt;link\n      rel=\"stylesheet\"\n      type=\"text/css\"\n      href=\"{{ asset('assets/css/third-party.css') }}\"\n    /&gt;\n    &lt;link\n      rel=\"stylesheet\"\n      type=\"text/css\"\n      href=\"{{ asset('assets/css/style.css') }}\"\n    /&gt;\n    &lt;link\n      rel=\"stylesheet\"\n      type=\"text/css\"\n      href=\"{{ asset('assets/css/plugins.css') }}\"\n    /&gt;\n    &lt;link\n      rel=\"stylesheet\"\n      type=\"text/css\"\n      href=\"{{ mix('assets/css/page.css') }}\"\n    /&gt;\n    &lt;!-- CSS Libraries --&gt;\n    @stack('css') @yield('css')\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div\n      class=\"d-flex flex-column flex-column-fluid bgi-position-y-bottom position-x-center bgi-no-repeat bgi-size-contain bgi-attachment-fixed authImage\"\n    &gt;\n      @yield('content')\n    &lt;/div&gt;\n    &lt;footer&gt;\n      &lt;div class=\"container-fluid padding-0\"&gt;\n        &lt;div class=\"row align-items-center justify-content-center\"&gt;\n          &lt;div class=\"col-xl-6\"&gt;\n            &lt;div class=\"copyright text-center text-muted\"&gt;\n              All rights reserved &amp;copy; {{ date('Y') }}\n              &lt;a\n                href=\"{{ url('/') }}\"\n                class=\"font-weight-bold ml-1\"\n                target=\"_blank\"\n                &gt;{{ getAppName() }}&lt;/a\n              &gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/footer&gt;\n    &lt;!-- Scripts --&gt;\n    &lt;script src=\"{{ asset('messages.js') }}\"&gt;&lt;/script&gt;\n    &lt;script src=\"{{ mix('assets/js/auth-third-party.js') }}\"&gt;&lt;/script&gt;\n    &lt;script src=\"{{ mix('assets/js/auth/auth.js') }}\"&gt;&lt;/script&gt;\n    @stack('scripts')\n    &lt;script&gt;\n$(document).ready(function () {\n$(\".alert\").delay(5000).slideUp(300);\n});\n&lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>In this file resources&gt;view&gt;layout&gt;auth.blade.php we find the layout of the auth page: Here's a breakdown of its structure and key components:</p> <ol> <li> <p>Document Type Declaration and Language Setting:</p> </li> <li> <p>The template starts with the <code>&lt;!DOCTYPE html&gt;</code> declaration, indicating that it's an HTML5 document.</p> </li> <li> <p>The <code>lang</code> attribute is set based on the application's locale.</p> </li> <li> <p>Head Section:</p> </li> <li> <p>The <code>&lt;head&gt;</code> section contains various metadata and resource references.</p> </li> <li>It includes the character set, viewport settings, and the page title, which is dynamically set using the <code>@yield('title')</code> directive.</li> <li>Favicon: The page's favicon is specified with a <code>&lt;link&gt;</code> tag, and the icon URL is retrieved from the <code>favicon_icon</code> setting.</li> <li>CSRF Token: A CSRF token is set using a <code>&lt;meta&gt;</code> tag.</li> <li>Fonts: The template uses the Google Fonts API to load the \"Poppins\" font with multiple weights.</li> <li>CSS Files: Various CSS files are linked, including third-party stylesheets, general styles, and page-specific styles.</li> <li> <p>CSS Libraries: Additional CSS styles can be included using <code>@stack</code> and <code>@yield</code> directives, allowing customization for specific pages.</p> </li> <li> <p>Body Section:</p> </li> <li> <p>The <code>&lt;body&gt;</code> tag contains the main content of the page.</p> </li> <li> <p>It uses a CSS class (<code>authImage</code>) to apply a background image that positions it at the bottom.</p> </li> <li> <p>Content Section (<code>@yield('content')</code>):</p> </li> <li> <p>This is where the actual content of the authentication page is rendered.</p> </li> <li> <p>It's a flexible section that allows for dynamic content based on the specific authentication page being displayed.</p> </li> <li> <p>Footer:</p> </li> <li> <p>The template includes a simple footer section with copyright information.</p> </li> <li>The current year is dynamically generated using PHP's <code>date</code> function.</li> <li> <p>The <code>getAppName()</code> function is used to retrieve the application's name.</p> </li> <li> <p>Scripts:</p> </li> <li>JavaScript files are included at the end of the document.</li> <li><code>messages.js</code> appears to be a script for handling messages or notifications.</li> <li><code>auth-third-party.js</code> and <code>auth.js</code> are authentication-related JavaScript files.</li> <li>jQuery is used for handling the alert message behavior.</li> <li>The <code>@stack</code> and <code>@yield</code> directives are used to include additional scripts specific to certain pages.</li> </ol> <p>Overall, this HTML template provides a structured layout for authentication pages within a web application, allowing for customization of styles and content for different authentication-related views.</p>"},{"location":"layout/#app-blade","title":"App blade","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"{{ str_replace('_', '-', app()-&gt;getLocale()) }}\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" /&gt;\n    &lt;title&gt;@yield('title') | {{ getAppName() }}&lt;/title&gt;\n    &lt;!-- Favicon --&gt;\n    &lt;link\n      rel=\"icon\"\n      href=\"{{ asset(getSettingValue('favicon_icon')) }}\"\n      type=\"image/png\"\n    /&gt;\n    &lt;meta name=\"csrf-token\" content=\"{{ csrf_token() }}\" /&gt;\n    &lt;meta name=\"current-date-format\" content=\"{{ currentDateFormat() }}\" /&gt;\n\n    &lt;!-- Fonts --&gt;\n    &lt;link\n      rel=\"stylesheet\"\n      href=\"https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700\"\n    /&gt;\n\n    &lt;!-- General CSS Files --&gt;\n    &lt;link\n      rel=\"stylesheet\"\n      type=\"text/css\"\n      href=\"{{ asset('assets/css/third-party.css') }}\"\n    /&gt;\n    &lt;link\n      rel=\"stylesheet\"\n      type=\"text/css\"\n      href=\"{{ mix('assets/css/page.css') }}\"\n    /&gt;\n    @if(!Auth::user()-&gt;dark_mode)\n    &lt;link\n      rel=\"stylesheet\"\n      type=\"text/css\"\n      href=\"{{ asset('assets/css/style.css') }}\"\n    /&gt;\n    &lt;link\n      rel=\"stylesheet\"\n      type=\"text/css\"\n      href=\"{{ asset('assets/css/plugins.css') }}\"\n    /&gt;\n    &lt;link\n      href=\"{{ mix('assets/css/full-screen.css') }}\"\n      rel=\"stylesheet\"\n      type=\"text/css\"\n    /&gt;\n    @else\n    &lt;link\n      rel=\"stylesheet\"\n      type=\"text/css\"\n      href=\"{{ asset('assets/css/style.dark.css') }}\"\n    /&gt;\n    &lt;link\n      rel=\"stylesheet\"\n      type=\"text/css\"\n      href=\"{{ asset('assets/css/plugins.dark.css') }}\"\n    /&gt;\n    &lt;link\n      rel=\"stylesheet\"\n      type=\"text/css\"\n      href=\"{{ asset('assets/css/phone-number-dark.css') }}\"\n    /&gt;\n    &lt;link\n      rel=\"stylesheet\"\n      type=\"text/css\"\n      href=\"https://npmcdn.com/flatpickr/dist/themes/dark.css\"\n    /&gt;\n    @endif @livewireStyles\n    &lt;script src=\"{{ asset('vendor/livewire/livewire.js') }}\"&gt;&lt;/script&gt;\n    @include('layouts.livewire.livewire-turbo')\n    &lt;script\n      src=\"https://cdn.jsdelivr.net/gh/livewire/turbolinks@v0.1.x/dist/livewire-turbolinks.js\"\n      data-turbolinks-eval=\"false\"\n      data-turbo-eval=\"false\"\n    &gt;&lt;/script&gt;\n    &lt;script src=\"https://js.stripe.com/v3/\"&gt;&lt;/script&gt;\n    &lt;script\n      src=\"https://checkout.razorpay.com/v1/checkout.js\"\n      data-turbolinks-eval=\"false\"\n      data-turbo-eval=\"false\"\n    &gt;&lt;/script&gt;\n    &lt;script src=\"{{ asset('assets/js/third-party.js') }}\"&gt;&lt;/script&gt;\n    &lt;script src=\"{{ asset('messages.js') }}\"&gt;&lt;/script&gt;\n    &lt;script data-turbo-eval=\"false\"&gt;\nlet sweetAlertIcon = \"{{ asset('images/remove.png') }}\";\nlet decimalsSeparator = \"{{ getSettingValue('decimal_separator') }}\";\nlet thousandsSeparator = \"{{ getSettingValue('thousand_separator') }}\";\nlet changePasswordUrl = \"{{ route('user.changePassword') }}\";\nlet currentDateFormat = \"{{ currentDateFormat() }}\";\nlet momentDateFormat = \"{{ momentJsCurrentDateFormat() }}\";\nvar phoneNo = \"\";\nlet getUserLanguages = \"{{getCurrentLanguageName()}}\";\nLang.setLocale(getUserLanguages);\n&lt;/script&gt;\n    @routes\n    &lt;script src=\"{{ mix('assets/js/pages.js') }}\"&gt;&lt;/script&gt;\n  &lt;/head&gt;\n  &lt;body class=\"overflow-x-hidden\"&gt;\n    @yield('phone_js')\n    &lt;div class=\"d-flex flex-column flex-root\"&gt;\n      &lt;div class=\"d-flex flex-row flex-column-fluid\"&gt;\n        @include('layouts.sidebar')\n        &lt;div\n          class=\"wrapper d-flex flex-column flex-row-fluid overflow-x-hidden\"\n        &gt;\n          &lt;div\n            class=\"container-fluid d-flex align-items-stretch justify-content-between px-0\"\n          &gt;\n            @include('layouts.header')\n          &lt;/div&gt;\n          &lt;div class=\"content d-flex flex-column flex-column-fluid pt-7\"&gt;\n            @yield('header_toolbar')\n            &lt;div class=\"d-flex flex-wrap flex-column-fluid\"&gt;\n              @yield('content')\n            &lt;/div&gt;\n          &lt;/div&gt;\n          &lt;div class=\"container-fluid\"&gt;@include('layouts.footer')&lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    @include('profile.changePassword') @include('profile.changelanguage')\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>resources&gt;view&gt;layout&gt;app.blade.php Here are the key elements and sections of this blade:</p> <ol> <li> <p>HTML Document Structure:</p> </li> <li> <p>The document begins with the usual <code>&lt;!DOCTYPE html&gt;</code> declaration and an opening <code>&lt;html&gt;</code> tag.</p> </li> <li> <p>The <code>lang</code> attribute is set based on the application's locale.</p> </li> <li> <p>Head Section:</p> </li> <li>The <code>&lt;head&gt;</code> section contains various metadata and resource references.</li> <li>It includes the charset, viewport settings, and the page title, which is dynamically set using the <code>@yield('title')</code> directive.</li> <li>Favicon: The page's favicon is specified with a <code>&lt;link&gt;</code> tag, and the icon URL is retrieved from the <code>favicon_icon</code> setting.</li> <li>CSRF Token: A CSRF token is set using a <code>&lt;meta&gt;</code> tag.</li> <li>Date Format: The current date format is set as a <code>&lt;meta&gt;</code> tag.</li> <li>Fonts: The template uses the Google Fonts API to load the \"Poppins\" font with multiple weights.</li> <li>CSS Files: Various CSS files are linked, including third-party stylesheets, page-specific styles, and dark mode styles if the user has enabled dark mode.</li> <li>Livewire Styles: Styles related to the Livewire framework are included.</li> <li>JavaScript Libraries: Several JavaScript libraries are loaded, including Livewire, Turbo, Stripe, and Razorpay.</li> <li>Custom JavaScript: Custom JavaScript code is included, defining variables and settings.</li> <li>Laravel Mix Assets: Routes, Livewire components, and other assets are loaded using Laravel Mix.</li> <li> <p>Body Section:</p> </li> <li> <p>The <code>&lt;body&gt;</code> tag has the class <code>overflow-x-hidden</code>, which controls horizontal scrolling behavior.</p> </li> <li>It contains the content of the page.</li> <li> <p>The <code>@yield('phone_js')</code> directive suggests that JavaScript specific to phone functionality may be included here.</p> </li> <li> <p>Main Content Structure:</p> </li> <li> <p>The main content is wrapped in a series of <code>&lt;div&gt;</code> elements with various classes.</p> </li> <li>The layout includes a sidebar, header, and footer, which are included using <code>@include</code> directives.</li> <li> <p>The content section is flexible, allowing for dynamic content rendering using the <code>@yield</code> directive.</p> </li> <li> <p>JavaScript Variables:</p> </li> <li> <p>Several JavaScript variables are defined, including settings related to decimal and thousand separators, change password URL, date formats, and language settings.</p> </li> <li> <p>The <code>Lang.setLocale(getUserLanguages)</code> line sets the application's language/locale based on user preferences.</p> </li> <li> <p>Scripts and Assets:</p> </li> <li> <p>The <code>@routes</code> directive generates JavaScript code for named routes.</p> </li> <li> <p>Additional JavaScript scripts are included, such as <code>pages.js</code>, which contain application-specific logic.</p> </li> <li> <p>Modals:</p> </li> <li>The template includes modals for changing the user's password and language preferences.</li> </ol> <p>This HTML template is part of a Laravel-based web application and serves as the layout for various pages within the application. The use of Blade directives (<code>@yield</code>, <code>@include</code>, etc.) that it's designed for dynamic content rendering.</p>"},{"location":"layout/#menu-blade","title":"Menu blade","text":"<pre><code>@role('admin')\n&lt;li class=\"nav-item {{ Request::is('admin/dashboard*') ? 'active' : '' }}\"&gt;\n  &lt;a\n    class=\"nav-link d-flex align-items-center py-3\"\n    aria-current=\"page\"\n    href=\"{{ route('admin.dashboard') }}\"\n  &gt;\n    &lt;span class=\"menu-icon\"&gt;\n      &lt;i class=\"fa-solid fa-chart-pie pe-3\"&gt;&lt;/i&gt;\n    &lt;/span&gt;\n    &lt;span class=\"aside-menu-title\"&gt;{{ __('messages.dashboard') }}&lt;/span&gt;\n  &lt;/a&gt;\n&lt;/li&gt;\n\n&lt;li class=\"nav-item {{ Request::is('admin/users*') ? 'active' : '' }}\"&gt;\n  &lt;a\n    class=\"nav-link d-flex align-items-center py-3\"\n    aria-current=\"page\"\n    href=\"{{ route('users.index') }}\"\n  &gt;\n    &lt;span class=\"menu-icon\"&gt;\n      &lt;i class=\"fas fa-user-alt pe-3\"&gt;&lt;/i&gt;\n    &lt;/span&gt;\n    &lt;span class=\"aside-menu-title\"&gt;{{__('messages.admins')}}&lt;/span&gt;\n  &lt;/a&gt;\n&lt;/li&gt;\n\n&lt;li class=\"nav-item {{ Request::is('admin/client*') ? 'active' : '' }}\"&gt;\n  &lt;a\n    class=\"nav-link d-flex align-items-center py-3\"\n    aria-current=\"page\"\n    href=\"{{ route('clients.index') }}\"\n  &gt;\n    &lt;span class=\"menu-icon\"&gt;\n      &lt;i class=\"fa-solid fas fa-users pe-3\"&gt;&lt;/i&gt;\n    &lt;/span&gt;\n    &lt;span class=\"aside-menu-title\"&gt;{{ __('messages.clients') }}&lt;/span&gt;\n  &lt;/a&gt;\n&lt;/li&gt;\n\n&lt;li class=\"nav-item {{ Request::is('admin/categories*') ? 'active' : '' }}\"&gt;\n  &lt;a\n    class=\"nav-link d-flex align-items-center py-3\"\n    aria-current=\"page\"\n    href=\"{{ route('category.index') }}\"\n  &gt;\n    &lt;span class=\"menu-icon\"&gt;\n      &lt;i class=\"fa-solid fas fa-th-list pe-3\"&gt;&lt;/i&gt;\n    &lt;/span&gt;\n    &lt;span class=\"aside-menu-title\"&gt;{{ __('messages.categories') }}&lt;/span&gt;\n  &lt;/a&gt;\n&lt;/li&gt;\n\n&lt;li class=\"nav-item {{ Request::is('admin/taxes*') ? 'active' : '' }}\"&gt;\n  &lt;a\n    class=\"nav-link d-flex align-items-center py-3\"\n    aria-current=\"page\"\n    href=\"{{ route('taxes.index') }}\"\n  &gt;\n    &lt;span class=\"menu-icon\"&gt;\n      &lt;i class=\"fa-solid fas fa-percentage pe-3\"&gt;&lt;/i&gt;\n    &lt;/span&gt;\n    &lt;span class=\"aside-menu-title\"&gt;{{ __('messages.taxes') }}&lt;/span&gt;\n  &lt;/a&gt;\n&lt;/li&gt;\n\n&lt;li class=\"nav-item {{ Request::is('admin/products*') ? 'active' : '' }}\"&gt;\n  &lt;a\n    class=\"nav-link d-flex align-items-center py-3\"\n    aria-current=\"page\"\n    href=\"{{ route('products.index') }}\"\n  &gt;\n    &lt;span class=\"menu-icon\"&gt;\n      &lt;i class=\"fa-solid fas fa-cube pe-3\"&gt;&lt;/i&gt;\n    &lt;/span&gt;\n    &lt;span class=\"aside-menu-title\"&gt;{{ __('messages.products') }}&lt;/span&gt;\n  &lt;/a&gt;\n&lt;/li&gt;\n\n&lt;li class=\"nav-item {{ Request::is('admin/quotes*') ? 'active' : '' }}\"&gt;\n  &lt;a\n    class=\"nav-link d-flex align-items-center py-3\"\n    aria-current=\"page\"\n    href=\"{{ route('quotes.index') }}\"\n  &gt;\n    &lt;span class=\"menu-icon\"&gt;\n      &lt;i class=\"fa-solid fas fa-quote-left pe-3\"&gt;&lt;/i&gt;\n    &lt;/span&gt;\n    &lt;span class=\"aside-menu-title\"&gt;{{ __('messages.quotes') }}&lt;/span&gt;\n  &lt;/a&gt;\n&lt;/li&gt;\n\n&lt;li class=\"nav-item {{ Request::is('admin/invoices*') ? 'active' : '' }}\"&gt;\n  &lt;a\n    class=\"nav-link d-flex align-items-center py-3\"\n    aria-current=\"page\"\n    href=\"{{ route('invoices.index') }}\"\n  &gt;\n    &lt;span class=\"menu-icon\"&gt;\n      &lt;i class=\"fa-solid far fa-file-alt pe-3\"&gt;&lt;/i&gt;\n    &lt;/span&gt;\n    &lt;span class=\"aside-menu-title\"&gt;{{ __('messages.invoices') }}&lt;/span&gt;\n  &lt;/a&gt;\n&lt;/li&gt;\n\n&lt;li class=\"nav-item {{ Request::is('admin/transactions*') ? 'active' : '' }}\"&gt;\n  &lt;a\n    class=\"nav-link d-flex align-items-center py-3\"\n    aria-current=\"page\"\n    href=\"{{ route('transactions.index') }}\"\n  &gt;\n    &lt;span class=\"menu-icon\"&gt;\n      &lt;i class=\"fa-solid fas fa-list-ol pe-3\"&gt;&lt;/i&gt;\n    &lt;/span&gt;\n    &lt;span class=\"aside-menu-title\"&gt;{{ __('messages.transactions') }}&lt;/span&gt;\n  &lt;/a&gt;\n&lt;/li&gt;\n\n&lt;li class=\"nav-item {{ Request::is('admin/payments*') ? 'active' : '' }}\"&gt;\n  &lt;a\n    class=\"nav-link d-flex align-items-center py-3\"\n    aria-current=\"page\"\n    href=\"{{ route('payments.index') }}\"\n  &gt;\n    &lt;span class=\"menu-icon\"&gt;\n      &lt;i class=\"fa-solid fas fa-money-check pe-3\"&gt;&lt;/i&gt;\n    &lt;/span&gt;\n    &lt;span class=\"aside-menu-title\"&gt;{{ __('messages.payments') }}&lt;/span&gt;\n  &lt;/a&gt;\n&lt;/li&gt;\n\n&lt;li\n  class=\"nav-item {{ Request::is('admin/template-setting*') ? 'active' : '' }}\"\n&gt;\n  &lt;a\n    class=\"nav-link d-flex align-items-center py-3\"\n    aria-current=\"page\"\n    href=\"{{ route('invoiceTemplate') }}\"\n  &gt;\n    &lt;span class=\"menu-icon\"&gt;\n      &lt;i class=\"fa-solid far fa-copy pe-3\"&gt;&lt;/i&gt;\n    &lt;/span&gt;\n    &lt;span class=\"aside-menu-title\"&gt;{{ __('messages.invoice_templates') }}&lt;/span&gt;\n  &lt;/a&gt;\n&lt;/li&gt;\n\n&lt;li\n  class=\"nav-item {{ Request::is('admin/settings*', 'admin/currencies*', 'admin/payment-gateway*', 'admin/invoice-settings*') ? 'active' : '' }}\"\n&gt;\n  &lt;a\n    class=\"nav-link d-flex align-items-center py-3\"\n    aria-current=\"page\"\n    href=\"{{ route('invoice-settings.settings') }}\"\n  &gt;\n    &lt;span class=\"menu-icon\"&gt;\n      &lt;i class=\"fa-solid fa fa-cogs pe-3\"&gt;&lt;/i&gt;\n    &lt;/span&gt;\n    &lt;span class=\"aside-menu-title\"&gt;{{ __('messages.settings') }}&lt;/span&gt;\n  &lt;/a&gt;\n&lt;/li&gt;\n@endrole @role('client') @include('client_panel.layouts.menu') @endrole\n</code></pre> <p>In this file resources&gt;view&gt;layout&gt;menu.blade.php we find a Blade template for generating a navigation menu in our application. Here's an explanation of the code:</p> <ol> <li> <p><code>@role('admin')</code>: This is a Blade directive that checks if the current user has the \"admin\" role. If the user has the \"admin\" role, the following menu items will be displayed.</p> </li> <li> <p>List Items (<code>&lt;li&gt;</code> elements): Each list item represents a menu item in the navigation menu. Here's a breakdown of each menu item:</p> </li> <li> <p><code>&lt;li class=\"nav-item {{ Request::is('admin/dashboard*') ? 'active' : '' }}\"&gt;</code>: This list item represents a menu item. The <code>class</code> attribute is conditional and adds the \"active\" class if the current route matches the \"admin/dashboard*\" pattern, indicating the currently selected menu item.</p> </li> <li> <p><code>&lt;a class=\"nav-link d-flex align-items-center py-3\" aria-current=\"page\" href=\"{{ route('admin.dashboard') }}\"&gt;</code>: This is a link (<code>&lt;a&gt;</code>) within the list item. It has a \"nav-link\" class and displays a flex container (<code>d-flex align-items-center</code>) for alignment. The <code>href</code> attribute points to the \"admin.dashboard\" route.</p> </li> <li> <p><code>&lt;span class=\"menu-icon\"&gt;</code>: This is a <code>&lt;span&gt;</code> element used for displaying an icon or menu icon.</p> </li> <li> <p><code>&lt;i class=\"fa-solid fa-chart-pie pe-3\"&gt;&lt;/i&gt;</code>: This is an <code>&lt;i&gt;</code> element representing a Font Awesome icon (a chart pie icon). The \"pe-3\" class adds right padding for spacing.</p> </li> <li> <p><code>&lt;span class=\"aside-menu-title\"&gt;{{ __('messages.dashboard') }}&lt;/span&gt;</code>: This <code>&lt;span&gt;</code> element displays the menu item title, which is localized using the <code>__('messages.dashboard')</code> translation function.</p> </li> <li> <p>Other Menu Items: Similar <code>&lt;li&gt;</code> elements represent other menu items such as \"Admins,\" \"Clients,\" \"Categories,\" \"Taxes,\" \"Products,\" \"Quotes,\" \"Invoices,\" \"Transactions,\" \"Payments,\" \"Invoice Templates,\" and \"Settings.\" Each menu item has its own Font Awesome icon and title.</p> </li> <li> <p><code>@endrole</code>: This Blade directive marks the end of the \"admin\" role-specific menu items. If the user doesn't have the \"admin\" role, these menu items will not be displayed.</p> </li> <li> <p><code>@role('client')</code>: This is another Blade directive that checks if the current user has the \"client\" role. If the user has the \"client\" role, it includes a separate menu for clients using <code>@include('client_panel.layouts.menu')</code>.</p> </li> </ol> <p>In summary, this code generates a dynamic navigation menu with role-based menu items. If the user has the \"admin\" role, it displays a set of menu items related to admin functionalities. If the user has the \"client\" role, it includes a different menu specific to clients. This is a common approach to creating role-based navigation menus in Laravel applications.</p>"},{"location":"layout/#sub-menu-blade","title":"Sub menu blade","text":"<pre><code>   &lt;li class=\"nav-item position-relative mx-xl-3 mb-3 mb-xl-0 {{ !Request::is('*/dashboard*') ? 'd-none' : '' }}\"&gt;\n      @hasrole('admin')\n      &lt;a class=\"nav-link p-0 {{ Request::is('*/dashboard*') ? 'active' : '' }}\"\n         href=\"{{ route('admin.dashboard') }}\"&gt;{{ __('messages.dashboard') }}&lt;/a&gt;\n      @endrole\n      @hasrole('client')\n      &lt;a class=\"nav-link p-0 {{ Request::is('*/dashboard*') ? 'active' : '' }}\"\n         href=\"{{ route('client.dashboard') }}\"&gt;{{ __('messages.dashboard') }}&lt;/a&gt;\n      @endrole\n   &lt;/li&gt;\n   &lt;li class=\"nav-item position-relative mx-xl-3 mb-3 mb-xl-0 {{ !Request::is('admin/users*') ? 'd-none' : '' }}\"&gt;\n      &lt;a class=\"nav-link p-0 {{ Request::is('admin/users*') ? 'active' : '' }}\"\n         href=\"{{ route('users.index') }}\"&gt;{{ __('messages.admins') }}&lt;/a&gt;\n   &lt;/li&gt;\n   &lt;li class=\"nav-item position-relative mx-xl-3 mb-3 mb-xl-0 {{ !Request::is('admin/clients*') ? 'd-none' : '' }}\"&gt;\n      &lt;a class=\"nav-link p-0 {{ Request::is('admin/clients*') ? 'active' : '' }}\"\n         href=\"{{ route('clients.index') }}\"&gt;{{ __('messages.clients') }}&lt;/a&gt;\n   &lt;/li&gt;\n   &lt;li class=\"nav-item position-relative mx-xl-3 mb-3 mb-xl-0 {{ !Request::is('admin/categories*') ? 'd-none' : '' }}\"&gt;\n      &lt;a class=\"nav-link p-0 {{ Request::is('admin/categories*') ? 'active' : '' }}\"\n         href=\"{{ route('category.index') }}\"&gt;{{ __('messages.categories') }}&lt;/a&gt;\n   &lt;/li&gt;\n   &lt;li class=\"nav-item position-relative mx-xl-3 mb-3 mb-xl-0 {{ !Request::is('admin/taxes*') ? 'd-none' : '' }}\"&gt;\n      &lt;a class=\"nav-link p-0 {{ Request::is('admin/taxes*') ? 'active' : '' }}\"\n         href=\"{{ route('taxes.index') }}\"&gt;{{ __('messages.taxes') }}&lt;/a&gt;\n   &lt;/li&gt;\n   &lt;li class=\"nav-item position-relative mx-xl-3 mb-3 mb-xl-0 {{ !Request::is('admin/products*') ? 'd-none' : '' }}\"&gt;\n      &lt;a class=\"nav-link p-0 {{ Request::is('admin/products*') ? 'active' : '' }}\"\n         href=\"{{ route('products.index') }}\"&gt;{{ __('messages.products') }}&lt;/a&gt;\n   &lt;/li&gt;\n   @role('admin')\n   &lt;li class=\"nav-item position-relative mx-xl-3 mb-3 mb-xl-0 {{ !Request::is('admin/transactions*') ? 'd-none' : '' }}\"&gt;\n      &lt;a class=\"nav-link p-0 {{ Request::is('admin/transactions*') ? 'active' : '' }}\"\n         href=\"{{ route('transactions.index') }}\"&gt;{{ __('messages.transactions') }}&lt;/a&gt;\n   &lt;/li&gt;\n   @else\n      &lt;li class=\"nav-item position-relative mx-xl-3 mb-3 mb-xl-0 {{ !Request::is('client/transactions*') ? 'd-none' : '' }}\"&gt;\n         &lt;a class=\"nav-link p-0 {{ Request::is('client/transactions*') ? 'active' : '' }}\"\n            href=\"{{ route('client.transactions.index') }}\"&gt;{{ __('messages.transactions') }}&lt;/a&gt;\n      &lt;/li&gt;\n      @endrole\n      &lt;li class=\"nav-item position-relative mx-xl-3 mb-3 mb-xl-0 {{ !Request::is('*/quotes*') ? 'd-none' : '' }}\"&gt;\n      @role('admin')\n         &lt;a class=\"nav-link p-0 {{ Request::is('*/quotes*') ? 'active' : '' }}\"\n            href=\"{{ route('quotes.index') }}\"&gt;{{ __('messages.quotes') }}&lt;/a&gt;\n      @endrole\n      @role('client')\n         &lt;a class=\"nav-link p-0 {{ Request::is('*/quotes*') ? 'active' : '' }}\"\n            href=\"{{ route('client.quotes.index') }}\"&gt;{{ __('messages.quotes') }}&lt;/a&gt;\n      @endrole\n      &lt;/li&gt;\n      &lt;li class=\"nav-item position-relative mx-xl-3 mb-3 mb-xl-0 {{ !Request::is('*/invoices*') ? 'd-none' : '' }}\"&gt;\n         @role('admin')\n         &lt;a class=\"nav-link p-0 {{ Request::is('*/invoices*') ? 'active' : '' }}\"\n            href=\"{{ route('invoices.index') }}\"&gt;{{ __('messages.invoices') }}&lt;/a&gt;\n         @endrole\n         @hasrole('client')\n         &lt;a class=\"nav-link p-0 {{ Request::is('*/invoices*') ? 'active' : '' }}\"\n            href=\"{{ route('client.invoices.index') }}\"&gt;{{ __('messages.invoices') }}&lt;/a&gt;\n         @endrole\n      &lt;/li&gt;\n      &lt;li class=\"nav-item position-relative mx-xl-3 mb-3 mb-xl-0 {{ !Request::is('admin/template-setting*') ? 'd-none' : '' }}\"&gt;\n         &lt;a class=\"nav-link p-0 {{ Request::is('admin/template-setting*') ? 'active' : '' }}\"\n            href=\"{{ route('invoiceTemplate') }}\"&gt;{{ __('messages.invoice_templates') }}&lt;/a&gt;\n      &lt;/li&gt;\n      @role('admin')\n      &lt;li class=\"nav-item position-relative mx-xl-3 mb-3 mb-xl-0 {{ !Request::is('admin/payments*') ? 'd-none' : '' }}\"&gt;\n         &lt;a class=\"nav-link p-0 {{ Request::is('admin/payments*') ? 'active' : '' }}\"\n            href=\"{{ route('payments.index') }}\"&gt;{{ __('messages.payments') }}&lt;/a&gt;\n      &lt;/li&gt;\n      @endrole\n      @role('admin')\n      {{--     Admin Subscription Sub Menu--}}\n      &lt;li class=\"nav-item position-relative mx-xl-3 mb-3 mb-xl-0 {{ (!Request::is('admin/settings*', 'admin/currencies*', 'admin/payment-gateway*','admin/invoice-settings')) ? 'd-none' : '' }}\"&gt;\n         &lt;a class=\"nav-link p-0 {{ isset($sectionName)?($sectionName == 'general' ? 'active' : ''):'' }}\"\n            href=\"{{ route('settings.edit',['section' =&gt; 'general']) }}\" &gt;{{ __('messages.general') }}&lt;/a&gt;\n      &lt;/li&gt;\n\n      &lt;li class=\"nav-item position-relative mx-xl-3 mb-3 mb-xl-0 {{ (!Request::is('admin/settings*', 'admin/currencies*', 'admin/payment-gateway*','admin/invoice-settings')) ? 'd-none' : '' }}\"&gt;\n         &lt;a class=\"nav-link p-0 {{ Request::is('admin/currencies*') ? 'active' : '' }}\"\n            href=\"{{ route('currencies.index') }}\"&gt;{{__('messages.setting.currencies')}}&lt;/a&gt;\n      &lt;/li&gt;\n\n      &lt;li class=\"nav-item position-relative mx-xl-3 mb-3 mb-xl-0 {{ (!Request::is('admin/settings*', 'admin/currencies*', 'admin/payment-gateway*','admin/invoice-settings')) ? 'd-none' : '' }}\"&gt;\n         &lt;a class=\"nav-link p-0 {{ Request::is('admin/payment-gateway*') ? 'active' : '' }}\"\n            href=\"{{ route('payment-gateway.show',['section' =&gt; 'payment-gateway']) }}\"&gt;{{__('messages.payment-gateway')}}&lt;/a&gt;\n      &lt;/li&gt;\n\n      &lt;li class=\"nav-item position-relative mx-xl-3 mb-3 mb-xl-0 {{ (!Request::is('admin/settings*', 'admin/currencies*', 'admin/payment-gateway*' ,'admin/invoice-settings')) ? 'd-none' : '' }}\"&gt;\n         &lt;a class=\"nav-link p-0 {{ Request::is('admin/invoice-settings*') ? 'active' : '' }}\"\n            href=\"{{ route('settings.invoice-settings') }}\"&gt;{{__('messages.setting.invoice_settings')}}&lt;/a&gt;\n      &lt;/li&gt;\n      @endrole\n</code></pre> <p>In this file resources&gt;view&gt;layout&gt;sub_menu.blade.php we find a Blade template for generating a dynamic navigation menu in a Laravel application. Here's a breakdown of the code:</p> <ol> <li> <p><code>&lt;li&gt;</code> Elements: Each <code>&lt;li&gt;</code> element represents a menu item in the navigation menu. These menu items are conditionally displayed based on the current route.</p> </li> <li> <p>Conditional Display: Menu items are conditionally displayed using the <code>{{ !Request::is('*/route*') ? 'd-none' : '' }}</code> class. If the current route matches the pattern specified in <code>Request::is('*/route*')</code>, the menu item is displayed; otherwise, it is hidden (<code>d-none</code> class).</p> </li> <li> <p>Role-Based Display: The <code>@hasrole('role')</code> and <code>@role('role')</code> Blade directives are used to determine whether the current user has specific roles. Depending on the user's role, different menu items may be displayed. For example:</p> </li> <li> <p><code>@hasrole('admin')</code>: Checks if the user has the \"admin\" role. If true, it displays specific menu items.</p> </li> <li> <p><code>@role('client')</code>: Checks if the user has the \"client\" role. If true, it displays specific menu items.</p> </li> <li> <p><code>&lt;a&gt;</code> Elements: Each <code>&lt;a&gt;</code> element represents a link within the menu item. It has a <code>href</code> attribute pointing to a specific route.</p> </li> <li> <p>Menu Titles: The menu titles are generated dynamically using Laravel's <code>__('messages.some_key')</code> function, which allows for localization and translation of menu item labels.</p> </li> </ol> <p>In summary, this code creates a dynamic navigation menu that displays menu items based on the user's role and the current route. It uses Blade directives for role-based and route-based conditional display of menu items. The menu items are linked to specific routes, and their labels can be localized for different languages.</p>"},{"location":"layout/#side-bar-blade","title":"Side bar blade","text":"<pre><code>&lt;div class=\"aside-menu-container\" id=\"sidebar\"&gt;\n    &lt;div class=\"aside-menu-container__aside-logo flex-column-auto\"&gt;\n        &lt;a href=\"{{ url('/') }}\" class=\"text-decoration-none sidebar-logo d-flex align-items-center\" data-bs-toggle=\"tooltip\"\n           title=\"{{ (strlen(getAppName()) &gt; 15 ) ? substr(getAppName(), 0,15).'...' : getAppName() }}\"&gt;\n            &lt;div class=\"image image-mini me-3\"&gt;\n                &lt;img src=\"{{ getLogoUrl() }}\"\n                     class=\"img-fluid object-contain\" alt=\"profile image\"&gt;\n            &lt;/div&gt;\n            &lt;span class=\"text-gray-900 fs-4\"&gt;{{ (strlen(getAppName()) &gt; 15 ) ? substr(getAppName(), 0,15).'...' : getAppName() }}&lt;/span&gt;\n        &lt;/a&gt;\n        &lt;button type=\"button\" class=\"btn px-0 aside-menu-container__aside-menubar d-lg-block d-none sidebar-btn\"&gt;\n            &lt;i class=\"fa-solid fa-bars fs-1\"&gt;&lt;/i&gt;\n        &lt;/button&gt;\n    &lt;/div&gt;\n    &lt;div class=\"aside-menu-container__sidebar-scrolling overflow-auto\"&gt;\n        &lt;ul class=\"aside-menu-container__aside-menu nav flex-column\"&gt;\n            @include('layouts.menu')\n        &lt;/ul&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"bg-overlay\" id=\"sidebar-overly\"&gt;&lt;/div&gt;\n</code></pre> <p>In this file resources&gt;view&gt;layout&gt;sidebar.blade.php we find a sidebar menu layout for our application. Here's a breakdown of the code:</p> <ol> <li> <p><code>&lt;div class=\"aside-menu-container\" id=\"sidebar\"&gt;</code>: This <code>&lt;div&gt;</code> element represents the main container for the sidebar menu.</p> </li> <li> <p>Sidebar Logo: Inside the sidebar container, there is a section for displaying the application's logo and name.</p> </li> <li> <p><code>&lt;div class=\"aside-menu-container__aside-logo flex-column-auto\"&gt;</code>: This <code>&lt;div&gt;</code> represents the container for the logo and name.</p> </li> <li><code>&lt;a href=\"{{ url('/') }}\" class=\"text-decoration-none sidebar-logo d-flex align-items-center\" ...&gt;</code>: This <code>&lt;a&gt;</code> element is a link to the application's home page and contains the logo and name.</li> <li><code>&lt;div class=\"image image-mini me-3\"&gt;</code>: This <code>&lt;div&gt;</code> contains an image (the application's logo).</li> <li> <p><code>&lt;span class=\"text-gray-900 fs-4\"&gt;</code>: This <code>&lt;span&gt;</code> element displays the application's name.</p> </li> <li> <p>Sidebar Toggle Button: A button is provided to toggle the sidebar menu for responsive design.</p> </li> <li> <p><code>&lt;button type=\"button\" class=\"btn px-0 aside-menu-container__aside-menubar d-lg-block d-none sidebar-btn\"&gt;</code>: This <code>&lt;button&gt;</code> element has a menu icon (hamburger icon) for toggling the sidebar.</p> </li> <li> <p>Sidebar Content: The actual menu items are displayed within the sidebar container.</p> </li> <li> <p><code>&lt;div class=\"aside-menu-container__sidebar-scrolling overflow-auto\"&gt;</code>: This <code>&lt;div&gt;</code> element provides scrolling for the sidebar content.</p> </li> <li> <p><code>&lt;ul class=\"aside-menu-container__aside-menu nav flex-column\"&gt;</code>: This <code>&lt;ul&gt;</code> element represents an unordered list of menu items and includes a reference to include the menu items using <code>@include('layouts.menu')</code>. The <code>layouts.menu</code> file is likely where the actual menu items are defined.</p> </li> <li> <p>Background Overlay: A background overlay is used to dim the main content when the sidebar is open.</p> </li> <li><code>&lt;div class=\"bg-overlay\" id=\"sidebar-overly\"&gt;&lt;/div&gt;</code>: This <code>&lt;div&gt;</code> element with the class \"bg-overlay\" creates a semi-transparent overlay that covers the main content when the sidebar is open.</li> </ol> <p>In summary, this code sets up a sidebar menu layout for our application. It includes the application's logo and name, a toggle button for responsive design, and a list of menu items that are defined in an included menu file. Additionally, a background overlay is used to dim the main content when the sidebar is open.</p>"},{"location":"layout/#errors-blade","title":"Errors blade","text":"<pre><code>@if ($errors-&gt;any())\n    &lt;div class=\"alert alert-danger\"&gt;\n        &lt;div&gt;\n            &lt;div class=\"d-flex\"&gt;\n                &lt;i class=\"fa-solid fa-face-frown me-5\"&gt;&lt;/i&gt;\n                &lt;span class=\"mt-1\"&gt;{{$errors-&gt;first()}}&lt;/span&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n@endif\n</code></pre> <p>In this file resources&gt;view&gt;layout&gt;errors.blade.php we find a Blade template conditional statement in Laravel that checks if there are any validation errors (<code>$errors-&gt;any()</code>) and displays an alert message if errors exist. Here's a breakdown of the code:</p> <ol> <li> <p><code>@if ($errors-&gt;any())</code>: This is the start of an <code>if</code> statement in Blade templating. It checks if there are any validation errors using the <code>$errors</code> variable provided by Laravel. The <code>-&gt;any()</code> method checks if there are any error messages in the <code>$errors</code> collection.</p> </li> <li> <p><code>&lt;div class=\"alert alert-danger\"&gt;</code>: If there are validation errors, this <code>&lt;div&gt;</code> element is displayed with the CSS classes \"alert\" and \"alert-danger,\" creating a red-colored alert box to indicate an error.</p> </li> <li> <p><code>&lt;div&gt;</code> and <code>&lt;span&gt;</code> Elements: Within the alert box, there's a nested structure.</p> </li> <li><code>&lt;div class=\"d-flex\"&gt;</code>: This <code>&lt;div&gt;</code> element uses the \"d-flex\" class to enable a flexbox layout for its children.</li> <li><code>&lt;i class=\"fa-solid fa-face-frown me-5\"&gt;&lt;/i&gt;</code>: This <code>&lt;i&gt;</code> element displays an emoji or icon of a frowning face using the Font Awesome icon library. The \"me-5\" class adds right margin spacing.</li> <li><code>&lt;span class=\"mt-1\"&gt;{{$errors-&gt;first()}}&lt;/span&gt;</code>: This <code>&lt;span&gt;</code> element displays the first validation error message from the <code>$errors</code> collection. The <code>-&gt;first()</code> method retrieves the first error message. The \"mt-1\" class adds top margin spacing.</li> </ol> <p>The result is an alert box with a frowning face icon and the first validation error message displayed next to it if any validation errors are present. This is a common pattern for displaying validation error messages to users our applications.</p>"},{"location":"Admin/InvoiceTemplates/","title":"Invoice Template","text":""},{"location":"Admin/InvoiceTemplates/#route","title":"Route","text":"<p>The route <code>Route::get('template-setting', [InvoiceTemplateController::class, 'invoiceTemplateView'])-&gt;name('invoiceTemplate');</code> leads to the page /admin/Template-setting, which displays all the Template we have.</p>"},{"location":"Admin/InvoiceTemplates/#controller","title":"Controller","text":"<p>The controller of the 'invoiceTemplate' page located in app&gt;http&gt;controllers&gt;InvoiceTemplateController.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Models\\InvoiceSetting;\nuse App\\Models\\Setting;\nuse App\\Repositories\\SettingRepository;\nuse Illuminate\\Contracts\\Foundation\\Application;\nuse Illuminate\\Contracts\\View\\Factory;\nuse Illuminate\\Contracts\\View\\View;\nuse Illuminate\\Http\\RedirectResponse;\nuse Illuminate\\Http\\Request;\nuse Laracasts\\Flash\\Flash;\n\nclass InvoiceTemplateController extends AppBaseController\n{\n    protected $settingRepository;\n\n    /**\n     * @param  SettingRepository  $settingRepo\n     */\n    public function __construct(SettingRepository $settingRepo)\n    {\n        $this-&gt;settingRepository = $settingRepo;\n    }\n\n    /**\n     * @return Application|Factory|View\n     */\n    public function invoiceTemplateView()\n    {\n        $invoiceTemplate = InvoiceSetting::all()-&gt;toArray();\n        $defaultTemplate = Setting::where('key', 'default_invoice_template')-&gt;first();\n\n        return view('settings.setting-invoice', compact('invoiceTemplate', 'defaultTemplate'));\n    }\n\n    /**\n     * @param  Request  $request\n     * @return RedirectResponse\n     */\n    public function invoiceTemplateUpdate(Request $request): RedirectResponse\n    {\n        $this-&gt;settingRepository-&gt;updateInvoiceSetting($request-&gt;all());\n        Flash::success('Invoice template updated successfully');\n\n        return redirect()-&gt;route('invoiceTemplate');\n    }\n}\n</code></pre> <p>Let's break down its key methods and functionality:</p> <ol> <li> <p>Constructor:</p> </li> <li> <p>The constructor injects an instance of the <code>SettingRepository</code> into the controller, which can be used to interact with settings related to invoice templates.</p> </li> <li> <p><code>invoiceTemplateView</code> Method:</p> </li> <li> <p>This method is responsible for displaying the invoice template settings page. It retrieves data related to invoice templates and the default template, and then passes this data to a view named <code>'settings.setting-invoice'</code>. This view is responsible for rendering the HTML interface for managing invoice templates.</p> </li> <li> <p><code>invoiceTemplateUpdate</code> Method:</p> </li> <li>This method handles the updating of invoice template settings based on the data received from a <code>Request</code> object. It calls the <code>updateInvoiceSetting</code> method from the <code>SettingRepository</code> to perform the actual update of settings.</li> <li>After updating the settings, it flashes a success message using the Laracasts/Flash package, indicating that the invoice template has been updated successfully.</li> <li>Finally, it redirects the user to the <code>'invoiceTemplate'</code> route, which typically corresponds to the page for managing invoice templates.</li> </ol>"},{"location":"Admin/InvoiceTemplates/#view","title":"View","text":"<p>The view of 'InvoiceTemplate' located in resources\\views\\settings\\settings-invoice.blade.php.</p> <p>```@extends('settings.edit') @section('title')     {{ ('messages.invoice_templates') }} @endsection @section('page_css')      @endsection @section('section')                                               {{ Form::open(['route'=&gt;'invoiceTemplate.update','method' =&gt; 'post','id' =&gt; 'invoiceSetting','class' =&gt; 'invoice-settings']) }}                                                                                           {{ Form::label('invoice_template',('messages.setting.invoice_template').':', ['class' =&gt; 'form-label fs-6 mb-3']) }}                                                                                                       @foreach($invoiceTemplate as $template)                                                         \\(defaultTemplate-&gt;value ? 'selected' : '' }}&gt;                                                             {{\\)template['template_name']}}                                                         \\                                                     @endforeach                                                 \\                                             \\                                             \\                                                 {{ Form::label('invoice_color',__('messages.setting.color').':',['class' =&gt; 'form-label fs-6 mb-3']) }}                                                                                                  {{ Form::text('default_invoice_color', $invoiceTemplate[0]['template_color']??null,['id' =&gt; 'invoiceColor', 'hidden', 'class' =&gt; 'form-control']) }}                                                                                          {{ Form::button(__('messages.common.save'),['type' =&gt; 'submit','id' =&gt; 'btnSave', 'class' =&gt; 'btn btn-primary save-btn-invoice col-6', 'data-loading-text' =&gt; \" Processing...\"]) }}                                                                                  {{ Form::close() }}                                      Invoice Templates <pre><code>                                                &lt;/div&gt;\n                                            &lt;/div&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;!--end::Body--&gt;\n                &lt;/div&gt;\n                &lt;!--end::Tables Widget 5--&gt;\n            &lt;/div&gt;\n            &lt;!--end::Col--&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n{{ Form::hidden('company_address','Rajkot',['id' =&gt; 'companyAddress']) }}\n{{ Form::hidden('company_phone_number', '7405868976',['id' =&gt; 'companyPhoneNumber']) }}\n{{ Form::hidden('company_name', getAppName(),['id' =&gt; 'companyName']) }}\n</code></pre> <p>@endsection ```</p> <p>Let's break down its key components and sections:</p> <ol> <li> <p>Extending Another Blade View:</p> </li> <li> <p>The view extends another Blade view named <code>'settings.edit'</code>. This means it inherits the structure and content of the <code>'settings.edit'</code> view and can override or add content as needed.</p> </li> <li> <p>Page Title:</p> </li> <li> <p>The <code>@section('title')</code> directive sets the title of the page to \"Invoice Templates.\"</p> </li> <li> <p>Page CSS:</p> </li> <li> <p>The <code>@section('page_css')</code> directive includes an external CSS file named <code>'invoice-template.css'</code>. This CSS file is applied to style elements on this page.</p> </li> <li> <p>Content Section:</p> </li> <li> <p>The <code>@section('section')</code> directive defines the main content section of the page. Here's a breakdown of the content within this section:</p> <ul> <li>It starts with a <code>div</code> element with the class <code>\"card\"</code>, which represents a card-like container for content.</li> <li>Inside the card, there is a <code>div</code> with the class <code>\"card-body\"</code> and other classes. This is where the main content of the page resides.</li> <li>Within the <code>card-body</code>, there is a <code>div</code> with the class <code>\"row g-5 g-xl-8\"</code>, which likely represents a grid layout.</li> <li>The grid layout is divided into two columns using Bootstrap's grid system: one column for settings and another for displaying invoice templates.</li> <li>The left column (<code>col-xl-4</code>) contains a card with settings related to invoice templates, such as selecting a template and setting a template color. It also includes a \"Save\" button.</li> <li>The right column (<code>col-xl-8</code>) displays invoice templates and appears to use JavaScript (Vue.js) for the interactive editor. The editor content is inside the <code>div</code> with the id <code>\"editorContent\"</code>.</li> </ul> </li> <li> <p>Hidden Form Fields:</p> </li> <li> <p>The view includes hidden form fields (e.g., company address, phone number, and company name) with corresponding values. These hidden fields may be used to submit additional data when interacting with the page.</p> </li> <li> <p>JavaScript Usage:</p> </li> <li> <p>JavaScript libraries or frameworks (such as Vue.js) are likely used to provide interactivity for the invoice template editor and any dynamic functionality on the page. However, the JavaScript code itself is not provided in this Blade view.</p> </li> <li> <p>Conditional Display:</p> </li> <li>Some elements or sections of the page are conditionally displayed based on user interactions or application logic. For example, the selection of an invoice template might dynamically update the displayed content.</li> </ol> <p>Overall, this Blade is a part of an invoice template management system within our application. It allows users to select and customize invoice templates and provides an interactive editor for viewing and potentially modifying the templates.</p>"},{"location":"Admin/Payments/","title":"Payment","text":""},{"location":"Admin/Payments/#route","title":"Route","text":"<p>The route <code>Route::resource('payments', AdminPaymentController::class);</code> leads to the page /admin/payment, which displays all the payments invoices we have.</p>"},{"location":"Admin/Payments/#controller","title":"Controller","text":"<p>The controller of the 'payments' page located in app&gt;http&gt;controllers&gt;AdminPaymentController.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Exports\\AdminPaymentsExport;\nuse App\\Http\\Requests\\CreateAdminPaymentRequest;\nuse App\\Models\\AdminPayment;\nuse App\\Models\\Invoice;\nuse App\\Models\\Payment;\nuse App\\Repositories\\AdminPaymentRepository;\nuse Barryvdh\\DomPDF\\Facade as PDF;\nuse Carbon\\Carbon;\nuse Exception;\nuse Illuminate\\Contracts\\Foundation\\Application;\nuse Illuminate\\Contracts\\View\\Factory;\nuse Illuminate\\Contracts\\View\\View;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\Response;\nuse Maatwebsite\\Excel\\Facades\\Excel;\nuse Symfony\\Component\\HttpFoundation\\BinaryFileResponse;\n\nclass AdminPaymentController extends AppBaseController\n{\n    /** @var AdminPaymentRepository */\n    public $adminPaymentRepository;\n\n    /**\n     * @param  AdminPaymentRepository  $adminPaymentRepo\n     */\n    public function __construct(AdminPaymentRepository $adminPaymentRepo)\n    {\n        $this-&gt;adminPaymentRepository = $adminPaymentRepo;\n    }\n\n    /**\n     * @return Application|Factory|View\n     *\n     */\n    public function index(): View|Factory|Application\n    {\n        $invoice = Invoice::whereNotIn('status', [Invoice::PAID, Invoice::DRAFT])\n            -&gt;orderBy('created_at', 'desc')\n            -&gt;pluck('invoice_id', 'id')-&gt;toArray();\n\n        return view('payments.index', compact('invoice'));\n    }\n\n    /**\n     * @param  CreateAdminPaymentRequest  $request\n     * @return mixed\n     */\n    public function store(CreateAdminPaymentRequest $request)\n    {\n        $input = $request-&gt;all();\n\n        try {\n            $payment = $this-&gt;adminPaymentRepository-&gt;store($input);\n        } catch (Exception $exception) {\n            return $this-&gt;sendError($exception-&gt;getMessage());\n        }\n\n        return $this-&gt;sendResponse($payment, 'Payment saved successfully.');\n    }\n\n    /**\n     * @param  AdminPayment  $payment\n     * @return JsonResponse\n     */\n    public function edit(AdminPayment $payment): JsonResponse\n    {\n        $invoiceId = $payment-&gt;invoice-&gt;id;\n        $payment['currencyCode'] = getInvoiceCurrencyIcon($payment-&gt;invoice-&gt;currency_id);\n        $payment['invoice'] = $payment-&gt;invoice-&gt;invoice_id;\n        $payment['DueAmount'] = $this-&gt;getInvoiceDueAmount($invoiceId);\n\n        return $this-&gt;sendResponse($payment, 'payment retrieved successfully.');\n    }\n\n    /**\n     * @param  CreateAdminPaymentRequest  $request\n     * @return JsonResponse\n     */\n    public function update(CreateAdminPaymentRequest $request): JsonResponse\n    {\n        $input = $request-&gt;all();\n        $this-&gt;adminPaymentRepository-&gt;updatePayment($input);\n\n        return $this-&gt;sendSuccess('Payment updated successfully.');\n    }\n\n    /**\n     * @param  AdminPayment  $payment\n     * @return JsonResponse\n     */\n    public function destroy(AdminPayment $payment): JsonResponse\n    {\n        $this-&gt;adminPaymentRepository-&gt;adminDeletePayment($payment);\n\n        return $this-&gt;sendSuccess('Payment deleted successfully.');\n    }\n\n    /**\n     * @param $id\n     * @return mixed\n     */\n    public function getInvoiceDueAmount($id): mixed\n    {\n        $data = [];\n        /** @var Invoice $invoice */\n        $invoice = Invoice::whereId($id)-&gt;with('payments')-&gt;firstOrFail();\n\n        $paidAmount = $invoice-&gt;payments()-&gt;where('is_approved', Payment::APPROVED)-&gt;sum('amount');\n        $dueAmount = $invoice-&gt;final_amount - $paidAmount;\n\n        $data['currencyCode'] = getInvoiceCurrencyIcon($invoice-&gt;currency_id);\n        $data['totalDueAmount'] = $dueAmount;\n        $data['totalPaidAmount'] = $paidAmount;\n\n        return $this-&gt;sendResponse($data, 'Invoice Due Amount Retrieve successfully');\n    }\n\n    /**\n     * @return BinaryFileResponse\n     */\n    public function exportAdminPaymentsExcel(Request $request): BinaryFileResponse\n    {\n        return Excel::download(new AdminPaymentsExport($request-&gt;date), 'Payment-Excel.xlsx');\n    }\n\n    /**\n     * Undocumented function\n     *\n     * @param Request $request\n     * @return void\n     */\n    public function exportAdminPaymentsPDF(Request $request)\n    {\n        $timeEntryDate = explode(' - ',  $request-&gt;date);\n        $startDate = Carbon::parse($timeEntryDate[0])-&gt;format('Y-m-d');\n        $endDate = Carbon::parse($timeEntryDate[1])-&gt;format('Y-m-d');\n        $data['adminPayments'] = AdminPayment::whereBetween('payment_date', [$startDate, $endDate])-&gt;with(['invoice.client.user'])-&gt;get();\n        $paymentsPDF = PDF::loadView('payments.export_pdf', $data);\n\n        return $paymentsPDF-&gt;download('payments.pdf');\n    }\n\n    public function getCurrentDateFormat()\n    {\n        return currentDateFormat();\n    }\n}\n</code></pre> <p>This controller class named <code>AdminPaymentController</code>is responsible for handling various operations related to admin payments in a web application. Here's a breakdown of the key methods and functionality within this controller:</p> <ol> <li> <p>Constructor:</p> </li> <li> <p>The constructor injects an instance of the <code>AdminPaymentRepository</code> into the controller, which can be used to interact with the database and handle payment-related operations.</p> </li> <li> <p><code>index</code> Method:</p> </li> <li> <p>This method retrieves a list of invoices that are not in the 'PAID' or 'DRAFT' status, orders them by creation date in descending order, and passes them to a view named 'payments.index'.</p> </li> <li> <p><code>store</code> Method:</p> </li> <li> <p>This method handles the creation of a new admin payment based on the data received from a <code>CreateAdminPaymentRequest</code>. It attempts to store the payment and returns a success response or an error message if an exception is thrown.</p> </li> <li> <p><code>edit</code> Method:</p> </li> <li> <p>This method retrieves information about a specific admin payment (<code>AdminPayment</code>) and formats it, including adding currency information and the invoice's due amount. It then returns this formatted data in a JSON response.</p> </li> <li> <p><code>update</code> Method:</p> </li> <li> <p>This method handles the update of an existing admin payment based on data received from a <code>CreateAdminPaymentRequest</code>. It calls the <code>updatePayment</code> method from the <code>AdminPaymentRepository</code> and returns a success response.</p> </li> <li> <p><code>destroy</code> Method:</p> </li> <li> <p>This method handles the deletion of a specific admin payment. It calls the <code>adminDeletePayment</code> method from the <code>AdminPaymentRepository</code> and returns a success response upon successful deletion.</p> </li> <li> <p><code>getInvoiceDueAmount</code> Method:</p> </li> <li> <p>This method calculates and retrieves the due amount for a given invoice. It calculates the due amount by subtracting the total paid amount (sum of approved payments) from the final invoice amount. It returns the calculated data in a JSON response.</p> </li> <li> <p><code>exportAdminPaymentsExcel</code> Method:</p> </li> <li> <p>This method generates and returns an Excel spreadsheet (<code>.xlsx</code>) containing admin payment data based on a given date range. It uses the <code>AdminPaymentsExport</code> class to generate the Excel file.</p> </li> <li> <p><code>exportAdminPaymentsPDF</code> Method:</p> </li> <li> <p>This method generates and returns a PDF document containing admin payment data based on a given date range. It uses the <code>PDF</code> facade (Barryvdh\\DomPDF) to create the PDF from a Blade view named 'payments.export_pdf'.</p> </li> <li> <p><code>getCurrentDateFormat</code> Method:</p> <ul> <li>This method returns the current date format. It is a helper method to retrieve the date format used in the application.</li> </ul> </li> </ol> <p>Overall, this controller handles various aspects of admin payments, including viewing, creating, updating, and exporting payment data in different formats (Excel and PDF). It also provides methods for calculating invoice due amounts and date formatting.</p>"},{"location":"Admin/Payments/#model","title":"Model","text":"<p>The models related to this controller are :App\\Models\\AdminPayment ,App\\Models\\Invoice , App\\Models\\Payment .</p>"},{"location":"Admin/Payments/#admin-payment-model","title":"Admin Payment Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Barryvdh\\LaravelIdeHelper\\Eloquent;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Support\\Carbon;\n\nclass AdminPayment extends Model\n{\n    /**\n     * @var string\n     */\n    protected $table = 'admin_payments';\n\n    /**\n     * @var string[]\n     */\n    protected $fillable = ['invoice_id', 'amount', 'payment_date', 'payment_id', 'payment_mode', 'notes'];\n\n    /**\n     * @var string[]\n     */\n    public static $rules = [\n        'invoice_id'   =&gt; 'required',\n        'amount'       =&gt; 'required',\n        'payment_mode' =&gt; 'required',\n    ];\n\n    /**\n     * @var string[]\n     */\n    protected $casts = [\n        'invoice_id'   =&gt; 'integer',\n        'amount'       =&gt; 'double',\n        'payment_mode' =&gt; 'integer',\n        'payment_id'   =&gt; 'integer',\n        'payment_date' =&gt; 'date',\n        'notes'        =&gt; 'string',\n    ];\n\n    /**\n     * @return BelongsTo\n     */\n    public function invoice(): BelongsTo\n    {\n        return $this-&gt;belongsTo(Invoice::class, 'invoice_id', 'id');\n    }\n}\n</code></pre> <p>The provided PHP code defines the <code>AdminPayment</code> model in our application. Here's a breakdown of the key aspects of this model:</p> <ol> <li> <p>Table Name:</p> </li> <li> <p>The <code>protected $table</code> property specifies the name of the database table associated with this model, which is <code>'admin_payments'</code>.</p> </li> <li> <p>Fillable Attributes:</p> </li> <li> <p>The <code>protected $fillable</code> property lists the attributes that are mass assignable. These are the attributes that can be set when creating or updating a <code>AdminPayment</code> record.</p> </li> <li> <p>Validation Rules:</p> </li> <li> <p>The <code>public static $rules</code> property defines validation rules for creating or updating a <code>AdminPayment</code> record. For example, it specifies that the <code>invoice_id</code>, <code>amount</code>, and <code>payment_mode</code> attributes are required.</p> </li> <li> <p>Data Type Casting:</p> </li> <li> <p>The <code>protected $casts</code> property specifies the data types of the model's attributes. For instance, it indicates that <code>invoice_id</code> is an integer, <code>amount</code> is a double (floating-point number), <code>payment_mode</code> is an integer, <code>payment_id</code> is an integer, <code>payment_date</code> is a date, and <code>notes</code> is a string.</p> </li> <li> <p>Relationship:</p> </li> <li> <p>The <code>invoice</code> method defines a BelongsTo relationship with the <code>Invoice</code> model. This relationship indicates that an <code>AdminPayment</code> belongs to an <code>Invoice</code> and is related via the <code>invoice_id</code> foreign key.</p> </li> <li> <p>Timestamps:</p> </li> <li> <p>By default, Eloquent (Laravel's ORM) assumes that your database table has <code>created_at</code> and <code>updated_at</code> columns for tracking record creation and updates. These timestamps are automatically managed by Eloquent.</p> </li> <li> <p>Model Properties:</p> </li> <li>The model defines properties for various attributes such as <code>id</code>, <code>invoice_id</code>, <code>amount</code>, <code>payment_mode</code>, <code>payment_date</code>, <code>notes</code>, <code>created_at</code>, and <code>updated_at</code>. These properties correspond to the columns in the <code>admin_payments</code> table.</li> </ol> <p>This model represents the structure and behavior of <code>AdminPayment</code> records in the database. It includes attribute casting, validation rules, and a relationship with the <code>Invoice</code> model, which allows you to work with admin payment data and its associated invoice information in our Laravel application.</p>"},{"location":"Admin/Payments/#invoice-model","title":"Invoice Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Carbon\\Carbon;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsToMany;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Support\\Str;\n\nclass Invoice extends Model\n{\n    use HasFactory;\n\n    public const SELECT_DISCOUNT_TYPE = 0;\n    public const FIXED = 1;\n    public const PERCENTAGE = 2;\n\n    public const DISCOUNT_TYPE = [\n        self::SELECT_DISCOUNT_TYPE =&gt; 'Select Discount Type',\n        self::FIXED =&gt; 'Fixed',\n        self::PERCENTAGE =&gt; 'Percentage',\n    ];\n\n    public const DRAFT = 0;\n    public const UNPAID = 1;\n    public const PAID = 2;\n    public const PARTIALLY = 3;\n    public const OVERDUE = 4;\n    public const STATUS_ALL = 5;\n    public const PROCESSING = 6;\n\n    public const STATUS_ARR = [\n        self::STATUS_ALL =&gt; 'All',\n        self::DRAFT =&gt; 'Draft',\n        self::UNPAID =&gt; 'Unpaid',\n        self::PAID =&gt; 'Paid',\n        self::PARTIALLY =&gt; 'Partially Paid',\n        self::OVERDUE =&gt; 'Overdue',\n        self::PROCESSING =&gt; 'Processing',\n    ];\n\n    public const RECURRING_OFF = 0;\n\n    public const RECURRING_ON = 1;\n\n    public const RECURRING_STATUS_ARR = [\n        self::RECURRING_ON =&gt; 'On',\n        self::RECURRING_OFF =&gt; 'Off',\n    ];\n\n    public const MONTHLY = 1;\n    public const QUARTERLY = 2;\n    public const SEMIANNUALLY = 3;\n    public const ANNUALLY = 4;\n\n    public const RECURRING_ARR = [\n        self::MONTHLY =&gt; 'Monthly',\n        self::QUARTERLY =&gt; 'Quarterly',\n        self::SEMIANNUALLY =&gt; 'Semi Annually',\n        self::ANNUALLY =&gt; 'Annually',\n    ];\n\n    /**\n     * Validation rules\n     *\n     * @var array\n     */\n    public static $rules = [\n        'client_id' =&gt; 'required',\n        'invoice_id' =&gt; 'required|unique:invoices,invoice_id',\n        'invoice_date' =&gt; 'required',\n        'due_date' =&gt; 'required',\n    ];\n\n    public static $messages = [\n        'client_id.required' =&gt; 'The Client field is required.',\n        'invoice_date.required' =&gt; 'The invoice date field is required.',\n        'due_date' =&gt; 'The invoice Due date field is required.',\n    ];\n\n    public $table = 'invoices';\n\n    public $appends = ['status_label'];\n\n    public $fillable = [\n        'client_id',\n        'invoice_date',\n        'due_date',\n        'invoice_id',\n        'currency_id',\n        'amount',\n        'discount_type',\n        'discount',\n        'final_amount',\n        'note',\n        'term',\n        'template_id',\n        'status',\n        'recurring_status',\n        'recurring_cycle',\n        'last_recurring_on',\n        'parent_id',\n    ];\n\n    protected $casts = [\n        'client_id' =&gt; 'integer',\n        'parent_id' =&gt; 'integer',\n        'invoice_date' =&gt; 'date',\n        'due_date' =&gt; 'date',\n        'invoice_id' =&gt; 'string',\n        'currency_id' =&gt; 'integer',\n        'amount' =&gt; 'double',\n        'discount_type' =&gt; 'integer',\n        'discount' =&gt; 'double',\n        'final_amount' =&gt; 'double',\n        'note' =&gt; 'string',\n        'term' =&gt; 'string',\n        'template_id' =&gt; 'integer',\n        'status' =&gt; 'integer',\n        'recurring_status' =&gt; 'integer',\n        'recurring_cycle' =&gt; 'integer',\n        'last_recurring_on' =&gt; 'date',\n        'tax' =&gt; 'double',\n    ];\n\n    public function getStatusLabelAttribute(): string\n    {\n        return self::STATUS_ARR[$this-&gt;status];\n    }\n\n    /**\n     * @return BelongsTo\n     */\n    public function client(): BelongsTo\n    {\n        return $this-&gt;belongsTo(Client::class, 'client_id', 'id');\n    }\n\n    /**\n     * @return HasMany\n     */\n    public function invoiceItems(): HasMany\n    {\n        return $this-&gt;hasMany(InvoiceItem::class);\n    }\n\n    /**\n     * @return string\n     */\n    public static function generateUniqueInvoiceId(): string\n    {\n        $invoiceId = mb_strtoupper(Str::random(6));\n        while (true) {\n            $isExist = self::whereInvoiceId($invoiceId)-&gt;exists();\n            if ($isExist) {\n                self::generateUniqueInvoiceId();\n            }\n            break;\n        }\n\n        return $invoiceId;\n    }\n\n    /**\n     * @return HasMany\n     */\n    public function payments(): HasMany\n    {\n        return $this-&gt;hasMany(Payment::class, 'invoice_id', 'id');\n    }\n\n    /**\n     * @return HasMany\n     */\n    public function AdminPayment(): HasMany\n    {\n        return $this-&gt;hasMany(AdminPayment::class, 'invoice_id', 'id');\n    }\n\n    /**\n     * @return BelongsTo\n     */\n    public function invoiceTemplate(): BelongsTo\n    {\n        return $this-&gt;belongsTo(InvoiceSetting::class, 'template_id', 'id');\n    }\n\n    public function parentInvoice(): BelongsTo\n    {\n        return $this-&gt;belongsTo(self::class, 'parent_id', 'id');\n    }\n\n    public function childInvoices(): HasMany\n    {\n        return $this-&gt;hasMany(self::class, 'parent_id', 'id');\n    }\n\n    /**\n     * @param $value\n     * @return Setting|mixed\n     */\n    public function getCurrencyIdAttribute($value)\n    {\n        if (! empty($value)) {\n            return Currency::where('id', $value)-&gt;pluck('id')-&gt;first();\n        }\n\n        return Currency::where('id', getSettingValue('current_currency'))-&gt;pluck('id')-&gt;first();\n    }\n\n    /**\n     * @param $value\n     */\n    public function setInvoiceDateAttribute($value): void\n    {\n        $this-&gt;attributes['invoice_date'] = Carbon::createFromFormat(currentDateFormat(),\n            $value)-&gt;translatedFormat('Y-m-d');\n    }\n\n    /**\n     * @param $value\n     */\n    public function setDueDateAttribute($value): void\n    {\n        $this-&gt;attributes['due_date'] = Carbon::createFromFormat(currentDateFormat(),\n            $value)-&gt;translatedFormat('Y-m-d');\n    }\n\n    /**\n     * @return BelongsToMany\n     */\n    public function invoiceTaxes(): BelongsToMany\n    {\n        return $this-&gt;belongsToMany(Tax::class,'invoice_taxes');\n    }\n}\n</code></pre> <p>The provided code represents a Laravel Eloquent model named <code>Invoice</code>. This model is used to interact with the 'invoices' database table and represents various attributes and behaviors related to invoices. Let's break down the key aspects of this <code>Invoice</code> model:</p> <ol> <li> <p>Namespace: The model is defined within the <code>App\\Models</code> namespace, which is a standard Laravel convention for organizing models.</p> </li> <li> <p>Extends Model: This model class extends <code>Illuminate\\Database\\Eloquent\\Model</code>, which means it inherits various features and functionalities from the Eloquent model class.</p> </li> <li> <p>Use of HasFactory Trait: The <code>HasFactory</code> trait is included in this model. It's used to enable Laravel's factory support, allowing you to easily create model instances for testing or seeding the database.</p> </li> <li> <p>Constants: The model defines several constant values that represent different aspects of invoices, such as discount types, invoice statuses, recurring statuses, and recurring cycle options. These constants are used to provide meaningful labels and options for invoices.</p> </li> <li> <p>Validation Rules and Messages: The model defines validation rules and messages using the <code>$rules</code> and <code>$messages</code> static properties. These rules and messages are used for data validation when creating or updating invoice records.</p> </li> <li> <p>Table Name: The <code>public $table</code> property is set to 'invoices', indicating that this model is associated with the 'invoices' database table.</p> </li> <li> <p>Appends Attribute: The <code>public $appends</code> property is an array that defines additional attributes that should be included when converting the model to an array or JSON. In this case, it includes a 'status_label' attribute.</p> </li> <li> <p>Fillable Attributes: The <code>public $fillable</code> property is an array that lists the attributes of the model that are allowed to be mass-assigned. Mass assignment is commonly used when creating or updating records. In this case, it allows mass assignment for various invoice-related attributes.</p> </li> <li> <p>Attribute Casting: The <code>protected $casts</code> property is an array that defines the data types to which specific attributes should be cast when retrieving them from the database. It ensures that attributes like dates and numeric values are cast to their appropriate data types.</p> </li> <li> <p>Accessors and Mutators: The model defines accessor methods (<code>getCurrencyIdAttribute</code>, <code>getStatusLabelAttribute</code>) and mutator methods (<code>setInvoiceDateAttribute</code>, <code>setDueDateAttribute</code>) to customize the behavior of attribute access and assignment.</p> </li> <li> <p>Relationships: The model defines several relationships with other Eloquent models, including:</p> <ul> <li><code>client()</code>: Belongs to a <code>Client</code> model.</li> <li><code>invoiceItems()</code>: Has many <code>InvoiceItem</code> models.</li> <li><code>payments()</code>: Has many <code>Payment</code> models.</li> <li><code>AdminPayment()</code>: Has many <code>AdminPayment</code> models.</li> <li><code>invoiceTemplate()</code>: Belongs to an <code>InvoiceSetting</code> model.</li> <li><code>parentInvoice()</code>: Belongs to another <code>Invoice</code> model as a parent invoice.</li> <li><code>childInvoices()</code>: Has many <code>Invoice</code> models as child invoices.</li> <li><code>invoiceTaxes()</code>: Belongs to many <code>Tax</code> models through the 'invoice_taxes' pivot table.</li> </ul> </li> <li> <p>Custom Methods: The model defines custom methods like <code>generateUniqueInvoiceId</code> to generate unique invoice IDs and <code>setInvoiceDateAttribute</code> and <code>setDueDateAttribute</code> to format date attributes.</p> </li> </ol>"},{"location":"Admin/Payments/#payment-model","title":"Payment Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Barryvdh\\LaravelIdeHelper\\Eloquent;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Support\\Carbon;\nuse Spatie\\MediaLibrary\\HasMedia;\nuse Spatie\\MediaLibrary\\InteractsWithMedia;\nuse Spatie\\MediaLibrary\\MediaCollections\\Models\\Media;\n\nclass Payment extends Model implements HasMedia\n{\n    use HasFactory, InteractsWithMedia;\n\n    protected $table = 'payments';\n\n    protected $fillable = [\n        'invoice_id', 'amount', 'payment_date', 'payment_mode', 'transaction_id', 'notes', 'is_approved',\n    ];\n\n    protected $casts = [\n        'invoice_id'     =&gt; 'integer',\n        'amount'         =&gt; 'double',\n        'payment_date'   =&gt; 'datetime',\n        'payment_mode'   =&gt; 'integer',\n        'transaction_id' =&gt; 'string',\n        'meta'           =&gt; 'json',\n        'notes'          =&gt; 'string',\n        'user_id'        =&gt; 'integer',\n        'is_approved'    =&gt; 'integer',\n    ];\n\n    public $appends = ['payments_mode'];\n\n    const PAYMENT_ATTACHMENT = 'payment_attachment';\n\n    const FULLPAYMENT = 2;\n    const PARTIALLYPAYMENT = 3;\n\n    const PAYMENT_TYPE = [\n        self::FULLPAYMENT      =&gt; 'Full Payment',\n        self::PARTIALLYPAYMENT =&gt; 'Partially Payment',\n    ];\n\n    const PENDING = 0;\n    const APPROVED = 1;\n    const REJECTED = 2;\n    const STATUS_ALL = 3;\n    const PAID = 'Paid';\n    const PROCESSING = 'Processing';\n    const DENIED = 'Denied';\n    const STATUS_ARR_ALL = 'All';\n\n    const PAYMENT_STATUS = [\n        self::STATUS_ALL =&gt; self::STATUS_ARR_ALL,\n        self::PENDING    =&gt; self::PROCESSING,\n        self::APPROVED   =&gt; self::PAID,\n        self::REJECTED   =&gt; self::DENIED,\n    ];\n\n    const STATUS = [\n        'RECEIVED_AMOUNT' =&gt; 'Received Amount',\n        'PAID_AMOUNT'     =&gt; 'Paid Amount',\n        'DUE_AMOUNT'      =&gt; 'Due Amount',\n    ];\n\n    const MANUAL = 1;\n    const STRIPE = 2;\n    const PAYPAL = 3;\n    const CASH = 4;\n    const RAZORPAY = 5;\n    const ALL = 0;\n\n    const PAYMENT_MODE = [\n        self::ALL      =&gt; 'All',\n        self::MANUAL   =&gt; 'Manual',\n        self::STRIPE   =&gt; 'Stripe',\n        self::PAYPAL   =&gt; 'Paypal',\n        self::CASH     =&gt; 'Cash',\n        self::RAZORPAY =&gt; 'Razorpay',\n    ];\n\n    public static $rules = [\n        'payment_type'       =&gt; 'required',\n        'amount'             =&gt; 'required',\n        'payment_mode'       =&gt; 'required',\n        'payment_attachment' =&gt; 'nullable|mimes:pdf,png,jpeg,jpg',\n    ];\n\n    /**\n     * @return string\n     */\n    public function getPaymentAttachmentAttribute(): string\n    {\n        /** @var Media $media */\n        $media = $this-&gt;getMedia(self::PAYMENT_ATTACHMENT)-&gt;first();\n        if ($media !== null) {\n            return $media-&gt;getFullUrl();\n        }\n\n        return false;\n    }\n\n    /**\n     * @return string\n     */\n    public function getPaymentTypeAttribute(): string\n    {\n        return self::PAYMENT_MODE[$this-&gt;payment_mode];\n    }\n\n    /**\n     * @return string\n     */\n    public function getPaymentsModeAttribute(): string\n    {\n        return self::PAYMENT_MODE[$this-&gt;payment_mode];\n    }\n\n    /**\n     * @return BelongsTo\n     */\n    public function invoice(): BelongsTo\n    {\n        return $this-&gt;belongsTo(Invoice::class);\n    }\n}\n</code></pre> <p>The provided code represents a Laravel Eloquent model named <code>Payment</code>. This model is used to interact with the 'payments' database table and represents various attributes and behaviors related to payments. Let's break down the key aspects of this <code>Payment</code> model:</p> <ol> <li> <p>Namespace: The model is defined within the <code>App\\Models</code> namespace, which is a standard Laravel convention for organizing models.</p> </li> <li> <p>Extends Model: This model class extends <code>Illuminate\\Database\\Eloquent\\Model</code>, which means it inherits various features and functionalities from the Eloquent model class.</p> </li> <li> <p>Use of Traits: The <code>HasFactory</code> and <code>InteractsWithMedia</code> traits are included in this model.</p> </li> <li> <p><code>HasFactory</code> is used to enable Laravel's factory support, allowing you to easily create model instances for testing or seeding the database.</p> </li> <li><code>InteractsWithMedia</code> is used to integrate the model with the Spatie Media Library, which allows you to associate media files (such as payment attachments) with the model.</li> </ol>"},{"location":"Admin/Payments/#view","title":"View","text":""},{"location":"Admin/Payments/#the-livewire-payment-admin-table","title":"The livewire: Payment admin table","text":"<p>The livewire of the 'Payment table' located in app&gt;http&gt;livewire&gt;PaymentAdminTable.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Livewire;\n\nuse App\\Models\\AdminPayment;\nuse Carbon\\Carbon;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Rappasoft\\LaravelLivewireTables\\Views\\Column;\n\nclass AdminPaymentTable extends LivewireTableComponent\n{\n    protected $model = AdminPayment::class;\n    protected string $tableName = 'admin_payments';\n\n    // for table header button\n    public $showButtonOnHeader = true;\n    public $buttonComponent = 'payments.components.add-button';\n    protected $listeners = ['resetPageTable','dateFilter'];\n    public $paymentDateFilter = '';\n\n    public function configure(): void\n    {\n        $this-&gt;setPrimaryKey('id');\n        $this-&gt;setDefaultSort('created_at', 'desc');\n        $this-&gt;setQueryStringStatus(false);\n        $this-&gt;setThAttributes(function (Column $column) {\n            return ($column-&gt;isField('amount')) ? ['class' =&gt; 'd-flex justify-content-end']\n                : ['class' =&gt; 'text-center'];\n        });\n\n        $this-&gt;setTdAttributes(function (Column $column, $row, $columnIndex, $rowIndex) {\n            if ($columnIndex == '6') {\n                return [\n                    'class' =&gt; 'text-center',\n                ];\n            }\n            if ($column-&gt;getField() === 'amount') {\n                return [\n                    'class' =&gt; 'text-end',\n                ];\n            }\n\n            return [];\n        });\n    }\n\n    public function columns(): array\n    {\n        return [\n            Column::make(__('messages.invoices'), 'invoice_id')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;view('payments.components.client-name'),\n            Column::make('First Name', 'invoice.client.user.first_name')\n                -&gt;sortable()\n                -&gt;searchable()\n            -&gt;hideIf(1),\n            Column::make('First Name', 'invoice.invoice_id')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;hideIf(1),\n            Column::make('Last Name', 'invoice.client.user.last_name')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;hideIf(1),\n            Column::make(__('messages.payment.payment_date'), 'payment_date')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('transactions.components.invoice-id-payment-date')\n                        -&gt;withValue([\n                            'payment-date' =&gt; $row-&gt;payment_date,\n                        ]);\n                }),\n            Column::make(__('messages.invoice.amount'), 'amount')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return getInvoiceCurrencyAmount($row-&gt;amount, $row-&gt;invoice-&gt;currency_id, true);\n                }),\n\n            Column::make(__('messages.invoice.payment_method'), 'payment_mode')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;label(function ($row, Column $column) {\n                    return  ($row-&gt;payment_mode == 4) ? '&lt;span class=\"badge bg-light-info fs-7\"&gt;Cash&lt;/span&gt;' : '';\n                })\n                 -&gt;html(),\n            Column::make(__('messages.common.action'), 'id')\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('livewire.modal-action-button')\n                        -&gt;with([\n                            'dataId' =&gt; $row-&gt;id,\n                            'editClass' =&gt; 'payment-edit-btn',\n                            'deleteClass' =&gt; 'payment-delete-btn',\n                        ]);\n                }),\n        ];\n    }\n\n    public function builder(): Builder\n    {\n        $query = AdminPayment::with(['invoice.client.user.media'])-&gt;select('admin_payments.*');\n\n        if ($this-&gt;paymentDateFilter != '' &amp;&amp; $this-&gt;paymentDateFilter != getMonthlyData()) {\n            $timeEntryDate = explode(' - ', $this-&gt;paymentDateFilter);\n            $startDate = Carbon::parse($timeEntryDate[0])-&gt;format('Y-m-d');\n            $endDate = Carbon::parse($timeEntryDate[1])-&gt;format('Y-m-d');\n            $query-&gt;whereBetween('payment_date', [$startDate, $endDate]);\n        } else {\n            $defaultDate = explode(' - ', getMonthlyData());\n            $query-&gt;whereBetween('payment_date', [$defaultDate[0], $defaultDate[1]]);\n        }\n\n        return $query;\n    }\n\n    /**\n     * @param $date\n     */\n    public function dateFilter($date)\n    {\n        $this-&gt;paymentDateFilter = $date;\n        $this-&gt;setBuilder($this-&gt;builder());\n    }\n}\n</code></pre> <p>The provided PHP code defines a Livewire component named <code>AdminPaymentTable</code>. Livewire is a Laravel package that allows you to build dynamic, interactive web applications using Laravel and Blade syntax. This component is used to display and interact with a table of admin payment data in your web application. Let's break down its key features and functionality:</p> <ol> <li> <p>Model and Table Name Configuration:</p> </li> <li> <p>The <code>$model</code> property specifies that the model associated with this Livewire component is the <code>AdminPayment</code> model.</p> </li> <li> <p>The <code>$tableName</code> property specifies the name of the table, which is <code>'admin_payments'</code>.</p> </li> <li> <p>Table Configuration:</p> </li> <li> <p>The <code>configure</code> method is used to configure various aspects of the table. It includes:</p> <ul> <li>Setting the primary key column to <code>'id'</code>.</li> <li>Configuring the default sorting to be by <code>'created_at'</code> in descending order.</li> <li>Disabling query string management for the table.</li> <li>Setting attributes for table header (<code>th</code>) and table data (<code>td</code>) cells based on the column type or field.</li> </ul> </li> <li> <p>Column Configuration:</p> </li> <li> <p>The <code>columns</code> method defines an array of columns to be displayed in the table. It includes columns for attributes like invoice details, payment date, amount, payment method, and actions (edit and delete).</p> </li> <li> <p>Columns may have additional features like sorting, searching, and formatting.</p> </li> <li> <p>Builder Method:</p> </li> <li> <p>The <code>builder</code> method defines the query builder for fetching data from the <code>AdminPayment</code> model. It includes logic to filter payments based on a date range specified by <code>paymentDateFilter</code>.</p> </li> <li> <p>Date Filtering:</p> </li> <li> <p>The <code>dateFilter</code> method is used to handle date filtering. It updates the <code>paymentDateFilter</code> property based on the selected date range and sets the builder accordingly.</p> </li> <li> <p>Livewire Component Properties:</p> </li> <li> <p>Several public properties are defined for this Livewire component, such as <code>$showButtonOnHeader</code>, <code>$buttonComponent</code>, and <code>$paymentDateFilter</code>. These properties are used to control various aspects of the component's behavior.</p> </li> <li> <p>Listeners:</p> </li> <li> <p>The component listens for events named <code>'resetPageTable'</code> and <code>'dateFilter'</code>. When these events are fired, the corresponding methods (<code>resetPageTable</code> and <code>dateFilter</code>) are invoked.</p> </li> <li> <p>Relationship Eager Loading:</p> </li> <li>Eager loading is used to load related data, such as <code>invoice.client.user.media</code>, to avoid the N+1 query problem.</li> </ol> <p>Overall, this Livewire component serves as a dynamic table for displaying and interacting with admin payment data. It supports features like sorting, searching, and date filtering, making it a versatile component for managing admin payments in a Laravel-based web application.</p>"},{"location":"Admin/Products/","title":"Product","text":""},{"location":"Admin/Products/#route","title":"Route","text":"<p>The route <code>Route::resource('products', ProductController::class);</code> leads to the page /admin/Product, which displays all the products we have.</p>"},{"location":"Admin/Products/#controller","title":"Controller","text":"<p>The controller of the 'Products' page located in app&gt;http&gt;controllers&gt;ProductController.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\DataTables\\ProductDataTable;\nuse App\\Http\\Requests\\CreateProductRequest;\nuse App\\Http\\Requests\\UpdateProductRequest;\nuse App\\Models\\Category;\nuse App\\Models\\InvoiceItem;\nuse App\\Models\\Product;\nuse App\\Repositories\\ProductRepository;\nuse Exception;\nuse Illuminate\\Contracts\\Foundation\\Application;\nuse Illuminate\\Contracts\\View\\Factory;\nuse Illuminate\\Contracts\\View\\View;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\RedirectResponse;\nuse Illuminate\\Http\\Request;\nuse Laracasts\\Flash\\Flash;\nuse Yajra\\DataTables\\Facades\\DataTables;\n\nclass ProductController extends AppBaseController\n{\n    /**\n     * @var ProductRepository\n     */\n    public $productRepository;\n\n    /**\n     * @param  ProductRepository  $productRepo\n     */\n    public function __construct(ProductRepository $productRepo)\n    {\n        $this-&gt;productRepository = $productRepo;\n    }\n\n    /**\n     * @param  Request  $request\n     * @return Application|Factory|View\n     *\n     * @throws Exception\n     */\n    public function index(Request $request)\n    {\n        if ($request-&gt;ajax()) {\n            return Datatables::of((new ProductDataTable())-&gt;get())-&gt;make(true);\n        }\n\n        return view('products.index');\n    }\n\n    /**\n     * Show the form for creating a new resource.\n     *\n     * @return Application|Factory|View\n     */\n    public function create()\n    {\n        $categories = Category::pluck('name', 'id')-&gt;toArray();\n\n        return view('products.create', compact('categories'));\n    }\n\n    /**\n     * @param  CreateProductRequest  $request\n     * @return RedirectResponse\n     */\n    public function store(CreateProductRequest $request): RedirectResponse\n    {\n        $input = $request-&gt;all();\n        $this-&gt;productRepository-&gt;store($input);\n        Flash::success('Product created successfully.');\n\n        return redirect()-&gt;route('products.index');\n    }\n\n    /**\n     * @param  Product  $product\n     * @return Application|Factory|View\n     */\n    public function edit(Product $product)\n    {\n        $categories = Category::pluck('name', 'id')-&gt;toArray();\n        $product-&gt;load('category');\n\n        return view('products.edit', compact('product', 'categories'));\n    }\n\n    /**\n     * @param  UpdateProductRequest  $request\n     * @param  Product  $product\n     * @return RedirectResponse\n     */\n    public function update(UpdateProductRequest $request, Product $product)\n    {\n        $input = $request-&gt;all();\n        $this-&gt;productRepository-&gt;update($input, $product-&gt;id);\n        Flash::success('Product updated   successfully.');\n\n        return redirect()-&gt;route('products.index');\n    }\n\n    /**\n     * @param  Product  $product\n     * @return JsonResponse\n     */\n    public function destroy(Product $product)\n    {\n        $invoiceModels = [\n            InvoiceItem::class,\n        ];\n        $result = canDelete($invoiceModels, 'product_id', $product-&gt;id);\n        if ($result) {\n            return $this-&gt;sendError(__('messages.flash.product_cant_deleted'));\n        }\n        $product-&gt;delete();\n\n        return $this-&gt;sendSuccess('Product Deleted successfully.');\n    }\n\n    /**\n     * @param  Product  $product\n     * @return Application|Factory|View\n     */\n    public function show(Product $product)\n    {\n        $product-&gt;load('category');\n\n        return view('products.show', compact('product'));\n    }\n}\n</code></pre> <p>Let's break down the code to understand its functionality:</p> <ol> <li> <p>Namespace and Use Statements: The controller is placed under the <code>App\\Http\\Controllers</code> namespace. It imports several classes and dependencies using the <code>use</code> statements, including various Laravel and third-party classes required for the controller's methods.</p> </li> <li> <p>Class Definition: The <code>ProductController</code> class extends <code>AppBaseController</code>.</p> </li> <li> <p>Constructor and Dependency Injection: The controller's constructor takes an instance of the <code>ProductRepository</code> class as a parameter and assigns it to a class property. This indicates that the controller relies on the repository to perform database operations related to products.</p> </li> <li> <p>Controller Methods:</p> </li> <li> <p>index: This method handles the request to display a list of products. If the request is an AJAX request, it uses the DataTables library to fetch and format the data for the DataTables component. If not, it returns a view named <code>'products.index'</code>.</p> </li> <li> <p>create: This method returns a view for creating a new product. It retrieves a list of categories and passes them to the view for selection.</p> </li> <li> <p>store: Handles the form submission when creating a new product. It validates the incoming data using the <code>CreateProductRequest</code> class and then stores the product using the <code>productRepository</code>. After successful storage, a success message is flashed, and the user is redirected to the index page.</p> </li> <li> <p>edit: Prepares the data to edit an existing product. It loads the categories and the category associated with the product and then renders the <code>products.edit</code> view with the necessary data.</p> </li> <li> <p>update: Handles the form submission for updating a product. It validates the incoming data using the <code>UpdateProductRequest</code> class and updates the product data using the <code>productRepository</code>. After successful update, a success message is flashed, and the user is redirected to the index page.</p> </li> <li> <p>destroy: Deals with deleting a product. Before deleting, it checks whether the product can be deleted by checking related invoice items through the <code>canDelete</code> function. If deletion is allowed, the product is deleted, and a success message is returned; otherwise, an error message is returned.</p> </li> <li> <p>show: Displays the details of a specific product. It loads the associated category and renders the <code>products.show</code> view with the product data.</p> </li> <li> <p>Dependency Injection and Repositories: The controller follows the dependency injection principle, where dependencies (like the <code>ProductRepository</code>) are injected into the constructor rather than being instantiated within the methods. This helps with better code organization, testing, and separation of concerns. The <code>ProductRepository</code> handles database operations for products.</p> </li> <li> <p>Views: Throughout the controller methods, views are returned with appropriate data to be rendered in the HTML templates. Views allow you to separate your presentation logic from the rest of the application logic.</p> </li> </ol> <p>Overall, the <code>ProductController</code> handles various CRUD (Create, Read, Update, Delete) operations for managing products in a Laravel application, interacting with the database through the <code>ProductRepository</code>, and rendering appropriate views for user interaction.</p>"},{"location":"Admin/Products/#model","title":"Model","text":"<p>The models related to this controller are : App\\Models\\Product and App\\Models\\InvoiceItem.</p>"},{"location":"Admin/Products/#product-model","title":"Product model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Notifications\\Notifiable;\nuse Spatie\\MediaLibrary\\HasMedia;\nuse Spatie\\MediaLibrary\\InteractsWithMedia;\nuse Spatie\\MediaLibrary\\MediaCollections\\Models\\Media;\n\nclass Product extends Model implements HasMedia\n{\n    use HasFactory, Notifiable, InteractsWithMedia;\n\n    protected $table = 'products';\n\n    protected $fillable = ['name', 'code', 'category_id', 'unit_price', 'description'];\n\n    protected $casts = [\n        'name' =&gt; 'string',\n        'code' =&gt; 'string',\n        'category_id' =&gt; 'integer',\n        'unit_price' =&gt; 'double',\n        'description' =&gt; 'string',\n    ];\n\n    const Image = 'product';\n\n    protected $appends = ['product_image'];\n\n    public static $rules = [\n        'name' =&gt; 'required',\n        'code' =&gt; 'required|alpha_num|min:3|max:6|unique:products,code',\n        'category_id' =&gt; 'required',\n        'unit_price' =&gt; 'required|numeric',\n    ];\n\n    public static $messages = [\n        'code.required' =&gt; 'The product code field is required.',\n        'code.size' =&gt; 'The product code must be 6 characters.',\n        'code.unique' =&gt; 'The product code has already been taken.',\n    ];\n\n    /**\n     * @return string\n     */\n    public function getProductImageAttribute(): string\n    {\n        /** @var Media $media */\n        $media = $this-&gt;getMedia(self::Image)-&gt;first();\n        if (! empty($media)) {\n            return $media-&gt;getFullUrl();\n        }\n\n        return asset('images/default-product.jpg');\n    }\n\n    public function category()\n    {\n        return $this-&gt;hasOne(Category::class, 'id', 'category_id');\n    }\n}\n</code></pre> <p>Let's break down the code to understand its functionality:</p> <ol> <li> <p>Namespace and Use Statements: The model is placed under the <code>App\\Models</code> namespace. It imports several classes and traits required for the model's functionality, such as <code>HasFactory</code>, <code>Notifiable</code>, <code>InteractsWithMedia</code>, and others.</p> </li> <li> <p>Class Definition and Properties:</p> </li> <li> <p>The class extends <code>Illuminate\\Database\\Eloquent\\Model</code>, which makes it an Eloquent model.</p> </li> <li>Traits such as <code>HasFactory</code> and <code>InteractsWithMedia</code> are used to provide factory support for model creation and to enable interaction with media (images and files) associated with the model.</li> <li>The <code>protected $table</code> property specifies the name of the database table associated with the model, which is <code>'products'</code> in this case.</li> <li>The <code>protected $fillable</code> property lists the fields that are mass-assignable when creating or updating a product record.</li> <li> <p>The <code>protected $casts</code> property defines how certain fields should be cast to specific data types when retrieved from the database.</p> </li> <li> <p>Model Attributes:</p> </li> <li> <p>The class defines attributes that correspond to the columns in the <code>products</code> table, such as <code>id</code>, <code>name</code>, <code>code</code>, <code>category_id</code>, <code>unit_price</code>, and <code>description</code>.</p> </li> <li> <p>Custom Appends:</p> </li> <li> <p>The <code>protected $appends</code> property specifies additional attributes that should be included when the model is serialized to an array or JSON. In this case, it includes <code>'product_image'</code>, which is a custom attribute.</p> </li> <li> <p>Validation Rules and Messages:</p> </li> <li> <p>The model defines validation rules and custom error messages using the <code>$rules</code> and <code>$messages</code> arrays. These are used to validate data before creating or updating a product.</p> </li> <li> <p>Accessors:</p> </li> <li> <p>The model includes an accessor method named <code>getProductImageAttribute</code>. Accessors allow you to define custom attributes that can be accessed like regular attributes. In this case, the accessor fetches the associated product image and returns its full URL. If no image is associated, a default image URL is returned.</p> </li> <li> <p>Relationships:</p> </li> <li> <p>The <code>category</code> method defines a relationship between the <code>Product</code> model and the <code>Category</code> model. It specifies a one-to-one relationship where a product belongs to a category. It uses the <code>hasOne</code> relationship method, indicating that a product's <code>category_id</code> corresponds to the <code>id</code> of a category.</p> </li> <li> <p>Static Properties:</p> </li> <li>The model includes static properties like <code>$rules</code> and <code>$messages</code> to store validation rules and custom error messages. These properties are referenced when validating data.</li> </ol> <p>Overall, the <code>Product</code> model represents the structure and behavior of product records in the associated database table. It includes attributes for the various fields of a product, relationships with other models, validation rules, custom attributes (accessors), and methods for working with media associated with the product.</p>"},{"location":"Admin/Products/#invoice-item-model","title":"Invoice Item model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\n\nclass InvoiceItem extends Model\n{\n    use HasFactory;\n\n    /**\n     * Validation rules\n     *\n     * @var array\n     */\n    public static $rules = [\n        'product_id' =&gt; 'required',\n        'quantity' =&gt; 'required|regex:/^\\d*(\\.\\d{1,2})?$/',\n        'price' =&gt; 'required|regex:/^\\d+(\\.\\d{1,2})?$/',\n    ];\n\n    protected $table = 'invoice_items';\n\n    public $fillable = [\n        'invoice_id',\n        'product_id',\n        'product_name',\n        'quantity',\n        'price',\n        'total',\n    ];\n\n    protected $casts = [\n        'invoice_id' =&gt; 'integer',\n        'product_id' =&gt; 'integer',\n        'product_name' =&gt; 'string',\n        'quantity' =&gt; 'double',\n        'price' =&gt; 'double',\n        'total' =&gt; 'double',\n    ];\n\n    /**\n     * @return BelongsTo\n     */\n    public function product(): BelongsTo\n    {\n        return $this-&gt;belongsTo(Product::class);\n    }\n\n    /**\n     * @return HasMany\n     */\n    public function invoiceItemTax(): HasMany\n    {\n        return $this-&gt;hasMany(InvoiceItemTax::class);\n    }\n}\n</code></pre> <p>Let's break down the code to understand its functionality:</p> <ol> <li> <p>Namespace and Use Statements: The model is placed under the <code>App\\Models</code> namespace. It imports several classes and traits required for the model's functionality, such as <code>HasFactory</code>.</p> </li> <li> <p>Class Definition and Properties:</p> </li> <li> <p>The class extends <code>Illuminate\\Database\\Eloquent\\Model</code>, which makes it an Eloquent model.</p> </li> <li> <p>The <code>use HasFactory</code> statement includes the <code>HasFactory</code> trait in the model, allowing it to use factory methods for model creation.</p> </li> <li> <p>Attributes and Relationships:</p> </li> <li> <p>The class includes attributes that correspond to the columns in the <code>invoice_items</code> table, such as <code>id</code>, <code>invoice_id</code>, <code>product_id</code>, <code>product_name</code>, <code>quantity</code>, <code>price</code>, <code>total</code>, <code>created_at</code>, and <code>updated_at</code>.</p> </li> <li> <p>The model defines relationships with other models:</p> <ul> <li>The <code>product</code> method defines a <code>BelongsTo</code> relationship with the <code>Product</code> model, indicating that an invoice item belongs to a product. It uses the <code>belongsTo</code> relationship method.</li> <li>The <code>invoiceItemTax</code> method defines a <code>HasMany</code> relationship with the <code>InvoiceItemTax</code> model, indicating that an invoice item can have multiple associated taxes. It uses the <code>hasMany</code> relationship method.</li> </ul> </li> <li> <p>Validation Rules:</p> </li> <li> <p>The model includes a static property named <code>$rules</code> which defines validation rules for creating or updating invoice items. These rules specify that <code>product_id</code>, <code>quantity</code>, and <code>price</code> are required and must adhere to specific formats.</p> </li> <li> <p>Table and Fillable Attributes:</p> </li> <li> <p>The <code>protected $table</code> property specifies the name of the database table associated with the model, which is <code>'invoice_items'</code> in this case.</p> </li> <li> <p>The <code>public $fillable</code> property lists the fields that are mass-assignable when creating or updating an invoice item record.</p> </li> <li> <p>Casts:</p> </li> <li> <p>The <code>protected $casts</code> property defines how certain fields should be cast to specific data types when retrieved from the database.</p> </li> <li> <p>Methods:</p> </li> <li>The model includes accessor and mutator methods, which are not explicitly defined in the code. However, Eloquent provides default behavior for these methods based on the attributes defined in the model.</li> </ol> <p>Overall, the <code>InvoiceItem</code> model represents the structure and behavior of invoice item records in the associated database table. It includes attributes for the various fields of an invoice item, relationships with other models (such as products and taxes), validation rules, and methods for accessing and manipulating data. This model is used in an invoicing or billing system to manage individual items within an invoice.</p>"},{"location":"Admin/Products/#view","title":"View","text":""},{"location":"Admin/Products/#the-livewire-product-table","title":"The livewire: Product table","text":"<p>The livewire of the 'Product table' located in app&gt;http&gt;livewire&gt;ProductTable.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Livewire;\n\nuse App\\Models\\Product;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Rappasoft\\LaravelLivewireTables\\Views\\Column;\n\nclass ProductTable extends LivewireTableComponent\n{\n    protected $model = Product::class;\n    protected string $tableName = 'products';\n\n    // for table header button\n    public $showButtonOnHeader = true;\n    public $buttonComponent = 'products.components.add-button';\n\n    public function configure(): void\n    {\n        $this-&gt;setPrimaryKey('id');\n        $this-&gt;setDefaultSort('created_at', 'desc');\n        $this-&gt;setQueryStringStatus(false);\n\n        $this-&gt;setThAttributes(function (Column $column) {\n            if ($column-&gt;getField() == 'id') {\n                return [\n                    'style' =&gt; 'width:9%;text-align:center',\n                ];\n            }\n\n            if ($column-&gt;getField() == 'unit_price') {\n                return [\n                    'class' =&gt; 'd-flex justify-content-end',\n                ];\n            }\n\n            return [];\n        });\n\n        $this-&gt;setTdAttributes(function (Column $column) {\n            if ($column-&gt;getField() === 'id') {\n                return [\n                    'class' =&gt; 'text-center',\n                ];\n            }\n            if ($column-&gt;getField() === 'unit_price') {\n                return [\n                    'class' =&gt; 'customWidth',\n                ];\n            }\n\n            return [];\n        });\n    }\n\n    public function columns(): array\n    {\n        return [\n            Column::make(__('messages.product.product_name'), 'name')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;view('products.components.product-name'),\n            Column::make(__('messages.product.category'), 'category.name')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return $row-&gt;category-&gt;name;\n                }),\n            Column::make(__('messages.product.price'), 'unit_price')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;view('products.components.price'),\n            Column::make(__('messages.common.action'), 'id')\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('livewire.action-button')\n                        -&gt;with([\n                            'editRoute' =&gt; route('products.edit', $row-&gt;id),\n                            'dataId' =&gt; $row-&gt;id,\n                            'deleteClass' =&gt; 'product-delete-btn',\n                        ]);\n                }),\n        ];\n    }\n\n    public function builder(): Builder\n    {\n        return Product::with('category')-&gt;with('media')-&gt;select('products.*');\n    }\n}\n</code></pre> <p>This PHP code defines a Livewire component class named <code>ProductTable</code> that is responsible for displaying a table of products in a Laravel application using the Livewire framework. Livewire provides an expressive way to build interactive web interfaces with real-time features.</p> <p>Let's break down the code to understand its functionality:</p> <ol> <li> <p>Namespace and Use Statements: The Livewire component is placed under the <code>App\\Http\\Livewire</code> namespace. It imports necessary classes and components required for its functionality, including the <code>Product</code> model, various Livewire classes, and <code>Column</code> class from the <code>Rappasoft\\LaravelLivewireTables\\Views</code> namespace.</p> </li> <li> <p>Class Definition and Properties:</p> </li> <li> <p>The class extends <code>LivewireTableComponent</code>, which is a Livewire table component. This base class provides common functionality for handling tables.</p> </li> <li>The <code>protected $model</code> property specifies the Eloquent model class (<code>Product::class</code>) associated with this component.</li> <li> <p>The <code>protected string $tableName</code> property defines the name of the database table to use, which is <code>'products'</code>.</p> </li> <li> <p>Configuration Method - <code>configure</code>:</p> </li> <li> <p>This method configures various aspects of the table, including primary key, default sorting, and query string handling.</p> </li> <li> <p>Table Header Button Configuration:</p> </li> <li> <p>The <code>public $showButtonOnHeader</code> property determines whether a button should be shown on the table header.</p> </li> <li> <p>The <code>public $buttonComponent</code> property specifies the Livewire component responsible for rendering the button.</p> </li> <li> <p>Table Column Configuration - <code>columns</code>:</p> </li> <li> <p>This method defines the columns to be displayed in the table using the <code>Column::make</code> method.</p> </li> <li> <p>Each column is configured with labels, sorting, searching, formatting, and custom rendering.</p> </li> <li> <p>Table Data Builder - <code>builder</code>:</p> </li> <li> <p>This method returns a query builder instance (<code>Builder</code>) that defines how the data for the table should be retrieved.</p> </li> <li> <p>In this case, the query builder retrieves products along with their categories and media (images), selecting only the fields from the <code>products</code> table.</p> </li> <li> <p>Column Formatting and Custom Views:</p> </li> <li> <p>The <code>format</code> method within columns is used to customize the content displayed in each cell of the table.</p> </li> <li> <p>Custom views are used to render specific components within columns, such as product names, category names, prices, and action buttons.</p> </li> <li> <p>Table and Column Attributes:</p> </li> <li>The <code>setThAttributes</code> and <code>setTdAttributes</code> methods are used to set attributes for table header cells (th) and table data cells (td), respectively.</li> <li>These attributes can include styles, classes, or other HTML attributes.</li> </ol> <p>Overall, the <code>ProductTable</code> Livewire component provides a customizable and interactive way to display a table of products, with sorting, searching, custom column rendering, and interactive actions. It utilizes Livewire's real-time features to provide a seamless user experience.</p>"},{"location":"Admin/Products/#list-of-products","title":"List of Products","text":"<p>The list of products view is located in : resources\\views\\Products\\index.blade.php.</p> <pre><code>@extends('layouts.app')\n@section('title')\n    {{__('messages.products')}}\n@endsection\n@section('content')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-flex flex-column \"&gt;\n            @include('flash::message')\n            &lt;livewire:product-table/&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    {{ Form::hidden('currency', getCurrencySymbol(),['id' =&gt; 'currency']) }}\n@endsection\n</code></pre> <p>Let's break down the code to understand its structure and purpose:</p> <ol> <li> <p>Extending Layout: The view extends a layout template named <code>'layouts.app'</code>.Which is the content of this view will be inserted into the designated content section of the <code>layouts.app</code> layout.</p> </li> <li> <p>@section('title'): This Blade directive sets the title of the page. It uses the <code>__('messages.products')</code> function to fetch the translated string for the \"products\" key, which is defined in a language file. This title will be shown in the browser's title bar or tab.</p> </li> <li> <p>@section('content'): This Blade directive starts the content section of the view. Any content within this section will replace the <code>@yield('content')</code> directive in the <code>layouts.app</code> layout.</p> </li> <li> <p>Container and Flex Layout:</p> </li> <li> <p>The view's content is wrapped within a <code>div</code> element with a class of <code>\"container-fluid\"</code>. This container provides a fluid layout that adjusts to the width of the screen.</p> </li> <li> <p>Inside the container, there's a <code>div</code> element with the classes <code>\"d-flex flex-column\"</code>. This sets up a flexbox layout with a column direction for its child elements.</p> </li> <li> <p>Flash Messages: The <code>@include('flash::message')</code> directive is used to include a flash message component in the view. Flash messages are typically used to display notifications or alerts to users after certain actions (e.g., successful form submissions or errors).</p> </li> <li> <p>Livewire Component:</p> </li> <li> <p>The <code>livewire:product-table</code> directive is used to include a Livewire component named <code>ProductTable</code>. This component generates and handles the display of the product table with sorting, searching, and interactive features.</p> </li> <li> <p>Currency Symbol Hidden Field:</p> </li> <li>The <code>{{ Form::hidden('currency', getCurrencySymbol(),['id' =&gt; 'currency']) }}</code> code generates an HTML hidden input field with the name <code>'currency'</code> and the value of the <code>getCurrencySymbol()</code> function. The <code>getCurrencySymbol()</code> function retrieves the currency symbol for display purposes.</li> </ol> <p>In summary, this Blade view is the index page for managing products in the application. It extends the <code>layouts.app</code> layout, sets the page title, and includes a Livewire component (<code>ProductTable</code>) to display the product table with its associated features. It also includes a hidden input field for the currency symbol and allows for displaying flash messages.</p>"},{"location":"Admin/Products/#add-product","title":"Add product","text":"<p>The view of the 'Add Product' located in resources&gt;views&gt;products&gt;fileds.blade.php.</p> <pre><code>&lt;div class=\"row gx-10 mb-5\"&gt;\n  &lt;div class=\"col-lg-6\"&gt;\n    {{ Form::label('name', __('messages.product.name').':', ['class' =&gt;\n    'form-label required mb-3']) }}\n\n    &lt;div class=\"input-group mb-5\"&gt;\n      {{ Form::text('name',null,['class' =&gt; 'form-control ', 'placeholder' =&gt;\n      __('messages.product.name'), 'required','onkeypress'=&gt;\"return\n      blockSpecialChar(event)\"]) }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-6\"&gt;\n    {{ Form::label('code', __('messages.product.code').':', ['class' =&gt;\n    'form-label required mb-3']) }}\n    &lt;span\n      data-bs-toggle=\"tooltip\"\n      data-placement=\"top\"\n      data-bs-original-title=\"Click refresh icon to generate product code\"\n    &gt;\n      &lt;i class=\"fas fa-question-circle ml-1\"&gt;&lt;/i&gt;\n    &lt;/span&gt;\n    &lt;div class=\"input-group mb-5\"&gt;\n      {{ Form::text('code', null, ['class' =&gt; 'form-control ', 'placeholder' =&gt;\n      __('messages.product.code'), 'required', 'id' =&gt; 'code', 'maxlength' =&gt;\n      6,'onkeypress'=&gt;\"return blockSpecialChar(event)\",]) }}\n      &lt;a\n        class=\"input-group-text border-0\"\n        id=\"autoCode\"\n        href=\"javascript:void(0)\"\n        data-bs-toggle=\"tooltip\"\n        data-placement=\"right\"\n        title=\"Generate Code\"\n      &gt;\n        &lt;i class=\"fas fa-sync-alt fs-4\"&gt;&lt;/i&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-6\"&gt;\n    &lt;div class=\"mb-5\"&gt;\n      {{ Form::label('category', __('messages.product.category').':', ['class'\n      =&gt; 'form-label required mb-3']) }} {{ Form::select('category_id',\n      $categories ,null, ['id'=&gt;'categoryId', 'class' =&gt; 'form-select io-select2\n      ', 'placeholder' =&gt; __('messages.product.category'), 'required',\n      'data-control' =&gt; 'select2']) }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-6\"&gt;\n    &lt;div class=\"mb-5\"&gt;\n      {{ Form::label('unit_price', __('messages.product.unit_price').':',\n      ['class' =&gt; 'form-label required mb-3']) }} {{\n      Form::number('unit_price',null,['id'=&gt;'unitPriceId','class' =&gt;\n      'form-control ', 'placeholder' =&gt;\n      __('messages.product.unit_price'),'min'=&gt;'0', 'step'=&gt;\".01\",\n      'oninput'=&gt;\"validity.valid||(value=value.replace(/\\D+/g,\n      '.'))\",'required']) }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-12\"&gt;\n    &lt;div class=\"mb-5\"&gt;\n      {{ Form::label('description', __('messages.product.description').':',\n      ['class' =&gt; 'form-label mb-3']) }} {{\n      Form::textarea('description',null,['class' =&gt; 'form-control ',\n      'placeholder' =&gt; __('messages.product.description'),'rows' =&gt; '5']) }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-3 mb-7\"&gt;\n    &lt;div class=\"mb-3\" io-image-input=\"true\"&gt;\n      &lt;label for=\"exampleInputImage\" class=\"form-label\"\n        &gt;{{ __('messages.product.image').':' }}&lt;/label\n      &gt;\n      &lt;div class=\"d-block\"&gt;\n        &lt;div class=\"image-picker\"&gt;\n          &lt;div\n            class=\"image previewImage\"\n            id=\"previewImage\"\n            {{\n            $styleCss\n            }}=\"background-image: url('{{ !empty($product-&gt;product_image) ?\n$product-&gt;product_image : asset('images/default-product.jpg') }}')\"\n          &gt;&lt;/div&gt;\n          &lt;span\n            class=\"picker-edit rounded-circle text-gray-500 fs-small\"\n            data-bs-toggle=\"tooltip\"\n            title=\"Change image\"\n          &gt;\n            &lt;label&gt;\n              &lt;i class=\"fa-solid fa-pen\" id=\"productImage\"&gt;&lt;/i&gt;\n              &lt;input\n                type=\"file\"\n                id=\"productImage\"\n                name=\"image\"\n                class=\"image-upload d-none\"\n                accept=\"image/*\"\n              /&gt;\n              &lt;input type=\"hidden\" name=\"image_remove\" /&gt;\n            &lt;/label&gt;\n          &lt;/span&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div class=\"form-text\"&gt;Allowed file types: png, jpg, jpeg.&lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"float-end\"&gt;\n  {{ Form::submit(__('messages.common.save'),['class' =&gt; 'btn btn-primary\n  me-3']) }}\n  &lt;a\n    href=\"{{ route('products.index') }}\"\n    type=\"reset\"\n    class=\"btn btn-secondary btn-active-light-primary\"\n    &gt;{{__('messages.common.discard')}}&lt;/a\n  &gt;\n&lt;/div&gt;\n</code></pre> <p>This Blade code represents a form for creating product information. Here's a breakdown of its structure and components:</p> <ol> <li> <p>Grid Layout:</p> </li> <li> <p>The <code>div</code> with the class <code>\"row gx-10 mb-5\"</code> sets up a grid layout for arranging form elements in a row.</p> </li> <li> <p>Within this row, several <code>div</code> elements with the class <code>\"col-lg-6\"</code> define two columns of equal width for better layout organization.</p> </li> <li> <p>Name Input Field:</p> </li> <li> <p>A form label is created using the <code>Form::label</code> function, displaying the translated string for \"product.name\" and adding classes for styling.</p> </li> <li>An input group wraps the text input for the product's name. The input is initially left empty.</li> <li> <p>The input element has classes for styling, a placeholder, is set as required, and uses a JavaScript function to block special characters.</p> </li> <li> <p>Code Input Field:</p> </li> <li> <p>Similar to the name input, this section contains an input for the product's code.</p> </li> <li>A question mark icon within a tooltip is displayed using Font Awesome classes. The tooltip explains the purpose of the refresh icon.</li> <li>An input group wraps the text input, which can hold the product's code. The input is initially left empty.</li> <li>An anchor link with an icon is provided for generating a new product code.</li> <li> <p>Both the input and the anchor link have attributes for styling and interaction.</p> </li> <li> <p>Category Select Field:</p> </li> <li> <p>A label and a dropdown select field are defined for the product's category.</p> </li> <li>The <code>Form::select</code> function populates the dropdown options with the available categories. The selected category is initially left empty.</li> <li> <p>The select element has classes for styling, a placeholder, is marked as required, and is configured to use the Select library.</p> </li> <li> <p>Unit Price Input Field:</p> </li> <li> <p>A label and an input field are provided for the product's unit price.</p> </li> <li>The <code>Form::number</code> function is used to define a numeric input with various attributes.</li> <li> <p>The input is styled, has a placeholder, allows a minimum value of 0, and enforces valid numeric input using JavaScript.</p> </li> <li> <p>Description Textarea:</p> </li> <li> <p>A label and a textarea element are provided for entering the product's description.</p> </li> <li> <p>The textarea is styled and includes a placeholder. The content is initially left empty.</p> </li> <li> <p>Image Upload Section:</p> </li> <li> <p>A section for uploading the product's image is defined.</p> </li> <li>A label is provided for the image upload section.</li> <li>Inside the section, an image picker is set up with a preview and an icon for editing.</li> <li>The image preview URL is derived from the product's image data, and if not available, a default image is used.</li> <li>An input element is used to upload a new image. The <code>accept</code> attribute restricts the allowed file types.</li> <li> <p>An additional hidden input is used for handling image removal.</p> </li> <li> <p>Form Submission Buttons:</p> </li> <li> <p>The last part of the form includes buttons for form submission.</p> </li> <li>The \"Save\" button is provided for submitting the form, labeled with a translated string for \"common.save\".</li> <li> <p>A \"Discard\" button allows users to cancel the form and return to the products index page.</p> </li> <li> <p>End of Form and Button Alignment:</p> </li> <li>The <code>&lt;/div&gt;</code> tag at the end of the code section signifies the end of the form's layout container.</li> <li>Another <code>&lt;/div&gt;</code> tag is present, which might be a duplicate and could be removed.</li> <li>A <code>div</code> element with class <code>\"float-end\"</code> aligns the buttons to the right side of the form.</li> </ol> <p>In summary, this Blade view code generates a form for creating product details. It incorporates various input fields, labels, tooltips, and buttons to enable users to manage product information. The form follows a grid layout for organization and utilizes Laravel's Form facade for generating form elements.</p> <p>The create product view:</p> <pre><code>@extends('layouts.app')\n@section('title')\n    {{__('messages.product.add_product')}}\n@endsection\n@section('header_toolbar')\n@endsection\n@section('content')\n    @php $styleCss = 'style'; @endphp\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-flex flex-column\"&gt;\n            &lt;div class=\"col-12\"&gt;\n                &lt;div class=\"d-flex justify-content-between align-items-end mb-5\"&gt;\n                    &lt;h1&gt;@yield('title')&lt;/h1&gt;\n                    &lt;a class=\"btn btn-outline-primary float-end\"\n                       href=\"{{ route('products.index') }}\"&gt;{{ __('messages.common.back') }}&lt;/a&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"col-12\"&gt;\n                    @include('layouts.errors')\n                &lt;/div&gt;\n                &lt;div class=\"card\"&gt;\n                    &lt;div class=\"card-body\"&gt;\n                        {{ Form::open(['route' =&gt; 'products.store','files' =&gt; 'true']) }}\n                        @include('products.fields')\n                        {{ Form::close() }}\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    {{ Form::hidden('default_image_url', asset('images/default-product.jpg') ,['id' =&gt; 'defaultImageUrl']) }}\n@endsection\n</code></pre> <p>This Blade view represents a form for creating a new product. Here's a breakdown of its structure and components:</p> <ol> <li> <p>Extending Layout:</p> </li> <li> <p>The <code>@extends('layouts.app')</code> directive indicates that this view extends the <code>layouts.app</code> Blade layout.</p> </li> <li> <p>Page Title:</p> </li> <li> <p>The <code>@section('title')</code> directive defines the title of the page, which is set as the translated string for \"product.add_product\".</p> </li> <li> <p>Header Toolbar:</p> </li> <li> <p>The <code>@section('header_toolbar')</code> directive appears to be empty, which means no content is specified for the header toolbar.</p> </li> <li> <p>Content Section:</p> </li> <li> <p>The <code>@section('content')</code> directive defines the main content of the page.</p> </li> <li> <p>Container and Layout:</p> </li> <li> <p>A container is created using the <code>div</code> element with the class <code>\"container-fluid\"</code>.</p> </li> <li> <p>Inside the container, a flex column layout is set up using the <code>d-flex flex-column</code> classes.</p> </li> <li> <p>Page Header:</p> </li> <li> <p>A <code>div</code> element with class <code>\"col-12\"</code> contains the page header section.</p> </li> <li>It includes a title and a \"Back\" button that links to the products index page.</li> <li> <p>The title is provided by the <code>@yield('title')</code> directive, which inherits the translated string.</p> </li> <li> <p>Error Messages:</p> </li> <li> <p>Another <code>div</code> element with class <code>\"col-12\"</code> is used for displaying error messages using the <code>@include('layouts.errors')</code> directive.</p> </li> <li> <p>Card Section:</p> </li> <li> <p>A <code>div</code> element with class <code>\"card\"</code> is used to contain the main card content.</p> </li> <li> <p>Inside the card, a <code>div</code> element with class <code>\"card-body\"</code> holds the form content.</p> </li> <li> <p>Form Opening:</p> </li> <li> <p>The <code>Form::open</code> function opens a form that submits data to the <code>'products.store'</code> route. The <code>'files' =&gt; 'true'</code> attribute indicates that file uploads are allowed.</p> </li> <li> <p>Include Fields:</p> <ul> <li>The <code>@include('products.fields')</code> directive includes the Blade template for the product fields. This is where the actual input fields for creating a product are defined.</li> </ul> </li> <li> <p>Form Closing:</p> <ul> <li>The <code>Form::close()</code> function closes the form.</li> </ul> </li> <li> <p>Hidden Default Image URL:</p> <ul> <li>A hidden input field is added using the <code>Form::hidden</code> function. It sets the default image URL as the asset path to the default product image.</li> </ul> </li> <li> <p>End of Content Section:</p> <ul> <li>The <code>@endsection</code> directive signifies the end of the content section.</li> </ul> </li> </ol> <p>In summary, this Blade view creates a form for adding a new product to the application. It includes the form layout, page title, error messages, and a card layout for containing the form fields. The actual input fields for product information are included from another Blade template using the <code>@include</code> directive. The form submits data to the <code>'products.store'</code> route, and a default product image URL is set as a hidden input value.</p>"},{"location":"Admin/Products/#edit-product","title":"Edit Product","text":"<p>The edit products page view is located in : resources\\views\\products\\edit.blade.php.</p> <pre><code>@extends('layouts.app')\n@section('title')\n    {{__('messages.product.edit_product')}}\n@endsection\n@section('content')\n    @php $styleCss = 'style'; @endphp\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-flex flex-column\"&gt;\n            &lt;div class=\"col-12\"&gt;\n                &lt;div class=\"d-flex justify-content-between align-items-end mb-5\"&gt;\n                    &lt;h1&gt;@yield('title')&lt;/h1&gt;\n                    &lt;a class=\"btn btn-outline-primary float-end\"\n                       href=\"{{ route('products.index')  }}\"&gt;{{ __('messages.common.back') }}&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-12\"&gt;\n                    @include('layouts.errors')\n                &lt;/div&gt;\n                &lt;div class=\"card\"&gt;\n                    &lt;div class=\"card-body\"&gt;\n                        {{ Form::open(['route' =&gt; ['products.update', $product-&gt;id], 'method' =&gt; 'put','files' =&gt; 'true']) }}\n                        @include('products.edit_fields')\n                        {{ Form::close() }}\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    {{ Form::hidden('default_image_url', asset('images/default-product.jpg') ,['id' =&gt; 'defaultImageUrl']) }}\n@endsection\n</code></pre> <p>This Blade view template is for the edit page of a product. Let's break down the code to understand its structure and purpose:</p> <ol> <li> <p>Extending Layout: The view extends a layout template named <code>'layouts.app'</code>. Which is the content of this view will be inserted into the designated content section of the <code>layouts.app</code> layout.</p> </li> <li> <p>@section('title'): This Blade directive sets the title of the page. It uses the <code>__('messages.product.edit_product')</code> function to fetch the translated string for the \"edit_product\" key, which is defined in a language file. This title will be shown in the browser's title bar or tab.</p> </li> <li> <p>Container and Flex Layout:</p> </li> <li> <p>The view's content is wrapped within a <code>div</code> element with a class of <code>\"container-fluid\"</code>. This container provides a fluid layout that adjusts to the width of the screen.</p> </li> <li> <p>Inside the container, there's a <code>div</code> element with the classes <code>\"d-flex flex-column\"</code>. This sets up a flexbox layout with a column direction for its child elements.</p> </li> <li> <p>Header Section:</p> </li> <li> <p>Within the flex container, there's a <code>div</code> with a class of <code>\"col-12\"</code>. This is used to define a column layout within the flex container.</p> </li> <li> <p>Inside this column, there's a <code>div</code> with the classes <code>\"d-flex justify-content-between align-items-end mb-5\"</code>. This creates a flex container with items aligned between the start and the end. It includes a heading for the page title and a back button.</p> </li> <li> <p>Back Button: The back button is a link (<code>&lt;a&gt;</code>) element with the classes <code>\"btn btn-outline-primary float-end\"</code>. It links back to the index page of products using the <code>route('products.index')</code> route and displays a translated string for the \"common.back\" key, defined in a language file.</p> </li> <li> <p>Error Messages: The <code>@include('layouts.errors')</code> directive includes a template named <code>'layouts.errors'</code>. This template is used to display validation errors related to form inputs.</p> </li> <li> <p>Card Section:</p> </li> <li> <p>Within the same column, there's a <code>div</code> with the class <code>\"card\"</code>. This creates a card-style container for the main content of the page.</p> </li> <li> <p>Inside the card's body (<code>&lt;div class=\"card-body\"&gt;</code>), a form is opened using the <code>Form::open</code> helper function. The form is configured to update a product using the <code>'products.update'</code> route and the <code>PUT</code> HTTP method. The form also supports file uploads (<code>'files' =&gt; 'true'</code>).</p> </li> <li> <p>Edit Fields: The <code>@include('products.edit_fields')</code> directive includes a template named <code>'products.edit_fields'</code>. This template contains the form fields for editing the product's details.</p> </li> <li> <p>Default Image URL: A hidden input field is added with the name <code>'default_image_url'</code> and a value that represents the asset URL of a default product image. This hidden field used by JavaScript code in the view for various purposes.</p> </li> </ol> <p>In summary, this Blade view is for editing a product's details. It extends the <code>layouts.app</code> layout, sets the page title, and includes various UI elements for displaying the title, a back button, error messages, and the product edit form within a card container. It also includes a hidden input field to provide a default image URL for possible JavaScript functionality.</p> <p>the products.edit_fields view:</p> <pre><code>&lt;div class=\"row gx-10 mb-5\"&gt;\n    &lt;div class=\"col-lg-6\"&gt;\n        {{ Form::label('name', __('messages.product.name').':', ['class' =&gt; 'form-label required mb-3']) }}\n        &lt;div class=\"input-group mb-5\"&gt;\n            {{ Form::text('name',isset($product) ? $product-&gt;name : null,['class' =&gt; 'form-control ', 'placeholder' =&gt; __('messages.product.name'), 'required','onkeypress'=&gt;\"return blockSpecialChar(event)\"]) }}\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-lg-6\"&gt;\n        {{ Form::label('code', __('messages.product.code').':', ['class' =&gt; 'form-label required mb-3']) }}\n        &lt;span data-bs-toggle=\"tooltip\"\n              data-placement=\"top\"\n              data-bs-original-title=\"Click refresh icon to generate product code\"&gt;\n        &lt;i class=\"fas fa-question-circle ml-1\"&gt;&lt;/i&gt;\n&lt;/span&gt;\n        &lt;div class=\"input-group mb-5\"&gt;\n            {{ Form::text('code', $product-&gt;code ?? null,['class' =&gt; 'form-control ', 'placeholder' =&gt; __('messages.product.code'), 'required','id' =&gt; 'code', 'maxlength' =&gt; 6,'onkeypress'=&gt;\"return blockSpecialChar(event)\"]) }}\n            &lt;a class=\"input-group-text border-0\" id=\"autoCode\" href=\"javascript:void(0)\" data-toggle=\"tooltip\"\n               data-placement=\"right\" title=\"Generate Code\" data-bs-toggle=\"tooltip\"&gt;\n                &lt;i class=\"fas fa-sync-alt fs-4\"&gt;&lt;/i&gt;\n            &lt;/a&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-lg-6\"&gt;\n        &lt;div class=\"mb-5\"&gt;\n            {{ Form::label('category', __('messages.product.category').':', ['class' =&gt; 'form-label required mb-3']) }}\n            {{ Form::select('category_id', $categories,isset($product) ? $product-&gt;category_id : null,['class' =&gt; 'form-select io-select2 ', 'placeholder' =&gt;  __('messages.product.category'), 'required', 'id'=&gt;'adminCategoryId', 'data-control' =&gt; 'select2']) }}\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-lg-6\"&gt;\n        &lt;div class=\"mb-5\"&gt;\n            {{ Form::label('unit_price', __('messages.product.unit_price').':', ['class' =&gt; 'form-label required mb-3']) }}\n            {{ Form::number('unit_price',isset($product) ? $product-&gt;unit_price : null,['class' =&gt; 'form-control ', 'placeholder' =&gt;  __('messages.product.unit_price'), 'min'=&gt;'0', 'step'=&gt;\".01\", 'oninput'=&gt;\"validity.valid||(value=value.replace(/\\D+/g, '.'))\",'required']) }}\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-lg-12\"&gt;\n        &lt;div class=\"mb-5\"&gt;\n            {{ Form::label('description', __('messages.product.description').':', ['class' =&gt; 'form-label mb-3']) }}\n            {{ Form::textarea('description',isset($product) ? $product-&gt;description : null,['class' =&gt; 'form-control ', 'placeholder' =&gt;  __('messages.product.description'),'rows' =&gt; '5']) }}\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-lg-3 mb-7\"&gt;\n        &lt;div class=\"mb-3\" io-image-input=\"true\"&gt;\n            &lt;label for=\"exampleInputImage\" class=\"form-label\"&gt;{{ __('messages.product.image').':' }}&lt;/label&gt;\n            &lt;div class=\"d-block\"&gt;\n                &lt;div class=\"image-picker\"&gt;\n                    &lt;div class=\"image previewImage\" id=\"productImage\"\n                    {{ $styleCss }}=\"background-image: url('{{ !empty($product-&gt;product_image) ? $product-&gt;product_image : asset('images/default-product\n.jpg') }}')\"&gt;\n                &lt;/div&gt;\n                &lt;span class=\"picker-edit rounded-circle text-gray-500 fs-small\" data-bs-toggle=\"tooltip\"\n                      title=\"Change image\"&gt;\n                    &lt;label&gt;\n                        &lt;i class=\"fa-solid fa-pen\" id=\"productImage\"&gt;&lt;/i&gt;\n                            &lt;input type=\"file\" id=\"productImage\" name=\"image\" class=\"image-upload d-none\"\n                                   accept=\"image/*\"/&gt;\n                                        &lt;input type=\"hidden\" name=\"image_remove\"&gt;\n                    &lt;/label&gt;\n                &lt;/span&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"form-text\"&gt;Allowed file types: png, jpg, jpeg.&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;div&gt;\n    &lt;div class=\"float-end\"&gt;\n        {{ Form::submit(__('messages.common.save'),['class' =&gt; 'btn btn-primary me-3']) }}\n        &lt;a href=\"{{ route('products.index') }}\" type=\"reset\"\n           class=\"btn btn-secondary btn-active-light-primary\"&gt;{{__('messages.common.discard')}}&lt;/a&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>This Blade code represents a form for editing product information in a web application. Here's a breakdown of its structure and components:</p> <ol> <li> <p>Grid Layout:</p> </li> <li> <p>The <code>div</code> with the class <code>\"row gx-10 mb-5\"</code> sets up a grid layout for arranging form elements in a row.</p> </li> <li> <p>Within this row, several <code>div</code> elements with the class <code>\"col-lg-6\"</code> define two columns of equal width for better layout organization.</p> </li> <li> <p>Name Input Field:</p> </li> <li> <p>A form label is created using the <code>Form::label</code> function, displaying the translated string for \"product.name\" and adding classes for styling.</p> </li> <li>An input group wraps the text input for the product's name. The input is defined using <code>Form::text</code> and is pre-filled with the existing name if available.</li> <li> <p>The input element has classes for styling, a placeholder, and is set as required. It also has an <code>onkeypress</code> attribute to invoke a JavaScript function to block special characters.</p> </li> <li> <p>Code Input Field:</p> </li> <li> <p>Similar to the name input, this section contains an input for the product's code.</p> </li> <li>A refresh icon within a tooltip is displayed using the Font Awesome classes.</li> <li> <p>The input has similar attributes, including a special character blocking JavaScript function, and an anchor link with an icon to generate a new code.</p> </li> <li> <p>Category Select Field:</p> </li> <li> <p>A label and a dropdown select field are defined for the product's category.</p> </li> <li>The <code>Form::select</code> function populates the dropdown options with the available categories. The selected category is pre-filled if it exists.</li> <li> <p>The select element has classes for styling, a placeholder, is marked as required, and is configured to use the Select2 library.</p> </li> <li> <p>Unit Price Input Field:</p> </li> <li> <p>A label and an input field are provided for the product's unit price.</p> </li> <li>The <code>Form::number</code> function is used to define a numeric input with a specific set of attributes.</li> <li> <p>The input is styled, has a placeholder, a minimum value of 0, step value of 0.01, and custom JavaScript logic to ensure valid numeric input.</p> </li> <li> <p>Description Textarea:</p> </li> <li> <p>A label and a textarea element are provided for entering the product's description.</p> </li> <li> <p>The textarea is styled and includes a placeholder. The content is pre-filled if a description exists.</p> </li> <li> <p>Image Upload Section:</p> </li> <li> <p>A section for uploading the product's image is defined.</p> </li> <li>A label is provided for the image upload section.</li> <li>Inside the section, an image picker is set up with a preview and an icon for editing.</li> <li>The image preview URL is derived from the product's image data, and if not available, a default image is used.</li> <li>An input element is used to upload a new image. The <code>accept</code> attribute restricts the allowed file types.</li> <li> <p>An additional hidden input is used for handling image removal.</p> </li> <li> <p>Form Submission Buttons:</p> </li> <li>At the end of the form, there is a <code>div</code> element that aligns buttons to the right.</li> <li>A \"Save\" button is provided for submitting the form, labeled with a translated string for \"common.save\".</li> <li>A \"Discard\" button allows users to cancel the form and return to the products index page.</li> </ol>"},{"location":"Admin/Products/#show-product","title":"Show Product","text":"<p>The view of the 'show products' page located in ressources&gt;views&gt;products&gt;show_fields.blade.php.</p> <pre><code>&lt;div class=\"card\"&gt;\n  &lt;div class=\"card-body\"&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-xxl-5 col-12\"&gt;\n        &lt;div\n          class=\"d-sm-flex align-items-center mb-5 mb-xxl-0 text-center text-sm-start\"\n        &gt;\n          &lt;div class=\"image image-circle image-small\"&gt;\n            &lt;img src=\"{{$product-&gt;product_image}}\" alt=\"user\" /&gt;\n          &lt;/div&gt;\n          &lt;div class=\"ms-0 ms-md-10 mt-5 mt-sm-0\"&gt;\n            &lt;h2&gt;{{ $product-&gt;name }}&lt;/h2&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"mt-7 overflow-hidden\"&gt;\n  &lt;ul\n    class=\"nav nav-tabs mb-5 pb-1 overflow-auto flex-nowrap text-nowrap\"\n    id=\"myTab\"\n    role=\"tablist\"\n  &gt;\n    &lt;li class=\"nav-item position-relative me-7 mb-3\" role=\"presentation\"&gt;\n      &lt;button\n        class=\"nav-link active p-0\"\n        id=\"overview-tab\"\n        data-bs-toggle=\"tab\"\n        data-bs-target=\"#overview\"\n        type=\"button\"\n        role=\"tab\"\n        aria-controls=\"overview\"\n        aria-selected=\"true\"\n      &gt;\n        {{__('messages.invoice.overview')}}\n      &lt;/button&gt;\n    &lt;/li&gt;\n  &lt;/ul&gt;\n  &lt;div class=\"card\"&gt;\n    &lt;div class=\"card-body\"&gt;\n      &lt;div class=\"tab-content\" id=\"myTabContent\"&gt;\n        &lt;div\n          class=\"tab-pane fade show active\"\n          id=\"overview\"\n          role=\"tabpanel\"\n          aria-labelledby=\"overview-tab\"\n        &gt;\n          &lt;div class=\"row\"&gt;\n            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n              &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"\n                &gt;{{ __('messages.product.unit_price') }} :&lt;/label\n              &gt;\n              &lt;span class=\"fs-4 text-gray-800\"\n                &gt;{{ !empty($product-&gt;unit_price) ?\n                getCurrencyAmount($product-&gt;unit_price,true): 'N/A' }}&lt;/span\n              &gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n              &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"\n                &gt;{{ __('messages.category.category') }} :&lt;/label\n              &gt;\n              &lt;span class=\"fs-4 text-gray-800\"\n                &gt;{{ !empty($product-&gt;category-&gt;name) ? $product-&gt;category-&gt;name:\n                'N/A' }}&lt;/span\n              &gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n              &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"\n                &gt;{{ __('messages.product.code') }} :&lt;/label\n              &gt;\n              &lt;span class=\"fs-4 text-gray-800\"\n                &gt;{{ !empty($product-&gt;code) ? $product-&gt;code: 'N/A' }}&lt;/span\n              &gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n              &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"\n                &gt;{{ __('messages.product.description') }} :&lt;/label\n              &gt;\n              &lt;span class=\"fs-4 text-gray-800\"\n                &gt;{{ !empty($product-&gt;description) ? $product-&gt;description: 'N/A'\n                }}&lt;/span\n              &gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n              &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"\n                &gt;{{ __('messages.common.last_update') }} :&lt;/label\n              &gt;\n              &lt;span class=\"fs-4 text-gray-800\"\n                &gt;{{ !empty($product-&gt;updated_at) ?\n                $product-&gt;updated_at-&gt;diffForHumans(): 'N/A' }}&lt;/span\n              &gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>This Blade view displays detailed information about a product using a card layout and tab navigation. Here's a breakdown of its components and structure:</p> <ol> <li> <p>Card Container:</p> </li> <li> <p>The outermost <code>div</code> element with class <code>\"card\"</code> wraps the entire content.</p> </li> <li> <p>Card Body:</p> </li> <li> <p>Inside the card, there's a <code>div</code> element with class <code>\"card-body\"</code>, which contains the content of the card.</p> </li> <li> <p>Product Image and Name Section:</p> </li> <li> <p>A <code>div</code> element with class <code>\"row\"</code> is used to create a row layout.</p> </li> <li>Within the row, there's a <code>div</code> element with classes <code>\"col-xxl-5 col-12\"</code> to control column width on different screen sizes.</li> <li>Inside this column, a <code>div</code> with classes <code>\"d-sm-flex align-items-center mb-5 mb-xxl-0 text-center text-sm-start\"</code> is used for layout control.</li> <li>Inside this div, there's an image container with classes <code>\"image image-circle image-small\"</code>, containing an image tag displaying the product image.</li> <li> <p>Beside the image, another <code>div</code> contains the product name displayed using <code>{{ $product-&gt;name }}</code>.</p> </li> <li> <p>Tab Navigation:</p> </li> <li> <p>Following the image and name section, there's another <code>div</code> with class <code>\"mt-7 overflow-hidden\"</code>, which contains the tab navigation and content.</p> </li> <li> <p>Tab Navigation List:</p> </li> <li> <p>A <code>ul</code> element with classes <code>\"nav nav-tabs mb-5 pb-1 overflow-auto flex-nowrap text-nowrap\"</code> is used for the tab navigation.</p> </li> <li>Inside the list, there's a <code>li</code> element with classes <code>\"nav-item position-relative me-7 mb-3\"</code>.</li> <li> <p>Inside the list item, a button with class <code>\"nav-link active p-0\"</code> represents the active tab. The button is linked to the tab with the ID <code>\"overview\"</code>.</p> </li> <li> <p>Tab Content:</p> </li> <li> <p>A nested <code>div</code> with class <code>\"card\"</code> contains the tab content.</p> </li> <li> <p>Card Body for Tab Content:</p> </li> <li> <p>This card has a card body with the class <code>\"card-body\"</code> to contain the content of the active tab.</p> </li> <li> <p>Tab Content Section:</p> </li> <li> <p>Inside the card body, a <code>div</code> with class <code>\"tab-content\"</code> and the ID <code>\"myTabContent\"</code> is used to manage tab content.</p> </li> <li> <p>Overview Tab Content:</p> </li> <li> <p>Inside the tab content div, a <code>div</code> with class <code>\"tab-pane fade show active\"</code> and the ID <code>\"overview\"</code> represents the content of the active tab.</p> </li> <li>The content includes several rows, each containing product information.</li> <li>Each row has a column with class <code>\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"</code>.</li> <li>Inside each column, a label is provided for the specific product information.</li> <li> <p>Next to the label, a span displays the corresponding product data. The data is conditionally displayed, and if empty, it shows \"N/A\".</p> </li> <li> <p>Last Update Information:</p> <ul> <li>The last row displays the \"Last Update\" information using the <code>updated_at</code> timestamp of the product. The timestamp is formatted using the <code>diffForHumans()</code> method.</li> </ul> </li> </ol> <p>In summary, this Blade view presents a product's details using a card layout and tab navigation. The product's image, name, and various attributes are displayed in a well-structured format. The view allows users to navigate through different sections of the product's information using tabs.  </p> <p>The product.show view:</p> <pre><code>@extends('layouts.app')\n@section('title')\n    {{ __('messages.product.product_details') }}\n@endsection\n@section('header_toolbar')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-md-flex align-items-center justify-content-between mb-5\"&gt;\n            &lt;h1 class=\"mb-0\"&gt;@yield('title')&lt;/h1&gt;\n            &lt;div class=\"text-end mt-4 mt-md-0\"&gt;\n                &lt;a href=\"{{ route('products.edit', $product-&gt;id)}}\"\n                   class=\"btn btn-primary me-4\"&gt;{{__('messages.common.edit')}}&lt;/a&gt;\n                &lt;a href=\"{{route('products.index')}}\"\n                   class=\"btn btn-outline-primary\"&gt;{{ __('messages.common.back') }}&lt;/a&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n@endsection\n@section('content')\n    &lt;div class=\"container-fluid\"&gt;\n        @include('flash::message')\n        &lt;div class=\"d-flex flex-column\"&gt;\n            @include('products.show_fields')\n        &lt;/div&gt;\n    &lt;/div&gt;\n@endsection\n</code></pre> <p>This Blade view, named <code>product.show</code>, is used to display detailed information about a specific product. It extends the <code>layouts.app</code> layout template and contains several sections for different content and functionality:</p> <ol> <li> <p>Title Section:</p> </li> <li> <p>The <code>@section('title')</code> directive sets the page title to \"Product Details\" using the translation key <code>__('messages.product.product_details')</code>.</p> </li> <li> <p>Header Toolbar Section:</p> </li> <li> <p>The <code>@section('header_toolbar')</code> directive defines the header toolbar area at the top of the page.</p> </li> <li>Inside a <code>div</code> with class <code>\"container-fluid\"</code>, a <code>div</code> with classes <code>\"d-md-flex align-items-center justify-content-between mb-5\"</code> creates a responsive layout for the header.</li> <li>The <code>h1</code> tag displays the page title within this section.</li> <li> <p>Inside a nested <code>div</code> with class <code>\"text-end mt-4 mt-md-0\"</code>, there are two buttons:</p> <ul> <li>A link button to edit the current product using <code>route('products.edit', $product-&gt;id)</code></li> <li>A link button to navigate back to the product index page using <code>route('products.index')</code></li> </ul> </li> <li> <p>Content Section:</p> </li> <li>The <code>@section('content')</code> directive defines the main content area of the page.</li> <li>Inside a <code>div</code> with class <code>\"container-fluid\"</code>, the <code>flash::message</code> component is included. This component is often used to display flash messages.</li> <li>Inside a nested <code>div</code> with classes <code>\"d-flex flex-column\"</code>, the <code>products.show_fields</code> view is included. This view is presumably responsible for displaying the detailed fields of the product, such as its attributes.</li> </ol> <p>In summary, this Blade view provides a detailed view of a specific product, including a header toolbar with edit and back buttons, as well as the main content area displaying the product's fields using the <code>products.show_fields</code> view. The view is organized using the <code>layouts.app</code> template and aims to provide a user-friendly interface to view and interact with product details.</p>"},{"location":"Admin/Quotes/","title":"Quotes","text":""},{"location":"Admin/Quotes/#route","title":"Route","text":"<p>The route <code>Route::resource('quotes', QuoteController::class);</code> leads to the page /admin/quotes, which displays all the quotes we have.</p>"},{"location":"Admin/Quotes/#controller","title":"Controller","text":"<p>The controller of the 'Quotes' page located in app&gt;http&gt;controllers&gt;QuoteController.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Exports\\AdminQuotesExport;\nuse App\\Http\\Requests\\CreateQuoteRequest;\nuse App\\Http\\Requests\\UpdateQuoteRequest;\nuse App\\Models\\Invoice;\nuse App\\Models\\InvoiceItem;\nuse App\\Models\\Product;\nuse App\\Models\\Quote;\nuse App\\Repositories\\QuoteRepository;\nuse Barryvdh\\DomPDF\\Facade as PDF;\nuse Carbon\\Carbon;\nuse Exception;\nuse Illuminate\\Contracts\\Foundation\\Application;\nuse Illuminate\\Contracts\\View\\Factory;\nuse Illuminate\\Contracts\\View\\View;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\RedirectResponse;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\Response;\nuse Illuminate\\Support\\Facades\\DB;\nuse Laracasts\\Flash\\Flash;\nuse Maatwebsite\\Excel\\Facades\\Excel;\nuse Symfony\\Component\\HttpFoundation\\BinaryFileResponse;\n\nclass QuoteController extends AppBaseController\n{\n/** @var QuoteRepository */\npublic $quoteRepository;\n\npublic function __construct(QuoteRepository $quoteRepo)\n{\n$this-&gt;quoteRepository = $quoteRepo;\n}\n\n/**\n     * @param  Request  $request\n     * @return Application|Factory|View\n     *\n     * @throws Exception\n     */\npublic function index(Request $request)\n{\n$statusArr = Quote::STATUS_ARR;\n$status = $request-&gt;status;\n\nreturn view('quotes.index', compact('statusArr', 'status'));\n}\n\n/**\n     * Show the form for creating a new resource.\n     *\n     * @return Application|Factory|View\n     */\npublic function create()\n{\n$data = $this-&gt;quoteRepository-&gt;getSyncList();\n\nreturn view('quotes.create')-&gt;with($data);\n}\n\n/**\n     * @param  CreateQuoteRequest  $request\n     * @return JsonResponse\n     */\npublic function store(CreateQuoteRequest $request)\n{\ntry {\nDB::beginTransaction();\n$request-&gt;status = Quote::DRAFT;\n$quote = $this-&gt;quoteRepository-&gt;saveQuote($request-&gt;all());\nDB::commit();\n} catch (Exception $e) {\nDB::rollBack();\n\nreturn $this-&gt;sendError($e-&gt;getMessage());\n}\n\nreturn $this-&gt;sendResponse($quote, 'Quote saved successfully.');\n}\n\n/**\n     * Display the specified resource.\n     *\n     * @param  Quote  $quote\n     * @return Application|Factory|View\n     */\npublic function show(Quote $quote)\n{\n$quoteData = $this-&gt;quoteRepository-&gt;getQuoteData($quote);\n\nreturn view('quotes.show')-&gt;with($quoteData);\n}\n\n/**\n     * @param  Quote  $quote\n     * @return Application|Factory|View|RedirectResponse\n     */\npublic function edit(Quote $quote)\n{\nif ($quote-&gt;status == Quote::CONVERTED) {\nFlash::error('Converted quote can not editable.');\n\nreturn redirect()-&gt;route('quotes.index');\n}\n$data = $this-&gt;quoteRepository-&gt;prepareEditFormData($quote);\n\nreturn view('quotes.edit', compact('quote'))-&gt;with($data);\n}\n\n/**\n     * @param  UpdateQuoteRequest  $request\n     * @param  Quote  $quote\n     * @return JsonResponse\n     */\npublic function update(UpdateQuoteRequest $request, Quote $quote): JsonResponse\n{\n$input = $request-&gt;all();\ntry {\nDB::beginTransaction();\n$quote = $this-&gt;quoteRepository-&gt;updateQuote($quote-&gt;id, $input);\nDB::commit();\n} catch (Exception $e) {\nDB::rollBack();\n\nreturn $this-&gt;sendError($e-&gt;getMessage());\n}\n\nreturn $this-&gt;sendResponse($quote, 'Quote updated successfully.');\n}\n\n/**\n     * @param  Quote  $quote\n     * @return JsonResponse\n     */\npublic function destroy(Quote $quote): JsonResponse\n{\n$quote-&gt;delete();\n\nreturn $this-&gt;sendSuccess('Quote Deleted successfully.');\n}\n\n/**\n     * @param $productId\n     * @return JsonResponse\n     */\npublic function getProduct($productId): JsonResponse\n{\n$product = Product::pluck('unit_price', 'id')-&gt;toArray();\n\nreturn $this-&gt;sendResponse($product, 'Product Price retrieved successfully.');\n}\n\n/**\n     * @param  Quote  $quote\n     * @return Response\n     */\npublic function convertToPdf(Quote $quote): Response\n{\nini_set('max_execution_time', 36000000);\n$quote-&gt;load('client.user', 'invoiceTemplate', 'quoteItems.product', 'quoteItems');\n$quoteData = $this-&gt;quoteRepository-&gt;getPdfData($quote);\n$invoiceTemplate = $this-&gt;quoteRepository-&gt;getDefaultTemplate($quote);\n$pdf = PDF::loadView(\"quotes.quote_template_pdf.$invoiceTemplate\", $quoteData);\n\nreturn $pdf-&gt;stream('quote.pdf');\n}\n\n/**\n     * @param  Request  $request\n     * @return mixed\n     */\npublic function convertToInvoice(Request $request)\n{\n$quoteId = $request-&gt;quoteId;\n$quote = Quote::whereId($quoteId)-&gt;firstOrFail();\n\n$quoteDatas = $this-&gt;quoteRepository-&gt;getQuoteData($quote);\n$quoteData = $quoteDatas['quote'];\n$quoteItems = $quoteDatas['quote']['quoteItems'];\n\nif (! empty(getInvoiceNoPrefix())) {\n$quoteData['quote_id'] = getInvoiceNoPrefix().'-'.$quoteData['quote_id'];\n}\nif (! empty(getInvoiceNoSuffix())) {\n$quoteData['quote_id'] .= '-'.getInvoiceNoSuffix();\n}\n\n$invoice['invoice_id'] = $quoteData['quote_id'];\n$invoice['client_id'] = $quoteData['client_id'];\n$invoice['invoice_date'] = Carbon::parse($quoteData['quote_date'])-&gt;format(currentDateFormat());\n$invoice['due_date'] = Carbon::parse($quoteData['due_date'])-&gt;format(currentDateFormat());\n$invoice['amount'] = $quoteData['amount'];\n$invoice['final_amount'] = $quoteData['final_amount'];\n$invoice['discount_type'] = $quoteData['discount_type'];\n$invoice['discount'] = $quoteData['discount'];\n$invoice['note'] = $quoteData['note'];\n$invoice['term'] = $quoteData['term'];\n$invoice['template_id'] = $quoteData['template_id'];\n$invoice['recurring'] = $quoteData['recurring'];\n$invoice['status'] = Invoice::DRAFT;\n\n$invoice = Invoice::create($invoice);\n\nforeach ($quoteItems as $quoteItem) {\n$invoiceItem = InvoiceItem::create([\n'invoice_id' =&gt; $invoice-&gt;id,\n'product_id' =&gt; $quoteItem['product_id'],\n'product_name' =&gt; $quoteItem['product_name'],\n'quantity' =&gt; $quoteItem['quantity'],\n'price' =&gt; $quoteItem['price'],\n'total' =&gt; $quoteItem['total'],\n]);\n}\n\nQuote::whereId($quoteId)-&gt;update(['status' =&gt; Quote::CONVERTED]);\n\nreturn $this-&gt;sendSuccess('Converted to Invoice successfully!.');\n}\n\n/**\n     * @return BinaryFileResponse\n     */\npublic function exportQuotesExcel(): BinaryFileResponse\n{\nreturn Excel::download(new AdminQuotesExport(), 'quote-excel.xlsx');\n}\n\npublic function getPublicQuotePdf($quoteId)\n{\n$quote = Quote::whereQuoteId($quoteId)-&gt;firstOrFail();\n$quote-&gt;load('client.user', 'invoiceTemplate', 'quoteItems.product', 'quoteItems');\n\n$quoteData = $this-&gt;quoteRepository-&gt;getPdfData($quote);\n$invoiceTemplate = $this-&gt;quoteRepository-&gt;getDefaultTemplate($quote);\n$pdf = PDF::loadView(\"quotes.quote_template_pdf.$invoiceTemplate\", $quoteData);\n\nreturn $pdf-&gt;stream('quote.pdf');\n}\n\n/**\n     * @param $quoteId\n     * @return Application|Factory|View\n     */\npublic function showPublicQuote($quoteId): View|Factory|Application\n{\n$quote = Quote::with('client.user')-&gt;whereQuoteId($quoteId)-&gt;first();\n$quoteData = $this-&gt;quoteRepository-&gt;getQuoteData($quote);\n$quoteData['statusArr'] = Quote::STATUS_ARR;\n$quoteData['status'] = $quote-&gt;status;\n$quoteData['userLang'] = $quote-&gt;client-&gt;user-&gt;language;\n\nreturn view('quotes.public-quote.public_view')-&gt;with($quoteData);\n}\n\n/**\n     * @return Response\n     */\npublic function exportQuotesPdf(): Response\n{\nini_set('max_execution_time', 36000000);\n$data['quotes'] = Quote::with('client.user')-&gt;orderBy('created_at', 'desc')-&gt;get();\n$quotesPdf = PDF::loadView('quotes.export_quotes_pdf', $data);\n\nreturn $quotesPdf-&gt;download('Quotes.pdf');\n}\n}\n</code></pre> <p>Let's break down the code step by step:</p> <ol> <li> <p>Namespace and Imports:    The controller is defined within the <code>App\\Http\\Controllers</code> namespace and imports various classes and libraries that are used throughout the controller's methods.</p> </li> <li> <p>Class Definition and Constructor:    The <code>QuoteController</code> class extends <code>AppBaseController</code>, which suggests that it follows some common practices for controllers. It has a constructor that injects a <code>QuoteRepository</code> instance, presumably to handle interactions with the database related to quotes.</p> </li> <li> <p>Index Method:    The <code>index</code> method is used to display a list of quotes. It retrieves the possible quote statuses and a selected status from the request and then loads a view named <code>quotes.index</code> while passing the retrieved data to the view.</p> </li> <li> <p>Create Method:    The <code>create</code> method is responsible for showing a form to create a new quote. It fetches data using the <code>getSyncList</code> method from the <code>QuoteRepository</code> and passes this data to the <code>quotes.create</code> view.</p> </li> <li> <p>Store Method:    The <code>store</code> method is used to store a new quote. It starts a database transaction, sets the quote status to \"DRAFT,\" and then uses the <code>quoteRepository</code> to save the quote. If successful, the transaction is committed; otherwise, it's rolled back.</p> </li> <li> <p>Show Method:    The <code>show</code> method displays the details of a specific quote. It retrieves the quote data using the <code>getQuoteData</code> method from the <code>QuoteRepository</code> and passes it to the <code>quotes.show</code> view.</p> </li> <li> <p>Edit Method:    The <code>edit</code> method allows editing an existing quote. It checks if the quote's status is \"CONVERTED\"; if it is, an error message is flashed, and the user is redirected to the quotes index. Otherwise, it prepares data for editing using the <code>prepareEditFormData</code> method from the <code>QuoteRepository</code> and loads the <code>quotes.edit</code> view.</p> </li> <li> <p>Update Method:    The <code>update</code> method is used to update an existing quote. It begins a database transaction, updates the quote data using the <code>updateQuote</code> method from the <code>QuoteRepository</code>, and then either commits the transaction or rolls it back based on success or failure.</p> </li> <li> <p>Destroy Method:    The <code>destroy</code> method deletes a quote. It calls the <code>delete</code> method on the quote instance and returns a success message.</p> </li> <li> <p>Various Other Methods:     The controller contains several other methods that handle tasks like getting product information, converting a quote to a PDF, converting a quote to an invoice, exporting quotes to Excel/PDF, and handling public quotes.</p> </li> <li> <p>PDF Generation:     The controller uses the <code>Barryvdh\\DomPDF\\Facade</code> to generate PDFs for quotes and invoices. It loads a Blade view based on the selected template and passes relevant data to generate the PDF.</p> </li> <li> <p>View Loading:     The controller frequently loads views with appropriate data using Laravel's <code>view</code> method. It also uses the <code>with</code> method to pass data to views.</p> </li> </ol> <p>Overall, the <code>QuoteController</code> class serves as the central hub for managing quotes within the Laravel application. It handles various CRUD (Create, Read, Update, Delete) operations related to quotes, interacts with the database through the <code>QuoteRepository</code>, and renders views to provide a user interface for managing quotes.</p>"},{"location":"Admin/Quotes/#model","title":"Model","text":"<p>The models related to this controller are : App\\Models\\Invoice , App\\Models\\Quote , App\\Models\\Product and App\\Models\\InvoiceItem.</p>"},{"location":"Admin/Quotes/#invoice-model","title":"Invoice Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Carbon\\Carbon;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsToMany;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Support\\Str;\n\n\nclass Invoice extends Model\n{\nuse HasFactory;\n\npublic const SELECT_DISCOUNT_TYPE = 0;\npublic const FIXED = 1;\npublic const PERCENTAGE = 2;\n\npublic const DISCOUNT_TYPE = [\nself::SELECT_DISCOUNT_TYPE =&gt; 'Select Discount Type',\nself::FIXED =&gt; 'Fixed',\nself::PERCENTAGE =&gt; 'Percentage',\n];\n\npublic const DRAFT = 0;\npublic const UNPAID = 1;\npublic const PAID = 2;\npublic const PARTIALLY = 3;\npublic const OVERDUE = 4;\npublic const STATUS_ALL = 5;\npublic const PROCESSING = 6;\n\npublic const STATUS_ARR = [\nself::STATUS_ALL =&gt; 'All',\nself::DRAFT =&gt; 'Draft',\nself::UNPAID =&gt; 'Unpaid',\nself::PAID =&gt; 'Paid',\nself::PARTIALLY =&gt; 'Partially Paid',\nself::OVERDUE =&gt; 'Overdue',\nself::PROCESSING =&gt; 'Processing',\n];\n\npublic const RECURRING_OFF = 0;\n\npublic const RECURRING_ON = 1;\n\npublic const RECURRING_STATUS_ARR = [\nself::RECURRING_ON =&gt; 'On',\nself::RECURRING_OFF =&gt; 'Off',\n];\n\npublic const MONTHLY = 1;\npublic const QUARTERLY = 2;\npublic const SEMIANNUALLY = 3;\npublic const ANNUALLY = 4;\n\npublic const RECURRING_ARR = [\nself::MONTHLY =&gt; 'Monthly',\nself::QUARTERLY =&gt; 'Quarterly',\nself::SEMIANNUALLY =&gt; 'Semi Annually',\nself::ANNUALLY =&gt; 'Annually',\n];\n\n/**\n     * Validation rules\n     *\n     * @var array\n     */\npublic static $rules = [\n'client_id' =&gt; 'required',\n'invoice_id' =&gt; 'required|unique:invoices,invoice_id',\n'invoice_date' =&gt; 'required',\n'due_date' =&gt; 'required',\n];\n\npublic static $messages = [\n'client_id.required' =&gt; 'The Client field is required.',\n'invoice_date.required' =&gt; 'The invoice date field is required.',\n'due_date' =&gt; 'The invoice Due date field is required.',\n];\n\npublic $table = 'invoices';\n\npublic $appends = ['status_label'];\n\npublic $fillable = [\n'client_id',\n'invoice_date',\n'due_date',\n'invoice_id',\n'currency_id',\n'amount',\n'discount_type',\n'discount',\n'final_amount',\n'note',\n'term',\n'template_id',\n'status',\n'recurring_status',\n'recurring_cycle',\n'last_recurring_on',\n'parent_id',\n];\n\nprotected $casts = [\n'client_id' =&gt; 'integer',\n'parent_id' =&gt; 'integer',\n'invoice_date' =&gt; 'date',\n'due_date' =&gt; 'date',\n'invoice_id' =&gt; 'string',\n'currency_id' =&gt; 'integer',\n'amount' =&gt; 'double',\n'discount_type' =&gt; 'integer',\n'discount' =&gt; 'double',\n'final_amount' =&gt; 'double',\n'note' =&gt; 'string',\n'term' =&gt; 'string',\n'template_id' =&gt; 'integer',\n'status' =&gt; 'integer',\n'recurring_status' =&gt; 'integer',\n'recurring_cycle' =&gt; 'integer',\n'last_recurring_on' =&gt; 'date',\n'tax' =&gt; 'double',\n];\n\npublic function getStatusLabelAttribute(): string\n{\nreturn self::STATUS_ARR[$this-&gt;status];\n}\n\n/**\n     * @return BelongsTo\n     */\npublic function client(): BelongsTo\n{\nreturn $this-&gt;belongsTo(Client::class, 'client_id', 'id');\n}\n\n/**\n     * @return HasMany\n     */\npublic function invoiceItems(): HasMany\n{\nreturn $this-&gt;hasMany(InvoiceItem::class);\n}\n\n/**\n     * @return string\n     */\npublic static function generateUniqueInvoiceId(): string\n{\n$invoiceId = mb_strtoupper(Str::random(6));\nwhile (true) {\n$isExist = self::whereInvoiceId($invoiceId)-&gt;exists();\nif ($isExist) {\nself::generateUniqueInvoiceId();\n}\nbreak;\n}\n\nreturn $invoiceId;\n}\n\n/**\n     * @return HasMany\n     */\npublic function payments(): HasMany\n{\nreturn $this-&gt;hasMany(Payment::class, 'invoice_id', 'id');\n}\n\n/**\n     * @return HasMany\n     */\npublic function AdminPayment(): HasMany\n{\nreturn $this-&gt;hasMany(AdminPayment::class, 'invoice_id', 'id');\n}\n\n/**\n     * @return BelongsTo\n     */\npublic function invoiceTemplate(): BelongsTo\n{\nreturn $this-&gt;belongsTo(InvoiceSetting::class, 'template_id', 'id');\n}\n\npublic function parentInvoice(): BelongsTo\n{\nreturn $this-&gt;belongsTo(self::class, 'parent_id', 'id');\n}\n\npublic function childInvoices(): HasMany\n{\nreturn $this-&gt;hasMany(self::class, 'parent_id', 'id');\n}\n\n/**\n     * @param $value\n     * @return Setting|mixed\n     */\npublic function getCurrencyIdAttribute($value)\n{\nif (! empty($value)) {\nreturn Currency::where('id', $value)-&gt;pluck('id')-&gt;first();\n}\n\nreturn Currency::where('id', getSettingValue('current_currency'))-&gt;pluck('id')-&gt;first();\n}\n\n/**\n     * @param $value\n     */\npublic function setInvoiceDateAttribute($value): void\n{\n$this-&gt;attributes['invoice_date'] = Carbon::createFromFormat(currentDateFormat(),\n$value)-&gt;translatedFormat('Y-m-d');\n}\n\n/**\n     * @param $value\n     */\npublic function setDueDateAttribute($value): void\n{\n$this-&gt;attributes['due_date'] = Carbon::createFromFormat(currentDateFormat(),\n$value)-&gt;translatedFormat('Y-m-d');\n}\n\n/**\n     * @return BelongsToMany\n     */\npublic function invoiceTaxes(): BelongsToMany\n{\nreturn $this-&gt;belongsToMany(Tax::class,'invoice_taxes');\n}\n}\n</code></pre> <p>This model represents invoices within the application and provides methods and properties for interacting with invoice data stored in the database.</p> <p>Let's break down the key parts of this <code>Invoice</code> model class:</p> <ol> <li> <p>Use of Traits and Relationships:    The model class uses the <code>HasFactory</code> trait, indicating that it can be used to create instances of the model using a factory. It also contains several Eloquent relationships to other models, including <code>Client</code>, <code>InvoiceItem</code>, <code>Payment</code>, <code>AdminPayment</code>, <code>InvoiceSetting</code> (which seems to represent invoice templates), and others.</p> </li> <li> <p>Model Properties and Fillable Fields:    The model defines a set of properties that correspond to the columns in the database table. The <code>$fillable</code> array specifies which fields can be mass-assigned when creating or updating instances of the model.</p> </li> <li> <p>Constants for Status and Other Values:    The model includes constants like <code>DRAFT</code>, <code>UNPAID</code>, <code>PAID</code>, <code>RECURRING_OFF</code>, and others to represent various states and types of invoices. These constants are used throughout the code to ensure consistency and avoid hardcoding values.</p> </li> <li> <p>Accessors and Mutators:    The model defines accessor and mutator methods to manipulate and format certain attributes. For example, <code>getCurrencyIdAttribute</code> returns the currency ID, and <code>setInvoiceDateAttribute</code> and <code>setDueDateAttribute</code> modify the format of date attributes when setting them.</p> </li> <li> <p>Custom Methods:    The model contains custom methods like <code>generateUniqueInvoiceId</code> to generate unique invoice IDs, <code>getStatusLabelAttribute</code> to provide a human-readable status label, and others for handling specific tasks related to invoices.</p> </li> <li> <p>Validation Rules and Messages:    The model defines validation rules and custom validation error messages for creating new invoices. These rules ensure that required fields are provided and certain constraints are met.</p> </li> <li> <p>Eloquent Query Scopes:    Eloquent query scopes added to the model to encapsulate common query logic. These scopes can be used to easily retrieve specific sets of invoices based on various conditions.</p> </li> <li> <p>Attributes and Appends:    The <code>$appends</code> array defines additional attributes that are not present in the database but are dynamically computed when the model is accessed. For example, the <code>status_label</code> attribute is computed based on the invoice's status.</p> </li> <li> <p>Getters and Setters:    The model defines getter and setter methods for certain attributes. For instance, <code>getCurrencyIdAttribute</code> retrieves the currency ID for an invoice, considering different scenarios.</p> </li> </ol> <p>Overall, the <code>Invoice</code> model class encapsulates the logic and behavior associated with invoices in the application. It handles relationships, attribute manipulation, validation rules, and custom methods related to invoices, making it a central point for interacting with invoice data in the database.</p>"},{"location":"Admin/Quotes/#quote-model","title":"Quote Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Carbon\\Carbon;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Support\\Str;\n\nclass Quote extends Model\n{\nuse HasFactory;\n\nconst SELECT_DISCOUNT_TYPE = 0;\n\nconst FIXED = 1;\n\nconst PERCENTAGE = 2;\n\nconst DISCOUNT_TYPE = [\nself::SELECT_DISCOUNT_TYPE =&gt; 'Select Discount Type',\nself::FIXED =&gt; 'Fixed',\nself::PERCENTAGE =&gt; 'Percentage',\n];\n\nconst DRAFT = 0;\n\nconst CONVERTED = 1;\n\nconst STATUS_ALL = 2;\n\nconst STATUS_ARR = [\nself::DRAFT =&gt; 'Draft',\nself::CONVERTED =&gt; 'Converted',\nself::STATUS_ALL =&gt; 'All',\n];\n\nconst MONTHLY = 1;\n\nconst QUARTERLY = 2;\n\nconst SEMIANNUALLY = 3;\n\nconst ANNUALLY = 4;\n\nconst RECURRING_ARR = [\nself::MONTHLY =&gt; 'Monthly',\nself::QUARTERLY =&gt; 'Quarterly',\nself::SEMIANNUALLY =&gt; 'Semi Annually',\nself::ANNUALLY =&gt; 'Annually',\n];\n\nprotected $with = ['quoteItems.product'];\n\n/**\n     * Validation rules\n     *\n     * @var array\n     */\npublic static $rules = [\n'client_id' =&gt; 'required',\n'quote_id' =&gt; 'required|unique:quotes,quote_id',\n'quote_date' =&gt; 'required',\n'due_date' =&gt; 'required',\n];\n\npublic static $messages = [\n'client_id.required' =&gt; 'The Client field is required.',\n'quote_date.required' =&gt; 'The Quote date field is required.',\n'due_date' =&gt; 'The Quote Due date field is required.',\n];\n\npublic $table = 'quotes';\n\npublic $appends = ['status_label'];\n\npublic $fillable = [\n'client_id',\n'quote_date',\n'due_date',\n'quote_id',\n'amount',\n'discount_type',\n'discount',\n'final_amount',\n'note',\n'term',\n'template_id',\n'status',\n];\n\nprotected $casts = [\n'client_id' =&gt; 'integer',\n'quote_date' =&gt; 'date',\n'due_date' =&gt; 'date',\n'quote_id' =&gt; 'string',\n'amount' =&gt; 'double',\n'discount_type' =&gt; 'integer',\n'discount' =&gt; 'double',\n'final_amount' =&gt; 'double',\n'note' =&gt; 'string',\n'term' =&gt; 'string',\n'template_id' =&gt; 'integer',\n'status' =&gt; 'integer',\n'recurring' =&gt; 'integer',\n];\n\npublic function getStatusLabelAttribute(): string\n{\nreturn self::STATUS_ARR[$this-&gt;status];\n}\n\n/**\n     * @return BelongsTo\n     */\npublic function client(): BelongsTo\n{\nreturn $this-&gt;belongsTo(Client::class, 'client_id', 'id');\n}\n\n/**\n     * @return HasMany\n     */\npublic function quoteItems(): HasMany\n{\nreturn $this-&gt;hasMany(QuoteItem::class);\n}\n\n/**\n     * @return string\n     */\npublic static function generateUniqueQuoteId(): string\n{\n$quoteId = mb_strtoupper(Str::random(6));\nwhile (true) {\n$isExist = self::whereQuoteId($quoteId)-&gt;exists();\nif ($isExist) {\nself::generateUniqueQuoteId();\n}\nbreak;\n}\n\nreturn $quoteId;\n}\n\n/**\n     * @return BelongsTo\n     */\npublic function invoiceTemplate(): BelongsTo\n{\nreturn $this-&gt;belongsTo(InvoiceSetting::class, 'template_id', 'id');\n}\n\n/**\n     * @param $value\n     */\npublic function setQuoteDateAttribute($value)\n{\n$this-&gt;attributes['quote_date'] = Carbon::createFromFormat(currentDateFormat(), $value)-&gt;translatedFormat('Y-m-d');\n}\n\n/**\n     * @param $value\n     */\npublic function setDueDateAttribute($value)\n{\n$this-&gt;attributes['due_date'] = Carbon::createFromFormat(currentDateFormat(), $value)-&gt;translatedFormat('Y-m-d');\n}\n}\n</code></pre> <p>The provided code defines an Eloquent model class named <code>Quote</code> within the <code>App\\Models</code> namespace. This model represents quotes within the application and provides methods and properties for interacting with quote data stored in the database. Below is an explanation of the key parts of this <code>Quote</code> model class:</p> <ol> <li> <p>Use of Traits and Relationships:</p> </li> <li> <p>The model class uses the <code>HasFactory</code> trait, which indicates that it can be used to create instances of the model using a factory.</p> </li> <li> <p>It defines several Eloquent relationships to other models, including <code>Client</code> (a client associated with the quote), <code>QuoteItem</code> (items within the quote), and <code>InvoiceSetting</code> (which appears to represent quote templates).</p> </li> <li> <p>Model Properties and Fillable Fields:</p> </li> <li> <p>The model defines a set of properties that correspond to the columns in the database table.</p> </li> <li> <p>The <code>$fillable</code> array specifies which fields can be mass-assigned when creating or updating instances of the model.</p> </li> <li> <p>Constants for Status and Other Values:</p> </li> <li> <p>The model includes constants like <code>DRAFT</code>, <code>CONVERTED</code>, <code>MONTHLY</code>, <code>QUARTERLY</code>, and others to represent various states and types of quotes. These constants are used throughout the code to ensure consistency and avoid hardcoding values.</p> </li> <li> <p>Accessors and Mutators:</p> </li> <li> <p>The model defines an accessor method named <code>getStatusLabelAttribute</code> to provide a human-readable status label for a quote based on its status constant.</p> </li> <li> <p>Validation Rules and Messages:</p> </li> <li> <p>The model defines validation rules and custom validation error messages for creating new quotes. These rules ensure that required fields are provided and certain constraints are met.</p> </li> <li> <p>Attributes and Appends:</p> </li> <li> <p>The <code>$appends</code> array defines additional attributes that are not present in the database but are dynamically computed when the model is accessed. For example, the <code>status_label</code> attribute is computed based on the quote's status.</p> </li> <li> <p>Custom Methods:</p> </li> <li> <p>The model contains custom methods like <code>generateUniqueQuoteId</code> to generate unique quote IDs and setters for <code>quote_date</code> and <code>due_date</code> attributes to modify their date format when setting them.</p> </li> <li> <p>Casting Attributes:</p> </li> <li> <p>The <code>$casts</code> array specifies the data types of certain attributes, such as integers, dates, and doubles, to ensure proper data handling.</p> </li> <li> <p>Eloquent Relationships:</p> </li> <li>The model defines relationships like <code>client()</code> and <code>quoteItems()</code> using Eloquent's <code>belongsTo</code> and <code>hasMany</code> methods. These relationships allow for convenient retrieval of related data.</li> </ol> <p>Overall, the <code>Quote</code> model class encapsulates the logic and behavior associated with quotes in the application. It handles relationships, attribute manipulation, validation rules, and custom methods related to quotes, making it a central point for interacting with quote data in the database.</p>"},{"location":"Admin/Quotes/#product-model","title":"Product Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Notifications\\Notifiable;\nuse Spatie\\MediaLibrary\\HasMedia;\nuse Spatie\\MediaLibrary\\InteractsWithMedia;\nuse Spatie\\MediaLibrary\\MediaCollections\\Models\\Media;\n\nclass Product extends Model implements HasMedia\n{\nuse HasFactory, Notifiable, InteractsWithMedia;\n\nprotected $table = 'products';\n\nprotected $fillable = ['name', 'code', 'category_id', 'unit_price', 'description'];\n\nprotected $casts = [\n'name' =&gt; 'string',\n'code' =&gt; 'string',\n'category_id' =&gt; 'integer',\n'unit_price' =&gt; 'double',\n'description' =&gt; 'string',\n];\n\nconst Image = 'product';\n\nprotected $appends = ['product_image'];\n\npublic static $rules = [\n'name' =&gt; 'required',\n'code' =&gt; 'required|alpha_num|min:3|max:6|unique:products,code',\n'category_id' =&gt; 'required',\n'unit_price' =&gt; 'required|numeric',\n];\n\npublic static $messages = [\n'code.required' =&gt; 'The product code field is required.',\n'code.size' =&gt; 'The product code must be 6 characters.',\n'code.unique' =&gt; 'The product code has already been taken.',\n];\n\n/**\n     * @return string\n     */\npublic function getProductImageAttribute(): string\n{\n/** @var Media $media */\n$media = $this-&gt;getMedia(self::Image)-&gt;first();\nif (! empty($media)) {\nreturn $media-&gt;getFullUrl();\n}\n\nreturn asset('images/default-product.jpg');\n}\n\npublic function category()\n{\nreturn $this-&gt;hasOne(Category::class, 'id', 'category_id');\n}\n}\n</code></pre> <p>The provided code defines an Eloquent model class named <code>Product</code> within the <code>App\\Models</code> namespace. This model represents products in the application and provides methods and properties for interacting with product data stored in the database. Below is an explanation of the key parts of this <code>Product</code> model class:</p> <ol> <li> <p>Use of Traits and Interfaces:</p> </li> <li> <p>The model class uses the <code>HasFactory</code>, <code>Notifiable</code>, <code>InteractsWithMedia</code> traits, and implements the <code>HasMedia</code> interface.</p> </li> <li>The <code>HasFactory</code> trait allows for easy creation of model instances using factories.</li> <li>The <code>Notifiable</code> trait is used for handling notifications.</li> <li> <p>The <code>InteractsWithMedia</code> trait and <code>HasMedia</code> interface are used for handling media files associated with the model.</p> </li> <li> <p>Model Properties and Fillable Fields:</p> </li> <li> <p>The model defines a set of properties that correspond to the columns in the database table.</p> </li> <li> <p>The <code>$fillable</code> array specifies which fields can be mass-assigned when creating or updating instances of the model.</p> </li> <li> <p>Constants:</p> </li> <li> <p>The model includes a constant named <code>Image</code>, which is used as a reference to the product images associated with this model.</p> </li> <li> <p>Accessors and Mutators:</p> </li> <li> <p>The model defines an accessor method named <code>getProductImageAttribute</code> to retrieve the URL of the product's image.</p> </li> <li> <p>This accessor checks if there is a media associated with the product and returns its URL. If no media is found, it returns a default image URL.</p> </li> <li> <p>Validation Rules and Messages:</p> </li> <li> <p>The model defines validation rules and custom validation error messages for creating new products. These rules ensure that required fields are provided and certain constraints are met, such as the uniqueness of the product code.</p> </li> <li> <p>Attributes and Appends:</p> </li> <li> <p>The <code>$appends</code> array defines additional attributes that are not present in the database but are dynamically computed when the model is accessed. In this case, it includes the <code>product_image</code> attribute.</p> </li> <li> <p>Eloquent Relationships:</p> </li> <li>The model defines a relationship with the <code>Category</code> model using the <code>hasOne</code> method. This relationship represents the category to which a product belongs.</li> </ol> <p>Overall, the <code>Product</code> model class encapsulates the logic and behavior associated with products in the application. It handles relationships, attribute manipulation, validation rules, and custom methods related to products, making it a central point for interacting with product data in the database. Additionally, it supports media management for product images using the Spatie Media Library package.</p>"},{"location":"Admin/Quotes/#invoice-item-model","title":"Invoice Item Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\n\nclass InvoiceItem extends Model\n{\nuse HasFactory;\n\n/**\n     * Validation rules\n     *\n     * @var array\n     */\npublic static $rules = [\n'product_id' =&gt; 'required',\n'quantity' =&gt; 'required|regex:/^\\d*(\\.\\d{1,2})?$/',\n'price' =&gt; 'required|regex:/^\\d+(\\.\\d{1,2})?$/',\n];\n\nprotected $table = 'invoice_items';\n\npublic $fillable = [\n'invoice_id',\n'product_id',\n'product_name',\n'quantity',\n'price',\n'total',\n];\n\nprotected $casts = [\n'invoice_id' =&gt; 'integer',\n'product_id' =&gt; 'integer',\n'product_name' =&gt; 'string',\n'quantity' =&gt; 'double',\n'price' =&gt; 'double',\n'total' =&gt; 'double',\n];\n\n/**\n     * @return BelongsTo\n     */\npublic function product(): BelongsTo\n{\nreturn $this-&gt;belongsTo(Product::class);\n}\n\n/**\n     * @return HasMany\n     */\npublic function invoiceItemTax(): HasMany\n{\nreturn $this-&gt;hasMany(InvoiceItemTax::class);\n}\n}\n</code></pre> <p>The provided code defines an Eloquent model class named <code>InvoiceItem</code> within the <code>App\\Models</code> namespace. This model represents individual line items on an invoice and provides methods and properties for interacting with invoice item data stored in the database. Below is an explanation of the key parts of this <code>InvoiceItem</code> model class:</p> <ol> <li> <p>Use of Traits and Interfaces:</p> </li> <li> <p>The model class uses the <code>HasFactory</code> trait.</p> </li> <li> <p>Model Properties and Fillable Fields:</p> </li> <li> <p>The model defines a set of properties that correspond to the columns in the database table.</p> </li> <li> <p>The <code>$fillable</code> array specifies which fields can be mass-assigned when creating or updating instances of the model.</p> </li> <li> <p>Validation Rules:</p> </li> <li> <p>The model defines validation rules for creating new invoice items. These rules ensure that required fields, such as <code>product_id</code>, <code>quantity</code>, and <code>price</code>, are provided and that these fields meet certain regex-based constraints.</p> </li> <li> <p>Eloquent Relationships:</p> </li> <li> <p>The model defines two Eloquent relationships:</p> <ul> <li>BelongsTo Relationship with <code>Product</code>: This relationship represents the product associated with the invoice item. It is defined using the <code>belongsTo</code> method.</li> <li>HasMany Relationship with <code>InvoiceItemTax</code>: This relationship represents the taxes associated with the invoice item. It is defined using the <code>hasMany</code> method.</li> </ul> </li> <li> <p>Table Name:</p> </li> <li> <p>The <code>$table</code> property specifies the name of the database table associated with this model, which is set to <code>'invoice_items'</code>.</p> </li> <li> <p>Casting Data Types:</p> </li> <li> <p>The <code>$casts</code> property specifies how certain attributes should be cast to different data types. For example, it casts <code>quantity</code>, <code>price</code>, and <code>total</code> to the <code>double</code> data type.</p> </li> <li> <p>Method Annotations:</p> </li> <li>The class includes method annotations for methods like <code>newModelQuery()</code>, <code>newQuery()</code>, and <code>query()</code>. These are used for building queries on this model.</li> </ol> <p>Overall, the <code>InvoiceItem</code> model class encapsulates the logic and behavior associated with individual line items on an invoice. It defines relationships with other models, validation rules, and data casting to facilitate the management of invoice item data in the application's database.</p>"},{"location":"Admin/Quotes/#view","title":"View","text":""},{"location":"Admin/Quotes/#the-livewire-quote-table","title":"The livewire: Quote table","text":"<p>The livewire of the 'Quote table' located in app&gt;http&gt;livewire&gt;QuoteTable.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Livewire;\n\nuse App\\Models\\Quote;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Rappasoft\\LaravelLivewireTables\\Views\\Column;\n\nclass QuoteTable extends LivewireTableComponent\n{\n    protected $model = Quote::class;\n    protected string $tableName = 'quotes';\n    public $showButtonOnHeader = true;\n    public $buttonComponent = 'quotes.components.add-button';\n    public bool $showFilterOnHeader = true;\n    public $filterComponent = ['quotes.components.filter', Quote::STATUS_ARR];\n    public $listeners = ['changeQuoteStatusFilter', 'resetPageTable'];\n    public $status = Quote::STATUS_ALL;\n\n    protected $queryString = ['status'];\n\n    public function configure(): void\n    {\n        $this-&gt;setPrimaryKey('id');\n        $this-&gt;setDefaultSort('created_at', 'desc');\n        $this-&gt;setQueryStringStatus(false);\n\n        $this-&gt;setThAttributes(function (Column $column) {\n            if ($column-&gt;isField('final_amount')) {\n                return [\n                    'class' =&gt; 'd-flex justify-content-end',\n                ];\n            }\n\n            return [];\n        });\n\n    }\n\n    public function columns(): array\n    {\n        return [\n            Column::make(__('messages.quote.client'), 'client.user.first_name')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;view('quotes.components.client-name'),\n            Column::make('quote_id', 'quote_id')\n                -&gt;sortable()\n                -&gt;searchable()-&gt;hideIf(1),\n            Column::make('Last Name', 'client.user.last_name')\n                -&gt;sortable()\n                -&gt;searchable()-&gt;hideIf(1),\n            Column::make(__('messages.quote.quote_date'), 'quote_date')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('quotes.components.quote-due-date')\n                        -&gt;withValue([\n                            'quote-date' =&gt; $row-&gt;quote_date,\n                        ]);\n                }),\n            Column::make(__('messages.quote.due_date'), 'due_date')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('quotes.components.quote-due-date')\n                        -&gt;withValue([\n                            'due-date' =&gt; $row-&gt;due_date,\n                        ]);\n                }),\n            Column::make(__('messages.quote.amount'), 'final_amount')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;view('quotes.components.amount'),\n            Column::make(__('messages.common.status'), 'status')\n                -&gt;searchable()\n                -&gt;view('quotes.components.quote-status'),\n            Column::make(__('messages.common.action'), 'id')\n                -&gt;view('livewire.quote-action-button'),\n        ];\n    }\n\n    /**\n     * @return Builder\n     */\n    public function builder(): Builder\n    {\n        $query = Quote::with(['client.user.media'])-&gt;select('quotes.*');\n\n        $query-&gt;when($this-&gt;status != Quote::STATUS_ALL, function ($query) {\n            return $query-&gt;where('quotes.status', $this-&gt;status);\n        });\n\n        return $query;\n    }\n\n    /**\n     * @param $status\n     */\n    public function changeQuoteStatusFilter($status)\n    {\n        $this-&gt;status = $status;\n        $this-&gt;setBuilder($this-&gt;builder());\n    }\n}\n</code></pre> <p>This PHP code defines a class called \"QuoteTable\" that is part of a Laravel Livewire component. Here's an explanation of what this code does:</p> <ol> <li> <p>Namespace and Use Statements:</p> </li> <li> <p>The code specifies the namespace for this class within the \"App\\Http\\Livewire\" namespace.</p> </li> <li> <p>It imports the necessary classes and dependencies like \"Quote\" model, \"Builder,\" and \"Column\" from various Laravel packages.</p> </li> <li> <p>Class Definition:</p> </li> <li> <p>The \"QuoteTable\" class extends another class called \"LivewireTableComponent,\" indicating that it's a custom Livewire component for displaying a table of quotes.</p> </li> <li> <p>Property Definitions:</p> </li> <li> <p>The class defines several properties:</p> <ul> <li><code>$model</code>: Specifies the Eloquent model class to use for retrieving data, in this case, the \"Quote\" model.</li> <li><code>$tableName</code>: Sets the name for the table (presumably in the database) as 'quotes.'</li> <li><code>$showButtonOnHeader</code> and <code>$buttonComponent</code>: Determine whether to display a button in the table header and the associated button component.</li> <li><code>$showFilterOnHeader</code> and <code>$filterComponent</code>: Indicate whether to display a filter input in the table header and the associated filter component.</li> <li><code>$listeners</code>: Specifies the Livewire listeners that this component responds to.</li> <li><code>$status</code>: Represents the current status filter for the quotes.</li> </ul> </li> <li> <p>Protected Property Definitions:</p> </li> <li> <p><code>$queryString</code>: Defines the query string parameters to include in the URL.</p> </li> <li> <p>Public Methods:</p> </li> <li><code>configure()</code>: Configures various aspects of the table, such as primary key, default sorting, and query string handling.</li> <li><code>columns()</code>: Defines an array of table columns, each column represented by a \"Column\" instance. These columns specify the data to display, whether they are sortable, searchable, and how to format the data.</li> <li><code>builder()</code>: Creates a query builder instance for fetching data from the \"Quote\" model's database table. It includes conditions based on the \"status\" filter.</li> <li><code>changeQuoteStatusFilter($status)</code>: Updates the \"status\" filter property when a Livewire event is triggered, and sets the builder to include the new filter criteria.</li> </ol>"},{"location":"Admin/Quotes/#list-of-quotes","title":"List of Quotes","text":"<p>The list of quotes view is located in : resources\\views\\quotes\\index.blade.php.</p> <pre><code>@extends('layouts.app')\n@section('title')\n    {{__('messages.quotes')}}\n@endsection\n@section('content')\n&lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-flex flex-column \"&gt;\n            @include('flash::message')\n            &lt;livewire:quote-table/&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    @include('quotes.templates.templates')\n    {{ Form::hidden('currency', getCurrencySymbol(),['id' =&gt; 'currency']) }}\n    {{ Form::hidden('status',  $status,['id' =&gt; 'status']) }}\n@endsection\n</code></pre> <p>This Blade template file, named \"index.blade.php,\" is used in a Laravel application to define the content and layout for a particular page. Here's an explanation of what this code does:</p> <ol> <li> <p>Extends Layout:</p> </li> <li> <p>The template extends the \"layouts.app\" layout, indicating that it should inherit the structure and content defined in the \"layouts.app\" Blade layout file.</p> </li> <li> <p>Section: Title</p> </li> <li> <p>Sets the page's title to the translated string \"messages.quotes\" using the <code>@section</code> directive. The actual translation depends on the localization settings of the application.</p> </li> <li> <p>Section: Content</p> </li> <li> <p>Defines the main content section of the page using the <code>@section</code> directive.</p> </li> <li> <p>Encloses the content in a <code>&lt;div&gt;</code> element with the class \"container-fluid,\" which is often used for creating a responsive container for page content.</p> </li> <li> <p>Flash Messages:</p> </li> <li> <p>Includes a partial view that displays flash messages, typically used for showing temporary notifications or alerts. The <code>@include</code> directive is used to include the view named \"flash::message.\"</p> </li> <li> <p>Livewire Component:</p> </li> <li> <p>Embeds a Livewire component named \"quote-table\" using the <code>livewire:quote-table</code> directive. This component is responsible for displaying a table of quotes on the page.</p> </li> <li> <p>Additional Includes:</p> </li> <li> <p>Includes another Blade view named \"quotes.templates.templates.\" This inclusion load additional templates.</p> </li> <li> <p>Hidden Form Fields:</p> </li> <li>Adds two hidden form fields using Laravel's <code>Form::hidden</code> method.</li> <li>The first hidden field has the name \"currency\" and its value is set to the result of the \"getCurrencySymbol()\" function. The field also has an \"id\" attribute set to \"currency.\"</li> <li>The second hidden field has the name \"status,\" and its value is set to the value of the \"$status\" variable. This field also has an \"id\" attribute set to \"status.\"      T</li> </ol>"},{"location":"Admin/Quotes/#new-quote","title":"New quote","text":"<p>The view of the 'New Quote' located in resources&gt;views&gt;quotes&gt;create.blade.php.</p> <pre><code>@extends('layouts.app')\n@section('title')\n    {{ __('messages.quote.new_quote') }}\n@endsection\n@section('header_toolbar')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-flex align-items-center justify-content-between mb-5\"&gt;\n            &lt;h1 class=\"mb-0\"&gt;@yield('title')&lt;/h1&gt;\n            &lt;div class=\"text-end\"&gt;\n                &lt;a class=\"btn btn-outline-primary float-end\"\n                    href=\"{{ url()-&gt;previous() }}\"&gt;{{ __('messages.common.back') }}&lt;/a&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n@endsection\n@section('content')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-flex flex-column\"&gt;\n            &lt;div class=\"row\"&gt;\n                &lt;div class=\"col-12\"&gt;\n                    @include('layouts.errors')\n                    &lt;div class=\"alert alert-danger display-none hide\" id=\"validationErrorsBox\"&gt;&lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"card\"&gt;\n                &lt;div class=\"card-body\"&gt;\n                    {{ Form::open(['route' =&gt; 'quotes.store', 'id' =&gt; 'quoteForm', 'name' =&gt; 'quoteForm']) }}\n                    @include('quotes.fields')\n                    {{ Form::close() }}\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    @include('quotes.templates.templates')\n    {{ Form::hidden('clients',json_encode($clients, true),['id' =&gt; 'clients']) }}\n    {{ Form::hidden('products',json_encode($associateProducts, true),['id' =&gt; 'products']) }}\n    {{ Form::hidden('quote_note',isset($quote-&gt;note) ,['id' =&gt; 'quoteNote']) }}\n    {{ Form::hidden('quote_term',isset($quote-&gt;term) ,['id' =&gt; 'quoteTerm']) }}\n    {{ Form::hidden('quote_recurring',isset($quote-&gt;recurring) ,['id' =&gt; 'quoteRecurring']) }}\n    {{ Form::hidden('thousand_separator',getSettingValue('thousand_separator') ,['id' =&gt; 'thousandSeparator']) }}\n    {{ Form::hidden('decimal_separator',isset($quote-&gt;recurring) ,['id' =&gt; 'decimalSeparator']) }}\n\n@endsection\n</code></pre> <p>This Blade template, used for creating a new quote in our Laravel-based web application, defines the layout and content for the \"create quote\" page. Let's break down what each section of the code does:</p> <ol> <li> <p>Extends Layout:</p> </li> <li> <p>The template extends the \"layouts.app\" layout, inheriting its structure and content.</p> </li> <li> <p>Section: Title</p> </li> <li> <p>Sets the page title to the translated string \"messages.quote.new_quote.\" The actual translation will depend on the language settings of the application.</p> </li> <li> <p>Section: Header Toolbar</p> </li> <li> <p>Defines a container with the class \"container-fluid\" for the page header and toolbar.</p> </li> <li> <p>Within this container, it creates a flexible header with a title (the title is dynamically obtained from the \"title\" section) and a \"Back\" button. The button links to the previous page using <code>url()-&gt;previous()</code>. The button's text is translated using the \"messages.common.back\" key.</p> </li> <li> <p>Section: Content</p> </li> <li> <p>Defines the main content section of the page.</p> </li> <li>Inside a container, it includes a section for displaying validation errors (if any) using <code>@include('layouts.errors')</code>. Additionally, it sets up a hidden alert element with the ID \"validationErrorsBox.\"</li> <li>A card element is used to enclose the form for creating a new quote.</li> <li>Within the card's body, it opens a form using <code>Form::open</code>, specifying the form's route as 'quotes.store' and setting various attributes like 'id' and 'name' for the form.</li> <li>It includes a Blade view named 'quotes.fields,' presumably for rendering form fields related to creating a quote.</li> <li> <p>The form is closed using <code>{{ Form::close() }}</code>.</p> </li> <li> <p>Additional Includes</p> </li> <li>Includes another Blade view named 'quotes.templates.templates.' This inclusion might load additional templates or content specific to the \"quotes\" section of the application.</li> <li>Defines several hidden form fields using <code>Form::hidden</code>, each with a specific purpose:<ul> <li>'clients' and 'products' are populated with JSON-encoded data from the '\\(clients' and '\\)associateProducts' variables, respectively.</li> <li>'quote_note,' 'quote_term,' and 'quote_recurring' are populated based on the presence of corresponding data in the '$quote' variable.</li> <li>'thousand_separator' and 'decimal_separator' are populated with values retrieved from application settings.</li> </ul> </li> </ol> <p>In summary, this Blade template sets up the layout and content for the \"create quote\" page. It includes a header with a title and a \"Back\" button, a form for creating a new quote, and hidden form fields with various data for use in the form or elsewhere in the page. The template also includes error handling for form validation errors.</p>"},{"location":"Admin/Quotes/#edit-quote","title":"Edit quote","text":"<p>The view of the 'Edit quote' located in resources&gt;views&gt;quotes&gt;edit.blade.php.</p> <pre><code>@extends('layouts.app')\n@section('title')\n    {{ __('messages.quote.edit_quote') }}\n@endsection\n@section('header_toolbar')\n@endsection\n@section('content')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-flex flex-column\"&gt;\n            &lt;div class=\"col-12\"&gt;\n                &lt;div class=\"d-flex justify-content-between align-items-end mb-5\"&gt;\n                    &lt;h1&gt;@yield('title')&lt;/h1&gt;\n                    &lt;a class=\"btn btn-outline-primary float-end\"\n                       href=\"{{ url()-&gt;previous() }}\"&gt;{{ __('messages.common.back') }}&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-12\"&gt;\n                    @include('layouts.errors')\n                &lt;/div&gt;\n                &lt;div class=\"card\"&gt;\n                    &lt;div class=\"card-body\"&gt;\n                        {{ Form::model($quote, ['route' =&gt; ['quotes.update', $quote-&gt;id], 'id' =&gt; 'quoteEditForm']) }}\n                        @include('quotes.edit_fields')\n                        {{ Form::close() }}\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    @include('quotes.templates.templates')\n    {{ Form::hidden('quote_update_url',route('quotes.update', ['quote' =&gt; $quote-&gt;id]),['id' =&gt; 'quoteUpdateUrl']) }}\n    {{ Form::hidden('quote_url',route('quotes.index'),['id' =&gt; 'quoteUrl']) }}\n    {{ Form::hidden('quote_id',$quote-&gt;id,['id' =&gt; 'quoteId']) }}\n    {{ Form::hidden('clients',json_encode($clients, true),['id' =&gt; 'clients']) }}\n    {{ Form::hidden('products',json_encode($associateProducts, true),['id' =&gt; 'products']) }}\n    {{ Form::hidden('unique_id',$quote-&gt;quoteItems-&gt;count() + 1 ,['id' =&gt; 'uniqueId']) }}\n    {{ Form::hidden('quote_note',isset($quote-&gt;note) ? true : false ,['id' =&gt; 'quoteNoteData']) }}\n    {{ Form::hidden('quote_term',isset($quote-&gt;term) ? true : false ,['id' =&gt; 'quoteTermData']) }}\n    {{ Form::hidden('quote_recurring',isset($quote-&gt;recurring) ? true : false ,['id' =&gt; 'invoiceRecurring']) }}\n    {{ Form::hidden('thousand_separator',getSettingValue('thousand_separator') ,['id' =&gt; 'thousandSeparator']) }}\n    {{ Form::hidden('decimal_separator',getSettingValue('decimal_separator') ,['id' =&gt; 'decimalSeparator']) }}\n    {{ Form::hidden('edit_date',$quote-&gt;quote_date ,['id' =&gt; 'editQuoteDateAdmin']) }}\n    {{ Form::hidden('edit_due_date',$quote-&gt;due_date ,['id' =&gt; 'editQuoteDueDate']) }}\n@endsection\n</code></pre> <p>This Blade template, is used for editing an existing quote in our application, defines the layout and content for the \"edit quote\" page. Let's break down what each section of the code does:</p> <ol> <li> <p>Extends Layout:</p> </li> <li> <p>The template extends the \"layouts.app\" layout, inheriting its structure and content.</p> </li> <li> <p>Section: Title</p> </li> <li> <p>Sets the page title to the translated string \"messages.quote.edit_quote.\" The actual translation will depend on the localization settings of the application.</p> </li> <li> <p>Section: Header Toolbar (Empty)</p> </li> <li> <p>This section is empty, indicating that no additional content or elements are included in the page's header toolbar. It leaves room for customization if needed.</p> </li> <li> <p>Section: Content</p> </li> <li> <p>Defines the main content section of the page within a container.</p> </li> <li> <p>Inside a container, it includes a section for displaying the page title and a \"Back\" button.</p> <ul> <li>The page title is obtained from the \"title\" section (i.e., \"messages.quote.edit_quote\").</li> <li>The \"Back\" button links to the previous page using <code>url()-&gt;previous()</code> and displays the translated text \"messages.common.back.\"</li> </ul> </li> <li> <p>Error Handling</p> </li> <li> <p>Includes a partial view named 'layouts.errors,' presumably for displaying validation errors if they occur during form submission.</p> </li> <li> <p>Form for Editing Quote</p> </li> <li> <p>Encloses a form using <code>Form::model</code> to populate it with data from the \"$quote\" variable. The form's route for submission is set to 'quotes.update,' and the \"id\" attribute is set to 'quoteEditForm.'</p> </li> <li>It includes a Blade view named 'quotes.edit_fields,' for rendering form fields related to editing a quote.</li> <li> <p>The form is closed using <code>{{ Form::close() }}</code>.</p> </li> <li> <p>Additional Includes</p> </li> <li>Includes another Blade view named 'quotes.templates.templates.' This inclusion load additional templates.</li> <li>Defines several hidden form fields with various purposes, including storing data related to the quote being edited, settings, and other information. For example:<ul> <li>'quote_update_url' and 'quote_url' store URLs for updating and viewing quotes.</li> <li>'quote_id' stores the ID of the quote.</li> <li>'unique_id' is used for generating unique identifiers.</li> <li>'quote_note,' 'quote_term,' and 'quote_recurring' store boolean values based on the presence of corresponding data in the \"$quote\" variable.</li> <li>'thousand_separator' and 'decimal_separator' store settings values for formatting numbers.</li> <li>'edit_date' and 'edit_due_date' store date values related to the quote.</li> </ul> </li> </ol> <p>In summary, this Blade template sets up the layout and content for the \"edit quote\" page. It includes a form for editing quote details, handles error display, and includes hidden form fields to store various data related to the quote and application settings. The template allows for flexibility and customization in handling quote editing operations. The edit_fields product view:</p> <pre><code>&lt;div class=\"row\"&gt;\n    &lt;div class=\"col-lg-4 col-sm-12 mb-5\"&gt;\n        {{ Form::label('client_id', __('messages.quote.client').(':'),['class' =&gt; 'form-label required fs-6 mb-3']) }}\n        {{ Form::select('client_id', $clients, $client_id ?? null, ['class' =&gt; 'form-select io-select2', 'id' =&gt; 'client_id', 'placeholder' =&gt;__('messages.quote.client'),'required', 'data-control' =&gt;'select2']) }}\n    &lt;/div&gt;\n    &lt;div class=\"col-lg-4 col-sm-12 mb-5\"&gt;\n        {{ Form::label('quote_id', __('messages.quote.quote').(' #'),['class' =&gt; 'form-label fs-6 mb-3']) }}\n        &lt;span class=\"text-gray-500\"&gt;{{ $quote-&gt;quote_id }}&lt;/span&gt;\n        &lt;input type=\"hidden\" id=\"quoteId\" value=\"{{ $quote-&gt;quote_id }}\" name=\"quote_id\"/&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-lg-4 col-sm-12\"&gt;\n        &lt;div class=\"mb-5\"&gt;\n            {{ Form::label('status', __('messages.common.status').(':'), ['class' =&gt; 'form-label required mb-3']) }}\n            {{ Form::select('status', $statusArr, isset($quote) ? $quote-&gt;status : null, ['class' =&gt; 'form-select', 'id' =&gt; 'status','required','data-control' =&gt;'select2']) }}\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-lg-4 col-sm-12 mb-5\"&gt;\n        {{ Form::label('quote_date', __('messages.quote.quote_date').(':'),['class' =&gt; 'form-label required mb-3']) }}\n        {{ Form::text('quote_date',null ,['class' =&gt; 'form-select', 'id' =&gt; 'editQuoteDate', 'autocomplete' =&gt; 'off','required']) }}\n    &lt;/div&gt;\n    &lt;div class=\"mb-5 col-lg-4 col-sm-12\"&gt;\n        {{ Form::label('due_date', __('messages.quote.due_date').(':'),['class' =&gt; 'form-label required mb-3']) }}\n        {{ Form::text('due_date', null, ['class' =&gt; 'form-select', 'id' =&gt; 'editQuoteDueDate', 'autocomplete' =&gt; 'off','required']) }}\n    &lt;/div&gt;\n    &lt;div class=\"mb-5 col-lg-4 col-sm-12\"&gt;\n        {{ Form::label('templateId', __('messages.setting.invoice_template').(':'),['class' =&gt; 'form-label mb-3']) }}\n        {{ Form::select('template_id', $template,isset($quote) ? $quote-&gt;template_id:null, ['class' =&gt; 'form-select', 'id' =&gt; 'templateId','required', 'data-control' =&gt;'select2']) }}\n    &lt;/div&gt;\n    &lt;div class=\"mt-5\"&gt;\n        &lt;div class=\"col-12 text-end mb-lg-10 mb-6\"&gt;\n            &lt;button type=\"button\" class=\"btn btn-primary text-start\"\n                    id=\"addQuoteItem\"&gt; {{ __('messages.invoice.add') }}&lt;/button&gt;\n        &lt;/div&gt;\n        &lt;div class=\"table-responsive\"&gt;\n            &lt;table class=\"table table-striped box-shadow-none mt-4\" id=\"billTbl\"&gt;\n                &lt;thead&gt;\n                &lt;tr class=\"border-bottom fs-7 fw-bolder text-gray-700 text-uppercase\"&gt;\n                    &lt;th scope=\"col\"&gt;#&lt;/th&gt;\n                    &lt;th scope=\"col\" class=\"required\"&gt;{{ __('messages.product.product') }}&lt;/th&gt;\n                    &lt;th scope=\"col\" class=\"required\"&gt;{{ __('messages.invoice.qty') }}&lt;/th&gt;\n                    &lt;th scope=\"col\" class=\"required\"&gt;{{ __('messages.product.unit_price') }}&lt;/th&gt;\n                    &lt;th scope=\"col\" class=\"required\"&gt;{{ __('messages.invoice.amount') }}&lt;/th&gt;\n                    &lt;th scope=\"col\" class=\"text-end\"&gt;{{ __('messages.common.action') }}&lt;/th&gt;\n                &lt;/tr&gt;\n                &lt;/thead&gt;\n                &lt;tbody class=\"quote-item-container\"&gt;\n                @php\n                    $i = 1;\n                @endphp\n                @foreach($quote-&gt;quoteItems as $quoteItem)\n                    &lt;tr class=\"tax-tr\"&gt;\n                        &lt;td class=\"text-center item-number align-center\"&gt;{{ $i++ }}&lt;/td&gt;\n                        &lt;td class=\"table__item-desc w-25\"&gt;\n                            {{ Form::select('product_id[]', $products, isset($quoteItem-&gt;product_id)?$quoteItem-&gt;product_id:$quoteItem-&gt;product_name??[], ['class' =&gt; 'form-select productId product-quote io-select2', 'required', 'placeholder'=&gt;'Select Product or Enter free text', 'data-control' =&gt; 'select2']) }}\n                            {{ Form::hidden('id[]', $quoteItem-&gt;id) }}\n                        &lt;/td&gt;\n                        &lt;td class=\"table__qty\"&gt;\n                            {{ Form::number('quantity[]', $quoteItem-&gt;quantity, ['class' =&gt; 'form-control qty-quote' ,'id'=&gt;'qty','required', 'type' =&gt; 'number', \"min\" =&gt; 1,'oninput'=&gt;\"validity.valid||(value=value.replace(/\\D+/g, ''))\"]) }}\n                        &lt;/td&gt;\n                        &lt;td&gt;\n                            {{ Form::number('price[]', $quoteItem-&gt;price, ['class' =&gt; 'form-control price-input price-quote','oninput'=&gt;\"validity.valid||(value=value.replace(/[e\\+\\-]/gi,''))\",'min'=&gt;'0','step'=&gt;'.01','required','onKeyPress'=&gt;'if(this.value.length==8) return false;']) }}\n                        &lt;/td&gt;\n                        &lt;td class=\"quote-item-total pt-8 text-nowrap\"&gt;\n                            {{ number_format($quoteItem-&gt;total, 2) }}\n                        &lt;/td&gt;\n                        &lt;td class=\"text-end\"&gt;\n                            &lt;button type=\"button\" title=\"Delete\"\n                                    class=\"btn btn-icon fs-3 text-danger btn-active-color-danger delete-quote-item\"&gt;\n                                &lt;i class=\"fa-solid fa-trash\"&gt;&lt;/i&gt;\n                            &lt;/button&gt;\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                @endforeach\n                &lt;/tbody&gt;\n            &lt;/table&gt;\n        &lt;/div&gt;\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"col-lg-7 col-sm-12 mt-2 mt-lg-0 align-right-for-full-screen\"&gt;\n                &lt;div class=\"mb-2 col-xl-6 col-lg-10 col-sm-12 float-right\"&gt;\n                    {{ Form::label('discount', __('messages.invoice.discount').(':'), ['class' =&gt; 'form-label mb-1']) }}\n                    &lt;div class=\"input-group\"&gt;\n                        {{ Form::number('discount',  isset($quote) ? $quote-&gt;discount : 0, ['id'=&gt;'discount','class' =&gt; 'form-control ','oninput'=&gt;\"validity.valid||(value=value.replace(/[e\\+\\-]/gi,''))\",'min'=&gt;'0','value'=&gt;'0','step'=&gt;'.01','pattern'=&gt;\"^\\d*(\\.\\d{0,2})?$\"]) }}\n                        &lt;div class=\"input-group-append\" style=\"width: 210px !important;\"&gt;\n                            {{ Form::select('discount_type', $discount_type, isset($quote) ? $quote-&gt;discount_type : 0, ['class' =&gt;'form-select', 'id' =&gt; 'discountType', 'data-control' =&gt;'select2']) }}\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-xxl-3 col-lg-5 col-md-6 ms-md-auto mt-4 mb-lg-10 mb-6\"&gt;\n                &lt;div class=\"border-top\"&gt;\n                    &lt;table class=\"table table-borderless box-shadow-none mb-0 mt-5\"&gt;\n                        &lt;tbody&gt;\n                        &lt;tr&gt;\n                            &lt;td class=\"ps-0\"&gt;{{ __('messages.invoice.sub_total').(':') }}&lt;/td&gt;\n                            &lt;td class=\"text-gray-900 text-end pe-0\"&gt;\n                                &lt;span&gt;{{ getCurrencySymbol()  }}&lt;/span&gt; &lt;span id=\"quoteTotal\" class=\"price\"&gt;\n                                    {{ isset($quote) ? number_format($quote-&gt;amount,2) : 0 }}\n                            &lt;/span&gt;\n                            &lt;/td&gt;\n                        &lt;/tr&gt;\n                        &lt;tr&gt;\n                            &lt;td class=\"ps-0\"&gt;{{ __('messages.invoice.discount').(':') }}&lt;/td&gt;\n                            &lt;td class=\"text-gray-900 text-end pe-0\"&gt;\n                                &lt;span&gt;{{ getCurrencySymbol()  }}&lt;/span&gt; &lt;span id=\"quoteDiscountAmount\"&gt;\n                                @if(isset($quote) &amp;&amp; $quote-&gt;discount_type == \\App\\Models\\Invoice::FIXED)\n                                        {{ $quote-&gt;discount ?? 0 }}\n                                    @else\n                                        {{ isset($quote) ? number_format($quote-&gt;amount * $quote-&gt;discount / 100,2) : 0 }}\n                                    @endif\n                            &lt;/span&gt;\n                            &lt;/td&gt;\n                        &lt;/tr&gt;\n                        &lt;tr&gt;\n                            &lt;td class=\"ps-0\"&gt;{{ __('messages.invoice.total').(':') }}&lt;/td&gt;\n                            &lt;td class=\"text-gray-900 text-end pe-0\"&gt;\n                                &lt;span&gt;{{ getCurrencySymbol() }}&lt;/span&gt; &lt;span id=\"quoteFinalAmount\"&gt;\n                                    {{ isset($quote) ? number_format($quote-&gt;amount - ($quote-&gt;amount * $quote-&gt;discount / 100),2) : 0 }}\n                                &lt;/span&gt;\n                            &lt;/td&gt;\n                        &lt;/tr&gt;\n                        &lt;/tbody&gt;\n                    &lt;/table&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;br&gt;\n        &lt;div class=\"row justify-content-left\"&gt;\n            &lt;div class=\"col-lg-12 col-md-12 col-sm-12 end justify-content-left mb-sm-0 mb-5\"&gt;\n                &lt;button type=\"button\" class=\"btn btn-primary note\" id=\"quoteAddNote\"&gt;\n                    &lt;i class=\"fas fa-plus\"&gt;&lt;/i&gt; {{ __('messages.invoice.add_note_term') }}\n                &lt;/button&gt;\n                &lt;button type=\"button\" class=\"btn btn-danger note\" id=\"quoteRemoveNote\"&gt;\n                    &lt;i class=\"fas fa-minus\"&gt;&lt;/i&gt; {{ __('messages.invoice.remove_note_term') }}\n                &lt;/button&gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-lg-6 mb-0 mb-sm-5 mt-0 mt-sm-5\" id=\"quoteNoteAdd\"&gt;\n                {{ Form::label('note', __('messages.invoice.note').(':'),['class' =&gt; 'form-label fs-6 mb-3']) }}\n                {{ Form::textarea('note',isset($quote) ? $quote-&gt;note : null,['class'=&gt;'form-control','id'=&gt;'quoteNote','rows'=&gt;'5']) }}\n            &lt;/div&gt;\n            &lt;div class=\"col-lg-6 mt-5 mb-5\" id=\"quoteTermRemove\"&gt;\n                {{ Form::label('term', __('messages.invoice.terms').(':'),['class' =&gt; 'form-label fs-6 mb-3']) }}\n                {{ Form::textarea('term',isset($quote) ? $quote-&gt;term : null,['class'=&gt;'form-control','id'=&gt;'quoteTerm','rows'=&gt;'5']) }}\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;!-- Total Amount Field --&gt;\n{{ Form::hidden('amount', isset($quote) ? number_format($quote-&gt;amount - ($quote-&gt;amount * $quote-&gt;discount / 100),2) : 0, ['class' =&gt; 'form-control', 'id' =&gt; 'quoteTotalAmount']) }}\n&lt;!-- Submit Field --&gt;\n&lt;div class=\"float-end\"&gt;\n    &lt;div class=\"form-group col-sm-12\"&gt;\n        &lt;button type=\"button\" name=\"save\" class=\"btn btn-primary mx-3\" id=\"editSaveQuote\" data-status=\"0\"\n                value=\"0\"&gt;{{ __('messages.common.save') }}\n        &lt;/button&gt;\n        &lt;a href=\"{{ route('invoices.index') }}\"\n           class=\"btn btn-secondary btn-active-light-primary\"&gt;{{ __('messages.common.cancel') }}&lt;/a&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>This HTML code represents a form used for editing quote details in our application. It contains various form fields and elements for updating quote information. Let's break down the structure and purpose of this code:</p> <ol> <li> <p>Row and Columns Structure:</p> </li> <li> <p>The form is organized within a Bootstrap-based grid system. It uses rows and columns to structure the content on the page.</p> </li> <li> <p>Client Selection (col-lg-4):</p> </li> <li> <p>A column with a label and a select input for choosing a client. The label includes the translation for \"messages.quote.client.\"</p> </li> <li>A select input populated with client options from the <code>$clients</code> variable. It has a placeholder, 'Select Client,' and is required.</li> <li> <p>Another column for displaying the quote ID, followed by a hidden input storing the quote ID.</p> </li> <li> <p>Status Selection (col-lg-4):</p> </li> <li> <p>A column for selecting the quote status, with a label for \"messages.common.status.\"</p> </li> <li> <p>A select input populated with status options from the <code>$statusArr</code> variable.</p> </li> <li> <p>Date Inputs (col-lg-4):</p> </li> <li> <p>Two columns for selecting the quote date and due date, both labeled accordingly.</p> </li> <li> <p>Text inputs for entering date values with 'autocomplete' attributes set to 'off' and marked as required.</p> </li> <li> <p>Template Selection (mb-5 col-lg-4):</p> </li> <li> <p>A column for selecting an invoice template, labeled as \"messages.setting.invoice_template.\"</p> </li> <li> <p>A select input populated with template options.</p> </li> <li> <p>Quote Items Table:</p> </li> <li> <p>A button for adding quote items.</p> </li> <li>A table for displaying quote items with columns for item number, product selection, quantity, unit price, total amount, and actions (delete button).</li> <li> <p>Rows are populated with data from the <code>$quote-&gt;quoteItems</code> variable, which presumably represents quote items. Loops through each quote item and displays its details in a row.</p> </li> <li> <p>Discount Input:</p> </li> <li> <p>An input for entering a discount value, along with a select input to choose the discount type (e.g., percentage or fixed).</p> </li> <li> <p>Both inputs are contained within an input group.</p> </li> <li> <p>Summary Information:</p> </li> <li> <p>Displays sub-total, discount amount, and final total amount for the quote.</p> </li> <li> <p>Values are populated dynamically based on the quote data and calculations.</p> </li> <li> <p>Note and Terms Textareas:</p> </li> <li> <p>Textareas for entering quote notes and terms.</p> </li> <li> <p>Buttons for adding/removing note and terms are included.</p> </li> <li> <p>Hidden Fields:</p> <ul> <li>Hidden input fields for storing various data, such as the total amount, client data, product data, and more.</li> </ul> </li> <li> <p>Submit and Cancel Buttons:</p> <ul> <li>Buttons for saving changes and canceling the editing process. The \"editSaveQuote\" button has a 'data-status' attribute that seems to be related to the quote's status.</li> </ul> </li> </ol> <p>Overall, this code represents a comprehensive form for editing quote details. It includes inputs for various quote attributes, a table for managing quote items, and fields for calculating and displaying summary information. The form is designed to provide a user-friendly interface for editing and updating quotes in the application.</p>"},{"location":"Admin/Quotes/#show-quote","title":"Show Quote","text":"<p>The view of the 'show quote' page located in ressources&gt;views&gt;quote&gt;show_fields.blade.php.</p> <pre><code>@php\n    $auth =  Auth::check();\n@endphp\n&lt;div&gt;\n    @if($auth &amp;&amp; $isPublicView)\n        &lt;div class=\"d-flex overflow-auto h-55px\"&gt;\n            &lt;ul class=\"nav nav-tabs mb-5 pb-1 overflow-auto flex-nowrap text-nowrap\"&gt;\n                &lt;li class=\"nav-item position-relative me-7 mb-3\" role=\"presentation\"&gt;\n                    &lt;button class=\"nav-link active p-0\" id=\"overview-tab\" data-bs-toggle=\"tab\"\n                            data-bs-target=\"#overview\"\n                            type=\"button\" role=\"tab\" aria-controls=\"overview\" aria-selected=\"true\"&gt;\n                        {{ __('messages.quote.overview') }}\n                    &lt;/button&gt;\n                &lt;/li&gt;\n                &lt;li class=\"nav-item position-relative me-7 mb-3\" role=\"presentation\"&gt;\n                    &lt;button class=\"nav-link p-0\" id=\"note_terms-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#note_terms\"\n                            type=\"button\" role=\"tab\" aria-controls=\"note_terms\" aria-selected=\"false\"&gt;\n                        {{ __('messages.quote.note_terms') }}\n                    &lt;/button&gt;\n                &lt;/li&gt;\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    @endif\n    &lt;div class=\"tab-content\" id=\"myTabContent\"&gt;\n        &lt;div class=\"tab-pane fade show active\" id=\"overview\" role=\"tabpanel\"&gt;\n            &lt;div class=\"card\"&gt;\n                &lt;div class=\"d-flex flex-column\"&gt;\n                    &lt;div class=\"card-body\"&gt;\n                        &lt;div class=\"row\"&gt;\n                            &lt;div class=\"col-xxl-9\"&gt;\n                                &lt;div class=\"row\"&gt;\n                                    &lt;div class=\"col-lg-4 col-md-6\"&gt;\n                                        &lt;div class=\"d-flex mb-md-10 mb-5\"&gt;\n                                            &lt;div class=\"image image-circle image-lg-small width-100px\"&gt;\n                                                &lt;img src=\"{{ getLogoUrl() }}\" alt=\"user\" class=\"object-contain\"&gt;\n                                            &lt;/div&gt;\n                                            &lt;h3 class=\"ps-7\"&gt;{{ __('messages.quote.quote') }}\n                                                #{{ $quote-&gt;quote_id }}\n                                            &lt;/h3&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-lg-3 col-md-3 col-6\"&gt;\n                                        &lt;div class=\"d-flex flex-column mb-md-10 mb-5 mt-3 mt-md-0\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.quote.quote_date').':' }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-800\"&gt;{{ \\Carbon\\Carbon::parse($quote-&gt;quote_date)-&gt;translatedFormat(currentDateFormat()) }}&lt;/span&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-lg-3 col-md-3 col-6\"&gt;\n                                        &lt;div class=\"d-flex flex-column mb-md-10 mb-5 mt-3 mt-md-0\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.quote.due_date').':' }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-800\"&gt;{{ \\Carbon\\Carbon::parse($quote-&gt;due_date)-&gt;translatedFormat(currentDateFormat()) }}&lt;/span&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-md-2 col-6 mb-3 mb-sm-0\"&gt;\n                                        @if($isPublicView)\n                                            &lt;a target=\"_blank\"\n                                               href=\"{{ route('quotes.pdf',['quote' =&gt; $quote-&gt;id]) }}\"\n                                               class=\"btn btn-sm btn-success text-white\"&gt;{{ __('messages.quote.print_quote') }}&lt;/a&gt;\n                                        @else\n                                            &lt;a target=\"_blank\"\n                                               href=\"{{ route('public-view-quote.pdf',['quote' =&gt; $quote-&gt;quote_id]) }}\"\n                                               class=\"btn btn-sm btn-success text-white\"&gt;{{ __('messages.quote.print_quote') }}&lt;/a&gt;\n                                        @endif\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-lg-5 col-md-6\"&gt;\n                                        &lt;div class=\"d-flex flex-column mb-md-10 mb-5\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.quote.issue_for').':' }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-800 mb-3\"&gt;{{ $quote-&gt;client-&gt;user-&gt;full_name }}&lt;/span&gt;\n                                            &lt;p class=\"text-gray-700 fs-4 mb-0\"&gt;\n                                                @if(isset($quote-&gt;client-&gt;address) &amp;&amp; !empty($quote-&gt;client-&gt;address))\n                                                    {{ ucfirst($quote-&gt;client-&gt;address) }}\n                                                @else\n                                                    {{ \"N/A\" }}\n                                                @endif\n                                            &lt;/p&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-md-2 col-md-6\"&gt;\n                                        &lt;div class=\"d-flex flex-column mb-md-10 mb-5\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.quote.issue_by').':' }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-800 mb-3\"&gt;{{ getAppName() }}&lt;/span&gt;\n                                            &lt;p class=\"text-gray-700 fs-4 mb-0\"&gt;\n                                                {!! getSettingValue('company_address') !!}&lt;/p&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-12 table-responsive\"&gt;\n                                        &lt;table class=\"table table-striped box-shadow-none mt-4\"&gt;\n                                            &lt;thead&gt;\n                                            &lt;tr&gt;\n                                                &lt;th scope=\"col\"&gt;{{ __('messages.product.product') }}&lt;/th&gt;\n                                                &lt;th scope=\"col\"&gt;{{ __('messages.quote.qty') }}&lt;/th&gt;\n                                                &lt;th scope=\"col\" class=\"text-end\"&gt;{{ __('messages.quote.price') }}&lt;/th&gt;\n                                                &lt;th scope=\"col\" class=\"text-end\"&gt;{{ __('messages.quote.amount') }}&lt;/th&gt;\n                                            &lt;/tr&gt;\n                                            &lt;/thead&gt;\n                                            &lt;tbody&gt;\n                                            @foreach($quote-&gt;quoteItems as $index =&gt; $quoteItem)\n                                                &lt;tr&gt;\n                                                    &lt;td class=\"py-4\"&gt;{{ isset($quoteItem-&gt;product-&gt;name)?$quoteItem-&gt;product-&gt;name:$quoteItem-&gt;product_name??'N/A' }}&lt;/td&gt;\n                                                    &lt;td class=\"py-4\"&gt;{{ $quoteItem-&gt;quantity }}&lt;/td&gt;\n                                                    &lt;td class=\"py-4 text-end min-width-130px\"&gt;{{  isset($quoteItem-&gt;price) ? getCurrencyAmount($quoteItem-&gt;price,true) : 'N/A' }}&lt;/td&gt;\n                                                    &lt;td class=\"py-4 text-end min-width-130px\"&gt;{{ isset($quoteItem-&gt;total) ? getCurrencyAmount($quoteItem-&gt;total,true) : 'N/A' }}&lt;/td&gt;\n                                                &lt;/tr&gt;\n                                            @endforeach\n                                            &lt;/tbody&gt;\n                                        &lt;/table&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-lg-5 ms-lg-auto mt-4\"&gt;\n                                        &lt;div class=\"border-top\"&gt;\n                                            &lt;table class=\"table table-borderless box-shadow-none mb-0 mt-5\"&gt;\n                                                &lt;tbody&gt;\n                                                &lt;tr&gt;\n                                                    &lt;td class=\"ps-0\"&gt;{{ __('messages.quote.sub_total').(':') }}&lt;/td&gt;\n                                                    &lt;td class=\"text-gray-900 text-end pe-0\"&gt;{{ isset($quote-&gt;amount) ? getCurrencyAmount($quote-&gt;amount,true) : 'N/A' }}&lt;/td&gt;\n                                                &lt;/tr&gt;\n                                                &lt;tr&gt;\n                                                    &lt;td class=\"ps-0\"&gt;{{ __('messages.quote.discount').(':') }}&lt;/td&gt;\n                                                    &lt;td class=\"text-gray-900 text-end pe-0\"&gt;\n                                                        @if($quote-&gt;discount == 0 || !isset($quote))\n                                                            &lt;span&gt;N/A&lt;/span&gt;\n                                                        @else\n                                                            @if( $quote-&gt;discount_type == \\App\\Models\\Quote::FIXED)\n                                                                {{ getCurrencyAmount($quote-&gt;discount,true) }}\n                                                            @else\n                                                                {{ getCurrencyAmount($quote-&gt;amount * $quote-&gt;discount / 100,true)}}\n                                                            @endif\n                                                        @endif\n                                                    &lt;/td&gt;\n                                                &lt;/tr&gt;\n                                                &lt;tr&gt;\n                                                    &lt;td class=\"ps-0\"&gt;{{ __('messages.quote.total').(':') }}&lt;/td&gt;\n                                                    &lt;td class=\"text-gray-900 text-end pe-0\"&gt;\n                                                        {{ getCurrencyAmount($quote-&gt;final_amount,true) }}\n                                                    &lt;/td&gt;\n                                                &lt;/tr&gt;\n                                                &lt;/tbody&gt;\n                                            &lt;/table&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"col-xxl-3 mb-5 mb-lg-0\"&gt;\n                                &lt;div class=\"bg-gray-100 rounded-15 p-md-7 p-5 h-100 mt-xxl-0 mt-5 col-xxl-9 ms-xxl-auto w-100\"&gt;\n                                    &lt;div class=\"mb-8\"&gt;\n                                        @if($quote-&gt;status == \\App\\Models\\Quote::DRAFT)\n                                            &lt;span class=\"badge bg-light-warning me-5\"&gt;Draft&lt;/span&gt;\n                                        @elseif($quote-&gt;status == \\App\\Models\\Quote::CONVERTED)\n                                            &lt;span class=\"badge bg-light-success me-5\"&gt;Converted&lt;/span&gt;\n                                        @endif\n                                    &lt;/div&gt;\n                                    &lt;h3 class=\"mb-5\"&gt;{{ __('messages.quote.client_overview') }}&lt;/h3&gt;\n                                    &lt;div class=\"row\"&gt;\n                                        &lt;div class=\"col-xxl-12 col-lg-4 col-sm-6 d-flex flex-column mb-xxl-7 mb-lg-0 mb-4\"&gt;\n                                            &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.quote.client_name') }}&lt;/label&gt;\n                                            @if($auth)\n                                                &lt;a href=\"{{ route('clients.show', ['client' =&gt; $quote-&gt;client-&gt;id]) }}\"\n                                                   class=\"link-primary text-decoration-none\"&gt;{{ $quote-&gt;client-&gt;user-&gt;full_name }}&lt;/a&gt;\n\n                                            @else\n                                                &lt;a href=\"#\" class=\"link-primary fs-4 text-decoration-none\"&gt;{{ $quote-&gt;client-&gt;user-&gt;full_name }}&lt;/a&gt;\n                                            @endif\n                                        &lt;/div&gt;\n                                        &lt;div class=\"col-xxl-12 col-lg-4 col-sm-6 d-flex flex-column mb-xxl-7 mb-lg-0 mb-4\"&gt;\n                                            &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.quote.client_email') }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-900\"&gt;{{ $quote-&gt;client-&gt;user-&gt;email }}&lt;/span&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"tab-pane fade show\" id=\"note_terms\" role=\"tabpanel\"&gt;\n            &lt;div class=\"card\"&gt;\n                &lt;div class=\"card-body pt-5\"&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;div class=\"col-lg-12 mb-5\"&gt;\n                            &lt;div class=\"fw-bold text-gray-600 fs-7\"&gt;{{ __('messages.quote.note').':' }}&lt;/div&gt;\n                            &lt;div class=\"fs-6\"&gt;{!! $quote-&gt;note ?? __('messages.quote.note_not_found') !!}&lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"col-lg-12 mb-5\"&gt;\n                            &lt;div class=\"fw-bold text-gray-600 fs-7\"&gt;{{ __('messages.quote.terms').':' }}&lt;/div&gt;\n                            &lt;div\n                                    class=\"fs-6\"&gt;{!! $quote-&gt;term ?? __('messages.quote.terms_not_found') !!}&lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>This is a Blade template for displaying a quote's details our application. The template is conditionally structured to show different sections based on the user's authentication status and whether it's a public view.</p> <p>Here's an explanation of the Blade template:</p> <ol> <li> <p>Authentication Check:</p> </li> <li> <p>PHP code block (<code>@php</code>) checks if the user is authenticated using <code>Auth::check()</code>. The result is stored in the <code>$auth</code> variable.</p> </li> <li> <p>Tab Navigation (<code>@if($auth &amp;&amp; $isPublicView) ... @endif</code>):</p> </li> <li> <p>If the user is authenticated (<code>$auth</code>) and it's a public view (<code>$isPublicView</code>), a tab navigation section is displayed.</p> </li> <li> <p>Two tabs are created: \"Overview\" and \"Note &amp; Terms.\"</p> </li> <li> <p>Overview Tab (<code>&lt;div class=\"tab-pane fade show active\" id=\"overview\" role=\"tabpanel\"&gt; ... &lt;/div&gt;</code>):</p> </li> <li> <p>This section displays an overview of the quote.</p> </li> <li>It includes details such as the quote ID, quote date, due date, client information, quote items, and summary.</li> <li> <p>Buttons for printing the quote in PDF format are also provided.</p> </li> <li> <p>Note &amp; Terms Tab (<code>&lt;div class=\"tab-pane fade show\" id=\"note_terms\" role=\"tabpanel\"&gt; ... &lt;/div&gt;</code>):</p> </li> <li> <p>This section displays the note and terms associated with the quote.</p> </li> <li> <p>Overview Content:</p> </li> <li> <p>Quote information is displayed within this section, including the company logo, quote ID, dates, client details, and a table of quote items.</p> </li> <li>Discount and total amount information is also displayed.</li> <li> <p>The content dynamically populates with data from the <code>$quote</code> variable.</p> </li> <li> <p>Note &amp; Terms Content:</p> </li> <li> <p>This section displays the note and terms associated with the quote. If no note or terms are available, default messages are shown.</p> </li> <li> <p>Conditional Badge:</p> </li> <li> <p>A badge indicating the quote status (e.g., \"Draft\" or \"Converted\") is displayed based on the quote's status.</p> </li> <li> <p>Client Overview:</p> </li> <li>Client-related information is displayed in a separate card, including the client's name, email, and a link to the client's details page (if the user is authenticated).</li> </ol> <p>The quote.show view:</p> <pre><code>@extends('layouts.app')\n@section('title')\n    {{ __('messages.quote.quote_details')}}\n@endsection\n@section('header_toolbar')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-md-flex align-items-center justify-content-between mb-5\"&gt;\n            &lt;h1 class=\"mb-0\"&gt;@yield('title')&lt;/h1&gt;\n            &lt;div class=\"text-end mt-4 mt-md-0\"&gt;\n                @if($quote-&gt;status != \\App\\Models\\Quote::CONVERTED)\n                    &lt;a href=\"{{ route('quotes.edit', ['quote' =&gt; $quote-&gt;id]) }}\"\n                       class=\"btn btn-primary me-4\"&gt;{{__('messages.common.edit')}}&lt;/a&gt;\n                @endif\n                &lt;a href=\"{{ url()-&gt;previous() }}\"\n                   class=\"btn btn-outline-primary\"&gt;{{ __('messages.common.back') }}&lt;/a&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n@endsection\n@section('content')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-flex flex-column\"&gt;\n            @include('flash::message')\n            @include('quotes.show_fields',['isPublicView'=&gt; true])\n        &lt;/div&gt;\n    &lt;/div&gt;\n@endsection\n</code></pre> <p>This Blade template is displaying the details of a quote in our application. Here's an explanation of its structure and content:</p> <ol> <li> <p>Layout and Title:</p> </li> <li> <p>The template extends a layout named \"app\" (<code>@extends('layouts.app')</code>).</p> </li> <li> <p>It sets the title of the page to \"Quote Details\" in the page's <code>&lt;title&gt;</code> element (<code>@section('title')</code>).</p> </li> <li> <p>Header Toolbar:</p> </li> <li>This section contains a container with a flexible (flex) layout for aligning and justifying content.</li> <li>It displays a page heading with the title set in the previous section.</li> <li>On the right side, there is a \"Back\" button (<code>{{ __('messages.common.back') }}</code>) that navigates back to the previous page.</li> <li>Additionally, there is an \"Edit\" button (<code>{{__('messages.common.edit')}}</code>) displayed conditionally based on the quote's status. If the quote's status is not \"CONVERTED,\" the \"Edit\" button is shown.</li> <li>Content:</li> <li>The main content section is contained within a fluid container.</li> <li>It includes a flex-column layout to stack content vertically.</li> <li>The <code>flash::message</code> directive is used to display any flash messages that may have been set.</li> <li>The <code>quotes.show_fields</code> view is included, passing the <code>isPublicView</code> parameter as <code>true</code>. This includes the detailed information about the quote, such as client information, quote items, and summary.</li> </ol> <p>This template follows a typical structure for displaying the details of a quote. It provides a user-friendly interface with a title, header toolbar with navigation options, and the main content area for displaying the quote's details. The ability to edit the quote is also available if the quote's status allows for it.</p>"},{"location":"Admin/Quotes/#buttons-blade","title":"Buttons blade","text":"<p>we find this code in : resources&gt;views&gt;quotes&gt;components&gt;add-button.blade.php</p> <pre><code>&lt;div class=\"my-3 my-sm-3\"&gt;\n    &lt;a href=\"{{ route('admin.quotesExcel') }}\" type=\"button\" class=\"btn btn-outline-success me-2\" data-turbo=\"false\"&gt;\n        &lt;i class=\"fas fa-file-excel me-1\"&gt;&lt;/i&gt; {{__('messages.quote.excel_export')}}\n    &lt;/a&gt;\n&lt;/div&gt;\n&lt;div class=\"my-3 my-sm-3\"&gt;\n    &lt;a href=\"{{ route('admin.quotes.pdf') }}\" type=\"button\" class=\"btn btn-outline-info me-2\" data-turbo=\"false\"&gt;\n        &lt;i class=\"fas fa-file-pdf me-1\"&gt;&lt;/i&gt; {{__('messages.pdf_export')}}\n    &lt;/a&gt;\n&lt;/div&gt;\n&lt;div class=\"my-3 my-sm-3\"&gt;\n    &lt;a href=\"{{ route('quotes.create') }}\" data-turbo=\"false\"\n       class=\"btn btn-primary\"&gt;{{__('messages.quote.new_quote')}}&lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <p>This code is used for creating buttons or links in our application, related to generating exports. Here's a breakdown of each code snippet:</p> <ol> <li>Excel Export Button:</li> </ol> <pre><code>&lt;div class=\"my-3 my-sm-3\"&gt;\n  &lt;a\n    href=\"{{ route('admin.quotesExcel') }}\"\n    type=\"button\"\n    class=\"btn btn-outline-success me-2\"\n    data-turbo=\"false\"\n  &gt;\n    &lt;i class=\"fas fa-file-excel me-1\"&gt;&lt;/i&gt;\n    {{__('messages.quote.excel_export')}}\n  &lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <ul> <li>This code creates a button or link that, when clicked, will navigate to the <code>admin.quotesExcel</code> route.</li> <li>The button has a green outline (<code>btn-outline-success</code>) and an Excel icon (<code>fas fa-file-excel</code>) with the text \"Excel Export.\"</li> <li> <p>It includes the <code>data-turbo=\"false\"</code> attribute, which may be used to disable Turbo Links in a TurboFrames-enabled application.</p> </li> <li> <p>PDF Export Button:</p> </li> </ul> <pre><code>&lt;div class=\"my-3 my-sm-3\"&gt;\n  &lt;a\n    href=\"{{ route('admin.quotes.pdf') }}\"\n    type=\"button\"\n    class=\"btn btn-outline-info me-2\"\n    data-turbo=\"false\"\n  &gt;\n    &lt;i class=\"fas fa-file-pdf me-1\"&gt;&lt;/i&gt; {{__('messages.pdf_export')}}\n  &lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <ul> <li>This code creates a button or link that, when clicked, will navigate to the <code>admin.quotes.pdf</code> route.</li> <li>The button has a blue outline (<code>btn-outline-info</code>) and a PDF icon (<code>fas fa-file-pdf</code>) with the text \"PDF Export.\"</li> <li> <p>It also includes the <code>data-turbo=\"false\"</code> attribute, possibly for disabling Turbo Links.</p> </li> <li> <p>Create New Quote Button: <pre><code>&lt;div class=\"my-3 my-sm-3\"&gt;\n  &lt;a\n    href=\"{{ route('quotes.create') }}\"\n    data-turbo=\"false\"\n    class=\"btn btn-primary\"\n    &gt;{{__('messages.quote.new_quote')}}&lt;/a\n  &gt;\n&lt;/div&gt;\n</code></pre></p> </li> <li> <p>This code creates a button that, when clicked, will navigate to the <code>quotes.create</code> route, it is used for creating a new quote.</p> </li> <li>The button has a blue background (<code>btn-primary</code>) and displays the text \"New Quote.\"</li> </ul> <p>These code snippets are typically used to enhance the user interface of our application, providing users with clickable buttons for actions such as exporting data or creating new quotes. The <code>route</code> function is used to generate URLs for specific routes defined in the application's routing system. filter-blade:</p> <pre><code>&lt;div class=\"ms-auto\" wire:ignore&gt;\n    &lt;div class=\"ms-0 ms-md-2\"&gt;\n        &lt;div class=\"dropdown d-flex align-items-center me-2\"&gt;\n            &lt;button class=\"btn btn btn-icon btn-primary text-white dropdown-toggle hide-arrow ps-2 pe-0\"\n                    type=\"button\" data-bs-auto-close=\"outside\"\n                    data-bs-toggle=\"dropdown\" aria-expanded=\"false\"\n                    id=\"quoteFilterBtn\"&gt;\n                &lt;i class='fas fa-filter'&gt;&lt;/i&gt;\n            &lt;/button&gt;\n            &lt;div class=\"dropdown-menu py-0\" aria-labelledby=\"quoteFilterBtn\"&gt;\n                &lt;div class=\"text-start border-bottom py-4 px-7\"&gt;\n                    &lt;h3 class=\"text-gray-900 mb-0\"&gt;{{ __('messages.common.filter_option') }}&lt;/h3&gt;\n                &lt;/div&gt;\n                &lt;div class=\"p-5\"&gt;\n                    &lt;div class=\"mb-5\"&gt;\n                        &lt;label for=\"exampleInputSelect2\"\n                               class=\"form-label\"&gt;{{ __('messages.common.status').':' }}&lt;/label&gt;\n                        {{ Form::select('status', collect($filterHeads[0])-&gt;sortBy('key')-&gt;reverse()-&gt;toArray(),\\App\\Models\\Quote::STATUS_ALL, ['id' =&gt; 'quoteStatus','class' =&gt; 'form-select']) }}\n                    &lt;/div&gt;\n                    &lt;div class=\"d-flex justify-content-end\"&gt;\n                        &lt;button type=\"reset\" id=\"resetQuoteStatusFilter\"\n                                class=\"btn btn-secondary\"&gt;{{ __('messages.common.reset') }}&lt;/button&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>This HTML code create a dropdown filter control our application, used for filtering a list of quotes. Let's break down the code:</p> <ol> <li>Dropdown Trigger Button:</li> </ol> <pre><code>&lt;button\n  class=\"btn btn btn-icon btn-primary text-white dropdown-toggle hide-arrow ps-2 pe-0\"\n  type=\"button\"\n  data-bs-auto-close=\"outside\"\n  data-bs-toggle=\"dropdown\"\n  aria-expanded=\"false\"\n  id=\"quoteFilterBtn\"\n&gt;\n  &lt;i class=\"fas fa-filter\"&gt;&lt;/i&gt;\n&lt;/button&gt;\n</code></pre> <ul> <li>This button is styled as a primary button (<code>btn btn-primary</code>) and has an icon of a filter (<code>fas fa-filter</code>).</li> <li> <p>It's used to trigger the dropdown menu when clicked. The dropdown menu will appear below this button.</p> </li> <li> <p>Dropdown Menu:</p> </li> </ul> <pre><code>&lt;div class=\"dropdown-menu py-0\" aria-labelledby=\"quoteFilterBtn\"&gt;\n  &lt;!-- Content of the dropdown menu --&gt;\n&lt;/div&gt;\n</code></pre> <ul> <li>This <code>&lt;div&gt;</code> represents the dropdown menu.</li> <li> <p><code>py-0</code> and <code>aria-labelledby</code> attributes are set for styling and accessibility.</p> </li> <li> <p>Dropdown Menu Content:</p> </li> </ul> <pre><code>&lt;div class=\"text-start border-bottom py-4 px-7\"&gt;\n  &lt;h3 class=\"text-gray-900 mb-0\"&gt;\n    {{ __('messages.common.filter_option') }}\n  &lt;/h3&gt;\n&lt;/div&gt;\n&lt;div class=\"p-5\"&gt;\n  &lt;!-- Filter options and controls go here --&gt;\n&lt;/div&gt;\n</code></pre> <ul> <li>The dropdown menu starts with a heading displaying \"Filter Options.\"</li> <li> <p>Inside the <code>p-5</code> (padding) section, filter options and controls will be placed.</p> </li> <li> <p>Filter Options:</p> </li> </ul> <pre><code>&lt;label for=\"exampleInputSelect2\" class=\"form-label\"\n  &gt;{{ __('messages.common.status').':' }}&lt;/label\n&gt;\n{{ Form::select('status',\ncollect($filterHeads[0])-&gt;sortBy('key')-&gt;reverse()-&gt;toArray(),\\App\\Models\\Quote::STATUS_ALL,\n['id' =&gt; 'quoteStatus','class' =&gt; 'form-select']) }}\n</code></pre> <ul> <li>This code segment is a filter option for the \"status\" of quotes.</li> <li>It includes a label with the text \"Status:\" and a <code>&lt;select&gt;</code> dropdown input element. The options for this dropdown are generated dynamically using PHP (<code>collect($filterHeads[0])-&gt;sortBy('key')-&gt;reverse()-&gt;toArray()</code>).</li> <li> <p>The selected value in the dropdown is set to <code>\\App\\Models\\Quote::STATUS_ALL</code>, and the dropdown has an <code>id</code> of \"quoteStatus\" and a class of \"form-select.\"</p> </li> <li> <p>Reset Button: <pre><code>&lt;div class=\"d-flex justify-content-end\"&gt;\n  &lt;button type=\"reset\" id=\"resetQuoteStatusFilter\" class=\"btn btn-secondary\"&gt;\n    {{ __('messages.common.reset') }}\n  &lt;/button&gt;\n&lt;/div&gt;\n</code></pre></p> </li> <li> <p>This button, labeled \"Reset,\" is positioned at the bottom of the dropdown menu.</p> </li> <li>It has an <code>id</code> of \"resetQuoteStatusFilter\" and is styled as a secondary button (<code>btn btn-secondary</code>).</li> </ul> <p>This code creates a filter dropdown menu for quotes, allowing users to filter quotes by their status. When the filter button is clicked, the dropdown menu appears, and users can make selections or reset the filter using the provided options.</p>"},{"location":"Admin/Settings/","title":"Setting","text":""},{"location":"Admin/Settings/#route","title":"Route","text":"<p>The route <code>Route::get('settings', [SettingController::class, 'edit'])-&gt;name('settings.edit');</code> leads to the page /admin/invoice-setting .</p>"},{"location":"Admin/Settings/#controller","title":"Controller","text":"<p>The controller of the 'Setting' page located in app&gt;http&gt;controllers&gt;SettingController.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Http\\Requests\\UpdateSettingRequest;\nuse App\\Models\\InvoiceSetting;\nuse App\\Repositories\\SettingRepository;\nuse Illuminate\\Contracts\\Foundation\\Application;\nuse Illuminate\\Contracts\\View\\Factory;\nuse Illuminate\\Contracts\\View\\View;\nuse Illuminate\\Http\\RedirectResponse;\nuse Illuminate\\Http\\Request;\nuse Laracasts\\Flash\\Flash;\n\nclass SettingController extends AppBaseController\n{\n    /** @var SettingRepository */\n    private $settingRepository;\n\n    public function __construct(SettingRepository $settingRepo)\n    {\n        $this-&gt;settingRepository = $settingRepo;\n    }\n\n    /**\n     * Show the form for editing the specified resource.\n     *\n     * @param  Request  $request\n     * @return Application|Factory|View\n     */\n    public function edit(Request $request)\n    {\n        $defaultSettings = $this-&gt;settingRepository-&gt;editSettingsData();\n        $sectionName = ($request-&gt;section === null) ? 'general' : $request-&gt;section;\n\n        return view(\"settings.$sectionName\", compact([\n            'sectionName' =&gt; $sectionName,\n            'defaultSettings' =&gt; $defaultSettings\n        ]\n        ));\n    }\n\n    /**\n     * @param UpdateSettingRequest $request\n     * @return RedirectResponse\n     */\n    public function update(UpdateSettingRequest $request)\n    {\n        $this-&gt;settingRepository-&gt;updateSetting($request-&gt;all());\n        Flash::success('Setting updated successfully.');\n\n        return redirect()-&gt;back();\n    }\n\n    //Invoice Update\n    public function invoiceUpdate(Request $request)\n    {\n        $this-&gt;settingRepository-&gt;updateInvoiceSetting($request-&gt;all());\n        Flash::success('Invoice template updated successfully');\n\n        return redirect('admin/settings?section=setting-invoice');\n    }\n\n    /**\n     * @param $key\n     * @return mixed\n     */\n    public function editInvoiceTemplate($key)\n    {\n        $invoiceTemplate = InvoiceSetting::where('key', $key)-&gt;get();\n\n        return $this-&gt;sendResponse($invoiceTemplate, 'InvoiceTemplate retrieved successfully.');\n    }\n\n    /**\n     * @return Application|Factory|View\n     */\n    public function invoiceSettings()\n    {\n        $data['settings'] = $this-&gt;settingRepository-&gt;getSyncList();\n\n        return view('settings.invoice-settings', $data);\n    }\n}\n</code></pre> <p>Let's break down its key methods and functionality:</p> <ol> <li> <p>Constructor:</p> </li> <li> <p>The constructor injects an instance of the <code>SettingRepository</code> into the controller, which can be used to interact with and manage application settings.</p> </li> <li> <p><code>edit</code> Method:</p> </li> <li> <p>This method is responsible for displaying the form for editing settings. It retrieves the default settings using the <code>editSettingsData</code> method from the <code>SettingRepository</code>.</p> </li> <li>The <code>$sectionName</code> variable is determined based on the <code>section</code> query parameter from the request, defaulting to <code>'general'</code> if no specific section is specified.</li> <li> <p>The method then returns a view based on the determined section name, passing in the section name and default settings as variables to the view.</p> </li> <li> <p><code>update</code> Method:</p> </li> <li> <p>This method handles the updating of settings based on the data received from an <code>UpdateSettingRequest</code>. It calls the <code>updateSetting</code> method from the <code>SettingRepository</code> to perform the actual update of settings.</p> </li> <li> <p>After updating the settings, it flashes a success message using the Laracasts/Flash package and redirects the user back to the previous page.</p> </li> <li> <p><code>invoiceUpdate</code> Method:</p> </li> <li> <p>This method handles the updating of invoice-related settings. It calls the <code>updateInvoiceSetting</code> method from the <code>SettingRepository</code> to perform the actual update of invoice settings.</p> </li> <li> <p>After updating the invoice settings, it flashes a success message and redirects the user to the settings page with the <code>section</code> query parameter set to <code>'setting-invoice'</code>.</p> </li> <li> <p><code>editInvoiceTemplate</code> Method:</p> </li> <li> <p>This method retrieves specific invoice template settings based on the provided key. It fetches the settings from the <code>InvoiceSetting</code> model and sends a response with the retrieved data.</p> </li> <li> <p>This method is used to retrieve and potentially edit individual invoice template settings.</p> </li> <li> <p><code>invoiceSettings</code> Method:</p> </li> <li>This method is responsible for displaying a page related to invoice settings. It retrieves a list of settings using the <code>getSyncList</code> method from the <code>SettingRepository</code> and passes them to the view for rendering.</li> </ol> <p>Overall, the <code>SettingController</code> is responsible for managing various application settings, including general settings and invoice-related settings. It provides methods for viewing, editing, and updating these settings and utilizes the <code>SettingRepository</code> for interacting with the settings data.</p>"},{"location":"Admin/Settings/#model","title":"Model","text":"<p>app&gt;models&gt;InvoiceSetting.php</p> <pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass InvoiceSetting extends Model\n{\n    use HasFactory;\n\n    protected $table = 'invoice-settings';\n\n    protected $fillable = ['key', 'template_name', 'template_color'];\n\n    protected $casts = [\n        'key' =&gt; 'string',\n        'template_name' =&gt; 'string',\n        'template_color' =&gt; 'string',\n    ];\n}\n</code></pre> <p>The provided code defines an Eloquent model named <code>InvoiceSetting</code>. This model represents a database table named <code>'invoice-settings'</code>. Here's a breakdown of the key aspects of this model:</p> <ol> <li> <p>Table Name:</p> </li> <li> <p>The <code>protected $table</code> property specifies the name of the database table associated with this model, which is <code>'invoice-settings'</code>.</p> </li> <li> <p>Fillable Attributes:</p> </li> <li> <p>The <code>protected $fillable</code> property defines an array of attributes that are mass assignable, meaning they can be set using mass assignment methods like <code>create</code> or <code>update</code>.</p> </li> <li> <p>In this case, the model allows mass assignment for three attributes: <code>'key'</code>, <code>'template_name'</code>, and <code>'template_color'</code>.</p> </li> <li> <p>Attribute Casting:</p> </li> <li> <p>The <code>protected $casts</code> property specifies how certain model attributes should be cast to specific data types when retrieved from the database.</p> </li> <li> <p>In this model, three attributes are cast:</p> <ul> <li><code>'key'</code> is cast to a string.</li> <li><code>'template_name'</code> is cast to a string.</li> <li><code>'template_color'</code> is cast to a string.</li> </ul> </li> <li> <p>Use of HasFactory:</p> </li> <li>The model uses the <code>HasFactory</code> trait, which provides methods for factory creation of model instances. This is commonly used for generating test data.</li> </ol> <p>Overall, the <code>InvoiceSetting</code> model is intended to work with a database table named <code>'invoice-settings'</code>. It allows for the storage of settings related to invoice templates, including attributes like the setting's key, template name, and template color. This model can be used to interact with and manage data in the associated database table within our Laravel application.</p>"},{"location":"Admin/Settings/#view","title":"View","text":"<pre><code>@extends('layouts.app')\n@section('title')\n    {{ __('messages.setting.invoice_settings') }}\n@endsection\n@section('content')\n    &lt;div class=\"container-fluid\"&gt;\n        @include('flash::message')\n        &lt;div class=\"card\"&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;div class=\"alert alert-danger display-none hide\" id=\"validationErrorsBox\"&gt;&lt;/div&gt;\n                {{ Form::open(['route' =&gt; ['settings.update'], 'method' =&gt; 'post']) }}\n                &lt;div class=\"row\"&gt;\n                    &lt;div class=\"form-group col-sm-6 mb-5\"&gt;\n                        &lt;input type=\"hidden\" name=\"invoice_settings\" value=\"1\"&gt;\n                        {{ Form::label('current_currency', __('messages.setting.currencies') . ':', ['class' =&gt; 'form-label required fs-6 mb-3']) }}\n                        &lt;select id=\"currencyType\" data-show-content=\"true\" class=\"form-select \" name=\"current_currency\"&gt;\n                            @foreach (getCurrencies() as $key =&gt; $currency)\n                                &lt;option value=\"{{ $currency['id'] }}\"\n                                    {{ getSettingValue('current_currency') == $currency['id'] ? 'selected' : '' }}&gt;\n                                    {{ $currency['icon'] }}&amp;nbsp;&amp;nbsp;&amp;nbsp; {{ $currency['name'] }}\n                                &lt;/option&gt;\n                            @endforeach\n                        &lt;/select&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"form-group col-sm-6 mb-5\"&gt;\n                        {{ Form::label('currency_after_amount', __('messages.setting.currency_position') . ':', ['class' =&gt; 'form-label required mb-3']) }}\n                        &lt;label class=\"form-check form-switch form-check-custom mt-3\"&gt;\n                            &lt;input class=\"form-check-input currencyAfterAmount\" type=\"checkbox\" name=\"currency_after_amount\"\n                                id=\"currencyAfterAmount\"\n                                {{ $settings['currency_after_amount'] == \\App\\Models\\Setting::CURRENCY_AFTER_AMOUNT ? 'checked' : '' }}&gt;\n                            &lt;span class=\"form-check-label text-gray-600\"\n                                for=\"currencyAfterAmount\"&gt;{{ __('messages.setting.show_currency_behind') }}&lt;/span&gt;&amp;nbsp;&amp;nbsp;\n                        &lt;/label&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"form-group col-sm-6 mb-5\"&gt;\n                        {{ Form::label('Invoice No Prefix', __('messages.setting.invoice_no_prefix') . ':', ['class' =&gt; 'form-label fs-6 mb-3']) }}\n                        {{ Form::text('invoice_no_prefix', $settings['invoice_no_prefix'], ['class' =&gt; 'form-control', 'placeholder' =&gt; __('messages.setting.invoice_no_prefix'), 'maxlength' =&gt; '50']) }}\n                    &lt;/div&gt;\n                    &lt;div class=\"form-group col-sm-6 mb-5\"&gt;\n                        {{ Form::label('decimal_separator', __('messages.setting.decimal_separator') . ':', ['class' =&gt; 'form-label required fs-6 mb-3']) }}\n                        &lt;div class=\"radio-button-group\"&gt;\n                            &lt;div class=\"btn-group btn-group-toggle m-0\" data-toggle=\"buttons\"&gt;\n                                &lt;input type=\"radio\" class=\"decimal_separator-0\" name=\"decimal_separator\"\n                                    id=\"decimal_separator-0\" value=\".\"\n                                    {{ $settings['decimal_separator'] == '.' ? 'checked' : '' }}&gt;\n                                &lt;label for=\"decimal_separator-0\" class=\"me-2\" role=\"button\"&gt;DOT(.)&lt;/label&gt;\n\n                                &lt;input type=\"radio\" class=\"decimal_separator-1\" name=\"decimal_separator\"\n                                    id=\"decimal_separator-1\" value=\",\"\n                                    {{ $settings['decimal_separator'] == ',' ? 'checked' : '' }}&gt;\n                                &lt;label for=\"decimal_separator-1\" role=\"button\"&gt;COMMA(,)&lt;/label&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"form-group col-sm-6 mb-5\"&gt;\n                        {{ Form::label('Invoice No Suffix', __('messages.setting.invoice_no_suffix') . ':', ['class' =&gt; 'form-label fs-6 mb-3']) }}\n                        {{ Form::text('invoice_no_suffix', $settings['invoice_no_suffix'], ['class' =&gt; 'form-control', 'placeholder' =&gt; __('messages.setting.invoice_no_suffix'), 'maxlength' =&gt; '50']) }}\n                    &lt;/div&gt;\n                    &lt;div class=\"form-group col-sm-6 mb-5\"&gt;\n                        {{ Form::label('thousand_separator', __('messages.setting.thousand_separator') . ':', ['class' =&gt; 'form-label required fs-6 mb-3']) }}\n                        &lt;div class=\"radio-button-group\"&gt;\n                            &lt;div class=\"btn-group btn-group-toggle m-0\" data-toggle=\"buttons\"&gt;\n                                &lt;input type=\"radio\" name=\"thousand_separator\" id=\"thousand_separator-0\" value=\".\"\n                                    {{ $settings['thousand_separator'] == '.' ? 'checked' : '' }}&gt;\n                                &lt;label for=\"thousand_separator-0\" class=\"me-2\" role=\"button\"&gt;DOT(.)&lt;/label&gt;\n\n                                &lt;input type=\"radio\" name=\"thousand_separator\" id=\"thousand_separator-1\" value=\",\"\n                                    {{ $settings['thousand_separator'] == ',' ? 'checked' : '' }}&gt;\n                                &lt;label for=\"thousand_separator-1\" role=\"button\"&gt;COMMA(,)&lt;/label&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"form-group col-sm-6 mb-5\"&gt;\n                        {{ Form::label('show_product_description', __('messages.setting.show_product_description') . ':', ['class' =&gt; 'form-label mb-3']) }}\n                        &lt;label class=\"form-check form-switch form-check-custom mt-3 width-fit-content\"&gt;\n                            &lt;input class=\"form-check-input\" type=\"checkbox\" name=\"show_product_description\"\n                                {{ $settings['show_product_description'] == 1 ? 'checked' : '' }} value=\"1\"&gt;\n                        &lt;/label&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"form-group col-sm-6 mb-5\"&gt;\n                        {{ Form::label('due_invoice_days', __('messages.setting.send_due_invoice_email_before_x_days') . ':', ['class' =&gt; 'form-label mb-3']) }}\n                        {{ Form::number('due_invoice_days', !empty($settings['due_invoice_days']) ? $settings['due_invoice_days'] : null, ['class' =&gt; 'form-control', 'placeholder' =&gt; __('messages.setting.send_due_invoice_email_before_x_days'), 'oninput' =&gt; \"validity.valid||(value=value.replace(/[e\\+\\-]/gi,''))\"]) }}\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                    &lt;div class=\"float-end d-flex mt-5\"&gt;\n                        {{ Form::submit(__('messages.common.save'), ['class' =&gt; 'btn btn-primary me-3']) }}\n                        {{ Form::reset(__('messages.common.cancel'), ['class' =&gt; 'btn  btn-secondary btn-active-light-primary me-3']) }}\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                {{ Form::close() }}\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n@endsection\n</code></pre> <p>Here's a breakdown of its content:</p> <ol> <li> <p>Extending Layout:</p> </li> <li> <p>The view extends a layout named <code>'layouts.app'</code>. This means it inherits the structure and layout elements defined in the <code>'layouts.app'</code> file.</p> </li> <li> <p>Page Title:</p> </li> <li> <p>The <code>@section('title')</code> directive sets the title of the page to \"Invoice Settings.\"</p> </li> <li> <p>Content Section:</p> </li> <li> <p>The <code>@section('content')</code> directive defines the main content section of the page.</p> </li> <li> <p>Flash Messages:</p> </li> <li> <p>The <code>@include('flash::message')</code> directive includes any flash messages that may have been set in the controller. These messages are typically used to display success or error messages to the user.</p> </li> <li> <p>Form:</p> </li> <li> <p>The view includes an HTML form (<code>{{ Form::open() }}</code>) for submitting updates to the settings.</p> </li> <li>The form has various form fields for editing invoice-related settings, such as currency settings, decimal and thousand separators, invoice number prefix and suffix, and more.</li> <li>Dropdown menus (<code>&lt;select&gt;</code>) are used for selecting the current currency and specifying the position of the currency symbol.</li> <li>Radio buttons are used for selecting decimal and thousand separators.</li> <li> <p>Checkboxes are used for toggling options like showing product descriptions and specifying the number of days before sending due invoice emails.</p> </li> <li> <p>Form Submission Buttons:</p> </li> <li>The form includes \"Save\" and \"Cancel\" buttons within a <code>div</code> with the class <code>\"float-end d-flex mt-5\"</code>. These buttons allow the user to save their changes or cancel the editing process.</li> </ol> <p>The view provides a user-friendly interface for editing invoice-related settings, and it uses Laravel's Form Collective package (<code>{{ Form::open() }}</code>, <code>{{ Form::label() }}</code>, <code>{{ Form::text() }}</code>, etc.) to generate form elements.</p> <p>This view can be customized further to include additional settings or modify the existing ones based on the specific requirements of the application.</p>"},{"location":"Admin/Taxes/","title":"Taxe page","text":""},{"location":"Admin/Taxes/#route","title":"Route","text":"<p>The route <code>Route::resource('taxes', TaxController::class);</code> leads to the page /admin/taxes, which displays all the taxes we have.</p>"},{"location":"Admin/Taxes/#controller","title":"Controller","text":"<p>The controller of the 'Taxes' page located in app&gt;http&gt;controllers&gt;TaxController.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\DataTables\\TaxDataTable;\nuse App\\Http\\Requests\\CreateTaxRequest;\nuse App\\Http\\Requests\\UpdateTaxRequest;\nuse App\\Models\\InvoiceItemTax;\nuse App\\Models\\Tax;\nuse App\\Repositories\\TaxRepository;\nuse Exception;\nuse Illuminate\\Contracts\\Foundation\\Application;\nuse Illuminate\\Contracts\\View\\Factory;\nuse Illuminate\\Contracts\\View\\View;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\Request;\nuse Yajra\\DataTables\\Facades\\DataTables;\n\nclass TaxController extends AppBaseController\n{\n    /** @var TaxRepository */\n    public $taxRepository;\n\n    /**\n     * @param  TaxRepository  $taxRepo\n     */\n    public function __construct(TaxRepository $taxRepo)\n    {\n        $this-&gt;taxRepository = $taxRepo;\n    }\n\n    /**\n     * @param  Request  $request\n     * @return Application|Factory|View\n     *\n     * @throws Exception\n     */\n    public function index(Request $request)\n    {\n        if ($request-&gt;ajax()) {\n            return Datatables::of((new TaxDataTable())-&gt;get())-&gt;make(true);\n        }\n\n        return view('taxes.index');\n    }\n\n    /**\n     * @param  Request  $request\n     * @return mixed\n     */\n    public function store(CreateTaxRequest $request)\n    {\n        $input = $request-&gt;all();\n        if ($input['is_default'] == '1') {\n            Tax::where('is_default', '=', 1)-&gt;update(['is_default' =&gt; 0]);\n            $tax = $this-&gt;taxRepository-&gt;create($input);\n        } else {\n            $tax = $this-&gt;taxRepository-&gt;create($input);\n        }\n\n        return $this-&gt;sendResponse($tax, 'Tax saved successfully.');\n    }\n\n    /**\n     * @param  Tax  $tax\n     * @return mixed\n     */\n    public function edit(Tax $tax)\n    {\n        return $this-&gt;sendResponse($tax, 'Tax retrieved successfully.');\n    }\n\n    /**\n     * @param  UpdateTaxRequest  $request\n     * @param $taxId\n     * @return mixed\n     */\n    public function update(UpdateTaxRequest $request, $taxId)\n    {\n        $input = $request-&gt;all();\n        if ($input['is_default'] == '1') {\n            Tax::where('is_default', '=', 1)-&gt;update(['is_default' =&gt; 0]);\n            $this-&gt;taxRepository-&gt;update($input, $taxId);\n        } else {\n            $this-&gt;taxRepository-&gt;update($input, $taxId);\n        }\n\n        return $this-&gt;sendSuccess('Tax updated successfully.');\n    }\n\n    /**\n     * @param  Tax  $tax\n     * @return mixed\n     */\n    public function destroy(Tax $tax)\n    {\n        $invoiceModels = [\n            InvoiceItemTax::class,\n        ];\n        $result = canDelete($invoiceModels, 'tax_id', $tax-&gt;id);\n        if ($result) {\n            return $this-&gt;sendError(__('messages.flash.tax_can_not_deleted'));\n        }\n        $tax-&gt;delete();\n\n        return $this-&gt;sendSuccess('Tax deleted successfully.');\n    }\n\n    /**\n     * @param  Tax  $tax\n     * @return JsonResponse\n     */\n    public function defaultStatus(Tax $tax)\n    {\n        $status = ! $tax-&gt;is_default;\n        if ($status == '1') {\n            Tax::where('is_default', '=', 1)-&gt;update(['is_default' =&gt; 0]);\n        }\n        $tax-&gt;update(['is_default' =&gt; $status]);\n\n        return $this-&gt;sendSuccess('Status updated successfully.');\n    }\n}\n</code></pre> <p>Let's break down the code and understand its functionality:</p> <ol> <li> <p>Namespace and Imports:</p> </li> <li> <p>The controller is defined within the <code>App\\Http\\Controllers</code> namespace.</p> </li> <li> <p>Various classes and dependencies are imported using the <code>use</code> keyword.</p> </li> <li> <p>Class Definition:</p> </li> <li> <p>The class <code>TaxController</code> extends <code>AppBaseController</code>. This suggests that there is a base controller (<code>AppBaseController</code>) that provides common functionalities inherited by controllers.</p> </li> <li> <p>Constructor:</p> </li> <li> <p>The constructor of the <code>TaxController</code> class accepts an instance of the <code>TaxRepository</code> class as a parameter and assigns it to the <code>$taxRepository</code> property. This repository handles interactions with the database related to taxes.</p> </li> <li> <p>Methods:</p> </li> <li> <p><code>index(Request $request)</code>:</p> <ul> <li>This method is responsible for displaying a list of taxes.</li> <li>If the request is an AJAX request (<code>$request-&gt;ajax()</code>), it uses the DataTables library to fetch tax data and return it as a JSON response.</li> <li>If not an AJAX request, it renders the 'taxes.index' view.</li> </ul> </li> <li> <p><code>store(CreateTaxRequest $request)</code>:</p> <ul> <li>This method handles the creation of a new tax.</li> <li>It retrieves the input data from the request, and if the <code>is_default</code> flag is set to '1', it updates any existing default tax to not be the default anymore. Then, it creates a new tax record in the database.</li> </ul> </li> <li> <p><code>edit(Tax $tax)</code>:</p> <ul> <li>This method retrieves a specific tax record and sends it as a response.</li> </ul> </li> <li> <p><code>update(UpdateTaxRequest $request, $taxId)</code>:</p> <ul> <li>This method handles the update of an existing tax.</li> <li>It retrieves the input data from the request, and if the <code>is_default</code> flag is set to '1', it updates any existing default tax to not be the default anymore. Then, it updates the tax record in the database.</li> </ul> </li> <li> <p><code>destroy(Tax $tax)</code>:</p> <ul> <li>This method handles the deletion of a tax.</li> <li>It checks whether the tax can be deleted by calling the <code>canDelete</code> function with certain parameters. If it can't be deleted, an error response is sent.</li> <li>If the tax can be deleted, it is removed from the database.</li> </ul> </li> <li> <p><code>defaultStatus(Tax $tax)</code>:</p> <ul> <li>This method toggles the default status of a tax.</li> <li>If the tax's default status is being set to '1', it updates other taxes to make sure only one tax is the default.</li> <li>Then, it updates the tax's default status and sends a success response.</li> </ul> </li> </ol> <p>Overall, this controller is responsible for managing CRUD (Create, Read, Update, Delete) operations for tax records in a web application, along with handling default tax settings and AJAX-based data retrieval.</p>"},{"location":"Admin/Taxes/#model","title":"Model","text":"<p>The models related to this controller are : App\\Models\\Tax and App\\Models\\InvoiceItemTax.</p>"},{"location":"Admin/Taxes/#tax-model","title":"Tax Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass Tax extends Model\n{\nuse HasFactory;\n\nprotected $table = 'taxes';\n\nprotected $fillable = ['name', 'value', 'is_default'];\n\nprotected $casts = [\n'name' =&gt; 'string',\n'value' =&gt; 'double',\n'is_default' =&gt; 'integer',\n];\n\npublic static $rules = [\n'name' =&gt; 'required|unique:taxes,name',\n'value' =&gt; 'required|numeric',\n];\n}\n</code></pre> <p>Let's break down the code and understand its functionality:</p> <ol> <li> <p>Namespace and Use Statements:</p> </li> <li> <p>The model is defined within the <code>App\\Models</code> namespace.</p> </li> <li> <p>The <code>HasFactory</code> trait is used, which provides a simple method for creating model factory instances.</p> </li> <li> <p>Class Definition:</p> </li> <li> <p>The class <code>Tax</code> extends the <code>Model</code> class provided by Laravel's Eloquent ORM.</p> </li> <li> <p>Table Mapping:</p> </li> <li> <p>The <code>$table</code> property specifies the database table associated with this model, which is <code>'taxes'</code>.</p> </li> <li> <p>Fillable Attributes:</p> </li> <li> <p>The <code>$fillable</code> property lists the attributes that are mass assignable. These attributes can be filled using the <code>create</code> or <code>update</code> methods without explicitly specifying each one.</p> </li> <li> <p>Attribute Casting:</p> </li> <li> <p>The <code>$casts</code> property defines how certain attributes should be cast to specific data types when retrieved from the database.</p> </li> <li> <p>In this case:</p> <ul> <li><code>'name'</code> is cast as a string.</li> <li><code>'value'</code> is cast as a double (floating-point number).</li> <li><code>'is_default'</code> is cast as an integer.</li> </ul> </li> <li> <p>Validation Rules:</p> </li> <li> <p>The <code>$rules</code> array defines validation rules for creating and updating records of this model.</p> </li> <li><code>'name'</code> must be unique in the <code>'taxes'</code> table and is required.</li> <li> <p><code>'value'</code> must be a numeric value and is required.</p> </li> <li> <p>Factory Usage:</p> </li> <li>The <code>HasFactory</code> trait enables the use of model factories to create dummy data for testing and database seeding.</li> </ol> <p>Overall, the <code>Tax</code> model is designed to represent tax records in the application's database. It includes attributes for the tax's name, value, and whether it's the default tax. The model also includes validation rules and attribute casting to ensure proper data integrity and consistency when interacting with the database.</p>"},{"location":"Admin/Taxes/#invoice-item-tax-model","title":"Invoice Item Tax model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\n\nclass InvoiceItemTax extends Model\n{\n    use HasFactory;\n\n    public static $rules = [\n        'invoice_item_id' =&gt; 'required',\n        'tax_id' =&gt; 'required',\n        'tax' =&gt; 'nullable',\n    ];\n\n    protected $table = 'invoice_item_taxes';\n\n    public $fillable = [\n        'invoice_item_id',\n        'tax_id',\n        'tax',\n    ];\n\n    protected $casts = [\n        'invoice_item_id' =&gt; 'integer',\n        'tax_id' =&gt; 'integer',\n        'tax' =&gt; 'double',\n    ];\n\n    public function invoiceItem(): BelongsTo\n    {\n        return $this-&gt;belongsTo(InvoiceItem::class);\n    }\n}\n</code></pre> <p>Let's break down the code and understand its functionality:</p> <ol> <li> <p>Namespace and Use Statements:</p> </li> <li> <p>The model is defined within the <code>App\\Models</code> namespace.</p> </li> <li> <p>The <code>HasFactory</code> trait is used, allowing for the creation of model factory instances.</p> </li> <li> <p>Class Definition:</p> </li> <li> <p>The class <code>InvoiceItemTax</code> extends the <code>Model</code> class provided by Laravel's Eloquent ORM.</p> </li> <li> <p>Table Mapping:</p> </li> <li> <p>The <code>$table</code> property specifies the database table associated with this model, which is <code>'invoice_item_taxes'</code>.</p> </li> <li> <p>Fillable Attributes:</p> </li> <li> <p>The <code>$fillable</code> property lists the attributes that are mass assignable. These attributes can be filled using the <code>create</code> or <code>update</code> methods without explicitly specifying each one.</p> </li> <li> <p>The fillable attributes include <code>invoice_item_id</code>, <code>tax_id</code>, and <code>tax</code>.</p> </li> <li> <p>Attribute Casting:</p> </li> <li> <p>The <code>$casts</code> property defines how certain attributes should be cast to specific data types when retrieved from the database.</p> </li> <li> <p>In this case:</p> <ul> <li><code>'invoice_item_id'</code> is cast as an integer.</li> <li><code>'tax_id'</code> is cast as an integer.</li> <li><code>'tax'</code> is cast as a double (floating-point number).</li> </ul> </li> <li> <p>Validation Rules:</p> </li> <li> <p>The <code>$rules</code> array defines validation rules for creating and updating records of this model.</p> </li> <li><code>'invoice_item_id'</code> and <code>'tax_id'</code> are both required.</li> <li> <p><code>'tax'</code> is nullable, meaning it doesn't have to be provided but can be if needed.</p> </li> <li> <p>Relationship:</p> </li> <li> <p>The <code>invoiceItem</code> method defines a <code>BelongsTo</code> relationship with the <code>InvoiceItem</code> model.</p> </li> <li> <p>This indicates that an <code>InvoiceItemTax</code> belongs to an <code>InvoiceItem</code>.</p> </li> <li> <p>Method Annotations:</p> </li> <li>The annotations above the class properties provide hints for the model's properties, such as their data types and relationships.</li> </ol> <p>Overall, the <code>InvoiceItemTax</code> model is designed to represent the relationship between an invoice item and a tax. It includes attributes that link to both the invoice item and the tax, as well as validation rules and casting for data integrity. The model also establishes a <code>BelongsTo</code> relationship with the <code>InvoiceItem</code> model, allowing for retrieval of the associated invoice item.</p>"},{"location":"Admin/Taxes/#view","title":"View","text":""},{"location":"Admin/Taxes/#the-livewire-taxes-table","title":"The livewire: Taxes table","text":"<p>The livewire of the 'tax table' located in app&gt;http&gt;livewire&gt;TaxTable.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Livewire;\n\nuse App\\Models\\Tax;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Rappasoft\\LaravelLivewireTables\\Views\\Column;\n\nclass TaxTable extends LivewireTableComponent\n{\n    protected $model = Tax::class;\n    protected string $tableName = 'taxes';\n\n    // for table header button\n    public $showButtonOnHeader = true;\n    public $buttonComponent = 'taxes.components.add-button';\n\n    public function configure(): void\n    {\n        $this-&gt;setPrimaryKey('id');\n        $this-&gt;setDefaultSort('created_at', 'desc');\n        $this-&gt;setQueryStringStatus(false);\n\n        $this-&gt;setThAttributes(function (Column $column) {\n            if ($column-&gt;getField() == 'id') {\n                return [\n                    'style' =&gt; 'width:9%;text-align:center',\n                ];\n            }\n\n            return [\n                'class' =&gt; 'text-center',\n            ];\n        });\n\n        $this-&gt;setTdAttributes(function (Column $column, $row, $columnIndex, $rowIndex) {\n            if ($column-&gt;getField() === 'name') {\n                return [\n                    'class' =&gt; 'w-50',\n                ];\n            }\n            if ($column-&gt;getField() === 'value') {\n                return [\n                    'class' =&gt; 'w-25',\n                ];\n            }\n            if ($column-&gt;getField() === 'is_default') {\n                return [\n                    'class' =&gt; 'text-center',\n                ];\n            }\n\n            return [];\n        });\n    }\n\n    public function columns(): array\n    {\n        return [\n            Column::make(__('messages.common.name'), 'name')\n                -&gt;sortable()\n                -&gt;searchable(),\n            Column::make(__('messages.common.value'), 'value')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return $row-&gt;value.'%';\n                }),\n            Column::make(__('messages.common.default'), 'is_default')\n                -&gt;view('taxes.components.default'),\n            Column::make(__('messages.common.action'), 'id')\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('livewire.modal-action-button')\n                        -&gt;with([\n                            'dataId' =&gt; $row-&gt;id,\n                            'editClass' =&gt; 'tax-edit-btn',\n                            'deleteClass' =&gt; 'tax-delete-btn',\n                        ]);\n                }),\n        ];\n    }\n\n    public function builder(): Builder\n    {\n        return Tax::query()-&gt;select('taxes.*');\n    }\n}\n</code></pre> <p>Let's break down the code and understand its functionality:</p> <ol> <li> <p>Namespace and Use Statements:</p> </li> <li> <p>The component is defined within the <code>App\\Http\\Livewire</code> namespace.</p> </li> <li> <p>The <code>Tax</code> model is imported, as well as some Livewire and LaravelLivewireTables classes and components.</p> </li> <li> <p>Class Definition:</p> </li> <li> <p>The class <code>TaxTable</code> extends <code>LivewireTableComponent</code>.</p> </li> <li> <p>Model and Table Configuration:</p> </li> <li> <p>The <code>$model</code> property specifies the model associated with the table, which is <code>Tax::class</code>.</p> </li> <li> <p>The <code>$tableName</code> property specifies the name of the table, which is <code>'taxes'</code>.</p> </li> <li> <p>Button Configuration:</p> </li> <li> <p>The <code>showButtonOnHeader</code> property indicates whether a button should be shown in the table header.</p> </li> <li> <p>The <code>buttonComponent</code> property specifies the Livewire component that will render the button.</p> </li> <li> <p><code>configure()</code> Method:</p> </li> <li> <p>This method is used to configure various aspects of the Livewire table component.</p> </li> <li><code>setPrimaryKey()</code> sets the primary key for the table to <code>'id'</code>.</li> <li><code>setDefaultSort()</code> sets the default sorting to be based on the <code>'created_at'</code> column in descending order.</li> <li><code>setQueryStringStatus(false)</code> disables using query strings for table state.</li> <li> <p><code>setThAttributes()</code> and <code>setTdAttributes()</code> define attributes for table headers and table cells, respectively.</p> </li> <li> <p><code>columns()</code> Method:</p> </li> <li> <p>This method defines the columns to be displayed in the table.</p> </li> <li>Each column is created using the <code>Column::make()</code> method and specifies the column's title, database field, and various configuration options.</li> <li> <p>The last column includes a button for actions like editing and deleting.</p> </li> <li> <p><code>builder()</code> Method:</p> </li> <li>This method returns a query builder instance used to fetch data for the table.</li> <li>It selects all columns from the <code>taxes</code> table.</li> </ol> <p>In summary, the <code>TaxTable</code> Livewire component is used to display a dynamic table of tax records. It provides sorting, searching, and pagination functionalities. The table columns are defined using the <code>columns()</code> method, and the data is fetched using the <code>builder()</code> method. The component also allows you to configure various aspects of the table's appearance and behavior.</p>"},{"location":"Admin/Taxes/#list-of-taxes","title":"List of Taxes","text":"<p>The list of taxes view is located in : resources\\views\\Taxes\\index.blade.php.</p> <pre><code>@extends('layouts.app')\n@section('title')\n{{ __('messages.taxes') }}\n@endsection\n@section('content')\n&lt;div class=\"container-fluid\"&gt;\n&lt;div class=\"d-flex flex-column \"&gt;\n@include('flash::message')\n&lt;livewire:tax-table/&gt;\n&lt;/div&gt;\n@include('taxes.create_modal')\n@include('taxes.edit_modal')\n&lt;/div&gt;\n@endsection\n</code></pre> <p>Let's break down the code and understand its structure:</p> <ol> <li> <p>Extending Layout:</p> </li> <li> <p>The view extends the <code>layouts.app</code> layout template, indicating that it should inherit the structure and elements defined in that layout.</p> </li> <li> <p>Setting Page Title:</p> </li> <li> <p>The <code>@section('title')</code> directive sets the page title to be displayed in the browser's title bar or tab.</p> </li> <li> <p>Defining Content Section:</p> </li> <li> <p>The <code>@section('content')</code> directive defines the main content section of the view.</p> </li> <li> <p>Container and Flex Layout:</p> </li> <li> <p>The content is wrapped within a <code>&lt;div class=\"container-fluid\"&gt;</code> element, providing a fluid container layout.</p> </li> <li> <p>Flash Messages:</p> </li> <li> <p>The <code>@include('flash::message')</code> directive includes a Flash message, which used to display temporary informational messages to the user.</p> </li> <li> <p>Livewire Component:</p> </li> <li> <p>The <code>@livewire('tax-table')</code> directive includes the <code>TaxTable</code> Livewire component in the view. This component generates the dynamic table displaying tax records.</p> </li> <li> <p>Include Create Modal:</p> </li> <li> <p>The <code>@include('taxes.create_modal')</code> directive includes a modal for creating new tax records. This modal is likely shown when the user wants to add a new tax.</p> </li> <li> <p>Include Edit Modal:</p> </li> <li>The <code>@include('taxes.edit_modal')</code> directive includes a modal for editing existing tax records. This modal is shown when the user wants to update the details of a tax.</li> </ol>"},{"location":"Admin/Taxes/#edit-tax","title":"Edit tax","text":"<p>The edit taxes modal view is located in : resources\\views\\Taxes\\edit.blade.php.</p> <pre><code>&lt;div\n  id=\"editTaxModal\"\n  class=\"modal fade\"\n  role=\"dialog\"\n  tabindex=\"-1\"\n  aria-hidden=\"true\"\n&gt;\n  &lt;div class=\"modal-dialog\"&gt;\n    &lt;!-- Modal content--&gt;\n    &lt;div class=\"modal-content\"&gt;\n      &lt;div class=\"modal-header\"&gt;\n        &lt;h2&gt;{{ __('messages.tax.edit_tax') }}&lt;/h2&gt;\n        &lt;button\n          type=\"button\"\n          class=\"btn-close\"\n          data-bs-dismiss=\"modal\"\n          aria-label=\"Close\"\n        &gt;&lt;/button&gt;\n      &lt;/div&gt;\n      {{ Form::open(['id'=&gt;'editTaxForm']) }}\n      &lt;div class=\"modal-body scroll-y\"&gt;\n        &lt;div\n          class=\"alert alert-danger display-none hide\"\n          id=\"editValidationErrorsBox\"\n        &gt;&lt;/div&gt;\n        {{ Form::hidden('taxId',null,['id'=&gt;'taxId']) }}\n        &lt;div class=\"row\"&gt;\n          &lt;div class=\"form-group col-sm-12 mb-5\"&gt;\n            {{ Form::label('name', __('messages.common.name').':', ['class' =&gt;\n            'form-label required mb-3']) }} {{ Form::text('name', null,\n            ['id'=&gt;'editTaxName','class' =&gt; 'form-control form-control-solid',\n            'required','placeholder' =&gt; __('messages.common.name')]) }}\n          &lt;/div&gt;\n          &lt;div class=\"form-group col-sm-12 mb-5\"&gt;\n            {{ Form::label('value', __('messages.common.value').':', ['class' =&gt;\n            'form-label required mb-3']) }} {{ Form::number('value', null,\n            ['id'=&gt;'editTaxValue','class' =&gt; 'form-control form-control-solid',\n            'min' =&gt;\n            0,'oninput'=&gt;\"validity.valid||(value=value.replace(/[e\\+\\-]/gi,''))\",'min'=&gt;'0','value'=&gt;'0','step'=&gt;'.01','required','placeholder'\n            =&gt; __('messages.common.value')]) }}\n          &lt;/div&gt;\n          &lt;div class=\"form-group col-sm-12 mb-5\"&gt;\n            {{ Form::label('is_default',__('messages.tax.is_default').':',\n            ['class' =&gt; 'form-label mb-3']) }}\n            &lt;div class=\"form-check form-check-custom \"&gt;\n              &lt;div class=\"btn-group\"&gt;\n                &lt;input\n                  class=\"form-check-input me-2\"\n                  type=\"radio\"\n                  name=\"is_default\"\n                  value=\"1\"\n                  checked\n                /&gt;\n                &lt;label class=\"form-check-label\"&gt;\n                  {{ __('messages.tax.yes').':' }}\n                &lt;/label&gt;\n                &lt;input\n                  class=\"form-check-input mx-2\"\n                  type=\"radio\"\n                  name=\"is_default\"\n                  value=\"0\"\n                /&gt;\n                &lt;label class=\"form-check-label\"&gt;\n                  {{ __('messages.tax.no').':' }}\n                &lt;/label&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div class=\"modal-footer pt-0\"&gt;\n        {{ Form::button(__('messages.common.save'), ['type' =&gt; 'submit','class'\n        =&gt; 'btn btn-primary me-2','id' =&gt; 'btnEditSave','data-loading-text' =&gt;\n        \"&lt;span class=\"spinner-border spinner-border-sm\"&gt;&lt;/span&gt; Processing...\"])\n        }}\n        &lt;button\n          type=\"button\"\n          class=\"btn btn-secondary btn-active-light-primary me-3\"\n          data-bs-dismiss=\"modal\"\n        &gt;\n          {{ __('messages.common.cancel') }}\n        &lt;/button&gt;\n      &lt;/div&gt;\n      {{ Form::close() }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>Let's break down the code and understand its structure and purpose:</p> <ol> <li> <p>Modal Structure:</p> </li> <li> <p>The view contains a modal dialog structure that appears when the user wants to edit a tax record.</p> </li> <li> <p>The modal is triggered by a button or link that invokes a JavaScript function to open the modal.</p> </li> <li> <p>Modal Header:</p> </li> <li> <p>The modal's header contains a title for the modal, which is \"Edit Tax.\"</p> </li> <li> <p>A close button is provided using Bootstrap's <code>data-bs-dismiss</code> attribute to close the modal.</p> </li> <li> <p>Form Opening:</p> </li> <li> <p>The <code>{{ Form::open(['id'=&gt;'editTaxForm']) }}</code> directive opens an HTML form for submitting the edit data. The form is submitted asynchronously using JavaScript.</p> </li> <li> <p>Modal Body:</p> </li> <li> <p>The modal body contains form elements for editing the tax record.</p> </li> <li>It includes input fields for the tax's name, value, and whether it's the default tax.</li> <li> <p>The fields are populated with the current values of the tax being edited.</p> </li> <li> <p>Validation Errors Box:</p> </li> <li> <p>An empty <code>&lt;div&gt;</code> is provided to display validation errors if they occur during form submission.</p> </li> <li> <p>The div has the classes <code>alert</code>, <code>alert-danger</code>, <code>display-none</code>, and <code>hide</code> which hide the element initially.</p> </li> <li> <p>Hidden Field for Tax ID:</p> </li> <li> <p>A hidden input field (<code>{{ Form::hidden('taxId',null,['id'=&gt;'taxId']) }}</code>) holds the ID of the tax being edited. This is crucial for identifying which tax record to update.</p> </li> <li> <p>Form Groups and Inputs:</p> </li> <li> <p>The form groups contain labels and input fields for the tax's name, value, and default status.</p> </li> <li>The <code>name</code> and <code>value</code> fields are populated using the <code>Form::text</code> and <code>Form::number</code> methods.</li> <li> <p>The <code>is_default</code> field uses radio buttons to select whether the tax is the default tax or not.</p> </li> <li> <p>Modal Footer:</p> </li> <li> <p>The modal footer contains buttons for saving changes and canceling the edit process.</p> </li> <li> <p>The \"Save\" button has an ID of <code>btnEditSave</code>, which might be used for JavaScript interactions.</p> </li> <li> <p>Form Closing:</p> </li> <li><code>{{ Form::close() }}</code> closes the HTML form.</li> </ol>"},{"location":"Admin/Taxes/#create-tax","title":"Create Tax","text":"<p>The create taxes modal view is located in : resources\\views\\Taxes\\create.blade.php.</p> <pre><code>&lt;div\n  id=\"addTaxModal\"\n  class=\"modal fade\"\n  role=\"dialog\"\n  tabindex=\"-1\"\n  aria-hidden=\"true\"\n&gt;\n  &lt;div class=\"modal-dialog\"&gt;\n    &lt;!-- Modal content--&gt;\n    &lt;div class=\"modal-content\"&gt;\n      &lt;div class=\"modal-header\"&gt;\n        &lt;h2&gt;{{ __('messages.tax.add_tax') }}&lt;/h2&gt;\n        &lt;button\n          type=\"button\"\n          class=\"btn-close\"\n          data-bs-dismiss=\"modal\"\n          aria-label=\"Close\"\n        &gt;&lt;/button&gt;\n      &lt;/div&gt;\n      {{ Form::open(['id'=&gt;'addTaxForm']) }}\n      &lt;div class=\"modal-body scroll-y\"&gt;\n        &lt;div\n          class=\"alert alert-danger display-none hide\"\n          id=\"validationErrorsBox\"\n        &gt;&lt;/div&gt;\n        &lt;div class=\"row\"&gt;\n          &lt;div class=\"form-group col-sm-12 mb-5\"&gt;\n            {{ Form::label('name', __('messages.common.name').':', ['class' =&gt;\n            'form-label required mb-3']) }} {{ Form::text('name', null,\n            ['id'=&gt;'name','class' =&gt; 'form-control form-control-solid',\n            'required','placeholder' =&gt; __('messages.common.name')]) }}\n          &lt;/div&gt;\n          &lt;div class=\"form-group col-sm-12 mb-5\"&gt;\n            {{ Form::label('value', __('messages.common.value').':', ['class' =&gt;\n            'form-label required mb-3']) }} {{ Form::number('value', null,\n            ['id'=&gt;'value','class' =&gt; 'form-control\n            form-control-solid','oninput'=&gt;\"validity.valid||(value=value.replace(/[e\\+\\-]/gi,''))\",'min'=&gt;'0','value'=&gt;'0','step'=&gt;'.01',\n            'required','placeholder' =&gt; __('messages.common.value')]) }}\n          &lt;/div&gt;\n          &lt;div class=\"form-group col-sm-12 mb-5\"&gt;\n            {{ Form::label('is_default', 'Is Default:', ['class' =&gt; 'form-label\n            mb-3']) }}\n            &lt;div class=\"form-check form-check-custom \"&gt;\n              &lt;div class=\"btn-group\"&gt;\n                &lt;input\n                  class=\"form-check-input me-2\"\n                  type=\"radio\"\n                  name=\"is_default\"\n                  value=\"1\"\n                /&gt;\n                &lt;label class=\"form-check-label\"&gt;\n                  {{ __('messages.tax.yes').':' }}\n                &lt;/label&gt;\n                &lt;input\n                  class=\"form-check-input mx-2\"\n                  type=\"radio\"\n                  name=\"is_default\"\n                  value=\"0\"\n                  checked\n                /&gt;\n                &lt;label class=\"form-check-label\"&gt;\n                  {{ __('messages.tax.no').':' }}\n                &lt;/label&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div class=\"modal-footer pt-0\"&gt;\n        {{ Form::button(__('messages.common.save'), ['type' =&gt; 'submit','class'\n        =&gt; 'btn btn-primary me-2','id' =&gt; 'btnSave','data-loading-text' =&gt;\n        \"&lt;span class=\"spinner-border spinner-border-sm\"&gt;&lt;/span&gt; Processing...\"])\n        }}\n        &lt;button\n          type=\"button\"\n          class=\"btn btn-secondary btn-active-light-primary me-3\"\n          data-bs-dismiss=\"modal\"\n        &gt;\n          {{ __('messages.common.cancel') }}\n        &lt;/button&gt;\n      &lt;/div&gt;\n      {{ Form::close() }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>The provided code represents the Blade view for adding a new tax record using a modal dialog. This view is similar to the previous one (<code>tax.edit</code>), but it is focused on creating new tax records. Let's break down the code and understand its structure and purpose:</p> <ol> <li> <p>Modal Structure:</p> </li> <li> <p>The view contains a modal dialog structure that appears when the user wants to add a new tax record.</p> </li> <li> <p>The modal is triggered by a button or link that invokes a JavaScript function to open the modal.</p> </li> <li> <p>Modal Header:</p> </li> <li> <p>The modal's header contains a title for the modal, which is \"Add Tax.\"</p> </li> <li> <p>A close button is provided using Bootstrap's <code>data-bs-dismiss</code> attribute to close the modal.</p> </li> <li> <p>Form Opening:</p> </li> <li> <p>The <code>{{ Form::open(['id'=&gt;'addTaxForm']) }}</code> directive opens an HTML form for submitting the new tax data. The form is submitted asynchronously using JavaScript.</p> </li> <li> <p>Modal Body:</p> </li> <li> <p>The modal body contains form elements for entering details of the new tax record.</p> </li> <li>It includes input fields for the tax's name, value, and whether it's the default tax.</li> <li> <p>The fields are empty or set to default values.</p> </li> <li> <p>Validation Errors Box:</p> </li> <li> <p>An empty <code>&lt;div&gt;</code> is provided to display validation errors if they occur during form submission.</p> </li> <li> <p>The div has the classes <code>alert</code>, <code>alert-danger</code>, <code>display-none</code>, and <code>hide</code> which likely hide the element initially.</p> </li> <li> <p>Form Groups and Inputs:</p> </li> <li> <p>The form groups contain labels and input fields for the tax's name, value, and default status.</p> </li> <li>The <code>name</code> and <code>value</code> fields are empty, allowing the user to input these details.</li> <li> <p>The <code>is_default</code> field uses radio buttons to select whether the new tax will be the default tax.</p> </li> <li> <p>Modal Footer:</p> </li> <li> <p>The modal footer contains buttons for saving the new tax record and canceling the creation process.</p> </li> <li> <p>The \"Save\" button has an ID of <code>btnSave</code>, which is used for JavaScript interactions.</p> </li> <li> <p>Form Closing:</p> </li> <li><code>{{ Form::close() }}</code> closes the HTML form.</li> </ol>"},{"location":"Admin/Transactions/","title":"Transactions","text":""},{"location":"Admin/Transactions/#route","title":"Route","text":"<p>The route that leads to admin's transactions is:</p> <pre><code> Route::get('transactions', [PaymentController::class, 'index'])-&gt;name('transactions.index');\n</code></pre>"},{"location":"Admin/Transactions/#controller","title":"Controller","text":"<p>The controller of the 'Transactions' page located in app&gt;http&gt;controllers&gt;PaymentController.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Exports\\AdminTransactionsExport;\nuse App\\Models\\Invoice;\nuse App\\Models\\Payment;\nuse App\\Models\\Role;\nuse Barryvdh\\DomPDF\\Facade as PDF;\nuse Illuminate\\Contracts\\Foundation\\Application;\nuse Illuminate\\Contracts\\View\\Factory;\nuse Illuminate\\Contracts\\View\\View;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\Response;\nuse Laracasts\\Flash\\Flash;\nuse Maatwebsite\\Excel\\Facades\\Excel;\nuse Symfony\\Component\\HttpFoundation\\BinaryFileResponse;\n\nclass PaymentController extends AppBaseController\n{\n    /**\n     * @return Application|Factory|View\n     */\n    public function index(): View|Factory|Application\n    {\n        return view('transactions.index');\n    }\n\n    /**\n     * @return BinaryFileResponse\n     */\n    public function exportTransactionsExcel(): BinaryFileResponse\n    {\n        return Excel::download(new AdminTransactionsExport(), 'transaction.xlsx');\n    }\n\n    /**\n     * @param $id\n     * @return JsonResponse\n     */\n    public function showPaymentNotes($id): JsonResponse\n    {\n        $paymentNotes = Payment::where('id', $id)-&gt;first();\n\n        return $this-&gt;sendResponse($paymentNotes-&gt;notes, 'Note retrieved successfully.');\n    }\n\n    /**\n     * @param  Request  $request\n     * @return mixed\n     */\n    public function changeTransactionStatus(Request $request): mixed\n    {\n        $input = $request-&gt;all();\n\n        /** @var Payment $payment */\n        $payment = Payment::whereId($input['id'])-&gt;wherePaymentMode(Payment::MANUAL)-&gt;with('invoice')-&gt;firstOrFail();\n\n        if ($input['status'] == Payment::MANUAL) {\n            $payment-&gt;update([\n                'is_approved' =&gt; $input['status'],\n            ]);\n            $this-&gt;updatePayment($payment);\n\n            return $this-&gt;sendSuccess('Manual Payment Approved successfully.');\n        }\n\n        $payment-&gt;update([\n            'is_approved' =&gt; $input['status'],\n        ]);\n        $this-&gt;updatePayment($payment);\n\n        return $this-&gt;sendSuccess('Manual Payment Denied successfully.');\n    }\n\n    /**\n     * @param  Payment  $payment\n     * @return void\n     */\n    private function updatePayment(Payment $payment): void\n    {\n        $paymentInvoice = $payment-&gt;invoice;\n        $totalPayment = Payment::whereInvoiceId($paymentInvoice-&gt;id)-&gt;whereIsApproved(Payment::APPROVED)-&gt;sum('amount');\n        $status = Invoice::PARTIALLY;\n        if ($payment-&gt;amount == $paymentInvoice-&gt;final_amount || $totalPayment == $paymentInvoice-&gt;final_amount) {\n            $status = $payment-&gt;is_approved == Payment::APPROVED ? Invoice::PAID : Invoice::UNPAID;\n        } elseif ($totalPayment == 0) {\n            $status = Invoice::UNPAID;\n        }\n        $paymentInvoice-&gt;update([\n            'status' =&gt; $status,\n        ]);\n    }\n\n    public function downloadAttachment($transactionId)\n    {\n        /** @var Payment $transaction */\n        $transaction = Payment::with('media')-&gt;findOrFail($transactionId);\n        $attachment = $transaction-&gt;media-&gt;first();\n\n        if (getLogInUser()-&gt;hasrole(Role::CLIENT)) {\n            if ($transaction-&gt;invoice-&gt;client-&gt;user_id !== getLogInUserId()) {\n                Flash::error('Seems, you are not allowed to access this record.');\n\n                return redirect()-&gt;back();\n            }\n        }\n\n        if ($attachment) {\n            return $attachment;\n        }\n\n        return null;\n    }\n\n    /**\n     * @return Response\n     */\n    public function exportTransactionsPdf(): Response\n    {\n        ini_set('max_execution_time', 36000000);\n        $data['payments'] = Payment::with(['invoice.client.user'])-&gt;orderBy('created_at', 'desc')-&gt;get();\n        $transactionsPdf = PDF::loadView('transactions.export_transactions_pdf', $data);\n\n        return $transactionsPdf-&gt;download('Transactions.pdf');\n    }\n}\n</code></pre> <p>This is a PHP class called <code>PaymentController</code> in our application. It is a controller responsible for handling various actions related to payments and transactions. Let's break down the key methods and functionality in this controller:</p> <ol> <li> <p>Namespace and Imports:</p> </li> <li> <p>The controller is in the <code>App\\Http\\Controllers</code> namespace.</p> </li> <li> <p>It imports several classes and facades that are used within the controller, such as models, export, and PDF generation libraries.</p> </li> <li> <p>Index Method:</p> </li> <li> <p>The <code>index</code> method is responsible for rendering a view named 'transactions.index'.</p> </li> <li> <p>Export Transactions Excel Method:</p> </li> <li> <p>The <code>exportTransactionsExcel</code> method is used for exporting transactions to an Excel file using the Maatwebsite\\Excel library.</p> </li> <li> <p>It returns a <code>BinaryFileResponse</code>, typically triggering a file download when accessed.</p> </li> <li> <p>Show Payment Notes Method:</p> </li> <li> <p>The <code>showPaymentNotes</code> method retrieves payment notes for a given payment ID.</p> </li> <li> <p>It returns a JSON response with the payment notes and a success message.</p> </li> <li> <p>Change Transaction Status Method:</p> </li> <li> <p>The <code>changeTransactionStatus</code> method updates the status of a payment transaction.</p> </li> <li>It accepts a POST request with an 'id' and 'status' parameter.</li> <li>Depending on the 'status' parameter, it either approves or denies a manual payment and updates the payment accordingly.</li> <li> <p>It returns a success message as a JSON response.</p> </li> <li> <p>Update Payment Method (Private):</p> </li> <li> <p>The <code>updatePayment</code> method is a private method used internally to update the status of an associated invoice based on the payment status.</p> </li> <li> <p>It calculates the total payment for an invoice and updates the invoice status accordingly.</p> </li> <li> <p>Download Attachment Method:</p> </li> <li> <p>The <code>downloadAttachment</code> method is used to download attachments associated with a payment transaction.</p> </li> <li> <p>It checks permissions for accessing the attachment based on the user's role and returns the attachment file if it exists.</p> </li> <li> <p>Export Transactions PDF Method:</p> </li> <li>The <code>exportTransactionsPdf</code> method generates a PDF document containing payment transactions using the DomPDF library.</li> <li>It sets a longer execution time to accommodate potentially large PDF generation.</li> <li>It loads the data into a PDF view named 'transactions.export_transactions_pdf' and triggers a PDF download.</li> </ol> <p>Overall, this controller handles various tasks related to payment transactions, including exporting transactions to Excel and PDF, changing transaction statuses, and managing attachments associated with transactions. It integrates with Laravel's features and libraries to perform these actions efficiently.</p>"},{"location":"Admin/Transactions/#model","title":"Model","text":"<p>The models related to this controller are :App\\Models\\Invoice , App\\Models\\Payment and App\\Models\\Role .</p>"},{"location":"Admin/Transactions/#invoice-model","title":"Invoice Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Carbon\\Carbon;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsToMany;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Support\\Str;\n\nclass Invoice extends Model\n{\n    use HasFactory;\n\n    public const SELECT_DISCOUNT_TYPE = 0;\n    public const FIXED = 1;\n    public const PERCENTAGE = 2;\n\n    public const DISCOUNT_TYPE = [\n        self::SELECT_DISCOUNT_TYPE =&gt; 'Select Discount Type',\n        self::FIXED =&gt; 'Fixed',\n        self::PERCENTAGE =&gt; 'Percentage',\n    ];\n\n    public const DRAFT = 0;\n    public const UNPAID = 1;\n    public const PAID = 2;\n    public const PARTIALLY = 3;\n    public const OVERDUE = 4;\n    public const STATUS_ALL = 5;\n    public const PROCESSING = 6;\n\n    public const STATUS_ARR = [\n        self::STATUS_ALL =&gt; 'All',\n        self::DRAFT =&gt; 'Draft',\n        self::UNPAID =&gt; 'Unpaid',\n        self::PAID =&gt; 'Paid',\n        self::PARTIALLY =&gt; 'Partially Paid',\n        self::OVERDUE =&gt; 'Overdue',\n        self::PROCESSING =&gt; 'Processing',\n    ];\n\n    public const RECURRING_OFF = 0;\n\n    public const RECURRING_ON = 1;\n\n    public const RECURRING_STATUS_ARR = [\n        self::RECURRING_ON =&gt; 'On',\n        self::RECURRING_OFF =&gt; 'Off',\n    ];\n\n    public const MONTHLY = 1;\n    public const QUARTERLY = 2;\n    public const SEMIANNUALLY = 3;\n    public const ANNUALLY = 4;\n\n    public const RECURRING_ARR = [\n        self::MONTHLY =&gt; 'Monthly',\n        self::QUARTERLY =&gt; 'Quarterly',\n        self::SEMIANNUALLY =&gt; 'Semi Annually',\n        self::ANNUALLY =&gt; 'Annually',\n    ];\n\n    /**\n     * Validation rules\n     *\n     * @var array\n     */\n    public static $rules = [\n        'client_id' =&gt; 'required',\n        'invoice_id' =&gt; 'required|unique:invoices,invoice_id',\n        'invoice_date' =&gt; 'required',\n        'due_date' =&gt; 'required',\n    ];\n\n    public static $messages = [\n        'client_id.required' =&gt; 'The Client field is required.',\n        'invoice_date.required' =&gt; 'The invoice date field is required.',\n        'due_date' =&gt; 'The invoice Due date field is required.',\n    ];\n\n    public $table = 'invoices';\n\n    public $appends = ['status_label'];\n\n    public $fillable = [\n        'client_id',\n        'invoice_date',\n        'due_date',\n        'invoice_id',\n        'currency_id',\n        'amount',\n        'discount_type',\n        'discount',\n        'final_amount',\n        'note',\n        'term',\n        'template_id',\n        'status',\n        'recurring_status',\n        'recurring_cycle',\n        'last_recurring_on',\n        'parent_id',\n    ];\n\n    protected $casts = [\n        'client_id' =&gt; 'integer',\n        'parent_id' =&gt; 'integer',\n        'invoice_date' =&gt; 'date',\n        'due_date' =&gt; 'date',\n        'invoice_id' =&gt; 'string',\n        'currency_id' =&gt; 'integer',\n        'amount' =&gt; 'double',\n        'discount_type' =&gt; 'integer',\n        'discount' =&gt; 'double',\n        'final_amount' =&gt; 'double',\n        'note' =&gt; 'string',\n        'term' =&gt; 'string',\n        'template_id' =&gt; 'integer',\n        'status' =&gt; 'integer',\n        'recurring_status' =&gt; 'integer',\n        'recurring_cycle' =&gt; 'integer',\n        'last_recurring_on' =&gt; 'date',\n        'tax' =&gt; 'double',\n    ];\n\n    public function getStatusLabelAttribute(): string\n    {\n        return self::STATUS_ARR[$this-&gt;status];\n    }\n\n    /**\n     * @return BelongsTo\n     */\n    public function client(): BelongsTo\n    {\n        return $this-&gt;belongsTo(Client::class, 'client_id', 'id');\n    }\n\n    /**\n     * @return HasMany\n     */\n    public function invoiceItems(): HasMany\n    {\n        return $this-&gt;hasMany(InvoiceItem::class);\n    }\n\n    /**\n     * @return string\n     */\n    public static function generateUniqueInvoiceId(): string\n    {\n        $invoiceId = mb_strtoupper(Str::random(6));\n        while (true) {\n            $isExist = self::whereInvoiceId($invoiceId)-&gt;exists();\n            if ($isExist) {\n                self::generateUniqueInvoiceId();\n            }\n            break;\n        }\n\n        return $invoiceId;\n    }\n\n    /**\n     * @return HasMany\n     */\n    public function payments(): HasMany\n    {\n        return $this-&gt;hasMany(Payment::class, 'invoice_id', 'id');\n    }\n\n    /**\n     * @return HasMany\n     */\n    public function AdminPayment(): HasMany\n    {\n        return $this-&gt;hasMany(AdminPayment::class, 'invoice_id', 'id');\n    }\n\n    /**\n     * @return BelongsTo\n     */\n    public function invoiceTemplate(): BelongsTo\n    {\n        return $this-&gt;belongsTo(InvoiceSetting::class, 'template_id', 'id');\n    }\n\n    public function parentInvoice(): BelongsTo\n    {\n        return $this-&gt;belongsTo(self::class, 'parent_id', 'id');\n    }\n\n    public function childInvoices(): HasMany\n    {\n        return $this-&gt;hasMany(self::class, 'parent_id', 'id');\n    }\n\n    /**\n     * @param $value\n     * @return Setting|mixed\n     */\n    public function getCurrencyIdAttribute($value)\n    {\n        if (! empty($value)) {\n            return Currency::where('id', $value)-&gt;pluck('id')-&gt;first();\n        }\n\n        return Currency::where('id', getSettingValue('current_currency'))-&gt;pluck('id')-&gt;first();\n    }\n\n    /**\n     * @param $value\n     */\n    public function setInvoiceDateAttribute($value): void\n    {\n        $this-&gt;attributes['invoice_date'] = Carbon::createFromFormat(currentDateFormat(),\n            $value)-&gt;translatedFormat('Y-m-d');\n    }\n\n    /**\n     * @param $value\n     */\n    public function setDueDateAttribute($value): void\n    {\n        $this-&gt;attributes['due_date'] = Carbon::createFromFormat(currentDateFormat(),\n            $value)-&gt;translatedFormat('Y-m-d');\n    }\n\n    /**\n     * @return BelongsToMany\n     */\n    public function invoiceTaxes(): BelongsToMany\n    {\n        return $this-&gt;belongsToMany(Tax::class,'invoice_taxes');\n    }\n}\n</code></pre> <p>The provided code represents a Laravel Eloquent model named <code>Invoice</code>. This model is used to interact with the 'invoices' database table and represents various attributes and behaviors related to invoices. Let's break down the key aspects of this <code>Invoice</code> model:</p> <ol> <li> <p>Namespace: The model is defined within the <code>App\\Models</code> namespace, which is a standard Laravel convention for organizing models.</p> </li> <li> <p>Extends Model: This model class extends <code>Illuminate\\Database\\Eloquent\\Model</code>, which means it inherits various features and functionalities from the Eloquent model class.</p> </li> <li> <p>Use of HasFactory Trait: The <code>HasFactory</code> trait is included in this model. It's used to enable Laravel's factory support, allowing you to easily create model instances for testing or seeding the database.</p> </li> <li> <p>Constants: The model defines several constant values that represent different aspects of invoices, such as discount types, invoice statuses, recurring statuses, and recurring cycle options. These constants are used to provide meaningful labels and options for invoices.</p> </li> <li> <p>Validation Rules and Messages: The model defines validation rules and messages using the <code>$rules</code> and <code>$messages</code> static properties. These rules and messages are used for data validation when creating or updating invoice records.</p> </li> <li> <p>Table Name: The <code>public $table</code> property is set to 'invoices', indicating that this model is associated with the 'invoices' database table.</p> </li> <li> <p>Appends Attribute: The <code>public $appends</code> property is an array that defines additional attributes that should be included when converting the model to an array or JSON. In this case, it includes a 'status_label' attribute.</p> </li> <li> <p>Fillable Attributes: The <code>public $fillable</code> property is an array that lists the attributes of the model that are allowed to be mass-assigned. Mass assignment is commonly used when creating or updating records. In this case, it allows mass assignment for various invoice-related attributes.</p> </li> <li> <p>Attribute Casting: The <code>protected $casts</code> property is an array that defines the data types to which specific attributes should be cast when retrieving them from the database. It ensures that attributes like dates and numeric values are cast to their appropriate data types.</p> </li> <li> <p>Accessors and Mutators: The model defines accessor methods (<code>getCurrencyIdAttribute</code>, <code>getStatusLabelAttribute</code>) and mutator methods (<code>setInvoiceDateAttribute</code>, <code>setDueDateAttribute</code>) to customize the behavior of attribute access and assignment.</p> </li> <li> <p>Relationships: The model defines several relationships with other Eloquent models, including:</p> <ul> <li><code>client()</code>: Belongs to a <code>Client</code> model.</li> <li><code>invoiceItems()</code>: Has many <code>InvoiceItem</code> models.</li> <li><code>payments()</code>: Has many <code>Payment</code> models.</li> <li><code>AdminPayment()</code>: Has many <code>AdminPayment</code> models.</li> <li><code>invoiceTemplate()</code>: Belongs to an <code>InvoiceSetting</code> model.</li> <li><code>parentInvoice()</code>: Belongs to another <code>Invoice</code> model as a parent invoice.</li> <li><code>childInvoices()</code>: Has many <code>Invoice</code> models as child invoices.</li> <li><code>invoiceTaxes()</code>: Belongs to many <code>Tax</code> models through the 'invoice_taxes' pivot table.</li> </ul> </li> <li> <p>Custom Methods: The model defines custom methods like <code>generateUniqueInvoiceId</code> to generate unique invoice IDs and <code>setInvoiceDateAttribute</code> and <code>setDueDateAttribute</code> to format date attributes.</p> </li> </ol>"},{"location":"Admin/Transactions/#payment-model","title":"Payment Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Barryvdh\\LaravelIdeHelper\\Eloquent;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Support\\Carbon;\nuse Spatie\\MediaLibrary\\HasMedia;\nuse Spatie\\MediaLibrary\\InteractsWithMedia;\nuse Spatie\\MediaLibrary\\MediaCollections\\Models\\Media;\n\nclass Payment extends Model implements HasMedia\n{\n    use HasFactory, InteractsWithMedia;\n\n    protected $table = 'payments';\n\n    protected $fillable = [\n        'invoice_id', 'amount', 'payment_date', 'payment_mode', 'transaction_id', 'notes', 'is_approved',\n    ];\n\n    protected $casts = [\n        'invoice_id'     =&gt; 'integer',\n        'amount'         =&gt; 'double',\n        'payment_date'   =&gt; 'datetime',\n        'payment_mode'   =&gt; 'integer',\n        'transaction_id' =&gt; 'string',\n        'meta'           =&gt; 'json',\n        'notes'          =&gt; 'string',\n        'user_id'        =&gt; 'integer',\n        'is_approved'    =&gt; 'integer',\n    ];\n\n    public $appends = ['payments_mode'];\n\n    const PAYMENT_ATTACHMENT = 'payment_attachment';\n\n    const FULLPAYMENT = 2;\n    const PARTIALLYPAYMENT = 3;\n\n    const PAYMENT_TYPE = [\n        self::FULLPAYMENT      =&gt; 'Full Payment',\n        self::PARTIALLYPAYMENT =&gt; 'Partially Payment',\n    ];\n\n    const PENDING = 0;\n    const APPROVED = 1;\n    const REJECTED = 2;\n    const STATUS_ALL = 3;\n    const PAID = 'Paid';\n    const PROCESSING = 'Processing';\n    const DENIED = 'Denied';\n    const STATUS_ARR_ALL = 'All';\n\n    const PAYMENT_STATUS = [\n        self::STATUS_ALL =&gt; self::STATUS_ARR_ALL,\n        self::PENDING    =&gt; self::PROCESSING,\n        self::APPROVED   =&gt; self::PAID,\n        self::REJECTED   =&gt; self::DENIED,\n    ];\n\n    const STATUS = [\n        'RECEIVED_AMOUNT' =&gt; 'Received Amount',\n        'PAID_AMOUNT'     =&gt; 'Paid Amount',\n        'DUE_AMOUNT'      =&gt; 'Due Amount',\n    ];\n\n    const MANUAL = 1;\n    const STRIPE = 2;\n    const PAYPAL = 3;\n    const CASH = 4;\n    const RAZORPAY = 5;\n    const ALL = 0;\n\n    const PAYMENT_MODE = [\n        self::ALL      =&gt; 'All',\n        self::MANUAL   =&gt; 'Manual',\n        self::STRIPE   =&gt; 'Stripe',\n        self::PAYPAL   =&gt; 'Paypal',\n        self::CASH     =&gt; 'Cash',\n        self::RAZORPAY =&gt; 'Razorpay',\n    ];\n\n    public static $rules = [\n        'payment_type'       =&gt; 'required',\n        'amount'             =&gt; 'required',\n        'payment_mode'       =&gt; 'required',\n        'payment_attachment' =&gt; 'nullable|mimes:pdf,png,jpeg,jpg',\n    ];\n\n    /**\n     * @return string\n     */\n    public function getPaymentAttachmentAttribute(): string\n    {\n        /** @var Media $media */\n        $media = $this-&gt;getMedia(self::PAYMENT_ATTACHMENT)-&gt;first();\n        if ($media !== null) {\n            return $media-&gt;getFullUrl();\n        }\n\n        return false;\n    }\n\n    /**\n     * @return string\n     */\n    public function getPaymentTypeAttribute(): string\n    {\n        return self::PAYMENT_MODE[$this-&gt;payment_mode];\n    }\n\n    /**\n     * @return string\n     */\n    public function getPaymentsModeAttribute(): string\n    {\n        return self::PAYMENT_MODE[$this-&gt;payment_mode];\n    }\n\n    /**\n     * @return BelongsTo\n     */\n    public function invoice(): BelongsTo\n    {\n        return $this-&gt;belongsTo(Invoice::class);\n    }\n}\n</code></pre> <p>The provided code represents a Laravel Eloquent model named <code>Payment</code>. This model is used to interact with the 'payments' database table and represents various attributes and behaviors related to payments. Let's break down the key aspects of this <code>Payment</code> model:</p> <ol> <li> <p>Namespace: The model is defined within the <code>App\\Models</code> namespace, which is a standard Laravel convention for organizing models.</p> </li> <li> <p>Extends Model: This model class extends <code>Illuminate\\Database\\Eloquent\\Model</code>, which means it inherits various features and functionalities from the Eloquent model class.</p> </li> <li> <p>Use of Traits: The <code>HasFactory</code> and <code>InteractsWithMedia</code> traits are included in this model.</p> </li> <li> <p><code>HasFactory</code> is used to enable Laravel's factory support, allowing you to easily create model instances for testing or seeding the database.</p> </li> <li> <p><code>InteractsWithMedia</code> is used to integrate the model with the Spatie Media Library, which allows you to associate media files (such as payment attachments) with the model.</p> </li> <li> <p>Table Name: The <code>protected $table</code> property is set to 'payments', indicating that this model is associated with the 'payments' database table.</p> </li> <li> <p>Fillable Attributes: The <code>protected $fillable</code> property is an array that lists the attributes of the model that are allowed to be mass-assigned. Mass assignment is commonly used when creating or updating records. In this case, it allows mass assignment for various payment-related attributes such as 'invoice_id,' 'amount,' 'payment_date,' 'payment_mode,' 'transaction_id,' 'notes,' and 'is_approved.'</p> </li> <li> <p>Attribute Casting: The <code>protected $casts</code> property is an array that defines the data types to which specific attributes should be cast when retrieving them from the database. It ensures that attributes like dates, numbers, and JSON fields are cast to their appropriate data types.</p> </li> <li> <p>Appends Attribute: The <code>public $appends</code> property is an array that defines additional attributes that should be included when converting the model to an array or JSON. In this case, it includes a 'payments_mode' attribute.</p> </li> <li> <p>Constants: The model defines constant values that represent different aspects of payments, including payment types, payment statuses, and payment modes.</p> </li> <li> <p>Validation Rules: The model defines validation rules using the <code>$rules</code> static property. These rules are used for data validation when creating or updating payment records.</p> </li> <li> <p>Custom Accessors: The model defines custom accessor methods (<code>getPaymentAttachmentAttribute</code>, <code>getPaymentTypeAttribute</code>, <code>getPaymentsModeAttribute</code>) to customize the behavior of attribute access. These accessors provide formatted URLs for payment attachments and human-readable labels for payment type and mode.</p> </li> <li> <p>Relationships: The model defines a relationship with the <code>Invoice</code> model using the <code>invoice()</code> method, indicating that a payment belongs to an invoice.</p> </li> </ol> <p>Overall, the <code>Payment</code> model provides the structure and functionality to work with payment data in our application. It allows you to associate payments with invoices, manage payment attributes, and interact with media attachments associated with payments.</p>"},{"location":"Admin/Transactions/#role-model","title":"Role Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Database\\Factories\\RoleFactory;\nuse Eloquent as Model;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Support\\Carbon;\nuse Spatie\\Permission\\Models\\Role as roleModal;\n\n/**\n * Class Role\n *\n * @version August 5, 2021, 10:43 am UTC\n *\n * @property string $name\n * @property int $id\n * @property string $display_name\n * @property int $is_default\n * @property string $guard_name\n * @property Carbon|null $created_at\n * @property Carbon|null $updated_at\n * @property-read Collection|\\Spatie\\Permission\\Models\\Permission[] $permissions\n * @property-read int|null $permissions_count\n * @property-read Collection|User[] $users\n * @property-read int|null $users_count\n *\n * @method static RoleFactory factory(...$parameters)\n * @method static Builder|Role newModelQuery()\n * @method static Builder|Role newQuery()\n * @method static Builder|Role permission($permissions)\n * @method static Builder|Role query()\n * @method static Builder|Role whereCreatedAt($value)\n * @method static Builder|Role whereDisplayName($value)\n * @method static Builder|Role whereGuardName($value)\n * @method static Builder|Role whereId($value)\n * @method static Builder|Role whereIsDefault($value)\n * @method static Builder|Role whereName($value)\n * @method static Builder|Role whereUpdatedAt($value)\n * @mixin Model\n */\nclass Role extends roleModal\n{\n    use HasFactory;\n\n    protected $table = 'roles';\n\n    public const ADMIN = 1;\n\n    public const CLIENT = 2;\n\n    const ROLE_ADMIN = 'admin';\n\n    const ROLE_CLIENT = 'client';\n\n    protected $fillable = [\n        'name',\n        'display_name',\n        'is_default',\n        'permission_id',\n        'guard_name',\n    ];\n\n    protected $casts = [\n        'name' =&gt; 'string',\n        'display_name' =&gt; 'string',\n        'is_default' =&gt; 'integer',\n        'guard_name' =&gt; 'string',\n    ];\n\n    public static $rules = [\n        'display_name' =&gt; 'required',\n        'permission_id' =&gt; 'required',\n    ];\n}\n</code></pre> <p>The provided code defines a Laravel model class called <code>Role</code>, which extends the <code>Spatie\\Permission\\Models\\Role</code> model. It is a custom extension of the Spatie Permission package's Role model. Here's an explanation of the key elements within this <code>Role</code> model:</p> <ol> <li> <p>Namespace and Imports:</p> </li> <li> <p>The model is in the <code>App\\Models</code> namespace.</p> </li> <li> <p>It imports the necessary classes, including <code>Model</code> and <code>HasFactory</code>.</p> </li> <li> <p>Use of HasFactory:</p> </li> <li> <p>The <code>HasFactory</code> trait is used, indicating that this model can be used with factory classes for database seeding and testing.</p> </li> <li> <p>Table Name:</p> </li> <li> <p>The protected property <code>$table</code> specifies the name of the database table associated with this model. In this case, it's set to <code>'roles'</code>.</p> </li> <li> <p>Constants for Role Types:</p> </li> <li> <p>Two constants, <code>ADMIN</code> and <code>CLIENT</code>, are defined, each with an integer value.</p> </li> <li> <p>These constants represent different role types within the application, such as administrator and client roles.</p> </li> <li> <p>Role Names:</p> </li> <li> <p>Two constants, <code>ROLE_ADMIN</code> and <code>ROLE_CLIENT</code>, are defined, each representing the display name for a role.</p> </li> <li> <p>These constants are used for displaying the role names in the application.</p> </li> <li> <p>Fillable Attributes:</p> </li> <li> <p>The <code>protected $fillable</code> property lists the attributes that can be mass-assigned when creating or updating a <code>Role</code> model.</p> </li> <li> <p>Attributes include 'name', 'display_name', 'is_default', 'permission_id', and 'guard_name'.</p> </li> <li> <p>Attribute Type Casting:</p> </li> <li> <p>The <code>protected $casts</code> property specifies the data types to which certain attributes should be cast.</p> </li> <li> <p>For example, 'is_default' is cast to an integer, and 'name' and 'display_name' are cast to strings.</p> </li> <li> <p>Validation Rules:</p> </li> <li>The <code>public static $rules</code> property defines validation rules for creating or updating a <code>Role</code> model.</li> <li>It requires that 'display_name' and 'permission_id' attributes are provided.</li> </ol> <p>This <code>Role</code> model is tailored for managing user roles within the application. It extends the Spatie Permission package's Role model to provide additional functionality and customization specific to the application's requirements.</p>"},{"location":"Admin/Transactions/#view","title":"View","text":""},{"location":"Admin/Transactions/#the-livewire-transactions-table","title":"The livewire: Transactions table","text":"<p>The livewire of the 'Transactions table' located in app&gt;http&gt;livewire&gt;TransactionTable.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Livewire;\n\nuse App\\Models\\Payment;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Rappasoft\\LaravelLivewireTables\\Views\\Column;\n\nclass TransactionTable extends LivewireTableComponent\n{\n    protected $model = Payment::class;\n    protected string $tableName = 'payments';\n\n    // for table header button\n    public $showButtonOnHeader = true;\n    public $buttonComponent = 'transactions.components.export-button';\n    public bool $showFilterOnHeader = true;\n    public $filterComponent = ['transactions.components.filter-button', Payment::PAYMENT_MODE, Payment::PAYMENT_STATUS];\n    protected $listeners = ['changePaymentModeFilter', 'changePaymentStatusFilter', 'resetPageTable'];\n    public $paymentModeFilter = Payment::ALL;\n    public $paymentStatusFilter = Payment::STATUS_ALL;\n\n    public function configure(): void\n    {\n        $this-&gt;setPrimaryKey('id');\n        $this-&gt;setDefaultSort('created_at', 'desc');\n        $this-&gt;setQueryStringStatus(false);\n\n        $this-&gt;setThAttributes(function (Column $column) {\n            if ($column-&gt;isField('payment_mode')) {\n                return [\n                    'class' =&gt; 'text-center w-12',\n                ];\n            }\n            if ($column-&gt;isField('first_name')) {\n                return [\n                    'class' =&gt; 'w-35',\n                ];\n            }\n            if ($column-&gt;isField('amount')) {\n                return [\n                    'class' =&gt; 'd-flex justify-content-end w-15',\n                ];\n            }\n            if ($column-&gt;isField('id')) {\n                return [\n                    'class' =&gt; 'text-center',\n                ];\n            }\n\n            return [];\n        });\n\n        $this-&gt;setTdAttributes(function (Column $column) {\n            if ($column-&gt;getField() === 'payment_mode') {\n                return [\n                    'class' =&gt; 'text-center',\n                ];\n            }\n\n            if ($column-&gt;getField() === 'amount') {\n                return [\n                    'class' =&gt; 'text-end',\n                ];\n            }\n            if ($column-&gt;getField() === 'id') {\n                return [\n                    'class' =&gt; 'text-center',\n                ];\n            }\n\n            return [];\n        });\n    }\n\n    public function columns(): array\n    {\n        return [\n            Column::make(__('messages.payment.transaction_id'), 'transaction_id')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;view('transactions.components.transactions-id'),\n            Column::make(__('messages.invoice.invoice_id'), 'invoice.invoice_id')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('transactions.components.invoice-id-payment-date')\n                        -&gt;withValue([\n                            'invoice-id-route' =&gt; route('invoices.show', $row-&gt;invoice-&gt;id),\n                            'invoice-id' =&gt; $row-&gt;invoice-&gt;invoice_id,\n                        ]);\n                }),\n            Column::make(__('messages.invoice.client'), 'invoice.client.user.first_name')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;view('transactions.components.client-name'),\n            Column::make('Last Name', 'invoice.client.user.last_name')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;hideif('admin'),\n            Column::make(__('messages.payment.payment_date'), 'payment_date')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('transactions.components.invoice-id-payment-date')\n                        -&gt;withValue([\n                            'payment-date' =&gt; $row-&gt;payment_date,\n                        ]);\n                }),\n            Column::make(__('messages.invoice.amount'), 'amount')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;view('transactions.components.amount'),\n            Column::make(__('messages.setting.payment_approved'), 'payment_mode')\n                -&gt;searchable()\n                -&gt;view('transactions.components.transaction-approved'),\n            Column::make(__('messages.invoice.payment_method'), 'payment_mode')\n                -&gt;searchable()\n                -&gt;view('transactions.components.payment-mode'),\n            Column::make(__('messages.common.status'), 'payment_mode')\n                -&gt;searchable()\n                -&gt;view('transactions.components.transaction-status'),\n            Column::make(__('messages.common.attachment'), 'id')\n                -&gt;searchable()\n                -&gt;view('transactions.components.transaction-attachment'),\n        ];\n    }\n\n    /**\n     * @return Builder\n     */\n    public function builder(): Builder\n    {\n        $query = Payment::with('invoice.client.user')-&gt;select('payments.*');\n\n        $query-&gt;when(isset($this-&gt;paymentModeFilter), function (Builder $q) {\n            if ($this-&gt;paymentModeFilter != Payment::ALL) {\n                $q-&gt;where('payment_mode', $this-&gt;paymentModeFilter);\n            }\n        });\n\n        $query-&gt;when(isset($this-&gt;paymentStatusFilter), function (Builder $q) {\n            if ($this-&gt;paymentStatusFilter != Payment::STATUS_ALL) {\n                $q-&gt;where('is_approved', $this-&gt;paymentStatusFilter);\n            }\n        });\n\n        return $query;\n    }\n\n    public function changePaymentModeFilter($mode)\n    {\n        $this-&gt;resetPage($this-&gt;getComputedPageName());\n        $this-&gt;paymentModeFilter = $mode;\n        $this-&gt;setBuilder($this-&gt;builder());\n    }\n\n    public function changePaymentStatusFilter($status)\n    {\n        $this-&gt;resetPage($this-&gt;getComputedPageName());\n        $this-&gt;paymentStatusFilter = $status;\n        $this-&gt;setBuilder($this-&gt;builder());\n    }\n}\n</code></pre> <p>The <code>TransactionTable</code> class is a Laravel Livewire component responsible for rendering a dynamic and interactive table of payment transactions. Livewire is a package that allows you to build dynamic web interfaces using the simplicity and reactivity of Laravel.</p> <p>Let's break down the key elements and functionality of this <code>TransactionTable</code> Livewire component:</p> <ol> <li> <p>Namespace and Imports:</p> </li> <li> <p>The component is in the <code>App\\Http\\Livewire</code> namespace.</p> </li> <li> <p>It imports the <code>Payment</code> model, the <code>Builder</code> class from Eloquent, and the <code>Column</code> class from the Rappasoft LaravelLivewireTables package.</p> </li> <li> <p>Model and Table Name:</p> </li> <li> <p>The <code>protected $model</code> property specifies that this component works with the <code>Payment</code> model.</p> </li> <li> <p>The <code>$tableName</code> property sets the table name to 'payments'.</p> </li> <li> <p>Table Configuration:</p> </li> <li> <p>Various properties and methods are used to configure the behavior and appearance of the table. For example:</p> <ul> <li><code>$showButtonOnHeader</code> and <code>$buttonComponent</code> properties enable a button on the table header for exporting data.</li> <li><code>$showFilterOnHeader</code> and <code>$filterComponent</code> properties enable filter buttons in the header.</li> <li>The <code>configure</code> method sets various attributes and styles for table headers and cells.</li> </ul> </li> <li> <p>Columns Configuration:</p> </li> <li> <p>The <code>columns</code> method defines the columns to be displayed in the table. Each column is created using the <code>Column::make</code> method and configured with options like sorting, searching, and custom formatting.</p> </li> <li> <p>Columns represent different attributes of payment transactions, such as transaction ID, invoice ID, client name, amount, payment date, payment mode, and more.</p> </li> <li> <p>Builder Method:</p> </li> <li> <p>The <code>builder</code> method is responsible for constructing the query to retrieve data for the table.</p> </li> <li>It includes eager loading relationships (<code>Payment::with(...)</code>) to optimize database queries.</li> <li> <p>Filters are applied to the query based on the selected payment mode and payment status filters.</p> </li> <li> <p>Filtering Methods:</p> </li> <li>The <code>changePaymentModeFilter</code> and <code>changePaymentStatusFilter</code> methods are used to change the payment mode and payment status filters, respectively.</li> <li>These methods reset the table page and update the filter values, then set the builder to reflect the changes.</li> </ol> <p>Overall, this Livewire component is designed to display payment transactions in an interactive and customizable table format. It provides features like sorting, searching, filtering, and exporting data. It leverages Livewire's reactivity to update the table contents based on user interactions with filter options. This component can be included in Laravel views to render the payment transaction table within the application's user interface.</p>"},{"location":"Admin/Transactions/#list-of-transactions","title":"List of Transactions","text":"<p>The list of transactions view is located in : resources\\views\\Transactions\\index.blade.php.</p> <pre><code>@extends('layouts.app')\n@section('title')\n    {{ __('messages.transactions') }}\n@endsection\n@section('content')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-flex flex-column\"&gt;\n            @include('flash::message')\n            &lt;livewire:transaction-table/&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    @include('transactions.payment-notes-modal')\n    {{ Form::hidden('currency', getCurrencySymbol(),['id' =&gt; 'currency']) }}\n@endsection\n</code></pre> <p>The <code>index.blade.php</code> is a Blade template file used for rendering the user interface of a web page within our application. Here's an explanation of the contents of this template:</p> <ol> <li> <p>Extending Layout:</p> </li> <li> <p><code>@extends('layouts.app')</code>: This line specifies that this Blade template extends another Blade layout file named 'layouts.app'. In Laravel, layouts are typically used to define the overall structure of web pages, including headers, footers, and common elements.</p> </li> <li> <p>Title Section:</p> </li> <li> <p><code>@section('title')</code>: This line defines a section named 'title'. Blade sections are used to specify content that can be injected into the layout.</p> </li> <li> <p><code>{{ __('messages.transactions') }}</code>: Within the 'title' section, the code outputs the translated string 'messages.transactions'. The double curly braces (<code>{{ }}</code>) are used for rendering content within Blade templates.</p> </li> <li> <p>Content Section:</p> </li> <li> <p><code>@section('content')</code>: This line defines a section named 'content'. Content sections are used to specify the main content of the page.</p> </li> <li><code>&lt;div class=\"container-fluid\"&gt;</code>: This <code>&lt;div&gt;</code> element sets up a container with fluid width, typically used to create responsive layouts.</li> <li> <p><code>&lt;div class=\"d-flex flex-column\"&gt;</code>: This <code>&lt;div&gt;</code> element uses flexbox to create a vertical column layout for its child elements.</p> </li> <li> <p>Flash Messages:</p> </li> <li> <p><code>@include('flash::message')</code>: This line includes a Blade partial view named 'flash::message'. This is often used for displaying flash messages to the user, which are temporary messages that provide feedback or notifications.</p> </li> <li> <p>Livewire Component:</p> </li> <li> <p><code>&lt;livewire:transaction-table/&gt;</code>: This line includes a Livewire component named 'transaction-table'. It embeds a dynamic table component (the one defined in the previous explanation) within the page.</p> </li> <li> <p>Payment Notes Modal:</p> </li> <li> <p><code>@include('transactions.payment-notes-modal')</code>: This line includes another Blade partial view named 'transactions.payment-notes-modal'. This is a modal dialog or section for displaying payment notes.</p> </li> <li> <p>Hidden Form Input:</p> </li> <li><code>{{ Form::hidden('currency', getCurrencySymbol(),['id' =&gt; 'currency']) }}</code>: This line generates an HTML hidden input element with the name 'currency' and a value retrieved from the 'getCurrencySymbol()' function. It also assigns an 'id' attribute of 'currency' to the input element. The purpose of this hidden input field is not entirely clear from this template alone, but it is used for storing or passing data related to currency within the page.</li> </ol> <p>In summary, this Blade template file defines the structure of a web page for displaying transaction-related information. It extends a layout, sets the page title, includes flash messages, embeds a Livewire component for the main content (the dynamic transaction table), includes a payment notes modal, and generates a hidden input field for currency-related data. The specifics of how this page functions would depend on the behavior of the included Livewire component and modal.</p>"},{"location":"Admin/Transactions/#payment-notes-modal","title":"Payment notes modal","text":"<p>Payment notes modal view is located in : resources\\views\\Transactions\\Payment-notes-modal.blade.php.</p> <pre><code>&lt;div id=\"paymentNotesModal\" class=\"modal fade\" role=\"dialog\" tabindex=\"-1\" aria-hidden=\"true\"&gt;\n    &lt;div class=\"modal-dialog\"&gt;\n        &lt;!-- Modal content--&gt;\n        &lt;div class=\"modal-content\"&gt;\n            &lt;div class=\"modal-header\"&gt;\n                &lt;h2&gt;{{ __('messages.payment.transaction_notes') }}&lt;/h2&gt;\n                &lt;button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"\n                        aria-label=\"Close\"&gt;&lt;/button&gt;\n            &lt;/div&gt;\n            &lt;div class=\"modal-body scroll-y\"&gt;\n                &lt;div class=\"form-group col-sm-12 transaction-content\"&gt;\n                    &lt;p id=\"showClientNotesId\"&gt;&lt;/p&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>The provided HTML code represents a modal dialog in a web application. It's used to display payment transaction notes when triggered. Here's an explanation of its structure:</p> <ol> <li> <p><code>&lt;div id=\"paymentNotesModal\" class=\"modal fade\" role=\"dialog\" tabindex=\"-1\" aria-hidden=\"true\"&gt;</code>:</p> </li> <li> <p>This is the outermost <code>&lt;div&gt;</code> element and serves as the modal container.</p> </li> <li>It has an <code>id</code> of \"paymentNotesModal\" which can be used to reference and trigger the modal using JavaScript or other methods.</li> <li><code>class=\"modal fade\"</code> indicates that it's a modal dialog, and it has a fade-in/fade-out transition effect when opened or closed.</li> <li><code>role=\"dialog\"</code> and <code>tabindex=\"-1\"</code> provide accessibility information, indicating that this is a modal dialog.</li> <li> <p><code>aria-hidden=\"true\"</code> is an accessibility attribute indicating that the modal is initially hidden from screen readers.</p> </li> <li> <p><code>&lt;div class=\"modal-dialog\"&gt;</code>:</p> </li> <li> <p>This <code>&lt;div&gt;</code> element defines the modal dialog's content area.</p> </li> <li> <p>Inside this content area, the modal's content will be displayed.</p> </li> <li> <p><code>&lt;div class=\"modal-content\"&gt;</code>:</p> </li> <li> <p>This <code>&lt;div&gt;</code> element represents the actual content of the modal.</p> </li> <li> <p>It contains the modal's header, body, and any other components.</p> </li> <li> <p>Modal Header:</p> </li> <li> <p><code>&lt;div class=\"modal-header\"&gt;</code> represents the header section of the modal.</p> </li> <li><code>&lt;h2&gt;{{ __('messages.payment.transaction_notes') }}&lt;/h2&gt;</code> displays a title in the header. The title is translated using the <code>__('messages.payment.transaction_notes')</code> function, displaying text related to payment transaction notes.</li> <li> <p><code>&lt;button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"&gt;&lt;/button&gt;</code> is a close button represented by a Bootstrap close icon. It allows users to close the modal.</p> </li> <li> <p>Modal Body:</p> </li> <li> <p><code>&lt;div class=\"modal-body scroll-y\"&gt;</code> represents the body of the modal.</p> </li> <li> <p><code>scroll-y</code> indicates that the body should have a vertical scrollbar if the content overflows.</p> </li> <li> <p>Content Display:</p> </li> <li><code>&lt;div class=\"form-group col-sm-12 transaction-content\"&gt;</code> is a form group container with a column width specified.</li> <li><code>&lt;p id=\"showClientNotesId\"&gt;&lt;/p&gt;</code> is an empty paragraph element with an <code>id</code> of \"showClientNotesId.\" This element is used to display the payment transaction notes dynamically when the modal is triggered.</li> </ol> <p>In your Blade template, you include this modal by using <code>@include('transactions.payment-notes-modal')</code>, which means that this modal is included and can be displayed on the page when needed.</p> <p>When triggered, the modal will display a title related to payment transaction notes and an area (the paragraph with the ID \"showClientNotesId\") where the actual notes content will be populated dynamically, depending on the context of the application.</p>"},{"location":"Admin/Transactions/#components","title":"Components","text":"<p>Components views are located in : resources\\views\\Transactions\\Components.</p>"},{"location":"Admin/Transactions/#transaction-id","title":"Transaction ID","text":"<p>```php {{ is_null($row-&gt;transaction_id) ?  __('messages.common.n/a') : $row-&gt;transaction_id}}</p> <pre><code>This code displays \"N/A\" if `$row-&gt;transaction_id` is null; otherwise, it displays the value of `$row-&gt;transaction_id` using the translation function `__('messages.common.n/a')`.\n\n#### Invoice ID\n\n```php\n@if(isset($value['invoice-id-route']))\n    &lt;a href=\"{{$value['invoice-id-route']}}\"&gt;&lt;span class=\"badge bg-light-info fs-7 mt-1\"&gt;{{$value['invoice-id']}}&lt;/span&gt;&lt;/a&gt;\n@endif\n@php\n    $currentRouteName = Route::currentRouteName();\n@endphp\n@if(isset($value['payment-date']))\n    &lt;div class=\"badge bg-primary\"&gt;\n        &lt;div&gt;{{ \\Carbon\\Carbon::parse($value['payment-date'])-&gt;translatedFormat(currentDateFormat()) }} {{ (($currentRouteName == 'transactions.index') || ($currentRouteName == 'client.transactions.index')) ? \\Carbon\\Carbon::parse($value['payment-date'])-&gt;isoFormat('hh:mm A') : '' }}&lt;/div&gt;\n    &lt;/div&gt;\n@endif\n</code></pre> <p>This code conditionally generates a hyperlink badge for an invoice ID if the 'invoice-id-route' is provided, and then it displays a formatted payment date badge based on the 'payment-date' value, with optional time if the current route matches 'transactions.index' or 'client.transactions.index'.</p>"},{"location":"Admin/Transactions/#client-name","title":"Client name","text":"<pre><code>&lt;div class=\"d-flex align-items-center\"&gt;\n    &lt;div class=\"d-flex flex-column\"&gt;\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"col-lg-12\"&gt;\n                &lt;a href=\"{{route('clients.show',$row-&gt;invoice-&gt;client-&gt;id)}}\"\n                    class=\"mb-1 text-primary text-decoration-none\"&gt;{{$row-&gt;invoice-&gt;client-&gt;user-&gt;full_name}}&lt;/a&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;span&gt;{{$row-&gt;invoice-&gt;client-&gt;user-&gt;email}}&lt;/span&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>This code creates a flex container with client information, including a clickable name linked to the client's details page and their email address, all displayed in a column layout.</p>"},{"location":"Admin/Transactions/#payment-date","title":"Payment date","text":"<pre><code>@if(isset($value['invoice-id-route']))\n    &lt;a href=\"{{$value['invoice-id-route']}}\"&gt;&lt;span class=\"badge bg-light-info fs-7 mt-1\"&gt;{{$value['invoice-id']}}&lt;/span&gt;&lt;/a&gt;\n@endif\n@php\n    $currentRouteName = Route::currentRouteName();\n@endphp\n@if(isset($value['payment-date']))\n    &lt;div class=\"badge bg-primary\"&gt;\n        &lt;div&gt;{{ \\Carbon\\Carbon::parse($value['payment-date'])-&gt;translatedFormat(currentDateFormat()) }} {{ (($currentRouteName == 'transactions.index') || ($currentRouteName == 'client.transactions.index')) ? \\Carbon\\Carbon::parse($value['payment-date'])-&gt;isoFormat('hh:mm A') : '' }}&lt;/div&gt;\n    &lt;/div&gt;\n@endif\n</code></pre> <p>This code conditionally displays a badge with an invoice ID linked to a route and a formatted payment date badge with an optional time, based on provided data and current route conditions.</p>"},{"location":"Admin/Transactions/#amount","title":"Amount","text":"<pre><code>&lt;div class=\"width-100px text-end\"&gt;\n    {{ getInvoiceCurrencyAmount($row-&gt;amount, $row-&gt;invoice-&gt;currency_id, true) }}\n&lt;/div&gt;\n</code></pre> <p>This code displays the amount with the currency symbol, formatting it based on the specified currency and using a right-aligned text layout.</p>"},{"location":"Admin/Transactions/#payment-approved","title":"Payment approved","text":"<pre><code>@if(\\Illuminate\\Support\\Facades\\Auth::user()-&gt;hasRole(\\App\\Models\\Role::ROLE_ADMIN))\n    @if ($row-&gt;is_approved == \\App\\Models\\Payment::PENDING &amp;&amp; $row-&gt;payment_mode == \\App\\Models\\Payment::MANUAL)\n        &lt;div class=\"d-flex align-items-center\"&gt;\n            &lt;select class=\"form-select io-select2 approve-status transaction-approve\"\n                    data-id=\"{{$row-&gt;id}}\" data-control=\"select2\"&gt;\n                &lt;option selected=\"selected\" value=\"\"&gt;{{__('messages.setting.select_manual_payment')}}&lt;/option&gt;\n                &lt;option value=\"{{\\App\\Models\\Payment::APPROVED}}\"&gt;{{__('messages.setting.approved')}}&lt;/option&gt;\n                &lt;option value=\"{{\\App\\Models\\Payment::REJECTED}}\"&gt;{{__('messages.setting.denied')}}&lt;/option&gt;\n            &lt;/select&gt;\n        &lt;/div&gt;\n    @elseif ($row-&gt;is_approved == \\App\\Models\\Payment::APPROVED )\n        &lt;span class=\"badge bg-light-success\"&gt;{{__('messages.setting.approved')}}&lt;/span&gt;\n    @elseif ($row-&gt;is_approved == \\App\\Models\\Payment::REJECTED )\n    &lt;span class=\"badge bg-light-danger\"&gt;{{__('messages.setting.denied')}}&lt;/span&gt;\n    @else\n        N/A\n    @endif\n@endif\n</code></pre> <p>This code conditionally displays a dropdown for approving or denying manual payments if the logged-in user has an admin role, or it shows badges indicating approval or denial of payments based on payment status.</p>"},{"location":"Admin/Transactions/#payment-methods","title":"Payment methods","text":"<pre><code>@if ($row-&gt;payments_mode === 'Manual')\n    &lt;span class=\"badge bg-light-warning fs-7\"&gt;{{$row-&gt;payments_mode}}&lt;/span&gt;\n@elseif($row-&gt;payments_mode === 'Stripe')\n    &lt;span class=\"badge bg-light-success fs-7\"&gt;{{$row-&gt;payments_mode}}&lt;/span&gt;\n@elseif($row-&gt;payments_mode === 'Paypal')\n    &lt;span class=\"badge bg-light-primary fs-7\"&gt;{{$row-&gt;payments_mode}}&lt;/span&gt;\n@elseif($row-&gt;payments_mode === 'Cash')\n    &lt;span class=\"badge bg-light-info fs-7\"&gt;{{$row-&gt;payments_mode}}&lt;/span&gt;\n@elseif($row-&gt;payments_mode === 'Razorpay')\n    &lt;span class=\"badge bg-light-danger fs-7\"&gt;{{$row-&gt;payments_mode}}&lt;/span&gt;\n@endif\n&lt;div class=\"d-flex align-items-center justify-content-center mt-2\"&gt;\n    &lt;span&gt;\n        {{ __('messages.client.notes') }}\n    &lt;/span&gt;\n    &lt;a class=\"show-payment-notes cursor-pointer ms-2\" data-id=\"{{$row-&gt;id}}\"&gt;\n        &lt;i class=\"fa fa-eye\"&gt;&lt;/i&gt;\n    &lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <p>This code conditionally displays a badge with different background colors based on the value of <code>$row-&gt;payments_mode</code> (e.g., 'Manual', 'Stripe', 'Paypal', 'Cash', 'Razorpay'), and it also includes a \"Client Notes\" section with an eye icon that can be clicked to reveal payment notes for the respective row.</p>"},{"location":"Admin/Transactions/#status","title":"Status","text":"<pre><code>@if($row-&gt;is_approved == \\App\\Models\\Payment::APPROVED &amp;&amp; $row-&gt;payment_mode == 1)\n    &lt;span class=\"badge bg-light-success\"&gt;{{\\App\\Models\\Payment::PAID}}&lt;/span&gt;\n@elseif($row-&gt;is_approved == \\App\\Models\\Payment::PENDING &amp;&amp; $row-&gt;payment_mode == 1)\n    &lt;span class=\"badge bg-light-danger\"&gt;{{\\App\\Models\\Payment::PROCESSING}}&lt;/span&gt;\n@elseif($row-&gt;is_approved == \\App\\Models\\Payment::REJECTED &amp;&amp; $row-&gt;payment_mode == 1)\n    &lt;span class=\"badge bg-light-danger\"&gt;{{\\App\\Models\\Payment::DENIED}}&lt;/span&gt;\n@else\n    &lt;span class=\"badge bg-light-success\"&gt;{{\\App\\Models\\Payment::PAID}}&lt;/span&gt;\n@endif\n</code></pre> <p>This code conditionally displays a badge with different background colors based on the combination of <code>$row-&gt;is_approved</code> and <code>$row-&gt;payment_mode</code>. It shows \"Paid\" in green if approved and \"Processing\" or \"Denied\" in red if pending or rejected, respectively; otherwise, it defaults to \"Paid\" in green.</p>"},{"location":"Admin/Transactions/#attachment","title":"Attachment","text":"<pre><code>@if($row-&gt;payment_attachment)\n    &lt;a href=\"{{ route('transaction.attachment', $row-&gt;id) }}\" target=\"_blank\"&gt;&lt;i class=\"fa-solid fa-circle-arrow-down fs-3 text-success\"&gt;&lt;/i&gt;&lt;/a&gt;\n@else\n    N/A\n@endif\n</code></pre> <p>This code checks if <code>$row-&gt;payment_attachment</code> exists and displays a download icon linked to the attachment if it does, otherwise it shows \"N/A.\"</p>"},{"location":"Admin/admins/","title":"admins page","text":""},{"location":"Admin/admins/#route","title":"Route","text":"<p>The route <code>Route::resource('users', UserController::class);</code> leads to the page /admin/users, which desplays all the other admins accounts.</p>"},{"location":"Admin/admins/#controller","title":"Controller","text":"<p>The controller of the 'list of admins' page located in app&gt;http&gt;controllers&gt;userController.php</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Http\\Requests\\CreateUserRequest;\nuse App\\Http\\Requests\\UpdateChangePasswordRequest;\nuse App\\Http\\Requests\\UpdateUserProfileRequest;\nuse App\\Http\\Requests\\UpdateUserRequest;\nuse App\\Models\\User;\nuse App\\Repositories\\UserRepository;\nuse Exception;\nuse Illuminate\\Contracts\\Foundation\\Application;\nuse Illuminate\\Contracts\\View\\Factory;\nuse Illuminate\\Contracts\\View\\View;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\RedirectResponse;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Routing\\Redirector;\nuse Illuminate\\Support\\Facades\\Auth;\nuse Illuminate\\Support\\Facades\\Hash;\nuse Laracasts\\Flash\\Flash;\nuse Symfony\\Component\\HttpKernel\\Exception\\UnprocessableEntityHttpException;\n\nclass UserController extends AppBaseController\n{\n    /**\n     * @var UserRepository\n     */\n    public $userRepository;\n\n    /**\n     * UserController constructor.\n     *\n     * @param  UserRepository  $userRepository\n     */\n    public function __construct(UserRepository $userRepository)\n    {\n        $this-&gt;userRepository = $userRepository;\n    }\n\n    /**\n     * @return Application|Factory|View\n     */\n    public function index()\n    {\n        return view('users.index');\n    }\n\n    /**\n     * Show the form for creating a new User.\n     *\n     * @return Application|Factory|View\n     */\n    public function create()\n    {\n        return view('users.create');\n    }\n\n    /**\n     * Store a newly created User in storage.\n     *\n     * @param  CreateUserRequest  $request\n     * @return Application|Redirector|RedirectResponse\n     */\n    public function store(CreateUserRequest $request)\n    {\n        $input = $request-&gt;all();\n        try {\n            $this-&gt;userRepository-&gt;store($input);\n            Flash::success('Admin created successfully.');\n        } catch (Exception $exception) {\n            Flash::error($exception-&gt;getMessage());\n\n            return redirect()-&gt;route('users.create')-&gt;withInput();\n        }\n\n        return redirect(route('users.index'));\n    }\n\n    /**\n     * @param  User  $user\n     * @return Application|Factory|View\n     */\n    public function show(User $user)\n    {\n        $user-&gt;load('media');\n\n        return view('users.show', compact('user'));\n    }\n\n    /**\n     * Show the form for editing the specified User.\n     *\n     * @param  User  $user\n     * @return Application|Factory|View\n     */\n    public function edit(User $user)\n    {\n        $user-&gt;load('media');\n\n        if ($user-&gt;is_default_admin) {\n            Flash::error('Default admin can not editable.');\n\n            return redirect(route('users.index'));\n        }\n\n        return view('users.edit', compact('user'));\n    }\n\n    /**\n     * Update the specified User in storage.\n     *\n     * @param  UpdateUserRequest  $request\n     * @param  User  $user\n     * @return Application|RedirectResponse|Redirector\n     */\n    public function update(UpdateUserRequest $request, User $user)\n    {\n        try {\n            $this-&gt;userRepository-&gt;update($request-&gt;all(), $user-&gt;id);\n            Flash::success('Admin updated successfully.');\n        } catch (Exception $exception) {\n            Flash::error($exception-&gt;getMessage());\n\n            return redirect(route('users.edit', ['user' =&gt; $user-&gt;id]))-&gt;withInput();\n        }\n\n        return redirect(route('users.index'));\n    }\n\n    /**\n     * Remove the specified User from storage.\n     *\n     * @param  User  $user\n     * @return JsonResponse\n     */\n    public function destroy(User $user)\n    {\n        if ($user-&gt;is_default_admin) {\n            return $this-&gt;sendError('Admin can\\'t be deleted.');\n        }\n\n        $user-&gt;delete();\n\n        return $this-&gt;sendSuccess('Admin deleted successfully.');\n    }\n\n    /**\n     * @return Application|Factory|View\n     */\n    public function editProfile()\n    {\n        $user = Auth::user();\n\n        return view('profile.index', compact('user'));\n    }\n\n    /**\n     * @param  UpdateUserProfileRequest  $request\n     * @return Application\n     */\n    public function updateProfile(UpdateUserProfileRequest $request)\n    {\n        $this-&gt;userRepository-&gt;updateProfile($request-&gt;all());\n        Flash::success('Admin profile updated successfully.');\n\n        return redirect(route('profile.setting'));\n    }\n\n    /**\n     * @param  UpdateChangePasswordRequest  $request\n     * @return JsonResponse\n     */\n    public function changePassword(UpdateChangePasswordRequest $request)\n    {\n        $input = $request-&gt;all();\n\n        try {\n            /** @var User $user */\n            $user = Auth::user();\n            if (! Hash::check($input['current_password'], $user-&gt;password)) {\n                return $this-&gt;sendError('Current password is invalid.');\n            }\n            $input['password'] = Hash::make($input['new_password']);\n            $user-&gt;update($input);\n\n            return $this-&gt;sendSuccess('Password updated successfully.');\n        } catch (Exception $e) {\n            throw new UnprocessableEntityHttpException($e-&gt;getMessage());\n        }\n    }\n\n    /**\n     * @param  User  $user\n     * @return JsonResponse\n     */\n    public function changeUserStatus(User $user)\n    {\n        $status = ! $user-&gt;status;\n        $user-&gt;update(['status' =&gt; $status]);\n\n        return $this-&gt;sendSuccess('Status updated successfully.');\n    }\n\n    /**\n     * @param  Request  $request\n     * @return JsonResponse\n     */\n    public function updateLanguage(Request $request): JsonResponse\n    {\n        $language = $request-&gt;get('language');\n\n        $user = getLogInUser();\n        $user-&gt;update(['language' =&gt; $language]);\n\n        return $this-&gt;sendSuccess('Language updated successfully.');\n    }\n\n    /**\n     * @return RedirectResponse\n     */\n    public function updateDarkMode()\n    {\n        $user = Auth::user();\n        $darkEnabled = $user-&gt;dark_mode == true;\n        $user-&gt;update([\n            'dark_mode' =&gt; ! $darkEnabled,\n        ]);\n\n        return redirect()-&gt;back();\n    }\n}\n</code></pre> <p>The UserController acts as an intermediary between incoming HTTP requests, the application's data storage (database), authentication system, and user interface. It ensures that user-related actions are executed securely, efficiently, and according to the business logic of the application. here's a brief explanation of each function in the UserController class along with its parameters and return values:</p> <ol> <li> <p>index()</p> </li> <li> <p>Purpose: Display a list of users.</p> </li> <li>Parameters: None.</li> <li> <p>Returns: Renders a view (<code>users.index</code>) to display the list of users.</p> </li> <li> <p>create()</p> </li> <li> <p>Purpose: Show a form for creating a new user.</p> </li> <li>Parameters: None.</li> <li> <p>Returns: Renders a view (<code>users.create</code>) for creating a new user.</p> </li> <li> <p>store(CreateUserRequest $request)</p> </li> <li> <p>Purpose: Store a new user in the database.</p> </li> <li>Parameters: <code>$request</code> (instance of <code>CreateUserRequest</code>).</li> <li> <p>Returns: Redirects to the index view (<code>users.index</code>) on success or back to the create view (<code>users.create</code>) on failure.</p> </li> <li> <p>show(User $user)</p> </li> <li> <p>Purpose: Display details of a specific user.</p> </li> <li>Parameters: <code>$user</code> (instance of <code>User</code> model).</li> <li> <p>Returns: Renders a view (<code>users.show</code>) to display the user details.</p> </li> <li> <p>edit(User $user)</p> </li> <li> <p>Purpose: Show a form for editing a user's information.</p> </li> <li>Parameters: <code>$user</code> (instance of <code>User</code> model).</li> <li> <p>Returns: Renders a view (<code>users.edit</code>) for editing the user's information.</p> </li> <li> <p>update(UpdateUserRequest $request, User $user)</p> </li> <li> <p>Purpose: Update a user's information in the database.</p> </li> <li>Parameters: <code>$request</code> (instance of <code>UpdateUserRequest</code>), <code>$user</code> (instance of <code>User</code> model).</li> <li> <p>Returns: Redirects to the index view (<code>users.index</code>) on success or back to the edit view (<code>users.edit</code>) on failure.</p> </li> <li> <p>destroy(User $user)</p> </li> <li> <p>Purpose: Delete a user from the database.</p> </li> <li>Parameters: <code>$user</code> (instance of <code>User</code> model).</li> <li> <p>Returns: JSON response with success message or error message.</p> </li> <li> <p>editProfile()</p> </li> <li> <p>Purpose: Show a form for editing the logged-in user's profile.</p> </li> <li>Parameters: None.</li> <li> <p>Returns: Renders a view (<code>profile.index</code>) to edit the user's profile.</p> </li> <li> <p>updateProfile(UpdateUserProfileRequest $request)</p> </li> <li> <p>Purpose: Update the logged-in user's profile information.</p> </li> <li>Parameters: <code>$request</code> (instance of <code>UpdateUserProfileRequest</code>).</li> <li> <p>Returns: Redirects to the profile settings view on success.</p> </li> <li> <p>changePassword(UpdateChangePasswordRequest $request)</p> <ul> <li>Purpose: Change the logged-in user's password.</li> <li>Parameters: <code>$request</code> (instance of <code>UpdateChangePasswordRequest</code>).</li> <li>Returns: JSON response with success message or error message.</li> </ul> </li> <li> <p>changeUserStatus(User $user)</p> <ul> <li>Purpose: Toggle the status (active/inactive) of a user.</li> <li>Parameters: <code>$user</code> (instance of <code>User</code> model).</li> <li>Returns: JSON response with success message.</li> </ul> </li> <li> <p>updateLanguage(Request $request)</p> <ul> <li>Purpose: Update the language preference of the logged-in user.</li> <li>Parameters: <code>$request</code> (instance of <code>Request</code>).</li> <li>Returns: JSON response with success message.</li> </ul> </li> <li> <p>updateDarkMode()</p> <ul> <li>Purpose: Toggle the dark mode setting for the logged-in user.</li> <li>Parameters: None.</li> <li>Returns: Redirects back to the previous page.</li> </ul> </li> </ol>"},{"location":"Admin/admins/#model","title":"Model","text":"<p>The model related to this controller is : App\\Models\\User:</p> <pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Eloquent;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasOne;\nuse Illuminate\\Foundation\\Auth\\User as Authenticatable;\nuse Illuminate\\Notifications\\DatabaseNotification;\nuse Illuminate\\Notifications\\DatabaseNotificationCollection;\nuse Illuminate\\Notifications\\Notifiable;\nuse Illuminate\\Support\\Carbon;\nuse Spatie\\MediaLibrary\\HasMedia;\nuse Spatie\\MediaLibrary\\InteractsWithMedia;\nuse Spatie\\MediaLibrary\\MediaCollections\\Models\\Collections\\MediaCollection;\nuse Spatie\\MediaLibrary\\MediaCollections\\Models\\Media;\nuse Spatie\\Permission\\Traits\\HasRoles;\n\n/**\n * App\\Models\\User\n *\n * @property int $id\n * @property string $first_name\n * @property string $last_name\n * @property string $email\n * @property string|null $contact\n * @property string|null $region_code\n * @property int $status\n * @property string|null $language\n * @property int $dark_mode\n * @property Carbon|null $email_verified_at\n * @property string $password\n * @property string|null $remember_token\n * @property Carbon|null $created_at\n * @property Carbon|null $updated_at\n * @property-read \\App\\Models\\Client|null $client\n * @property-read string $full_name\n * @property-read string $profile_image\n * @property-read mixed $role_name\n * @property-read MediaCollection|Media[] $media\n * @property-read int|null $media_count\n * @property-read DatabaseNotificationCollection|DatabaseNotification[] $notifications\n * @property-read int|null $notifications_count\n * @property-read Collection|\\Spatie\\Permission\\Models\\Permission[] $permissions\n * @property-read int|null $permissions_count\n * @property-read Collection|\\Spatie\\Permission\\Models\\Role[] $roles\n * @property-read int|null $roles_count\n *\n * @method static \\Database\\Factories\\UserFactory factory(...$parameters)\n * @method static Builder|User newModelQuery()\n * @method static Builder|User newQuery()\n * @method static Builder|User permission($permissions)\n * @method static Builder|User query()\n * @method static Builder|User role($roles, $guard = null)\n * @method static Builder|User whereContact($value)\n * @method static Builder|User whereCreatedAt($value)\n * @method static Builder|User whereDarkMode($value)\n * @method static Builder|User whereEmail($value)\n * @method static Builder|User whereEmailVerifiedAt($value)\n * @method static Builder|User whereFirstName($value)\n * @method static Builder|User whereId($value)\n * @method static Builder|User whereLanguage($value)\n * @method static Builder|User whereLastName($value)\n * @method static Builder|User wherePassword($value)\n * @method static Builder|User whereRegionCode($value)\n * @method static Builder|User whereRememberToken($value)\n * @method static Builder|User whereStatus($value)\n * @method static Builder|User whereUpdatedAt($value)\n * @mixin Eloquent\n *\n * @property int $is_default_admin\n *\n * @method static Builder|User whereIsDefaultAdmin($value)\n */\nclass User extends Authenticatable implements HasMedia\n{\n    use HasFactory, Notifiable, InteractsWithMedia, HasRoles;\n\n    protected $table = 'users';\n\n    const PROFILE = 'profile';\n\n    const ADMIN = 1;\n\n    const CLIENT = 2;\n\n    const LANGUAGES = [\n        'en' =&gt; 'English',\n        'es' =&gt; 'Spanish',\n        'fr' =&gt; 'French',\n        'de' =&gt; 'German',\n        'ru' =&gt; 'Russian',\n        'pt' =&gt; 'Portuguese',\n        'ar' =&gt; 'Arabic',\n        'zh' =&gt; 'Chinese',\n        'tr' =&gt; 'Turkish',\n    ];\n\n    const LANGUAGES_IMAGE = [\n        'en' =&gt; 'web/media/flags/united-states.svg',\n        'es' =&gt; 'web/media/flags/spain.svg',\n        'fr' =&gt; 'web/media/flags/france.svg',\n        'de' =&gt; 'web/media/flags/germany.svg',\n        'ru' =&gt; 'web/media/flags/russia.svg',\n        'pt' =&gt; 'web/media/flags/portugal.svg',\n        'ar' =&gt; 'web/media/flags/iraq.svg',\n        'zh' =&gt; 'web/media/flags/china.svg',\n        'tr' =&gt; 'web/media/flags/turkey.svg',\n    ];\n\n    /**\n     * The attributes that are mass assignable.\n     *\n     * @var array\n     */\n    protected $fillable = [\n        'first_name',\n        'last_name',\n        'email',\n        'contact',\n        'region_code',\n        'status',\n        'password',\n        'language',\n        'dark_mode',\n        'is_default_admin',\n    ];\n\n    protected $appends = ['full_name', 'profile_image'];\n\n    /**\n     * The attributes that should be hidden for arrays.\n     *\n     * @var array\n     */\n    protected $hidden = [\n        'password',\n        'remember_token',\n    ];\n\n    public static $rules = [\n        'first_name' =&gt; 'required',\n        'last_name' =&gt; 'required',\n        'email' =&gt; 'required|email:filter|unique:users,email',\n        'password' =&gt; 'required|same:password_confirmation|min:6',\n    ];\n\n    /**\n     * The attributes that should be cast to native types.\n     *\n     * @var array\n     */\n    protected $casts = [\n        'first_name' =&gt; 'string',\n        'last_name' =&gt; 'string',\n        'email' =&gt; 'string',\n        'contact' =&gt; 'string',\n        'region_code' =&gt; 'string',\n        'status' =&gt; 'integer',\n        'language' =&gt; 'string',\n        'dark_mode' =&gt; 'integer',\n        'email_verified_at' =&gt; 'datetime',\n        'password' =&gt; 'string',\n        'remember_token' =&gt; 'string',\n        'is_default_admin' =&gt; 'integer',\n    ];\n\n    /**\n     * @return string\n     */\n    public function getProfileImageAttribute()\n    {\n        /** @var Media $media */\n        $media = $this-&gt;getMedia(self::PROFILE)-&gt;first();\n        if (! empty($media)) {\n            return $media-&gt;getFullUrl();\n        }\n\n        return asset('assets/images/avatar.png');\n    }\n\n    public function getRoleNameAttribute()\n    {\n        $role = $this-&gt;roles()-&gt;first();\n\n        if (! empty($role)) {\n            return $role-&gt;display_name;\n        }\n    }\n\n    /**\n     * @return string\n     */\n    public function getFullNameAttribute()\n    {\n        return $this-&gt;first_name.' '.$this-&gt;last_name;\n    }\n\n    /**\n     * @return HasOne\n     */\n    public function client(): HasOne\n    {\n        return $this-&gt;hasOne(Client::class, 'user_id');\n    }\n}\n</code></pre> <p>This model class named User within the App\\Models namespace. The class extends Authenticatable, which is a base class provided by the Laravel framework for user authentication and authorization. It also implements the HasMedia interface from the Spatie Media Library package, which allows for easy handling of media files associated with the user.</p> <ol> <li> <p>Namespace and Use Statements:    The code begins with a namespace declaration and several <code>use</code> statements to import various classes and traits that the <code>User</code> class will utilize. These include classes from Laravel's Eloquent ORM, notifications, and authentication components, as well as classes from the Spatie Media Library and Spatie Permission package.</p> </li> <li> <p>Class Definition:    The <code>User</code> class is defined, extending Laravel's <code>Authenticatable</code> class and implementing the <code>HasMedia</code> interface provided by the Spatie Media Library. It uses several traits: <code>HasFactory</code>, <code>Notifiable</code>, <code>InteractsWithMedia</code>, and <code>HasRoles</code>.</p> </li> <li> <p>Table Name and Attributes:    The <code>protected $table</code> property specifies the database table associated with the model (usually 'users'). The <code>$fillable</code> array lists attributes that can be mass-assigned when creating or updating a user. The <code>$hidden</code> array lists attributes that should be hidden when the model is converted to an array.</p> </li> <li> <p>Constants:    The class defines several constants that appear to define user roles and languages. For example, <code>ADMIN</code> is set to 1 and <code>CLIENT</code> is set to 2, presumably representing different user roles within the application. <code>LANGUAGES</code> and <code>LANGUAGES_IMAGE</code> are arrays that map language codes to their respective names and flag image paths.</p> </li> <li> <p>Casting and Validation Rules:    The <code>$casts</code> property defines how each attribute should be cast to native PHP types. The <code>$rules</code> array contains validation rules for creating a new user.</p> </li> <li> <p>Accessors and Mutators:    The class defines various accessor methods that allow you to access modified attributes or computed properties. For instance, the <code>getProfileImageAttribute()</code> accessor returns the URL of the user's profile image. The <code>getRoleNameAttribute()</code> accessor retrieves the display name of the user's role, if they have one. The <code>getFullNameAttribute()</code> accessor combines the user's first and last names into a full name.</p> </li> <li> <p>Relationships:    The <code>client()</code> method defines a one-to-one relationship between the <code>User</code> model and the <code>Client</code> model. This suggests that a user can be associated with a client in the application.</p> </li> </ol> <p>Overall, this code defines a powerful and feature-rich <code>User</code> model with functionality for handling roles, media (such as profile images), permissions, and relationships with other models. The model encapsulates various attributes and behaviors associated with users in the application, making it easier to manage user-related functionalities.</p> <p>The determination of the user role is managed through the Spatie Permissions package. The package allows you to assign roles to users and then use these roles to control access to different parts of the application.</p>"},{"location":"Admin/admins/#views","title":"Views","text":""},{"location":"Admin/admins/#the-livewire-user-table","title":"The livewire: user table","text":"<p>The livewire of the 'user table' located in app&gt;http&gt;livewire&gt;ClientTable.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Livewire;\n\nuse App\\Models\\Role;\nuse App\\Models\\User;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Support\\Facades\\Auth;\nuse Rappasoft\\LaravelLivewireTables\\Views\\Column;\n\nclass UserTable extends LivewireTableComponent\n{\n    protected $model = User::class;\n    protected string $tableName = 'users';\n\n    // for table header button\n    public $showButtonOnHeader = true;\n    public $buttonComponent = 'users.table-components.add-button';\n\n    public function configure(): void\n    {\n        $this-&gt;setPrimaryKey('id');\n        $this-&gt;setPageName('page');\n        $this-&gt;setDefaultSort('created_at', 'desc');\n        $this-&gt;setQueryStringStatus(false);\n\n        $this-&gt;setThAttributes(function (Column $column) {\n            if ($column-&gt;getField() == 'id') {\n                return [\n                    'style' =&gt; 'width:9%;text-align:center',\n                ];\n            }\n\n            return [];\n        });\n    }\n\n    public function columns(): array\n    {\n        return [\n            Column::make(__('messages.common.name'), 'first_name')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;view('users.table-components.full-name'),\n            Column::make(__('last_name'), 'last_name')\n                -&gt;searchable()-&gt;hideIf(1),\n            Column::make(__('messages.user.email'), 'email')\n                -&gt;searchable()-&gt;hideIf(1),\n            Column::make('is_default_admin', 'is_default_admin')\n                -&gt;searchable()-&gt;hideIf(1),\n            Column::make(__('messages.common.action'), 'id')\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('livewire.action-button')-&gt;with([\n                        'editRoute' =&gt; route('users.edit', $row-&gt;id),\n                        'dataId' =&gt; $row-&gt;id,\n                        'row' =&gt; $row,\n                        'editClass' =&gt; 'user-edit-btn',\n                        'deleteClass' =&gt; 'user-delete-btn',\n                        'isDefaultAdmin' =&gt; $row-&gt;is_default_admin,\n                    ]);\n                }),\n        ];\n    }\n\n    public function builder(): Builder\n    {\n        return User::where('id', '!=', Auth::id())\n            -&gt;whereHas('roles', function ($q) {\n                $q-&gt;where('name', Role::ROLE_ADMIN);\n            })-&gt;with('media');\n    }\n}\n</code></pre> <p>the UserTable Livewire component generates a dynamic table of user data, including columns for user name, last name, email, and actions (edit and delete buttons). It leverages the Rappasoft\\LaravelLivewireTables package to handle table rendering, sorting, searching, and pagination. The component filters users based on their roles and includes media information for each user.</p>"},{"location":"Admin/admins/#list-of-admins","title":"List of admins","text":"<p>The view that displays the list of category located in : resources\\views\\users\\index.blade.php</p> <pre><code>@extends('layouts.app')\n@section('title')\n{{__('messages.admins')}}\n@endsection\n@section('content')\n&lt;div class=\"container-fluid\"&gt;\n&lt;div class=\"d-flex flex-column\"&gt;\n@include('flash::message')\n&lt;livewire:user-table/&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n@endsection\n</code></pre> <p>Let's break down the code and its components:</p> <ol> <li> <p>@extends('layouts.app'):    This line specifies that the view extends a layout template named 'app'. This means that the content of this view will be placed within the layout defined in a file named 'app.blade.php' located in the 'layouts' directory.</p> </li> <li> <p>@section('title') ... @endsection:    This section defines the content that should be injected into the 'title' section of the layout. The content within these tags seems to be using Laravel's localization feature (<code>__('messages.admins')</code>) to display the translated string for the key 'messages.admins'. The exact title displayed will depend on the language settings and the translation files in the application.</p> </li> <li> <p>@section('content') ... @endsection:    This section defines the main content of the view that will be injected into the 'content' section of the layout. The content of this section contains:</p> </li> <li> <p>:      This sets up a responsive container that spans the full width of the viewport. It's a common Bootstrap class used for layout. <li> <p>:      This creates a flex container that arranges its children in a column layout. The children inside this container will be stacked vertically. <li> <p>@include('flash::message'):      This includes another Blade view named 'flash::message'. This a flash message component or partial view responsible for displaying flash messages to users. Flash messages are typically used to display success, error, or informational messages temporarily after certain actions.</p> </li> <li> <p>:      This uses Livewire's <code>livewire</code> directive to include a Livewire component named 'user-table'. Livewire is a Laravel package that allows you to build interactive UI components using a combination of PHP and frontend JavaScript. The 'user-table' component could be responsible for displaying and managing user data in a table format.</p> </li> <p>In summary, this Blade view extends a layout template named 'app', injecting content into the 'title' and 'content' sections of the layout. The main content includes a container, a vertically stacked column layout, a flash message display, and a Livewire component for managing user data in a table format. The use of the <code>livewire</code> directive suggests that the view incorporates real-time interactivity using Livewire components.</p>"},{"location":"Admin/admins/#add-admin","title":"Add admin","text":"<pre><code>@extends('layouts.app')\n@section('title')\n{{__('messages.add_admin')}}\n@endsection\n@section('content')\n@php $styleCss = 'style'; @endphp\n&lt;div class=\"container-fluid\"&gt;\n@include('flash::message')\n&lt;div class=\"d-flex flex-column\"&gt;\n&lt;div class=\"col-12\"&gt;\n&lt;div class=\"d-flex justify-content-between align-items-end mb-5\"&gt;\n&lt;h1&gt;@yield('title')&lt;/h1&gt;\n&lt;a class=\"btn btn-outline-primary float-end\"\nhref=\"{{ route('users.index') }}\"&gt;{{ __('messages.common.back') }}&lt;/a&gt;\n&lt;/div&gt;\n\n&lt;div class=\"col-12\"&gt;\n@include('layouts.errors')\n&lt;/div&gt;\n&lt;div class=\"card\"&gt;\n&lt;div class=\"card-body\"&gt;\n{!! Form::open(['route' =&gt; 'users.store','files' =&gt; 'true','id'=&gt;'userCreateForm']) !!}\n@include('users.fields')\n{{ Form::close() }}\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n{{ Form::hidden('is_edit', false ,['id' =&gt; 'isEdit']) }}\n@endsection\n@section('phone_js')\n&lt;script&gt;\nphoneNo = \"{{ old('region_code').old('contact') }}\"\n&lt;/script&gt;\n@endsection\n@extends('layouts.app')\n@section('title')\n{{__('messages.add_admin')}}\n@endsection\n@section('content')\n@php $styleCss = 'style'; @endphp\n&lt;div class=\"container-fluid\"&gt;\n@include('flash::message')\n&lt;div class=\"d-flex flex-column\"&gt;\n&lt;div class=\"col-12\"&gt;\n&lt;div class=\"d-flex justify-content-between align-items-end mb-5\"&gt;\n&lt;h1&gt;@yield('title')&lt;/h1&gt;\n&lt;a class=\"btn btn-outline-primary float-end\"\nhref=\"{{ route('users.index') }}\"&gt;{{ __('messages.common.back') }}&lt;/a&gt;\n&lt;/div&gt;\n\n&lt;div class=\"col-12\"&gt;\n@include('layouts.errors')\n&lt;/div&gt;\n&lt;div class=\"card\"&gt;\n&lt;div class=\"card-body\"&gt;\n{!! Form::open(['route' =&gt; 'users.store','files' =&gt; 'true','id'=&gt;'userCreateForm']) !!}\n@include('users.fields')\n{{ Form::close() }}\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n{{ Form::hidden('is_edit', false ,['id' =&gt; 'isEdit']) }}\n@endsection\n@section('phone_js')\n&lt;script&gt;\nphoneNo = \"{{ old('region_code').old('contact') }}\"\n&lt;/script&gt;\n@endsection\n</code></pre> <p>Let's break down the code and its components:</p> <ol> <li> <p>@extends('layouts.app'):    This line specifies that the view extends a layout template named 'app'. The content of this view will be placed within the layout defined in a file named 'app.blade.php' located in the 'layouts' directory.</p> </li> <li> <p>@section('title') ... @endsection:    This section defines the content that should be injected into the 'title' section of the layout. The content within these tags appears to be using Laravel's localization feature (<code>__('messages.add_admin')</code>) to display the translated string for the key 'messages.add_admin'. This will set the title of the page to \"Add Admin\".</p> </li> <li> <p>@section('content') ... @endsection:    This section defines the main content of the view that will be injected into the 'content' section of the layout. The content of this section contains:</p> </li> <li> <p>@php $styleCss = 'style'; @endphp:      This line sets a PHP variable named <code>$styleCss</code> to the value 'style'. The purpose of this variable is not clear from the provided code snippet.</p> </li> <li> <p>:      This sets up a responsive container that spans the full width of the viewport. It's a common Bootstrap class used for layout. <li> <p>@include('flash::message'):      This includes another Blade view named 'flash::message'. This could be a flash message component or partial view responsible for displaying flash messages to users.</p> </li> <li> <p>:      This creates a flex container that arranges its children in a column layout. The children inside this container will be stacked vertically. <li> <p>:      This sets up a Bootstrap column with a width of 12 units (full width) within the flex container. It's used for arranging the main content of the view. <li> <p>:      This creates a flex container with space-between alignment for its children. Inside it, there's an <code>&lt;h1&gt;</code> element that displays the page title (<code>@yield('title')</code>) and a button for navigating back to the list of users. <li> <p>:      Another Bootstrap column is used to handle errors that might occur during form submission. <li> <p> ... :      This wraps the content related to creating a new admin user in a Bootstrap card component. Inside the card body, a form is opened using Laravel's <code>Form::open()</code> method. The <code>route</code> parameter specifies the route to which the form will be submitted. The <code>@include('users.fields')</code> directive is including a Blade partial view that contains form fields for creating a new user.</p> </li> <li> <p>{{ Form::hidden('is_edit', false ,['id' =&gt; 'isEdit']) }}:      This creates a hidden input field named 'is_edit' with the value 'false'. It is a hidden field for indicating whether the form is in edit mode.</p> </li> <li> <p>@section('phone_js') ... @endsection:    This section defines JavaScript code to be injected into the 'phone_js' section of the layout. The JavaScript code initializes a <code>phoneNo</code> variable using the <code>old()</code> function with 'region_code' and 'contact' as parameters. This related to pre-filling phone number fields with previously submitted values.</p> </li> <p>Overall, this Blade view template is for creating a new admin user and provides a layout structure, form handling, error display, and JavaScript initialization for phone number fields. It's designed with Bootstrap classes and integrates with Laravel's form and localization features.</p>"},{"location":"Admin/admins/#edit-admin","title":"Edit admin","text":"<pre><code>&lt;div class=\"row gx-10 mb-5\"&gt;\n&lt;div class=\"col-lg-6\"&gt;\n&lt;div class=\"mb-5\"&gt;\n{{ Form::label('first_name', __('messages.client.first_name').':', ['class' =&gt; 'form-label required mb-3']) }}\n{{ Form::text('first_name', isset($user) ? $user-&gt;first_name : null, ['class' =&gt; 'form-control form-control-solid', 'placeholder' =&gt; __('messages.client.first_name'), 'required']) }}\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"col-lg-6\"&gt;\n&lt;div class=\"mb-5\"&gt;\n{{ Form::label('last_name', __('messages.client.last_name').':', ['class' =&gt; 'form-label required mb-3']) }}\n{{ Form::text('last_name', isset($user) ? $user-&gt;last_name : null, ['class' =&gt; 'form-control form-control-solid', 'placeholder' =&gt; __('messages.client.last_name'), 'required']) }}\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"col-lg-6\"&gt;\n&lt;div class=\"mb-5\"&gt;\n{{ Form::label('email', __('messages.client.email').':', ['class' =&gt; 'form-label required mb-3']) }}\n{{ Form::email('email', isset($user) ? $user-&gt;email : null, ['class' =&gt; 'form-control form-control-solid', 'placeholder' =&gt; __('messages.client.email'), 'required']) }}\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"col-lg-6\"&gt;\n&lt;div class=\"mb-5\"&gt;\n{{ Form::label('contact', __('messages.client.contact_no').':', ['class' =&gt; 'form-label mb-3']) }}\n{{ Form::tel('contact', $user-&gt;contact ?? getSettingValue('country_code'), ['class' =&gt; 'form-control form-control-solid', 'onkeyup' =&gt; 'if (/\\D/g.test(this.value)) this.value = this.value.replace(/\\D/g,\"\")','id'=&gt;'phoneNumber']) }}\n{{ Form::hidden('region_code',isset($user) ? $user-&gt;region_code : null,['id'=&gt;'prefix_code']) }}\n&lt;span id=\"valid-msg\" class=\"hide text-success fw-400 fs-small mt-2\"&gt;\u2713 &amp;nbsp; Valid&lt;/span&gt;\n&lt;span id=\"error-msg\" class=\"hide text-danger fw-400 fs-small mt-2\"&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"col-md-6 mb-5\"&gt;\n&lt;div class=\"fv-row\"&gt;\n&lt;div class=\"\"&gt;\n{{ Form::label('password',__('messages.client.password').':' ,['class' =&gt; 'form-label mb-3']) }}\n&lt;div class=\"position-relative\"&gt;\n&lt;input class=\"form-control form-control-solid\"\ntype=\"password\" placeholder={{__('messages.client.password')}} name=\"password\"\nautocomplete=\"off\"\naria-label=\"Password\" data-toggle=\"password\"&gt;\n&lt;span class=\"position-absolute d-flex align-items-center top-0 bottom-0 end-0 me-4 input-icon input-password-hide cursor-pointer text-gray-600\"&gt;\n&lt;i class=\"bi bi-eye-slash-fill\"&gt;&lt;/i&gt;\n&lt;/span&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"col-md-6 mb-5\"&gt;\n&lt;div class=\"fv-row\"&gt;\n&lt;div class=\"\"&gt;\n{{ Form::label('confirmPassword',__('messages.client.confirm_password').':' ,['class' =&gt; 'form-label mb-3']) }}\n&lt;div class=\"position-relative\"&gt;\n&lt;input class=\"form-control form-control-solid\"\ntype=\"password\"\nplaceholder=\"{{__('messages.client.confirm_password')}}\" name=\"password_confirmation\"\nautocomplete=\"off\" aria-label=\"Password\" data-toggle=\"password\"&gt;\n&lt;span class=\"position-absolute d-flex align-items-center top-0 bottom-0 end-0 me-4 input-icon input-password-hide cursor-pointer text-gray-600\"&gt;\n&lt;i class=\"bi bi-eye-slash-fill\"&gt;&lt;/i&gt;\n&lt;/span&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"mb-3\" io-image-input=\"true\"&gt;\n&lt;label for=\"exampleInputImage\" class=\"form-label\"&gt;{{ __('messages.client.profile') }}:&lt;/label&gt;\n&lt;div class=\"d-block\"&gt;\n&lt;div class=\"image-picker\"&gt;\n&lt;div class=\"image previewImage\" id=\"exampleInputImage\"\nstyle=\"background-image: url('{{ !empty($user-&gt;profile_image) ? $user-&gt;profile_image : asset('assets/images/avatar.png') }}')\"&gt;\n&lt;/div&gt;\n&lt;span class=\"picker-edit rounded-circle text-gray-500 fs-small\" data-bs-toggle=\"tooltip\"\ntitle=\"Change Profile\"&gt;\n&lt;label&gt;\n&lt;i class=\"fa-solid fa-pen\" id=\"profileImageIcon\"&gt;&lt;/i&gt;\n&lt;input type=\"file\" id=\"profile_image\" name=\"profile\" class=\"image-upload d-none\"\naccept=\".png, .jpg, .jpeg\"/&gt;\n&lt;/label&gt;\n&lt;/span&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"form-text\"&gt;Allowed file types: png, jpg, jpeg.&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"float-end d-flex\"&gt;\n{{ Form::submit(__('messages.common.save'),['class' =&gt; 'btn btn-primary me-3']) }}\n&lt;a href=\"{{ route('users.index') }}\" type=\"reset\"\nclass=\"btn btn-secondary btn-active-light-primary\"&gt;{{__('messages.common.discard')}}&lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <p>This HTML and Laravel Blade code represents a form for editing an admin user's details. It includes form fields for updating various attributes of the admin user, such as their name, email, contact information, password, and profile image. Let's break down the components of this code:</p> <ol> <li> <p>Name, Email, and Contact Fields:    These fields allow the admin's first name, last name, email, and contact number to be edited. The <code>Form::label()</code> method is used to create labels for each field, and the <code>Form::text()</code> and <code>Form::tel()</code> methods generate input fields for editing the data. The <code>Form::hidden()</code> method creates a hidden input field for the region code associated with the contact number.</p> </li> <li> <p>Password and Confirm Password Fields:    These fields are used for updating the admin's password. Similar to the other fields, <code>Form::label()</code> and input elements are used. However, the password fields are of type \"password\" and include a password toggle feature using Bootstrap icons for showing and hiding the password.</p> </li> <li> <p>Profile Image Field:    This section allows the admin's profile image to be uploaded or changed. The current profile image is displayed as a background image. A file input element is hidden, and clicking on an icon triggers the file selection dialog. The accepted file types are limited to PNG, JPG, and JPEG, as indicated in the form text.</p> </li> <li> <p>Buttons for Submitting and Discarding Changes:    Two buttons are provided at the bottom of the form: one for submitting the changes and one for discarding them. The <code>Form::submit()</code> method creates a button for saving changes with a primary style. The <code>&lt;a&gt;</code> tag serves as a link to navigate back to the list of users without saving the changes.</p> </li> <li> <p>Bootstrap Grid Layout:    The form fields are organized using the Bootstrap grid layout classes. It's divided into columns with responsive classes to ensure proper spacing and alignment on different screen sizes.</p> </li> </ol> <p>Overall, this Blade view template provides an interface for editing an admin user's details, including their name, email, contact information, password, and profile image. It follows best practices by using Laravel's form binding methods and integrates Bootstrap components for styling and layout.</p>"},{"location":"Admin/admins/#show-details-of-admin","title":"Show details of admin","text":"<pre><code>&lt;div class=\"card\"&gt;\n  &lt;div class=\"card-body\"&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-xxl-5 col-12\"&gt;\n        &lt;div\n          class=\"d-sm-flex align-items-center mb-5 mb-xxl-0 text-center text-sm-start\"\n        &gt;\n          &lt;div class=\"image image-circle image-small\"&gt;\n            &lt;img src=\"{{ $user-&gt;profile_image }}\" alt=\"user\" /&gt;\n          &lt;/div&gt;\n          &lt;div class=\"ms-0 ms-md-10 mt-5 mt-sm-0\"&gt;\n            &lt;h2&gt;{{ $user-&gt;full_name }}&lt;/h2&gt;\n            &lt;a\n              href=\"mailto:{{ $user-&gt;email }}\"\n              class=\"text-gray-600 text-decoration-none fs-4\"\n            &gt;\n              {{ $user-&gt;email }}\n            &lt;/a&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"mt-7 overflow-hidden\"&gt;\n  &lt;ul\n    class=\"nav nav-tabs mb-5 pb-1 overflow-auto flex-nowrap text-nowrap\"\n    id=\"myTab\"\n    role=\"tablist\"\n  &gt;\n    &lt;li class=\"nav-item position-relative me-7 mb-3\" role=\"presentation\"&gt;\n      &lt;button\n        class=\"nav-link active p-0\"\n        id=\"overview-tab\"\n        data-bs-toggle=\"tab\"\n        data-bs-target=\"#overview\"\n        type=\"button\"\n        role=\"tab\"\n        aria-controls=\"overview\"\n        aria-selected=\"true\"\n      &gt;\n        Overview\n      &lt;/button&gt;\n    &lt;/li&gt;\n  &lt;/ul&gt;\n  &lt;div class=\"card\"&gt;\n    &lt;div class=\"card-body\"&gt;\n      &lt;div class=\"tab-content\" id=\"myTabContent\"&gt;\n        &lt;div\n          class=\"tab-pane fade show active\"\n          id=\"overview\"\n          role=\"tabpanel\"\n          aria-labelledby=\"overview-tab\"\n        &gt;\n          &lt;div class=\"row\"&gt;\n            &lt;div\n              class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5 {{ empty($user-&gt;contact) ? 'd-none' : '' }}\"\n            &gt;\n              &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"\n                &gt;{{ __('messages.user.contact_number') }} :&lt;/label\n              &gt;\n              &lt;span class=\"fs-4 text-gray-800\"&gt;{{ $user-&gt;contact }}&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n              &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"\n                &gt;Registered Date:&lt;/label\n              &gt;\n              &lt;span class=\"fs-4 text-gray-800\"\n                &gt;{{\n                \\Carbon\\Carbon::parse($user-&gt;created_at)-&gt;translatedFormat('jS\n                \\of F Y') }}&lt;/span\n              &gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>This HTML code represents a view for displaying details of an admin user within a web application. The view is divided into several sections, each responsible for displaying different aspects of the admin's information. Let's break down the components of this code:</p> <ol> <li> <p>User Information Card:    This section displays the admin user's profile image, full name, and email address in a card format. It uses Bootstrap classes for layout and alignment. The user's profile image is shown as a circular image. The user's full name is displayed as a heading, and their email address is shown as a link with a larger font size.</p> </li> <li> <p>Navigation Tabs:    This section contains navigation tabs that allow the user to switch between different sections of information. It uses Bootstrap's tab component. However, in this example, there is only one active tab labeled \"Overview.\"</p> </li> <li> <p>Overview Tab Content:    This section contains the content of the \"Overview\" tab. It displays specific details about the admin user. It uses Bootstrap's tab content and tab pane components.</p> </li> <li> <p>Contact Number (if available):      This part displays the admin user's contact number if it's not empty. It uses a label and a span to display the contact number.</p> </li> <li> <p>Registered Date:      This part displays the date when the admin user was registered. It converts the <code>created_at</code> attribute using Carbon, a date and time manipulation library for PHP. The date is displayed in a formatted style.</p> </li> </ol> <p>In summary, this Blade view template is designed to present detailed information about an admin user. It includes a profile image, full name, email address, and additional details such as contact number and registered date. The layout is organized using Bootstrap classes, and the view allows users to switch between different tabs to view specific information about the admin user.</p>"},{"location":"Admin/categories/","title":"Categories page","text":""},{"location":"Admin/categories/#route","title":"Route","text":"<p>The routes of categories section are:</p> <pre><code>Route::resource('categories', CategoryController::class)-&gt;names([\n     'index' =&gt; 'category.index',\n     'create' =&gt; 'category.create',\n     'show' =&gt; 'category.show',\n     'store' =&gt; 'category.store',\n     'edit' =&gt; 'category.edit',\n     'update' =&gt; 'category.update',\n     'destroy' =&gt; 'category.destroy',\n ]);\n</code></pre>"},{"location":"Admin/categories/#controller","title":"Controller","text":"<p>The controller of the 'Categories' page located in app&gt;http&gt;controllers&gt;CategoryController.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Http\\Requests\\CreateCategoryRequest;\nuse App\\Http\\Requests\\UpdateCategoryRequest;\nuse App\\Models\\Category;\nuse App\\Models\\Product;\nuse App\\Repositories\\CategoryRepository;\nuse Exception;\nuse Illuminate\\Contracts\\Foundation\\Application;\nuse Illuminate\\Contracts\\View\\Factory;\nuse Illuminate\\Contracts\\View\\View;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\Request;\n\nclass CategoryController extends AppBaseController\n{\n    /** @var CategoryRepository */\n    public $categoryRepository;\n\n    /**\n     * @param  CategoryRepository  $categoryRepo\n     */\n    public function __construct(CategoryRepository $categoryRepo)\n    {\n        $this-&gt;categoryRepository = $categoryRepo;\n    }\n\n    /**\n     * @param  Request  $request\n     * @return Application|Factory|View\n     *\n     * @throws Exception\n     */\n    public function index(Request $request)\n    {\n        return view('category.index');\n    }\n\n    /**\n     * @param  CreateCategoryRequest  $request\n     * @return JsonResponse\n     */\n    public function store(CreateCategoryRequest $request)\n    {\n        $input = $request-&gt;all();\n        $category = $this-&gt;categoryRepository-&gt;store($input);\n\n        return $this-&gt;sendResponse($category, 'Category saved successfully.');\n    }\n\n    /**\n     * @param  Category  $category\n     * @return JsonResponse\n     */\n    public function edit(Category $category)\n    {\n        return $this-&gt;sendResponse($category, 'Category retrieved successfully.');\n    }\n\n    /**\n     * @param  UpdateCategoryRequest  $request\n     * @param $categoryId\n     * @return JsonResponse\n     */\n    public function update(UpdateCategoryRequest $request, $categoryId)\n    {\n        $input = $request-&gt;all();\n        $this-&gt;categoryRepository-&gt;update($input, $categoryId);\n\n        return $this-&gt;sendSuccess('Category updated successfully.');\n    }\n\n    /**\n     * @param  Category  $category\n     * @return JsonResponse\n     */\n    public function destroy(Category $category)\n    {\n        $productModels = [\n            Product::class,\n        ];\n        $result = canDelete($productModels, 'category_id', $category-&gt;id);\n        if ($result) {\n            return $this-&gt;sendError(__('messages.flash.category_cant_deleted'));\n        }\n        $category-&gt;delete();\n\n        return $this-&gt;sendSuccess('Category deleted successfully.');\n    }\n}\n</code></pre> <p>Let's break down the key components and methods of this <code>CategoryController</code> class:</p> <ol> <li> <p>Namespace and Imports:    The code starts with defining the namespace for the controller and importing necessary classes and dependencies that will be used within the controller. These imports include request classes, model classes, a repository class, and other components needed for handling requests and responses.</p> </li> <li> <p>Controller Extending:    The <code>CategoryController</code> class extends <code>AppBaseController</code>, which indicates that it's inheriting some shared behavior from the base controller. This base controller contain methods and properties that are common across multiple controllers in the application.</p> </li> <li> <p>Constructor:    The constructor of the class accepts an instance of <code>CategoryRepository</code> as a parameter and assigns it to the <code>$categoryRepository</code> property. This repository provides a data abstraction layer for interacting with the database and handling category-related operations.</p> </li> <li> <p>Index Method:    The <code>index</code> method handles the request to display a view related to listing categories. It returns the rendered view named <code>'category.index'</code>.</p> </li> <li> <p>Store Method:    The <code>store</code> method handles the creation of a new category. It takes a <code>CreateCategoryRequest</code> object as a parameter, which contains validation rules for the incoming data. The method extracts data from the request, passes it to the <code>categoryRepository</code> for storage, and then sends a JSON response indicating the success or failure of the operation.</p> </li> <li> <p>Edit Method:    The <code>edit</code> method takes a <code>Category</code> model object as a parameter. This method is used for retrieving information about a specific category, possibly for editing purposes. It sends a JSON response containing the category data.</p> </li> <li> <p>Update Method:    The <code>update</code> method handles the updating of an existing category. It takes an <code>UpdateCategoryRequest</code> object and the ID of the category to be updated as parameters. The method extracts data from the request, passes it to the <code>categoryRepository</code> to update the category, and then sends a JSON response indicating the success or failure of the operation.</p> </li> <li> <p>Destroy Method:    The <code>destroy</code> method handles the deletion of a category. It takes a <code>Category</code> model object as a parameter. Before deleting the category, it checks if the category can be deleted based on a certain condition ( related to associated products). If the condition is met, it sends an error response. If the condition is not met, it deletes the category and sends a success response.</p> </li> </ol> <p>Overall, this <code>CategoryController</code> class is responsible for managing category-related actions in the application, including creation, editing, updating, and deletion of categories. It interacts with the database through the <code>CategoryRepository</code> and sends JSON responses to indicate the outcomes of these actions. Additionally, it is using some shared methods from a base controller (<code>AppBaseController</code>).</p>"},{"location":"Admin/categories/#model","title":"Model","text":"<p>The models related to this controller are : App\\Models\\Category and App\\Models\\Product.</p>"},{"location":"Admin/categories/#category-model","title":"Category Model:","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass Category extends Model\n{\n    use HasFactory;\n\n    protected $table = 'categories';\n\n    protected $fillable = ['name'];\n\n    protected $casts = [\n        'id' =&gt; 'integer',\n        'name' =&gt; 'string',\n    ];\n\n    public static $rules = [\n        'name' =&gt; 'required|unique:categories,name',\n    ];\n\n    /**\n     * @return \\Illuminate\\Database\\Eloquent\\Relations\\HasMany\n     */\n    public function products()\n    {\n        return $this-&gt;hasMany(Product::class, 'category_id', 'id');\n    }\n}\n</code></pre> <p>This model represents a category entity and includes properties, relationships, and validation rules. Let's break down the key components of this <code>Category</code> model:</p> <ol> <li> <p>Namespace and Imports:    The code begins with defining the namespace for the model and importing necessary classes. It imports <code>HasFactory</code> from <code>Illuminate\\Database\\Eloquent\\Factories</code> and <code>Model</code> from <code>Illuminate\\Database\\Eloquent</code>.</p> </li> <li> <p>Model Class Definition:    The <code>Category</code> class extends Laravel's <code>Model</code> class, which provides functionalities for interacting with the corresponding database table. The <code>use HasFactory</code> statement indicates that the model should use a factory for generating fake data for testing.</p> </li> <li> <p>Table Name:    The <code>protected $table</code> property specifies the name of the database table associated with this model. In this case, it's set to <code>'categories'</code>.</p> </li> <li> <p>Fillable Fields:    The <code>protected $fillable</code> property defines an array of fields that are allowed to be mass-assigned. In this case, it includes the <code>'name'</code> field, which represents the name of the category.</p> </li> <li> <p>Casts:    The <code>protected $casts</code> property defines how certain attributes should be cast to specific data types. In this case, it specifies that the <code>'id'</code> attribute should be cast to an integer, and the <code>'name'</code> attribute should be cast to a string.</p> </li> <li> <p>Validation Rules:    The <code>public static $rules</code> array defines validation rules for the model. Specifically, it enforces that the <code>'name'</code> attribute is required and must be unique within the <code>'categories'</code> table.</p> </li> <li> <p>Relationship: <code>products</code> Method:    The <code>products</code> method defines a one-to-many relationship between the <code>Category</code> model and the <code>Product</code> model. It returns a <code>HasMany</code> relationship instance, indicating that a category can have multiple products associated with it. The relationship uses the <code>hasMany</code> method and specifies the related model (<code>Product::class</code>), the foreign key (<code>'category_id'</code>), and the local key (<code>'id'</code>) that links the two models.</p> </li> </ol> <p>In summary, the <code>Category</code> model represents a category in the application, with attributes for its name and a one-to-many relationship with products. It also includes validation rules to ensure the integrity of the data stored in the database. This model is designed to work with the underlying database table named <code>'categories'</code>.</p>"},{"location":"Admin/categories/#product-model","title":"Product Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Notifications\\Notifiable;\nuse Spatie\\MediaLibrary\\HasMedia;\nuse Spatie\\MediaLibrary\\InteractsWithMedia;\nuse Spatie\\MediaLibrary\\MediaCollections\\Models\\Media;\n\nclass Product extends Model implements HasMedia\n{\n    use HasFactory, Notifiable, InteractsWithMedia;\n\n    protected $table = 'products';\n\n    protected $fillable = ['name', 'code', 'category_id', 'unit_price', 'description'];\n\n    protected $casts = [\n        'name' =&gt; 'string',\n        'code' =&gt; 'string',\n        'category_id' =&gt; 'integer',\n        'unit_price' =&gt; 'double',\n        'description' =&gt; 'string',\n    ];\n\n    const Image = 'product';\n\n    protected $appends = ['product_image'];\n\n    public static $rules = [\n        'name' =&gt; 'required',\n        'code' =&gt; 'required|alpha_num|min:3|max:6|unique:products,code',\n        'category_id' =&gt; 'required',\n        'unit_price' =&gt; 'required|numeric',\n    ];\n\n    public static $messages = [\n        'code.required' =&gt; 'The product code field is required.',\n        'code.size' =&gt; 'The product code must be 6 characters.',\n        'code.unique' =&gt; 'The product code has already been taken.',\n    ];\n\n    /**\n     * @return string\n     */\n    public function getProductImageAttribute(): string\n    {\n        /** @var Media $media */\n        $media = $this-&gt;getMedia(self::Image)-&gt;first();\n        if (! empty($media)) {\n            return $media-&gt;getFullUrl();\n        }\n\n        return asset('images/default-product.jpg');\n    }\n\n    public function category()\n    {\n        return $this-&gt;hasOne(Category::class, 'id', 'category_id');\n    }\n}\n</code></pre> <p>This model represents a product entity and includes attributes, relationships, and various methods. Let's break down the key components of this <code>Product</code> model:</p> <ol> <li> <p>Namespace and Imports:    The code begins by defining the namespace for the model and importing necessary classes. It imports <code>HasFactory</code> from <code>Illuminate\\Database\\Eloquent\\Factories</code>, <code>Model</code> from <code>Illuminate\\Database\\Eloquent</code>, and other classes related to media handling and notifications.</p> </li> <li> <p>Model Class Definition:    The <code>Product</code> class extends Laravel's <code>Model</code> class and implements the <code>HasMedia</code> interface. This interface is related to handling media (such as images) associated with the model.</p> </li> <li> <p>Traits and Use Statements:    The <code>use HasFactory, Notifiable, InteractsWithMedia</code> statement indicates that the model uses the <code>HasFactory</code> and <code>Notifiable</code> traits, as well as the <code>InteractsWithMedia</code> trait from the Spatie Media Library.</p> </li> <li> <p>Table Name:    The <code>protected $table</code> property specifies the name of the database table associated with this model. In this case, it's set to <code>'products'</code>.</p> </li> <li> <p>Fillable Fields:    The <code>protected $fillable</code> property defines an array of fields that are allowed to be mass-assigned. It includes attributes like <code>'name'</code>, <code>'code'</code>, <code>'category_id'</code>, <code>'unit_price'</code>, and <code>'description'</code>.</p> </li> <li> <p>Casts:    The <code>protected $casts</code> property defines how certain attributes should be cast to specific data types. It specifies casting for attributes like <code>'name'</code>, <code>'code'</code>, <code>'category_id'</code>, <code>'unit_price'</code>, and <code>'description'</code>.</p> </li> <li> <p>Image Constants and Appends:    The constant <code>const Image</code> defines the key used to manage media associated with the product. The <code>protected $appends</code> property defines an array of computed attributes. In this case, it adds a computed attribute named <code>'product_image'</code>.</p> </li> <li> <p>Validation Rules:    The <code>public static $rules</code> array defines validation rules for the model. It enforces rules for fields like <code>'name'</code>, <code>'code'</code>, <code>'category_id'</code>, and <code>'unit_price'</code>.</p> </li> <li> <p>Validation Messages:    The <code>public static $messages</code> array defines custom error messages for specific validation rules.</p> </li> <li> <p>Computed Attribute <code>getProductImageAttribute</code>:     This method is an accessor that generates the full URL of the product's image using the Spatie Media Library. It retrieves the first associated media and returns its URL. If no media is associated, it returns a default image URL.</p> </li> <li> <p>Relationship: <code>category</code> Method:     The <code>category</code> method defines a one-to-one relationship between the <code>Product</code> model and the <code>Category</code> model. It returns a <code>HasOne</code> relationship instance, indicating that a product belongs to a single category. The relationship uses the <code>hasOne</code> method and specifies the related model (<code>Category::class</code>), the foreign key (<code>'id'</code>), and the local key (<code>'category_id'</code>) that links the two models.</p> </li> </ol> <p>In summary, the <code>Product</code> model represents a product in the application, with attributes like name, code, category ID, unit price, and description. It includes methods to handle image retrieval and relationships to categories. Additionally, it utilizes the Spatie Media Library for media management.</p>"},{"location":"Admin/categories/#view","title":"View","text":""},{"location":"Admin/categories/#the-livewire-category-table","title":"The livewire: category table","text":"<p>The livewire of the 'category table' located in app&gt;http&gt;livewire&gt;CategoryTable.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Livewire;\n\nuse App\\Models\\Category;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Rappasoft\\LaravelLivewireTables\\Views\\Column;\n\nclass CategoryTable extends LivewireTableComponent\n{\n    protected $model = Category::class;\n\n    protected string $tableName = 'categories';\n\n    // for table header button\n    public $showButtonOnHeader = true;\n\n    public $buttonComponent = 'category.components.add-button';\n\n    public function configure(): void\n    {\n        $this-&gt;setPrimaryKey('id');\n        $this-&gt;setDefaultSort('created_at', 'desc');\n        $this-&gt;setQueryStringStatus(false);\n\n        $this-&gt;setTdAttributes(function (Column $column, $row, $columnIndex, $rowIndex) {\n            if (in_array($column-&gt;getField(), ['name'])) {\n                return [\n                    'class' =&gt; 'w-50',\n                ];\n            }\n\n            return [];\n        });\n\n        $this-&gt;setThAttributes(function (Column $column) {\n            if ($column-&gt;getField() == 'id') {\n                return [\n                    'style' =&gt; 'width:9%;text-align:center',\n                ];\n            }\n\n            return [\n                'class' =&gt; 'text-center',\n            ];\n        });\n    }\n\n    public function columns(): array\n    {\n        return [\n            Column::make(__('messages.category.category'), 'name')\n                -&gt;sortable()\n                -&gt;searchable(),\n            Column::make(__('messages.product.product'), 'id')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return $row-&gt;products_count;\n                }),\n            Column::make(__('messages.common.action'), 'id')\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('livewire.modal-action-button')\n                        -&gt;with([\n                            'dataId' =&gt; $row-&gt;id,\n                            'editClass' =&gt; 'category-edit-btn',\n                            'deleteClass' =&gt; 'category-delete-btn',\n                        ]);\n                }),\n        ];\n    }\n\n    public function builder(): Builder\n    {\n        return Category::withCount('products');\n    }\n}\n</code></pre> <p>Let's break down the key components and methods of this <code>CategoryTable</code> Livewire component:</p> <ol> <li> <p>Namespace and Imports:    The code begins by defining the namespace for the Livewire component and importing necessary classes. It imports the <code>Category</code> model, the <code>Builder</code> class, and classes related to Livewire and the Laravel Livewire Tables package.</p> </li> <li> <p>Class Definition:    The <code>CategoryTable</code> class extends <code>LivewireTableComponent</code>. This indicates that it's inheriting functionality from the Laravel Livewire Tables package to create a dynamic table.</p> </li> <li> <p>Model and Table Name:</p> </li> <li> <p><code>protected $model</code>: Specifies the model class associated with this component. In this case, it's the <code>Category</code> model.</p> </li> <li> <p><code>protected string $tableName</code>: Specifies the name of the database table for which the component is responsible. In this case, it's set to <code>'categories'</code>.</p> </li> <li> <p>Button Configuration:</p> </li> <li> <p><code>$showButtonOnHeader</code>: Determines whether to show a button in the table header. It's set to <code>true</code>.</p> </li> <li> <p><code>$buttonComponent</code>: Specifies the component to use for the button in the header. It's set to <code>'category.components.add-button'</code>.</p> </li> <li> <p><code>configure</code> Method:    This method is used to configure various settings for the table component.</p> </li> <li> <p><code>setPrimaryKey('id')</code>: Sets the primary key column to <code>'id'</code>.</p> </li> <li><code>setDefaultSort('created_at', 'desc')</code>: Sets the default sorting to be by the <code>'created_at'</code> column in descending order.</li> <li><code>setQueryStringStatus(false)</code>: Disables adding query string parameters to pagination links.</li> <li><code>setTdAttributes(...)</code>: Sets attributes for table data (<code>&lt;td&gt;</code>) elements based on the column name. In this case, it adds a CSS class to the <code>'name'</code> column to control its width.</li> <li> <p><code>setThAttributes(...)</code>: Sets attributes for table header (<code>&lt;th&gt;</code>) elements based on the column name. It adds styles to the <code>'id'</code> column header and a class to other header cells.</p> </li> <li> <p><code>columns</code> Method:    This method defines the columns to be displayed in the table.</p> </li> <li> <p>The first column shows the category name, and it's sortable and searchable.</p> </li> <li>The second column displays the product count associated with each category and uses the <code>products_count</code> attribute from the relationship.</li> <li> <p>The third column contains action buttons for editing and deleting categories.</p> </li> <li> <p><code>builder</code> Method:    This method defines the query builder used to retrieve data for the table. It uses the <code>Category</code> model and includes a count of related products using the <code>withCount</code> method.</p> </li> </ol> <p>In summary, the <code>CategoryTable</code> Livewire component is used to display a table of categories. It uses the Laravel Livewire Tables package to configure the table's behavior and columns. The component interacts with the <code>Category</code> model to retrieve data and includes columns for category name, product count, and action buttons.</p>"},{"location":"Admin/categories/#list-of-categories","title":"List of categories","text":"<p>The view that displays the list of category located in : resources\\views\\category\\index.blade.php.</p> <pre><code>@extends('layouts.app') @section('title') {{ __('messages.categories') }}\n@endsection @section('content')\n&lt;div class=\"container-fluid\"&gt;\n  &lt;div class=\"d-flex flex-column \"&gt;\n    @include('flash::message')\n    &lt;livewire:category-table /&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n@include('category.create_modal') @include('category.edit_modal') @endsection\n</code></pre> <p>Let's break down the contents of this Blade view:</p> <ol> <li> <p>Extends Layout:    The view extends the <code>'layouts.app'</code> layout. This means that it inherits the structure and styles defined in the <code>app.blade.php</code> layout file.</p> </li> <li> <p>Title Section:    The <code>@section('title')</code> directive is used to define the title of the page. In this case, it sets the title to the translated string <code>__('messages.categories')</code>.</p> </li> <li> <p>Content Section:    The <code>@section('content')</code> directive is used to define the main content of the page.</p> </li> <li> <p>Container and Flex Layout:</p> </li> <li> <p>The <code>&lt;div class=\"container-fluid\"&gt;</code> element starts a fluid container to contain the page's content.</p> </li> <li> <p>The <code>&lt;div class=\"d-flex flex-column\"&gt;</code> element defines a flex container with a column layout. This is used to structure the page's content.</p> </li> <li> <p>Flash Message Include:</p> </li> <li> <p>The <code>@include('flash::message')</code> directive is used to include a Flash message. This is used to display flash messages, such as success or error messages, to the user.</p> </li> <li> <p>Livewire Component Include:</p> </li> <li> <p>The <code>@livewire('category-table')</code> directive includes the <code>category-table</code> Livewire component. This component was defined in the previous discussions and is responsible for displaying the table of categories.</p> </li> <li> <p>Modals Include:</p> </li> <li>The <code>@include('category.create_modal')</code> directive includes a modal template for creating categories. This displays a modal dialog for creating a new category.</li> <li>The <code>@include('category.edit_modal')</code> directive includes a modal template for editing categories. This displays a modal dialog for editing an existing category.</li> </ol> <p>In summary, this <code>index.blade.php</code> view file extends the <code>layouts.app</code> layout and sets the title of the page. It includes a container with a column layout and includes the Flash message display, the <code>category-table</code> Livewire component for listing categories, and modals for creating and editing categories. This structure indicates that the view is meant to display and manage categories within the application.</p>"},{"location":"Admin/categories/#edit-category","title":"Edit category","text":"<p>The view that displays the list of category located in : resources\\views\\category\\edit.blade.php.</p> <pre><code>&lt;div id=\"editCategoryModal\" class=\"modal fade\" role=\"dialog\" tabindex=\"-1\" aria-hidden=\"true\"&gt;\n&lt;div class=\"modal-dialog\"&gt;\n&lt;!-- Modal content--&gt;\n&lt;div class=\"modal-content\"&gt;\n&lt;div class=\"modal-header\"&gt;\n&lt;h2&gt;{{__('messages.category.edit_category')}}&lt;/h2&gt;\n&lt;button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"\naria-label=\"Close\"&gt;&lt;/button&gt;\n\n&lt;/div&gt;\n{{ Form::open(['id'=&gt;'editCategoryForm']) }}\n&lt;div class=\"modal-body scroll-y\"&gt;\n&lt;div class=\"alert alert-danger display-none hide\" id=\"editValidationErrorsBox\"&gt;&lt;/div&gt;\n{{ Form::hidden('categoryId',null,['id'=&gt;'editModalCategoryId']) }}\n&lt;div class=\"row\"&gt;\n&lt;div class=\"form-group col-sm-12 mb-5\"&gt;\n{{ Form::label('name',__('messages.common.name').':', ['class' =&gt; 'form-label required mb-3']) }}\n{{ Form::text('name', null, ['id'=&gt;'editCategoryName','class' =&gt; 'form-control ','required','placeholder' =&gt; __('messages.common.name')]) }}\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"modal-footer pt-0\"&gt;\n{{ Form::button(__('messages.common.save'), ['type' =&gt; 'submit','class' =&gt; 'btn btn-primary me-2','id' =&gt; 'btnEditSave','data-loading-text' =&gt; \"&lt;span class='spinner-border spinner-border-sm'&gt;&lt;/span&gt; Processing...\"]) }}\n&lt;button type=\"button\" class=\"btn btn-secondary btn-active-light-primary me-3\"\ndata-bs-dismiss=\"modal\"&gt;{{ __('messages.common.cancel') }}&lt;/button&gt;\n&lt;/div&gt;\n{{ Form::close() }}\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>The provided code snippet represents a modal template in HTML, used for editing a category in a web application. Let's break down the components of this modal:</p> <ol> <li> <p>Modal Container:</p> </li> <li> <p><code>&lt;div id=\"editCategoryModal\" class=\"modal fade\" role=\"dialog\" tabindex=\"-1\" aria-hidden=\"true\"&gt;</code>: This is the outer container for the modal. It has an <code>id</code> of <code>\"editCategoryModal\"</code>. It uses Bootstrap's modal classes (<code>modal</code>, <code>fade</code>) and sets some attributes for its role and tabindex. The <code>aria-hidden</code> attribute indicates that the modal is initially hidden from assistive technology.</p> </li> <li> <p>Modal Dialog:</p> </li> <li> <p><code>&lt;div class=\"modal-dialog\"&gt;</code>: This is the modal dialog, the main content container of the modal.</p> </li> <li> <p>Modal Content:</p> </li> <li> <p><code>&lt;div class=\"modal-content\"&gt;</code>: This is the content of the modal.</p> </li> <li> <p>Modal Header:</p> </li> <li> <p><code>&lt;div class=\"modal-header\"&gt;</code>: This section contains the header of the modal.</p> </li> <li><code>&lt;h2&gt;{{__('messages.category.edit_category')}}&lt;/h2&gt;</code>: Displays the title of the modal, translated. It's enclosed in an <code>&lt;h2&gt;</code> element.</li> <li> <p>Close Button: A button with the class <code>btn-close</code> that dismisses the modal.</p> </li> <li> <p>Form:</p> </li> <li> <p><code>{{ Form::open(['id'=&gt;'editCategoryForm']) }}</code>: Opens a form using Laravel Collective's <code>Form::open</code> method. The form has an <code>id</code> of <code>\"editCategoryForm\"</code>.</p> </li> <li>Hidden Field: <code>{{ Form::hidden('categoryId',null,['id'=&gt;'editModalCategoryId']) }}</code>: A hidden input field with the name <code>'categoryId'</code> and an <code>id</code> of <code>\"editModalCategoryId\"</code>. This field is used to store the ID of the category being edited.</li> <li> <p>Form Fields: This section contains form fields for editing the category. Specifically, it has an input field for the category name (<code>'name'</code>).</p> </li> <li> <p>Modal Footer:</p> </li> <li> <p><code>&lt;div class=\"modal-footer pt-0\"&gt;</code>: This section contains the footer of the modal, which typically contains buttons.</p> </li> <li>Save Button: A button with the label \"Save\" that serves as a submit button for the form. It has a spinner animation for processing.</li> <li> <p>Cancel Button: A button that dismisses the modal, with a label translated as \"Cancel\".</p> </li> <li> <p>Form Close:</p> </li> <li><code>{{ Form::close() }}</code>: Closes the form.</li> </ol>"},{"location":"Admin/categories/#create-new-category","title":"Create new category","text":"<p>The view that create a new category is located in : resources\\views\\category\\create.blade.php.</p> <pre><code>&lt;div\n  id=\"addCategoryModal\"\n  class=\"modal fade\"\n  role=\"dialog\"\n  tabindex=\"-1\"\n  aria-hidden=\"true\"\n&gt;\n  &lt;div class=\"modal-dialog\"&gt;\n    &lt;!-- Modal content--&gt;\n    &lt;div class=\"modal-content\"&gt;\n      &lt;div class=\"modal-header\"&gt;\n        &lt;h2&gt;{{__('messages.category.add_category')}}&lt;/h2&gt;\n        &lt;button\n          type=\"button\"\n          class=\"btn-close\"\n          data-bs-dismiss=\"modal\"\n          aria-label=\"Close\"\n        &gt;&lt;/button&gt;\n      &lt;/div&gt;\n      {{ Form::open(['id'=&gt;'addNewCategoryForm']) }}\n      &lt;div class=\"modal-body scroll-y\"&gt;\n        &lt;div\n          class=\"alert alert-danger display-none hide\"\n          id=\"validationErrorsBox\"\n        &gt;&lt;/div&gt;\n        &lt;div class=\"row\"&gt;\n          &lt;div class=\"form-group col-sm-12 mb-5\"&gt;\n            {{ Form::label('name', __('messages.common.name').':', ['class' =&gt;\n            'form-label required mb-3']) }} {{ Form::text('name', null,\n            ['id'=&gt;'name','class' =&gt; 'form-control ','required','placeholder' =&gt;\n            __('messages.common.name')]) }}\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div class=\"modal-footer pt-0\"&gt;\n        {{ Form::button(__('messages.common.save'), ['type' =&gt; 'submit','class'\n        =&gt; 'btn btn-primary me-3','id' =&gt; 'btnSave','data-loading-text' =&gt;\n        \"&lt;span class=\"spinner-border spinner-border-sm\"&gt;&lt;/span&gt; Processing...\"])\n        }}\n        &lt;button\n          type=\"button\"\n          class=\"btn btn-secondary btn-active-light-primary me-2\"\n          data-bs-dismiss=\"modal\"\n        &gt;\n          {{ __('messages.common.cancel') }}\n        &lt;/button&gt;\n      &lt;/div&gt;\n      {{ Form::close() }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>Here's a breakdown of the components within this view:</p> <ol> <li> <p>Modal Container:</p> </li> <li> <p><code>&lt;div id=\"addCategoryModal\" class=\"modal fade\" role=\"dialog\" tabindex=\"-1\" aria-hidden=\"true\"&gt;</code>: This is the outer container for the modal. It has an <code>id</code> of <code>\"addCategoryModal\"</code>. It uses Bootstrap's modal classes (<code>modal</code>, <code>fade</code>) and sets attributes for its role and tabindex. The <code>aria-hidden</code> attribute indicates that the modal is initially hidden from assistive technology.</p> </li> <li> <p>Modal Dialog:</p> </li> <li> <p><code>&lt;div class=\"modal-dialog\"&gt;</code>: This is the modal dialog, the main content container of the modal.</p> </li> <li> <p>Modal Content:</p> </li> <li> <p><code>&lt;div class=\"modal-content\"&gt;</code>: This is the content of the modal.</p> </li> <li> <p>Modal Header:</p> </li> <li> <p><code>&lt;div class=\"modal-header\"&gt;</code>: This section contains the header of the modal.</p> </li> <li><code>&lt;h2&gt;{{__('messages.category.add_category')}}&lt;/h2&gt;</code>: Displays the title of the modal, translated. It's enclosed in an <code>&lt;h2&gt;</code> element.</li> <li> <p>Close Button: A button with the class <code>btn-close</code> that dismisses the modal.</p> </li> <li> <p>Form:</p> </li> <li> <p><code>{{ Form::open(['id'=&gt;'addNewCategoryForm']) }}</code>: Opens a form using Laravel Collective's <code>Form::open</code> method. The form has an <code>id</code> of <code>\"addNewCategoryForm\"</code>.</p> </li> <li> <p>Modal Body:</p> </li> <li> <p><code>&lt;div class=\"modal-body scroll-y\"&gt;</code>: This section contains the body content of the modal.</p> </li> <li>Validation Errors: An area to display validation errors if they occur during form submission.</li> <li> <p>Form Fields: This section contains form fields for creating a new category. Specifically, it has an input field for the category name (<code>'name'</code>).</p> </li> <li> <p>Modal Footer:</p> </li> <li> <p><code>&lt;div class=\"modal-footer pt-0\"&gt;</code>: This section contains the footer of the modal, which typically contains buttons.</p> </li> <li>Save Button: A button with the label \"Save\" that serves as a submit button for the form. It has a spinner animation for processing.</li> <li>Cancel Button: A button that dismisses the modal, with a label translated as \"Cancel\".</li> </ol>"},{"location":"Admin/clients/","title":"clients page","text":""},{"location":"Admin/clients/#route","title":"Route","text":"<p>The route <code>Route::resource('clients', ClientController::class);</code> leads to the page /admin/clients, which desplays all the other clients accounts.</p>"},{"location":"Admin/clients/#controller","title":"Controller","text":"<p>The controller of the 'list of clients' page located in app&gt;http&gt;controllers&gt;ClientController.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Http\\Requests\\CreateClientRequest;\nuse App\\Http\\Requests\\UpdateClientRequest;\nuse App\\Models\\Client;\nuse App\\Models\\Invoice;\nuse App\\Repositories\\ClientRepository;\nuse Exception;\nuse Illuminate\\Contracts\\Foundation\\Application;\nuse Illuminate\\Contracts\\View\\Factory;\nuse Illuminate\\Contracts\\View\\View;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\RedirectResponse;\nuse Illuminate\\Http\\Request;\nuse Laracasts\\Flash\\Flash;\n\nclass ClientController extends AppBaseController\n{\n    /**\n     * @var ClientRepository\n     */\n    private $clientRepository;\n\n    /**\n     * @param  ClientRepository  $clientRepo\n     */\n    public function __construct(ClientRepository $clientRepo)\n    {\n        $this-&gt;clientRepository = $clientRepo;\n    }\n\n    /**\n     * @param  Request  $request\n     * @return Application|Factory|View\n     *\n     * @throws Exception\n     */\n    public function index(Request $request)\n    {\n        return view('clients.index');\n    }\n\n    /**\n     * @return Application|Factory|View\n     */\n    public function create()\n    {\n        $countries = $this-&gt;clientRepository-&gt;getData();\n\n        return view('clients.create', compact('countries'));\n    }\n\n    /**\n     * @param  CreateClientRequest  $request\n     * @return RedirectResponse\n     */\n    public function store(CreateClientRequest $request): RedirectResponse\n    {\n        $input = $request-&gt;all();\n        try {\n            $this-&gt;clientRepository-&gt;store($input);\n            Flash::success('Client created successfully.');\n        } catch (Exception $exception) {\n            Flash::error($exception-&gt;getMessage());\n\n            return redirect()-&gt;route('clients.create')-&gt;withInput();\n        }\n\n        return redirect()-&gt;route('clients.index');\n    }\n\n    /**\n     * @param  Client  $client\n     * @param  Request  $request\n     * @return Application|Factory|View\n     */\n    public function show(Client $client, Request $request)\n    {\n        $client-&gt;load('user.media', 'invoices.payments');\n        $activeTab = $request-&gt;get('Active', 'overview');\n\n        return view('clients.show', compact('client', 'activeTab'));\n    }\n\n    /**\n     * @param  Client  $client\n     * @return Application|Factory|View\n     */\n    public function edit(Client $client)\n    {\n        $countries = $this-&gt;clientRepository-&gt;getData();\n        $client-&gt;load('user.media');\n\n        return view('clients.edit', compact('client', 'countries'));\n    }\n\n    /**\n     * @param  Client  $client\n     * @param  UpdateClientRequest  $request\n     * @return RedirectResponse\n     */\n    public function update(Client $client, UpdateClientRequest $request): RedirectResponse\n    {\n        $input = $request-&gt;all();\n        $client-&gt;load('user');\n\n        try {\n            $this-&gt;clientRepository-&gt;update($input, $client);\n            Flash::success('Client updated successfully.');\n        } catch (Exception $exception) {\n            Flash::error($exception-&gt;getMessage());\n\n            return redirect()-&gt;back()-&gt;withInput();\n        }\n\n        return redirect()-&gt;route('clients.index');\n    }\n\n    /**\n     * @param  Client  $client\n     * @return JsonResponse\n     */\n    public function destroy(Client $client): JsonResponse\n    {\n        $invoiceModels = [\n            Invoice::class,\n        ];\n        $result = canDelete($invoiceModels, 'client_id', $client-&gt;id);\n        if ($result) {\n            return $this-&gt;sendError(__('messages.flash.client_cant_deleted'));\n        }\n        $client-&gt;user()-&gt;delete();\n        $client-&gt;delete();\n\n        return $this-&gt;sendSuccess('Client Deleted successfully.');\n    }\n\n    /**\n     * @param  Request  $request\n     * @return mixed\n     */\n    public function getStates(Request $request)\n    {\n        $countryId = $request-&gt;get('countryId');\n        $states = getStates($countryId);\n\n        return $this-&gt;sendResponse($states, 'States retrieved successfully');\n    }\n\n    /**\n     * @param  Request  $request\n     * @return mixed\n     */\n    public function getCities(Request $request)\n    {\n        $stateId = $request-&gt;get('stateId');\n        $cities = getCities($stateId);\n\n        return $this-&gt;sendResponse($cities, 'Cities retrieved successfully');\n    }\n}\n</code></pre> <p>The <code>ClientController</code> is responsible for handling various actions related to displaying, creating, editing, updating, and deleting client information in our application. Here's a brief explanation of the main parts of the code:</p> <ol> <li> <p>Namespace and Use Statements: The controller is within the <code>App\\Http\\Controllers</code> namespace and uses several classes from Laravel and other namespaces to manage the client-related functionalities.</p> </li> <li> <p>Constructor: The constructor method receives an instance of <code>ClientRepository</code> as a parameter and assigns it to the private property <code>$clientRepository</code>. This repository interacts with the database to handle client-related data.</p> </li> <li> <p>Index Method (Display Clients): The <code>index</code> method is used to display a view called <code>'clients.index'</code>. Which represents a page that lists all the clients.</p> </li> <li> <p>Create Method: The <code>create</code> method is used to display a view called <code>'clients.create'</code> for creating a new client. It also loads data from the <code>ClientRepository</code> to populate a <code>countries</code> variable in the view.</p> </li> <li> <p>Store Method (Create Client): The <code>store</code> method handles the creation of a new client. It takes a <code>CreateClientRequest</code> instance as a parameter, which contains validation rules for creating a new client. If the creation is successful, a success flash message is displayed, and the user is redirected to the index view. If an exception occurs during the creation process, an error flash message is displayed, and the user is redirected back to the create view with input data.</p> </li> <li> <p>Show Method (Display Client Details): The <code>show</code> method displays details of a specific client. It loads related data such as the user's media and invoices' payments. The <code>activeTab</code> variable is determined based on the request parameters and is used in the view.</p> </li> <li> <p>Edit Method: The <code>edit</code> method is used to display a view for editing client information. Similar to the <code>create</code> method, it loads data from the <code>ClientRepository</code> for populating the <code>countries</code> variable in the view.</p> </li> <li> <p>Update Method (Update Client): The <code>update</code> method handles updating client information. It takes a <code>Client</code> instance and an <code>UpdateClientRequest</code> instance as parameters. If the update is successful, a success flash message is displayed, and the user is redirected to the index view. If an exception occurs during the update process, an error flash message is displayed, and the user is redirected back to the edit view with input data.</p> </li> <li> <p>Destroy Method (Delete Client): The <code>destroy</code> method handles the deletion of a client. It checks if the client can be deleted by verifying if there are related invoices. If the client can't be deleted, an error message is returned. Otherwise, the client's related user and the client itself are deleted, and a success message is returned.</p> </li> <li> <p>Other Utility Methods: There are also two methods (<code>getStates</code> and <code>getCities</code>) that handle AJAX requests to retrieve states and cities based on country and state IDs.</p> </li> </ol> <p>Overall, this controller manages the CRUD (Create, Read, Update, Delete) operations for client data in a Laravel application, along with some additional utility methods for retrieving related data.</p>"},{"location":"Admin/clients/#model","title":"Model","text":"<p>The model related to this controller is : App\\Models\\Client:</p> <pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\n\nclass Client extends Model\n{\n    use HasFactory;\n\n    protected $table = 'clients';\n\n    public $fillable = [\n        'user_id',\n        'website',\n        'postal_code',\n        'address',\n        'note',\n        'country_id',\n        'state_id',\n        'city_id',\n    ];\n\n    protected $casts = [\n        'website' =&gt; 'string',\n        'postal_code' =&gt; 'string',\n        'address' =&gt; 'string',\n        'note' =&gt; 'string',\n        'country_id' =&gt; 'integer',\n        'state_id' =&gt; 'integer',\n        'city_id' =&gt; 'integer',\n        'user_id' =&gt; 'integer',\n    ];\n\n    /**\n     * Validation rules\n     *\n     * @var array\n     */\n    public static $rules = [\n        'first_name' =&gt; 'required',\n        'last_name' =&gt; 'required',\n        'email' =&gt; 'required|email:filter|unique:users,email',\n        'password' =&gt; 'required|same:password_confirmation|min:6',\n        'postal_code' =&gt; 'string',\n        'address' =&gt; 'nullable||string',\n        'website' =&gt; 'nullable|url',\n    ];\n\n    /**\n     * @return BelongsTo\n     */\n    public function user(): BelongsTo\n    {\n        return $this-&gt;belongsTo(User::class, 'user_id', 'id');\n    }\n\n    public function country(): BelongsTo\n    {\n        return $this-&gt;belongsTo(Country::class, 'country_id', 'id');\n    }\n\n    public function state(): BelongsTo\n    {\n        return $this-&gt;belongsTo(State::class, 'state_id', 'id');\n    }\n\n    public function city(): BelongsTo\n    {\n        return $this-&gt;belongsTo(City::class, 'city_id', 'id');\n    }\n\n    public function invoices()\n    {\n        return $this-&gt;hasMany(Invoice::class);\n    }\n}\n</code></pre> <p>The provided model <code>Client</code> represents a database entity and provides an interface to interact with the corresponding \"clients\" table in the database. Here's a brief overview of the model's role and structure:</p> <ul> <li>The model extends <code>Illuminate\\Database\\Eloquent\\Model</code> and utilizes the <code>HasFactory</code> trait, which provides factory support for creating model instances during testing.</li> <li>The <code>$table</code> property specifies the name of the database table associated with this model (<code>clients</code>).</li> <li>The <code>$fillable</code> property lists the attributes that are mass assignable when creating or updating a <code>Client</code> instance.</li> <li>The <code>$casts</code> property specifies the data types of certain attributes, allowing automatic type casting when retrieving and setting attribute values.</li> <li>The model includes validation rules for various attributes, such as <code>first_name</code>, <code>last_name</code>, <code>email</code>, <code>password</code>, <code>postal_code</code>, <code>address</code>, and <code>website</code>.</li> <li>The <code>user()</code> method defines a \"belongs to\" relationship between the <code>Client</code> model and the <code>User</code> model. It indicates that each client is associated with a user through the <code>user_id</code> foreign key.</li> <li>The <code>country()</code>, <code>state()</code>, and <code>city()</code> methods define similar \"belongs to\" relationships with the <code>Country</code>, <code>State</code>, and <code>City</code> models, respectively.</li> <li>The <code>invoices()</code> method defines a one-to-many relationship between the <code>Client</code> model and the <code>Invoice</code> model, indicating that a client can have multiple invoices.</li> </ul> <p>Overall, the <code>Client</code> model encapsulates the structure of the \"clients\" database table, defines relationships with other models, and provides validation rules for the client's attributes. It acts as an intermediary for interacting with client-related data in the application.</p>"},{"location":"Admin/clients/#view","title":"View","text":""},{"location":"Admin/clients/#the-livewire-client-table","title":"The livewire: client table","text":"<p>The liveview of the 'client table' located in app&gt;http&gt;livewire&gt;ClientTable.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Livewire;\n\nuse App\\Models\\Client;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Rappasoft\\LaravelLivewireTables\\Views\\Column;\n\nclass ClientTable extends LivewireTableComponent\n{\n    protected $model = Client::class;\n    protected string $tableName = 'clients';\n\n    // for table header button\n    public $showButtonOnHeader = true;\n\n    public $buttonComponent = 'clients.components.add-button';\n\n    public function configure(): void\n    {\n        $this-&gt;setPrimaryKey('id');\n        $this-&gt;setDefaultSort('created_at', 'desc');\n        $this-&gt;setQueryStringStatus(false);\n\n        $this-&gt;setThAttributes(function (Column $column) {\n            if ($column-&gt;getField() == 'id') {\n                return [\n                    'style' =&gt; 'width:9%;text-align:center',\n                ];\n            }\n\n            return [];\n        });\n\n        $this-&gt;setTdAttributes(function (Column $column, $row, $columnIndex, $rowIndex) {\n            if ($column-&gt;getField() === 'first_name') {\n                return [\n                    'class' =&gt; 'w-75',\n                ];\n            }\n\n            return [];\n        });\n    }\n\n    public function columns(): array\n    {\n        return [\n            Column::make(__('messages.client.client'), 'user.first_name')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;view('clients.components.full_name'),\n            Column::make('last_name', 'user.last_name')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;hideIf(1),\n            Column::make('Invoice', 'website')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;view('clients.components.invoice-count'),\n            Column::make(__('messages.common.action'), 'id')\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('livewire.action-button')-&gt;with([\n                        'editRoute' =&gt; route('clients.edit', $row-&gt;id),\n                        'dataId' =&gt; $row-&gt;id,\n                        'editClass' =&gt; 'user-edit-btn',\n                        'deleteClass' =&gt; 'client-delete-btn',\n                    ]);\n                }),\n        ];\n    }\n\n    public function builder(): Builder\n    {\n        $query = Client::with(['user.media'])-&gt;withCount('invoices');\n\n        return $query;\n    }\n}\n</code></pre> <p>The ClientTable Livewire component generates a dynamic table of client data, including columns for the client's full name, last name, invoice count, and actions (edit and delete buttons). It leverages the Rappasoft\\LaravelLivewireTables package to handle table rendering, sorting, searching, and pagination</p>"},{"location":"Admin/clients/#list-of-clients","title":"List of clients","text":"<p>The view of the 'list of clients' page located in ressources&gt;views&gt;clients&gt;index.blade.php.</p> <pre><code>@extends('layouts.app')\n@section('title')\n    {{__('messages.clients')}}\n@endsection\n@section('content')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-flex flex-column  \"&gt;\n            @include('flash::message')\n            &lt;livewire:client-table/&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n@endsection\n</code></pre> <p>The <code>client.index</code> view serves to present a client list within a web application. Below is an elucidation of the code:</p> <ol> <li> <p><code>@extends('layouts.app')</code>: This line specifies the extension of a layout named <code>'layouts.app'</code>. The layout is anticipated to establish a consistent layout and style for various views.</p> </li> <li> <p><code>@section('title')</code>: This segment defines the page's title. It configures the title for presentation on the browser's title bar or tab. The title is formulated from the translation function <code>__('messages.clients')</code>, which implies dynamic generation and potential localization for different languages.</p> </li> <li> <p><code>@section('content')</code>: This portion encompasses the primary content of the page. It's where the concrete content perceptible to the user is outlined.</p> </li> <li> <p><code>&lt;div class=\"container-fluid\"&gt;</code>: This <code>&lt;div&gt;</code> element, attributed with the class <code>container-fluid</code>, supports a responsive layout by adapting its width based on the viewport's dimensions.</p> </li> <li> <p><code>&lt;div class=\"d-flex flex-column\"&gt;</code>: This <code>&lt;div&gt;</code> element employs Flexbox (<code>d-flex</code> class) to vertically arrange its child elements (<code>flex-column</code> direction).</p> </li> <li> <p><code>@include('flash::message')</code>: This line integrates a view named <code>'flash::message'</code>. It transient messages (brief notifications to apprise the user of specific actions) will be shown on this page.</p> </li> <li> <p><code>&lt;livewire:client-table/&gt;</code>: This line encompasses a Livewire component named <code>client-table</code>. Livewire, a Laravel package, eases the construction of interactive UI components devoid of JavaScript. The <code>client-table</code> component undertakes the task of rendering and administering the client list display. It involve functionalities like sorting, filtering, and pagination.</p> </li> <li> <p><code>@endsection</code>: Marks the conclusion of the <code>@section('content')</code> segment.</p> </li> </ol> <p>In synopsis, the <code>client.index</code> view extends a layout, sets the page title, and encompasses an adaptable container featuring flash messages and a Livewire component named <code>client-table</code>. The role of this component is to render and handle the presentation of a roster of clients, potentially integrating interactive attributes to enhance the user experience.</p>"},{"location":"Admin/clients/#add-client","title":"Add client","text":"<p>The view of the 'add client' page located in ressources&gt;views&gt;clients&gt;create.blade.php.</p> <pre><code>@extends('layouts.app')\n@section('title')\n    {{__('messages.client.add_client')}}\n@endsection\n@section('content')\n    @php $styleCss = 'style'; @endphp\n    &lt;div class=\"container-fluid\"&gt;\n        @include('flash::message')\n        &lt;div class=\"d-flex flex-column\"&gt;\n            &lt;div class=\"col-12\"&gt;\n                &lt;div class=\"d-flex justify-content-between align-items-end mb-5\"&gt;\n                    &lt;h1&gt;@yield('title')&lt;/h1&gt;\n                    &lt;a class=\"btn btn-outline-primary float-end\"\n                       href=\"{{ route('clients.index') }}\"&gt;{{ __('messages.common.back') }}&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-12\"&gt;\n                    @include('layouts.errors')\n                &lt;/div&gt;\n                &lt;div class=\"card\"&gt;\n                    &lt;div class=\"card-body\"&gt;\n                        {{ Form::open(['route' =&gt; 'clients.store','files' =&gt; 'true','id'=&gt;'clientForm']) }}\n                        @include('clients.fields')\n                        {{ Form::close() }}\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    {{ Form::hidden('is_edit', false ,['id' =&gt; 'isEdit']) }}\n    {{ Form::hidden('default_avatar_image_url', asset('assets/images/avatar.png'),['id' =&gt; 'defaultAvatarImageUrl']) }}\n    {{ Form::hidden('country_id', old('country_id'),['id' =&gt; 'clientCountryId']) }}\n    {{ Form::hidden('state_id', old('state_id') ,['id' =&gt; 'clientStateId']) }}\n    {{ Form::hidden('city_id', old('city_id') ,['id' =&gt; 'clientCityId']) }}\n@endsection\n@section('phone_js')\n    &lt;script&gt;\n        phoneNo = \"{{ old('region_code').old('contact') }}\"\n    &lt;/script&gt;\n@endsection\n</code></pre> <p>The <code>client.create</code> view is a Blade template that is used to display a form for adding a new client in oura web application. Here's an explanation of the code:</p> <ol> <li> <p><code>@extends('layouts.app')</code>: This line indicates that the view extends a layout called <code>'layouts.app'</code>. This layout provides a consistent structure and styling for multiple views.</p> </li> <li> <p><code>@section('title')</code>: This section defines the page's title. It sets the title to be displayed in the browser's title bar or tab. The title is derived from the translation function <code>__('messages.client.add_client')</code>, suggesting dynamic generation and localization for different languages.</p> </li> <li> <p><code>@section('content')</code>: This section contains the main content of the page. It's where the actual content that the user will see is defined.</p> </li> <li> <p><code>@php $styleCss = 'style'; @endphp</code>: This line assigns the value <code>'style'</code> to the variable <code>$styleCss</code>. This variable isn't used directly in this snippet but it potentially used in other parts of the view.</p> </li> <li> <p><code>&lt;div class=\"container-fluid\"&gt;</code>: This <code>&lt;div&gt;</code> element with the class <code>container-fluid</code> helps provide a responsive layout by adjusting its width based on the viewport.</p> </li> <li> <p><code>@include('flash::message')</code>: This line includes a view named <code>'flash::message'</code>, which suggests that flash messages (temporary notifications to inform the user about certain actions) will be displayed on this page.</p> </li> <li> <p><code>&lt;div class=\"d-flex flex-column\"&gt;</code>: This <code>&lt;div&gt;</code> element uses Flexbox (<code>d-flex</code> class) to arrange its child elements in a vertical (<code>flex-column</code>) direction.</p> </li> <li> <p><code>&lt;div class=\"col-12\"&gt;</code>: This <code>&lt;div&gt;</code> element uses the Bootstrap <code>col-12</code> class to define a full-width column within the parent container.</p> </li> </ol> <p>9.<code>&lt;div class=\"d-flex justify-content-between align-items-end mb-5\"&gt;</code>: This <code>&lt;div&gt;</code> element employs Flexbox (<code>d-flex</code>) to arrange its child elements. It's used to create a header with a title and a back button aligned at the end. The <code>mb-5</code> class adds a margin at the bottom for spacing.</p> <ol> <li> <p><code>&lt;h1&gt;@yield('title')&lt;/h1&gt;</code>: This line displays the title within an <code>&lt;h1&gt;</code> heading element. The <code>@yield('title')</code> directive is used to insert the content defined in the <code>@section('title')</code> section earlier.</p> </li> <li> <p><code>&lt;a class=\"btn btn-outline-primary float-end\" href=\"{{ route('clients.index') }}\"&gt;{{ __('messages.common.back') }}&lt;/a&gt;</code>: This anchor (<code>&lt;a&gt;</code>) element creates a button with a link to the index page of clients. The text of the button is obtained through translation with the key <code>__('messages.common.back')</code>.</p> </li> <li> <p><code>&lt;div class=\"col-12\"&gt;</code>: Another full-width column element within the parent container.</p> </li> </ol> <p>13.<code>@include('layouts.errors')</code>: This line includes a view named <code>'layouts.errors'</code>, which suggests that error messages will be displayed on this page.</p> <ol> <li> <p><code>&lt;div class=\"card\"&gt;</code>: This <code>&lt;div&gt;</code> element is used to create a card for containing the form.</p> </li> <li> <p><code>&lt;div class=\"card-body\"&gt;</code>: This <code>&lt;div&gt;</code> element defines the body content of the card.</p> </li> <li> <p><code>{{ Form::open(['route' =&gt; 'clients.store','files' =&gt; 'true','id'=&gt;'clientForm']) }}</code>: This line opens a form for submitting client data to the <code>'clients.store'</code> route. The <code>files =&gt; true</code> attribute suggests that the form can handle file uploads, and the <code>id</code> attribute is set to <code>'clientForm'</code>.</p> </li> <li> <p><code>@include('clients.fields')</code>: This line includes a view named <code>'clients.fields'</code>, it representing the fields of the form for adding a client.</p> </li> <li> <p><code>{{ Form::close() }}</code>: This line closes the form.</p> </li> <li> <p><code>{{ Form::hidden(...) }}</code>: These lines define hidden input fields with various values. These inputs are used for storing information that might be needed by JavaScript scripts or for other purposes in the form.</p> </li> <li> <p><code>@section('phone_js')</code>: This section is used to define JavaScript code specifically related to phone numbers.</p> </li> <li> <p><code>&lt;script&gt; phoneNo = \"{{ old('region_code').old('contact') }}\" &lt;/script&gt;</code>: This script tag initializes a JavaScript variable <code>phoneNo</code> with the concatenated value of <code>old('region_code')</code> and <code>old('contact')</code>. it potentially be used for phone number-related JavaScript functionality.</p> </li> <li> <p><code>@endsection</code>: This marks the end of the <code>@section</code> block.</p> </li> </ol> <p>In summary, the <code>client.create</code> view extends a layout, sets the page title, and displays a form for adding a new client. The form includes fields for client data and is enclosed within a Bootstrap card. The view also includes flash messages, error messages, and hidden input fields. Additionally, there's a JavaScript script for phone number handling, and the layout is organized using Bootstrap's grid system.</p>"},{"location":"Admin/clients/#edit-client","title":"Edit client","text":"<p>The view of the 'edit client' page located in ressources&gt;views&gt;clients&gt;edit.blade.php.</p> <pre><code>@extends('layouts.app')\n@section('title')\n{{__('Edit Client')}}\n@endsection\n@section('content')\n@php $styleCss = 'style'; @endphp\n&lt;div class=\"container-fluid\"&gt;\n@include('flash::message')\n&lt;div class=\"d-flex flex-column\"&gt;\n&lt;div class=\"col-12\"&gt;\n&lt;div class=\"d-flex justify-content-between align-items-end mb-5\"&gt;\n&lt;h1&gt;@yield('title')&lt;/h1&gt;\n&lt;a class=\"btn btn-outline-primary float-end\"\nhref=\"{{ route('clients.index') }}\"&gt;{{ __('messages.common.back') }}&lt;/a&gt;\n&lt;/div&gt;\n&lt;div class=\"col-12\"&gt;\n@include('layouts.errors')\n&lt;/div&gt;\n&lt;div class=\"card\"&gt;\n&lt;div class=\"card-body\"&gt;\n{{ Form::open(['route' =&gt; ['clients.update', $client-&gt;id], 'method' =&gt; 'put','files' =&gt; 'true','id'=&gt;'editClientForm']) }}\n@include('clients.edit_fields')\n{{ Form::close() }}\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n{{ Form::hidden('phone_no', !empty($client) ? (($client-&gt;user-&gt;region_code).($client-&gt;user-&gt;contact)) : null,['id' =&gt; 'phoneNo']) }}\n{{ Form::hidden('is_edit', true ,['id' =&gt; 'isEdit']) }}\n{{ Form::hidden('country_id', $client-&gt;country_id ,['id' =&gt; 'clientCountryId']) }}\n{{ Form::hidden('state_id', $client-&gt;state_id ,['id' =&gt; 'clientStateId']) }}\n{{ Form::hidden('city_id', $client-&gt;city_id ,['id' =&gt; 'clientCityId']) }}\n{{ Form::hidden('default_avatar_image_url',  asset('assets/images/avatar.png'),['id' =&gt; 'defaultAvatarImageUrl']) }}\n@endsection\n@section('phone_js')\n&lt;script&gt;\nphoneNo = \"{{ !empty($client) ? (($client-&gt;user-&gt;region_code).($client-&gt;user-&gt;contact)) : null }}\";\n&lt;/script&gt;\n@endsection\n</code></pre> <p>The <code>client.edit</code> view is used to display a form for editing client information in a web application. Here's a breakdown of the code:</p> <pre><code>@php $styleCss = 'style'; @endphp\n&lt;div class=\"container-fluid\"&gt;\n  &lt;!-- Include flash messages --&gt;\n  &lt;!-- Create a column flex container --&gt;\n  &lt;!-- Start a column layout --&gt;\n  &lt;!-- Header with page title and back button --&gt;\n  &lt;!-- Include error messages --&gt;\n  &lt;!-- Create a card container --&gt;\n  &lt;!-- Create a card body --&gt;\n  {{ Form::open(['route' =&gt; ['clients.update', $client-&gt;id], 'method' =&gt;\n  'put','files' =&gt; 'true','id'=&gt;'editClientForm']) }}\n  &lt;!-- Include edit fields from clients.edit_fields view --&gt;\n  {{ Form::close() }}\n&lt;/div&gt;\n&lt;!-- Hidden fields for additional data --&gt;\n</code></pre> <ol> <li> <p><code>@php $styleCss = 'style'; @endphp</code>: This line sets a PHP variable <code>$styleCss</code> with the value <code>'style'</code>. However, it doesn't seem to be used in this code snippet.</p> </li> <li> <p><code>&lt;div class=\"container-fluid\"&gt;</code>: This <code>&lt;div&gt;</code> creates a fluid container for the entire content.</p> </li> <li> <p><code>@include('flash::message')</code>: This line includes a view named <code>'flash::message'</code>, suggesting that flash messages (temporary messages that inform the user about certain actions) will be displayed on this page.</p> </li> <li> <p>Inside the container, there's a column layout created using the <code>d-flex</code> and <code>flex-column</code> classes.</p> </li> <li> <p>Within the layout, there's a header section with a page title and a back button that links to the clients index page.</p> </li> <li> <p>Error messages are included within a column layout.</p> </li> <li> <p>A card is created to contain the form.</p> </li> <li> <p>Inside the card body, a form is opened using <code>Form::open()</code>. It has the route set to <code>'clients.update'</code> and the client's ID as a parameter. The method is set to <code>'put'</code>, indicating an update action. The form also enables file uploads (<code>files =&gt; 'true'</code>) and has an ID of <code>'editClientForm'</code>.</p> </li> <li> <p>The form includes fields for editing client information, which are included from the <code>'clients.edit_fields'</code> view.</p> </li> <li> <p><code>{{ Form::close() }}</code>: This line closes the form.</p> </li> <li> <p>Hidden fields are used to store additional data, such as phone number, edit status, country ID, state ID, city ID, and default avatar image URL.</p> </li> <li> <p><code>@endsection</code>: This marks the end of the <code>@section</code> block.</p> </li> </ol> <p>In summary, the <code>client.edit</code> view provides a structured layout for editing client information. It includes a form for updating client details, with fields included from another view. Hidden fields store supplementary data, and the view uses Bootstrap classes and Blade directives for rendering dynamic content and creating responsive layouts.</p> <p>the clients.edit_fields view</p> <pre><code>&lt;div class=\"row gx-10 mb-5\"&gt;\n  &lt;div class=\"col-lg-6\"&gt;\n    &lt;div class=\"mb-5\"&gt;\n      {{ Form::label('first_name', __('messages.client.first_name').':',\n      ['class' =&gt; 'form-label required mb-3']) }} {{ Form::text('first_name',\n      $client-&gt;user-&gt;first_name ?? null, ['class' =&gt; 'form-control\n      form-control-solid', 'placeholder' =&gt; __('messages.client.first_name'),\n      'required']) }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-6\"&gt;\n    &lt;div class=\"mb-5\"&gt;\n      {{ Form::label('last_name', __('messages.client.last_name').':', ['class'\n      =&gt; 'form-label required mb-3']) }} {{ Form::text('last_name',\n      $client-&gt;user-&gt;last_name ?? null, ['class' =&gt; 'form-control\n      form-control-solid', 'placeholder' =&gt; __('messages.client.last_name'),\n      'required']) }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-6\"&gt;\n    &lt;div class=\"mb-5\"&gt;\n      {{ Form::label('email', __('messages.client.email').':', ['class' =&gt;\n      'form-label required mb-3']) }} {{ Form::email('email',\n      $client-&gt;user-&gt;email ?? null, ['class' =&gt; 'form-control\n      form-control-solid', 'placeholder' =&gt; __('messages.client.email'),\n      'required']) }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-6\"&gt;\n    &lt;div class=\"mb-5\"&gt;\n      {{ Form::label('contact', __('messages.client.contact_no').':', ['class'\n      =&gt; 'form-label mb-3']) }} {{ Form::tel('contact', $client-&gt;user-&gt;contact\n      ?? getSettingValue('country_code'), ['class' =&gt; 'form-control\n      form-control-solid', 'onkeyup' =&gt; 'if (/\\D/g.test(this.value)) this.value\n      = this.value.replace(/\\D/g,\"\")','id'=&gt;'phoneNumber']) }} {{\n      Form::hidden('region_code', $client-&gt;user-&gt;region_code ?? null,\n      ['id'=&gt;'prefix_code']) }}\n      &lt;span id=\"valid-msg\" class=\"hide text-success fw-400 fs-small mt-2\"\n        &gt;\u2713 &amp;nbsp; Valid&lt;/span\n      &gt;\n      &lt;span id=\"error-msg\" class=\"hide text-danger fw-400 fs-small mt-2\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-6 mb-5\"&gt;\n    &lt;div class=\"fv-row\"&gt;\n      &lt;div&gt;\n        {{ Form::label('password', __('messages.client.password').':' ,['class'\n        =&gt; 'form-label mb-3']) }}\n        &lt;div class=\"position-relative\"&gt;\n          &lt;input\n            class=\"form-control\"\n            type=\"password\"\n            placeholder=\"{{ __('messages.client.password')}}\"\n            name=\"password\"\n            autocomplete=\"off\"\n            aria-label=\"password\"\n            data-toggle=\"password\"\n          /&gt;\n          &lt;span\n            class=\"position-absolute d-flex align-items-center top-0 bottom-0 end-0 me-4 input-icon input-password-hide cursor-pointer text-gray-600\"\n          &gt;\n            &lt;i class=\"bi bi-eye-slash-fill\"&gt;&lt;/i&gt;\n          &lt;/span&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-6 mb-5\"&gt;\n    &lt;div class=\"fv-row\"&gt;\n      &lt;div&gt;\n        {{\n        Form::label('confirmPassword',__('messages.client.confirm_password').':'\n        ,['class' =&gt; 'form-label mb-3']) }}\n        &lt;div class=\"position-relative\"&gt;\n          &lt;input\n            class=\"form-control\"\n            type=\"password\"\n            placeholder=\"{{ __('messages.client.confirm_password')}}\"\n            name=\"password_confirmation\"\n            autocomplete=\"off\"\n            aria-label=\"Password\"\n            data-toggle=\"password\"\n          /&gt;\n          &lt;span\n            class=\"position-absolute d-flex align-items-center top-0 bottom-0 end-0 me-4 input-icon input-password-hide cursor-pointer text-gray-600\"\n          &gt;\n            &lt;i class=\"bi bi-eye-slash-fill\"&gt;&lt;/i&gt;\n          &lt;/span&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-6\"&gt;\n    &lt;div class=\"mb-5\"&gt;\n      {{ Form::label('website', __('messages.client.website').':', ['class' =&gt;\n      'form-label mb-3']) }} {{ Form::text('website', $client-&gt;website ?? null,\n      ['class' =&gt; 'form-control form-control-solid', 'placeholder' =&gt;\n      __('messages.client.website')]) }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-6\"&gt;\n    &lt;div class=\"mb-5\"&gt;\n      {{ Form::label('postal_code', __('messages.client.postal_code').':',\n      ['class' =&gt; 'form-label required mb-3']) }} {{\n      Form::text('postal_code',$client-&gt;postal_code ?? null, ['class' =&gt;\n      'form-control form-control-solid', 'placeholder' =&gt;\n      __('messages.client.postal_code'), 'required', 'maxlength' =&gt; 6]) }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-4\"&gt;\n    &lt;div class=\"mb-5\"&gt;\n      {{ Form::label('country',__('messages.client.country').':', ['class' =&gt;\n      'form-label mb-3']) }} {{ Form::select('country_id', $countries,\n      $client-&gt;country_id ?? null, ['id'=&gt;'countryId','class' =&gt; 'form-select\n      io-select2 ','placeholder' =&gt; __('messages.client.country'),\n      'data-control' =&gt; 'select2']) }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-4\"&gt;\n    &lt;div class=\"mb-5\"&gt;\n      {{ Form::label('state', __('messages.client.state').':', ['class' =&gt;\n      'form-label mb-3']) }} {{ Form::select('state_id', [], null,\n      ['id'=&gt;'stateId','class' =&gt; 'form-select io-select2 ','placeholder' =&gt;\n      __('messages.client.state'), 'data-control' =&gt; 'select2']) }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-4\"&gt;\n    &lt;div class=\"mb-5\"&gt;\n      {{ Form::label('city', __('messages.client.city').':', ['class' =&gt;\n      'form-label mb-3']) }} {{ Form::select('city_id', [], null,\n      ['id'=&gt;'cityId','class' =&gt; 'form-select io-select2 ','placeholder' =&gt;\n      __('messages.client.city'), 'data-control' =&gt; 'select2']) }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-6\"&gt;\n    &lt;div class=\"mb-5\"&gt;\n      {{ Form::label('address', __('messages.client.address').':', ['class' =&gt;\n      'form-label mb-3']) }} {{ Form::textarea('address', $client-&gt;address ??\n      null, ['class' =&gt; 'form-control form-control-solid','rows' =&gt; '5',\n      'placeholder' =&gt; __('messages.client.address'),'rows'=&gt;'5']) }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-6\"&gt;\n    &lt;div class=\"mb-5\"&gt;\n      {{ Form::label('notes', __('messages.client.notes').':', ['class' =&gt;\n      'form-label mb-3']) }} {{ Form::textarea('note', $client-&gt;note ??\n      null,['class' =&gt; 'form-control form-control-solid', 'rows' =&gt;\n      '5','placeholder' =&gt; __('messages.client.notes'),'rows'=&gt;'5']) }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-3 mb-7\"&gt;\n    &lt;div class=\"mb-3\" io-image-input=\"true\"&gt;\n      &lt;label for=\"exampleInputImage\" class=\"form-label\"\n        &gt;{{ __('messages.client.profile').':' }}&lt;/label\n      &gt;\n      &lt;div class=\"d-block\"&gt;\n        &lt;div class=\"image-picker\"&gt;\n          &lt;div\n            class=\"image previewImage\"\n            id=\"previewImage\"\n            {{\n            $styleCss\n            }}=\"background-image: url({{ !empty($client-&gt;user-&gt;profile_image) ? $client-&gt;user-&gt;profile_image : asset('web/media/avatars/150-26.jpg') }}\n                    )\"\n          &gt;&lt;/div&gt;\n          &lt;span\n            class=\"picker-edit rounded-circle text-gray-500 fs-small\"\n            data-bs-toggle=\"tooltip\"\n            title=\"Change Profile\"\n          &gt;\n            &lt;label&gt;\n              &lt;i class=\"fa-solid fa-pen\" id=\"previewImage\"&gt;&lt;/i&gt;\n              &lt;input\n                type=\"file\"\n                id=\"profile_image\"\n                name=\"profile\"\n                class=\"image-upload d-none\"\n                accept=\"image/*\"\n              /&gt;\n              &lt;input type=\"hidden\" name=\"avatar_remove\" /&gt;\n            &lt;/label&gt;\n          &lt;/span&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div class=\"form-text\"&gt;Allowed file types: png, jpg, jpeg.&lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"d-flex justify-content-end mt-5\"&gt;\n    {{ Form::submit(__('messages.common.save'),['class' =&gt; 'btn btn-primary\n    me-3']) }}\n    &lt;a\n      href=\"{{ route('clients.index') }}\"\n      type=\"reset\"\n      class=\"btn btn-secondary btn-active-light-primary\"\n      &gt;{{__('messages.common.discard')}}&lt;/a\n    &gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>The <code>clients.edit_fields</code> section of the code represents a form for editing client information. Here's a brief explanation of the components within the form:</p> <ol> <li> <p>First Name Field:</p> </li> <li> <p>Text input for the client's first name.</p> </li> <li>Placeholder is set to \"First Name\".</li> <li> <p>Required field.</p> </li> <li> <p>Last Name Field:</p> </li> <li> <p>Text input for the client's last name.</p> </li> <li>Placeholder is set to \"Last Name\".</li> <li> <p>Required field.</p> </li> <li> <p>Email Field:</p> </li> <li> <p>Email input for the client's email.</p> </li> <li>Placeholder is set to \"Email\".</li> <li> <p>Required field.</p> </li> <li> <p>Contact Number Field:</p> </li> <li> <p>Telephone input for the client's contact number.</p> </li> <li>Placeholder is set to the default country code.</li> <li>JavaScript function prevents non-numeric input.</li> <li> <p>Hidden field (<code>region_code</code>) stores the region code of the contact number.</p> </li> <li> <p>Password Field:</p> </li> <li>Password input for setting a new password.</li> <li>Toggle icon to show/hide the password.</li> <li> <p>Confirm Password Field:</p> </li> <li> <p>Password input for confirming the new password.</p> </li> <li> <p>Toggle icon to show/hide the password.</p> </li> <li> <p>Website Field:</p> </li> <li> <p>Text input for the client's website URL.</p> </li> <li> <p>Placeholder is set to \"Website\".</p> </li> <li> <p>Postal Code Field:</p> </li> <li> <p>Text input for the client's postal code.</p> </li> <li>Placeholder is set to \"Postal Code\".</li> <li>Required field.</li> <li> <p>Maximum length set to 6 characters.</p> </li> <li> <p>Country Dropdown:</p> </li> <li> <p>Select dropdown for selecting the client's country.</p> </li> <li> <p>Populated with options from the <code>$countries</code> variable.</p> </li> <li> <p>State Dropdown:</p> <ul> <li>Select dropdown for selecting the client's state.</li> <li>Initially empty, populated based on country selection using JavaScript.</li> </ul> </li> <li> <p>City Dropdown:</p> <ul> <li>Select dropdown for selecting the client's city.</li> <li>Initially empty, populated based on state selection using JavaScript.</li> </ul> </li> <li> <p>Address Field:</p> <ul> <li>Textarea input for the client's address.</li> <li>Placeholder is set to \"Address\".</li> </ul> </li> <li> <p>Notes Field:</p> <ul> <li>Textarea input for adding notes about the client.</li> <li>Placeholder is set to \"Notes\".</li> </ul> </li> <li> <p>Profile Image Field:</p> <ul> <li>Image picker with preview of the client's profile image.</li> <li>Option to change the profile image with an upload button.</li> <li>Hidden input for removing the avatar.</li> </ul> </li> <li>Submit and Discard Buttons:<ul> <li>Submit button for saving the changes.</li> <li>Discard button for canceling the editing process.</li> </ul> </li> </ol> <p>In summary, the <code>clients.edit_fields</code> section of the code provides a form for editing various aspects of client information, including personal details, contact information, and more. It also includes JavaScript functionality for interactive features like password toggling and dynamic dropdown population based on user selection.</p>"},{"location":"Admin/clients/#show-client","title":"Show client","text":"<p>The view of the 'show client' page located in ressources&gt;views&gt;clients&gt;show_fields.blade.php.</p> <pre><code>&lt;div class=\"card\"&gt;\n  &lt;div class=\"card-body\"&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-xxl-5 col-12\"&gt;\n        &lt;div\n          class=\"d-sm-flex align-items-center mb-5 mb-xxl-0 text-center text-sm-start\"\n        &gt;\n          &lt;div class=\"image image-circle image-small\"&gt;\n            &lt;img\n              src=\"{{ $client-&gt;user-&gt;profile_image }}\"\n              alt=\"user\"\n              class=\"object-contain\"\n            /&gt;\n          &lt;/div&gt;\n          &lt;div class=\"ms-0 ms-md-10 mt-5 mt-sm-0\"&gt;\n            &lt;h2&gt;{{ $client-&gt;user-&gt;full_name }}&lt;/h2&gt;\n            &lt;a\n              href=\"mailto:{{ $client-&gt;user-&gt;email }}\"\n              class=\"text-gray-600 text-decoration-none fs-4\"\n            &gt;\n              {{ $client-&gt;user-&gt;email }}\n            &lt;/a&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"mt-7 overflow-hidden\"&gt;\n  &lt;ul\n    class=\"nav nav-tabs mb-5 pb-1 overflow-auto flex-nowrap text-nowrap\"\n    id=\"myTab\"\n    role=\"tablist\"\n  &gt;\n    &lt;li class=\"nav-item position-relative me-7 mb-3\" role=\"presentation\"&gt;\n      &lt;button\n        class=\"nav-link tab-link active p-0\"\n        id=\"overview-tab\"\n        data-bs-toggle=\"tab\"\n        data-bs-target=\"#overview\"\n        type=\"button\"\n        role=\"tab\"\n        aria-controls=\"overview\"\n        aria-selected=\"true\"\n      &gt;\n        {{ __('messages.invoice.overview') }}\n      &lt;/button&gt;\n    &lt;/li&gt;\n    &lt;li class=\"nav-item position-relative me-7 mb-3\" role=\"presentation\"&gt;\n      &lt;button\n        class=\"nav-link tab-link p-0\"\n        id=\"invoices-tab\"\n        data-bs-toggle=\"tab\"\n        data-bs-target=\"#invoices\"\n        type=\"button\"\n        role=\"tab\"\n        aria-controls=\"invoices\"\n        aria-selected=\"false\"\n      &gt;\n        {{ __('messages.invoices') }}\n      &lt;/button&gt;\n    &lt;/li&gt;\n    &lt;li class=\"nav-item position-relative me-7 mb-3\" role=\"presentation\"&gt;\n      &lt;button\n        class=\"nav-link tab-link p-0\"\n        id=\"invoices-tab\"\n        data-bs-toggle=\"tab\"\n        data-bs-target=\"#quotes\"\n        type=\"button\"\n        role=\"tab\"\n        aria-controls=\"quotes\"\n        aria-selected=\"false\"\n      &gt;\n        {{ __('messages.quotes') }}\n      &lt;/button&gt;\n    &lt;/li&gt;\n  &lt;/ul&gt;\n  &lt;div class=\"tab-content\" id=\"myTabContent\"&gt;\n    &lt;div\n      class=\"tab-pane fade show active\"\n      id=\"overview\"\n      role=\"tabpanel\"\n      aria-labelledby=\"overview-tab\"\n    &gt;\n      &lt;div class=\"card\"&gt;\n        &lt;div class=\"card-body\"&gt;\n          &lt;div class=\"row\"&gt;\n            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n              &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"\n                &gt;{{ __('messages.user.full_name') }} :&lt;/label\n              &gt;\n              &lt;span class=\"fs-4 text-gray-800\"\n                &gt;{{ !empty($client-&gt;user-&gt;full_name) ? $client-&gt;user-&gt;full_name\n                : 'N/A' }}&lt;/span\n              &gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n              &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"\n                &gt;{{ __('messages.user.email') }} :&lt;/label\n              &gt;\n              &lt;span class=\"fs-4 text-gray-800\"\n                &gt;{{ !empty($client-&gt;user-&gt;email) ? $client-&gt;user-&gt;email : 'N/A'\n                }}&lt;/span\n              &gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n              &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"\n                &gt;{{ __('messages.user.contact_number') }} :&lt;/label\n              &gt;\n              &lt;span class=\"fs-4 text-gray-800\"\n                &gt;{{ !empty($client-&gt;user-&gt;contact) ? $client-&gt;user-&gt;contact :\n                'N/A' }}&lt;/span\n              &gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n              &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"\n                &gt;{{ __('messages.client.country') }} :&lt;/label\n              &gt;\n              &lt;span class=\"fs-4 text-gray-800\"\n                &gt;{{ !empty($client-&gt;country-&gt;name) ? $client-&gt;country-&gt;name :\n                'N/A' }}&lt;/span\n              &gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n              &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"\n                &gt;{{ __('messages.client.state') }} :&lt;/label\n              &gt;\n              &lt;span class=\"fs-4 text-gray-800\"\n                &gt;{{ !empty($client-&gt;state-&gt;name) ? $client-&gt;state-&gt;name : 'N/A'\n                }}&lt;/span\n              &gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n              &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"\n                &gt;{{ __('messages.client.city') }} :&lt;/label\n              &gt;\n              &lt;span class=\"fs-4 text-gray-800\"\n                &gt;{{ !empty($client-&gt;city-&gt;name) ? $client-&gt;city-&gt;name : 'N/A'\n                }}&lt;/span\n              &gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n              &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"\n                &gt;{{ __('messages.client.address') }} :&lt;/label\n              &gt;\n              &lt;span class=\"fs-4 text-gray-800\"\n                &gt;{{ !empty($client-&gt;address) ? $client-&gt;address : 'N/A' }}&lt;/span\n              &gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n              &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"\n                &gt;{{ __('messages.client.note') }} :&lt;/label\n              &gt;\n              &lt;span class=\"fs-4 text-gray-800\"\n                &gt;{{ !empty($client-&gt;note) ? $client-&gt;note : 'N/A' }}&lt;/span\n              &gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-sm-6 d-flex flex-column mb-sm-0 mb-5\"&gt;\n              &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"\n                &gt;{{ __('messages.common.created_at') }} :&lt;/label\n              &gt;\n              &lt;span class=\"fs-4 text-gray-800\"\n                &gt;{{ !empty($client-&gt;user-&gt;created_at) ?\n                $client-&gt;user-&gt;created_at-&gt;diffForHumans() :\n                __('messages.common.n/a') }}&lt;/span\n              &gt;\n            &lt;/div&gt;\n            @php $clientUpdateTime = $client-&gt;updated_at; $userUpdateTime =\n            $client-&gt;user-&gt;updated_at; $updateTime = max($clientUpdateTime,\n            $userUpdateTime); @endphp\n            &lt;div class=\"col-sm-6 d-flex flex-column\"&gt;\n              &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"\n                &gt;{{ __('messages.common.updated_at') }} :&lt;/label\n              &gt;\n              &lt;span class=\"fs-4 text-gray-800\"\n                &gt;{{ !empty($client-&gt;user-&gt;updated_at) ?\n                $updateTime-&gt;diffForHumans() : __('messages.common.n/a')\n                }}&lt;/span\n              &gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;input\n      type=\"hidden\"\n      name=\"active-tab\"\n      id=\"clientActiveTab\"\n      value=\"{{ $activeTab }}\"\n    /&gt;\n    &lt;div\n      class=\"tab-pane fade\"\n      id=\"invoices\"\n      role=\"tabpanel\"\n      aria-labelledby=\"invoices-tab\"\n    &gt;\n      @include('clients.invoice.index')\n    &lt;/div&gt;\n    &lt;div\n      class=\"tab-pane fade\"\n      id=\"quotes\"\n      role=\"tabpanel\"\n      aria-labelledby=\"quotes-tab\"\n    &gt;\n      @include('clients.quote.index')\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>The <code>client.show</code> view is used to display detailed information about a specific client in a web application. Let's break down the code and explain each part:</p> <pre><code>&lt;div class=\"card\"&gt;\n  &lt;!-- Content for displaying client's profile information --&gt;\n&lt;/div&gt;\n&lt;div class=\"mt-7 overflow-hidden\"&gt;\n  &lt;!-- Tabs for displaying different sections of client details --&gt;\n&lt;/div&gt;\n</code></pre> <ol> <li> <p><code>&lt;div class=\"card\"&gt;</code>: This <code>&lt;div&gt;</code> element creates a card to hold the client's profile information.</p> </li> <li> <p><code>@include('flash::message')</code>: This line includes a view named <code>'flash::message'</code>, suggesting that flash messages (temporary messages that inform the user about certain actions) will be displayed on this page.</p> </li> <li> <p>Inside the card, there's a <code>row</code> and <code>col-xxl-5</code> column layout to display the client's profile image, name, and email.</p> </li> <li> <p><code>&lt;div class=\"mt-7 overflow-hidden\"&gt;</code>: This <code>&lt;div&gt;</code> element creates a container for displaying tabs that provide access to different sections of client details.</p> </li> <li> <p>Inside this container, there's a list of tabs (overview, invoices, and quotes) for navigating between different sections of information.</p> </li> <li> <p><code>&lt;div class=\"tab-content\" id=\"myTabContent\"&gt;</code>: This <code>&lt;div&gt;</code> element defines the content area for the tab navigation.</p> </li> <li> <p>Each tab pane (<code>tab-pane</code>) contains specific information related to the respective tab (overview, invoices, and quotes).</p> </li> <li> <p>In the \"Overview\" tab pane, there's a card containing various client details such as name, email, contact number, address, created date, and updated date.</p> </li> <li> <p>The \"Invoices\" and \"Quotes\" tab panes include <code>@include</code> directives to include views related to the invoices and quotes associated with the client.</p> </li> <li> <p><code>input type=\"hidden\" name=\"active-tab\" id=\"clientActiveTab\" value=\"{{ $activeTab }}\"&gt;</code>: This hidden input field stores the active tab so that it can be restored when the page is reloaded.</p> </li> </ol> <p>Overall, the <code>client.show</code> view provides a structured layout for displaying comprehensive client information. It includes profile details, tabs for navigating different sections, and includes sub-views to display specific details related to invoices and quotes. The view is organized using Bootstrap classes and utilizes Blade directives for rendering dynamic content.</p>"},{"location":"Admin/clients/#edit-button-back-button","title":"Edit button &amp; back button","text":"<p>The Edit button &amp; back button located in ressources&gt;views&gt;clients&gt;show.blade.php.</p> <pre><code>&lt;div class=\"text-end mt-4 mt-md-0\"&gt;\n  &lt;a href=\"{{route('clients.edit', $client-&gt;id)}}\" class=\"btn btn-primary me-4\"\n    &gt;{{__('messages.common.edit')}}&lt;/a\n  &gt;\n  &lt;a href=\"{{route('clients.index')}}\" class=\"btn btn-outline-primary\"\n    &gt;{{ __('messages.common.back') }}&lt;/a\n  &gt;\n&lt;/div&gt;\n</code></pre> <p>This code creates a section with buttons aligned to the right side of the page. It includes two buttons:</p> <ol> <li> <p><code>&lt;a href=\"{{route('clients.edit', $client-&gt;id)}}\" class=\"btn btn-primary me-4\"&gt;{{__('messages.common.edit')}}&lt;/a&gt;</code>: This button links to the edit page for the current client's ID. It's styled as a primary button (blue) and labeled with the translated text \"Edit.\"</p> </li> <li> <p><code>&lt;a href=\"{{route('clients.index')}}\" class=\"btn btn-outline-primary\"&gt;{{ __('messages.common.back') }}&lt;/a&gt;</code>: This button links back to the index page for clients. It's styled as an outlined primary button (blue outline) and labeled with the translated text \"Back.\"</p> </li> </ol> <p>Both buttons use the <code>route()</code> function to generate URLs based on Laravel's routing system and dynamic client data. The translated text within the buttons is obtained using the <code>__('messages.common.edit')</code> and <code>__('messages.common.back')</code> translation functions. The <code>text-end</code> class aligns the buttons to the right side of the container.</p>"},{"location":"Admin/clients/#the-invoice","title":"The invoice","text":"<p>the link that leads to the client's invoices located in <code>resources&gt;views&gt;clients&gt;components&gt;invoice-count.blade.php</code></p> <pre><code>&lt;span class=\"badge badge-circle bg-success me-2\"&gt;\n  &lt;a\n    href=\"{{route('clients.show',$row-&gt;id.'?Active=invoices')}}\"\n    data-turbo=\"false\"\n    class=\"text-decoration-none text-white\"\n    &gt;{{ $row-&gt;invoices_count }}\n  &lt;/a&gt;\n&lt;/span&gt;\n</code></pre> <ul> <li> <p><code>&lt;span class=\"badge badge-circle bg-success me-2\"&gt;</code>: This creates a circular badge with a green background color ('bg-success') and adds some margin on the right ('me-2') for spacing.</p> </li> <li> <p><code>&lt;a href=\"{{route('clients.show',$row-&gt;id.'?Active=invoices')}}\" data-turbo=\"false\" class=\"text-decoration-none text-white\"&gt;</code>: This is a hyperlink (<code>&lt;a&gt;</code>) that wraps the badge content. It links to a URL generated by the Laravel route function (<code>route('clients.show', ...)</code>) with some query parameters. The <code>data-turbo=\"false\"</code> attribute suggests that Turbo, a feature of Hotwire for speeding up web applications, should not be used for this link.</p> </li> <li> <p><code>{{ $row-&gt;invoices_count }}</code>: This is the content inside the badge, which appears as a numeric value. It's a count of invoices associated with the client represented by <code>$row</code>.</p> </li> </ul>"},{"location":"Admin/clients/#clients-details","title":"Clients details","text":"<p>The code located in resources&gt;views&gt;clients&gt;components&gt;full_name.blade.php`.</p> <pre><code>&lt;div class=\"d-flex align-items-center\"&gt;\n  &lt;div class=\"symbol symbol-circle symbol-50px overflow-hidden me-2\"&gt;\n    &lt;a href=\"{{route('clients.show', $row-&gt;id)}}\"&gt;\n      &lt;div class=\"image image-circle image-mini me-2\"&gt;\n        &lt;img\n          src=\"{{$row-&gt;user-&gt;profile_image}}\"\n          alt=\"\"\n          class=\"user-img\"\n          width=\"50px\"\n          height=\"50px\"\n        /&gt;\n      &lt;/div&gt;\n    &lt;/a&gt;\n  &lt;/div&gt;\n  &lt;div class=\"d-flex flex-column\"&gt;\n    &lt;a\n      href=\"{{route('clients.show', $row-&gt;id)}}\"\n      class=\"mb-1 text-decoration-none\"\n      &gt;{{$row-&gt;user-&gt;full_name}}&lt;/a\n    &gt;\n    &lt;span&gt;{{$row-&gt;user-&gt;email}}&lt;/span&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>This code creates a container with a user's circular profile image followed by their full name and email. The image links to a client's details page. The <code>d-flex</code> class arranges elements in a flex container, and the <code>align-items-center</code> class aligns them vertically. The user's name links to the client's details page using the <code>route()</code> function, and their email is displayed below the name. The image's source is filled from <code>$row-&gt;user-&gt;profile_image</code>, and the user's full name and email are filled from <code>$row-&gt;user-&gt;full_name</code> and <code>$row-&gt;user-&gt;email</code>.</p>"},{"location":"Admin/clients/#invoices","title":"invoices","text":"<p>the code that shows the invoices talbe in this page located in resources&gt;views&gt;clients&gt;invoice&gt;index.blade.php`.</p> <pre><code>&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-lg-12 \"&gt;\n    &lt;livewire:client-detail-invoice-table clientId=\"{{ $client-&gt;id }}\" /&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>the <code>livewire:client-detail-invoice-table</code> is :</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Livewire;\n\nuse App\\Models\\Invoice;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Rappasoft\\LaravelLivewireTables\\Views\\Column;\n\nclass ClientDetailInvoiceTable extends LivewireTableComponent\n{\n    protected $model = Invoice::class;\n    public $clientId = null;\n\n    public function mount(int $clientId): void\n    {\n        $this-&gt;clientId = $clientId;\n    }\n\n    public function configure(): void\n    {\n        $this-&gt;setPrimaryKey('id');\n        $this-&gt;setDefaultSort('created_at', 'desc');\n        $this-&gt;setQueryStringStatus(false);\n        $this-&gt;setThAttributes(function (Column $column) {\n            if ($column-&gt;isField('final_amount')) {\n                return [\n                    'class' =&gt; 'd-flex justify-content-end',\n                ];\n            }\n            if ($column-&gt;isField('amount')) {\n                return [\n                    'class' =&gt; 'text-end',\n                ];\n            }\n\n            return ['class' =&gt; 'text-center'];\n        });\n\n        $this-&gt;setTdAttributes(function (Column $column, $row, $columnIndex, $rowIndex) {\n            if ($column-&gt;getField() === 'status') {\n                return [\n                    'class' =&gt; 'text-center',\n                ];\n            }\n            if (in_array($column-&gt;getField(), ['final_amount', 'amount'])) {\n                return [\n                    'class' =&gt; 'text-end',\n                ];\n            }\n\n            return [\n            ];\n        });\n    }\n\n    public function columns(): array\n    {\n        return [\n            Column::make(__('messages.invoice.invoice_id'), 'id')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;view('clients.components.invoice-id'),\n            Column::make('invoice_id', 'invoice_id')\n                -&gt;sortable()\n                -&gt;searchable()-&gt;hideIf(1),\n            Column::make(__('messages.invoice.invoice_date'), 'invoice_date')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('invoices.components.invoice-due-date')\n                        -&gt;withValue([\n                            'invoice-date' =&gt; $row-&gt;invoice_date,\n                        ]);\n                }),\n            Column::make(__('messages.invoice.due_date'), 'due_date')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('invoices.components.invoice-due-date')\n                        -&gt;withValue([\n                            'due-date' =&gt; $row-&gt;due_date,\n                        ]);\n                }),\n            Column::make(__('messages.invoice.amount'), 'final_amount')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return getInvoiceCurrencyAmount($row-&gt;final_amount, $row-&gt;currency_id, true);\n                }),\n            Column::make(__('messages.invoice.transactions'), 'amount')\n                -&gt;searchable()\n                -&gt;view('invoices.components.transaction'),\n            Column::make(__('messages.common.status'), 'status')\n                -&gt;searchable()\n                -&gt;view('invoices.components.transaction-status'),\n        ];\n    }\n\n    public function builder(): Builder\n    {\n        return Invoice::where('client_id', $this-&gt;clientId)-&gt;with('payments')-&gt;select('invoices.*');\n    }\n}\n</code></pre> <p>This code defines a Livewire component named <code>ClientDetailInvoiceTable</code> that displays a table of invoices associated with a client. Here's a brief explanation of what each part of the code does:</p> <ul> <li> <p>Namespace and Import Statements: The code starts by specifying the namespace and importing necessary classes and models.</p> </li> <li> <p>Class Definition: This class extends <code>LivewireTableComponent</code> from the <code>Rappasoft\\LaravelLivewireTables</code> package, which simplifies the creation of interactive data tables in Livewire.</p> </li> <li> <p>Properties: The class declares properties like <code>$model</code> (the Eloquent model to query) and <code>$clientId</code> (the ID of the client for whom the invoices are displayed).</p> </li> <li> <p>mount() Method: The <code>mount()</code> method is a lifecycle hook that initializes the component with the client ID when it's mounted.</p> </li> <li> <p>configure() Method: The <code>configure()</code> method sets various configuration options for the Livewire table. It defines the primary key, default sorting, and additional formatting for table cells.</p> </li> <li> <p>columns() Method: The <code>columns()</code> method defines the columns for the table, each created using the <code>Column::make()</code> method from the <code>Rappasoft\\LaravelLivewireTables\\Views\\Column</code> class. Columns are configured with titles, sorting, searching, and custom formatting.</p> </li> <li> <p>builder() Method: The <code>builder()</code> method returns an instance of <code>Illuminate\\Database\\Eloquent\\Builder</code>, which is used to build the query for fetching the invoices associated with the specified client. It filters invoices by the client ID and eager loads the <code>payments</code> relationship.</p> </li> </ul> <p>In summary, this code defines a Livewire component that generates a table of invoices associated with a specific client. The component configures table columns, formatting, and queries, making it easy to display and interact with invoice data in a structured and organized manner.</p>"},{"location":"Admin/clients/#overview","title":"Overview","text":""},{"location":"Admin/clients/#quotes","title":"Quotes","text":""},{"location":"Admin/dashboard/","title":"The Client Dashboard","text":""},{"location":"Admin/dashboard/#dashboard-url","title":"Dashboard URL","text":"<p>The code bellow creates a route for the The dashboard page, which is accessible at the '/admin/dashboard' URL path. The The dashboard Page is accessible at: https://invoices.infyom.com/cliet/dashboard The code bellow creates a route for the The dashboard page, which is accessible at the '/client/dashboard' URL path.</p> <pre><code>Route::get('/dashboard', [DashboardController::class, 'index'])-&gt;name('admin.dashboard');\n</code></pre> <p>the route refers to the method:</p> <pre><code>    public function index()\n{\n$dashboardData = $this-&gt;dashboardRepository-&gt;getDashboardData();\n\nreturn view('dashboard.index')-&gt;with($dashboardData);\n}\n</code></pre>"},{"location":"Admin/dashboard/#the-web-page-title","title":"The web page title","text":"<p>The code bellow allows you to dynamically set the title of the web page using language translation. The translated text (e.g., \"Dashboard\") will be displayed as the title of the page, which helps provide context to users and search engines.</p> <pre><code>@section('title')\n{{ __('messages.dashboard') }}\n@endsection\n</code></pre>"},{"location":"Admin/dashboard/#dashboard-components","title":"Dashboard components","text":"<p>The dashboard contains 8 widgets, each widget is a clickable link leading to its own feature</p>"},{"location":"Admin/dashboard/#total-clients","title":"Total Clients","text":"<p>the code bellow creates a visually appealing widget-like component that displays the total number of clients, along with a user icon and stylized text, within a link. The widget is intended to be a clickable link. it leads to <code>{{ route('clients.index') }}</code> that refers to resources&gt;views&gt;clients&gt;index.blade.php. The styling classes are used to control the layout and appearance of the widget.</p> <pre><code>&lt;div class=\"col-xxl-3 col-xl-4 col-sm-6 widget\"&gt;\n  &lt;a href=\"{{ route('clients.index') }}\" class=\"mb-xl-8 text-decoration-none\"&gt;\n    &lt;div\n      class=\"bg-primary shadow-md rounded-10 p-xxl-10 px-7 py-10 d-flex align-items-center justify-content-between my-3\"\n    &gt;\n      &lt;div\n        class=\"bg-cyan-300 widget-icon rounded-10 d-flex align-items-center justify-content-center\"\n      &gt;\n        &lt;i class=\"fas fa-user display-4 card-icon text-white\"&gt;&lt;/i&gt;\n      &lt;/div&gt;\n      &lt;div class=\"text-end text-white\"&gt;\n        &lt;h2 class=\"fs-1-xxl fw-bolder text-white\"&gt;\n          {{ formatTotalAmount($total_clients) }}\n        &lt;/h2&gt;\n        &lt;h3 class=\"mb-0 fs-4 fw-light\"&gt;\n          {{ __('messages.admin_dashboard.total_clients') }}\n        &lt;/h3&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <p>{{ formatTotalAmount($total_clients) }}: this function take $total_clients number as a parametre and returns its formatted the function embedded in app&gt;helpers.php file</p> <pre><code>function formatTotalAmount($totalAmount, $precision = 2) {\n  if ($totalAmount &lt; 900) {\n    // 0 - 900\n    $numberFormat = number_format($totalAmount, $precision);\n    $suffix = \"\";\n  } else {\n    if ($totalAmount &lt; 900000) {\n      // 0.9k-850k\n      $numberFormat = number_format($totalAmount / 1000, $precision);\n      $suffix = \"K\";\n    } else {\n      if ($totalAmount &lt; 900000000) {\n        // 0.9m-850m\n        $numberFormat = number_format($totalAmount / 1000000, $precision);\n        $suffix = \"M\";\n      } else {\n        if ($totalAmount &lt; 900000000000) {\n          // 0.9b-850b\n          $numberFormat = number_format($totalAmount / 1000000000, $precision);\n          $suffix = \"B\";\n        } else {\n          // 0.9t+\n          $numberFormat = number_format(\n            $totalAmount / 1000000000000,\n            $precision\n          );\n          $suffix = \"T\";\n        }\n      }\n    }\n  }\n\n  // Remove unnecessary zeroes after decimal. \"1.0\" -&gt; \"1\"; \"1.00\" -&gt; \"1\"\n  // Intentionally does not affect partials, eg \"1.50\" -&gt; \"1.50\"\n  if ($precision &gt; 0) {\n    $dotZero = \".\".str_repeat(\"0\", $precision);\n    $numberFormat = str_replace($dotZero, \"\", $numberFormat);\n  }\n\n  return $numberFormat.$suffix;\n}\n</code></pre> <p>{{ __('messages.admin_dashboard.total_clients') }}:This code retrieves and displays the translated text for the label \"Total Clients\" from the language files.</p>"},{"location":"Admin/dashboard/#total-amount","title":"Total Amount","text":"<p>the code bellow creates a visually appealing widget-like component that displays the total amount of invoices, along with a user icon and stylized text, within a link. The widget is intended to be a clickable link. it leads to <code>{{ route('invoices.index') }}</code> that refers to resources&gt;views&gt;invoices&gt;index.blade.php. The styling classes are used to control the layout and appearance of the widget.</p> <pre><code>&lt;div class=\"col-xxl-3 col-xl-4 col-sm-6 widget\"&gt;\n    &lt;a href=\"{{ route('invoices.index') }}\"\n        class=\"mb-xl-8 text-decoration-none\"&gt;\n            &lt;div class=\"bg-success shadow-md rounded-10 p-xxl-10 px-7 py-10 d-flex align-items-center justify-content-between my-3\"&gt;\n                &lt;div class=\"bg-green-300 widget-icon rounded-10 d-flex align-items-center justify-content-center\"&gt;\n                &lt;i class=\"fa fa-money-check display-4 card-icon text-white\"&gt;&lt;/i&gt;&lt;/div&gt;\n                    &lt;div class=\"text-end text-white\"&gt;\n                       &lt;h2 class=\"fs-1-xxl fw-bolder text-white\"&gt;\n                            &lt;span&gt;{{ getCurrencyAmount($invoice_amount) }}\n                        &lt;/h2&gt;\n                        &lt;h3 class=\"mb-0 fs-4 fw-light\"&gt;{{ __('messages.admin_dashboard.total_amount') }}\n                        &lt;/h3&gt;\n                    &lt;/div&gt;\n            &lt;/div&gt;\n    &lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <p>{{ getCurrencyAmount($invoice_amount) }}: function is used to format and displaythe invoice amount along with its currency symbol.</p> <pre><code>function getCurrencyAmount($amount, $formatting = false)\n{\nstatic $currencyPosition;\nif (empty($currencyPosition)) {\n$currencyPosition = getSettingValue('currency_after_amount');\n}\n\n$currencySymbol = getCurrencySymbol();\n$formattedAmount = $formatting ? numberFormat($amount) : formatTotalAmount($amount);\nif ($currencyPosition) {\nreturn $formattedAmount.' '.$currencySymbol;\n}\n\nreturn $currencySymbol.' '.$formattedAmount;\n}\n</code></pre> <p>{{ __('messages.admin_dashboard.total_amount') }}:This code retrieves and displays the translated text for the label \"Total amount\" from the language files.</p>"},{"location":"Admin/dashboard/#total-paid","title":"Total paid","text":"<p>the code bellow creates a visually appealing widget-like component that displays the total paid invoices, along with a user icon and stylized text, within a link. The widget is intended to be a clickable link. it leads to <code>{{route('invoices.index',['status'=&gt;2]) }}</code> that refers to resources&gt;views&gt;invoices&gt;index.blade.php. The styling classes are used to control the layout and appearance of the widget.</p> <pre><code>&lt;div class=\"col-xxl-3 col-xl-4 col-sm-6 widget\"&gt;\n    &lt;a href=\"{{route('invoices.index',['status'=&gt;2]) }}\" class=\"mb-xl-8 text-decoration-none\"&gt;\n            &lt;div class=\"bg-info shadow-md rounded-10 p-xxl-10 px-7 py-10 d-flex          align-items-centerjustify-content-between my-3\"&gt;\n            &lt;div class=\"bg-blue-300 widget-icon rounded-10 d-flex align-items-center justify-content-center\"&gt;\n              &lt;i class=\"fas fa-money-bill-wave display-4 card-icon text-white\"&gt;&lt;/i&gt;\n            &lt;/div&gt;\n            &lt;div class=\"text-end text-white\"&gt;&lt;h2 class=\"fs-1-xxl fw-bolder text-white\"&gt;{{getCurrencyAmount($paid_amount) }}&lt;/h2&gt;\n            &lt;h3 class=\"mb-0 fs-4 fw-light\"&gt;{{ __('messages.admin_dashboard.total_paid') }}&lt;/h3&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <p>{{getCurrencyAmount($paid_amount) }}: the same functions in https://docummentation.test/admin/dashboard/#total-amount , but we give it $paid_amount as a parametres. {{ __('messages.admin_dashboard.total_paid') }}:This code retrieves and displays the translated text for the label \"Total paid\" from the language files.</p>"},{"location":"Admin/dashboard/#total-due","title":"Total due","text":"<p>the code bellow creates a visually appealing widget-like component that displays the total due in invoices, along with a user icon and stylized text, within a link. The widget is intended to be a clickable link. it leads to <code>{{route('invoices.index',['status'=&gt;3]) }}</code> that refers to resources&gt;views&gt;invoices&gt;index.blade.php. The styling classes are used to control the layout and appearance of the widget.</p> <pre><code>&lt;div class=\"col-xxl-3 col-xl-4 col-sm-6 widget\"&gt;\n  &lt;a\n    href=\"{{ route('invoices.index',['status'=&gt;3]) }}\"\n    class=\"mb-xl-8 text-decoration-none\"\n  &gt;\n    &lt;div\n      class=\"bg-warning shadow-md rounded-10 p-xxl-10 px-7 py-10 d-flex align-items-center justify-content-between my-3\"\n    &gt;\n      &lt;div\n        class=\"bg-yellow-300 widget-icon rounded-10 d-flex align-items-center justify-content-center\"\n      &gt;\n        &lt;i class=\"fas fa-credit-card display-4 card-icon text-white\"&gt;&lt;/i&gt;\n      &lt;/div&gt;\n      &lt;div class=\"text-end text-white\"&gt;\n        &lt;h2 class=\"fs-1-xxl fw-bolder text-white\"&gt;\n          {{getCurrencyAmount($due_amount) }}\n        &lt;/h2&gt;\n        &lt;h3 class=\"mb-0 fs-4 fw-light\"&gt;\n          {{ __('messages.admin_dashboard.total_due') }}\n        &lt;/h3&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <p>{{getCurrencyAmount($due_amount) }}: the same functions in https://docummentation.test/admin/dashboard/#total-amount , but we give it $due_amount as a parametres.  {{ __('messages.admin_dashboard.total_due') }}:This code retrieves and displays the translated text for the label \"Total due\" from the language files.</p>"},{"location":"Admin/dashboard/#total-products","title":"Total Products","text":"<p>the code bellow creates a visually appealing widget-like component that displays the total products, along with a user icon and stylized text, within a link. The widget is intended to be a clickable link. it leads to <code>{{route('{{ route('products.index') }}</code> that refers to resources&gt;views&gt;products&gt;index.blade.php. The styling classes are used to control the layout and appearance of the widget.</p> <pre><code>&lt;div class=\"col-xxl-3 col-xl-4 col-sm-6 widget\"&gt;\n  &lt;a href=\"{{ route('products.index') }}\" class=\"mb-xl-8 text-decoration-none\"&gt;\n    &lt;div\n      class=\"bg-secondary shadow-md rounded-10 p-xxl-10 px-7 py-10 d-flex align-items-center justify-content-between my-3\"\n    &gt;\n      &lt;div\n        class=\"bg-gray-300 widget-icon rounded-10 d-flex align-items-center justify-content-center\"\n      &gt;\n        &lt;i class=\"fas fa-cube display-4 card-icon text-dark\"&gt;&lt;/i&gt;\n      &lt;/div&gt;\n      &lt;div class=\"text-end text-dark\"&gt;\n        &lt;h2 class=\"fs-1-xxl fw-bolder text-dark\"&gt;\n          {{ formatTotalAmount($total_products) }}\n        &lt;/h2&gt;\n        &lt;h3 class=\"mb-0 fs-4 fw-light\"&gt;\n          {{ __('messages.admin_dashboard.total_products') }}\n        &lt;/h3&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <p>{{ formatTotalAmount($total_products) }}:this function take $total_products number as a parametre and returns its formatted. the function embedded in app&gt;helpers.php file.</p> <p>{{ __('messages.admin_dashboard.total_products') }}:This code retrieves and displays the translated text for the label \"Total products\" from the language files.</p>"},{"location":"Admin/dashboard/#total-unpaid-invoices","title":"Total unpaid invoices","text":"<p>the code bellow creates a visually appealing widget-like component that displays the total unpaid invoices, along with a user icon and stylized text, within a link. The widget is intended to be a clickable link. it leads to <code>{{ route('invoices.index',['status'=&gt;1]) }}</code> that refers to resources&gt;views&gt;invoices&gt;index.blade.php. The styling classes are used to control the layout and appearance of the widget.</p> <pre><code>&lt;div class=\"col-xxl-3 col-xl-4 col-sm-6 widget\"&gt;\n  &lt;a\n    href=\"{{ route('invoices.index',['status'=&gt;1]) }}\"\n    class=\"mb-xl-8 text-decoration-none\"\n  &gt;\n    &lt;div\n      class=\"bg-danger shadow-md rounded-10 p-xxl-10 px-7 py-10 d-flex align-items-center justify-content-between my-3\"\n    &gt;\n      &lt;div\n        class=\"bg-red-300 widget-icon rounded-10 d-flex align-items-center justify-content-center\"\n      &gt;\n        &lt;i class=\"fas fa-file-invoice display-4 card-icon text-white\"&gt;&lt;/i&gt;\n      &lt;/div&gt;\n      &lt;div class=\"text-end text-white\"&gt;\n        &lt;h2 class=\"fs-1-xxl fw-bolder text-white\"&gt;\n          {{ formatTotalAmount($unpaid_invoices) }}\n        &lt;/h2&gt;\n        &lt;h3 class=\"mb-0 fs-4 fw-light\"&gt;\n          {{ __('messages.admin_dashboard.total_unpaid_invoices') }}\n        &lt;/h3&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <p>{{ formatTotalAmount($unpaid_invoices) }}:this function take $unpaid_invoices number as a parametre and returns its formatted. the function embedded in app&gt;helpers.php file.</p> <p>{{ __('messages.admin_dashboard.total_unpaid_invoices') }}:This code retrieves and displays the translated text for the label \"Total unpaid_invoices\" from the language files.</p>"},{"location":"Admin/dashboard/#total-paid-invoices","title":"Total paid invoices","text":"<p>the code bellow creates a visually appealing widget-like component that displays the total paid invoices, along with a user icon and stylized text, within a link. The widget is intended to be a clickable link. it leads to <code>{{ route('invoices.index',['status'=&gt;2]) }}</code> that refers to resources&gt;views&gt;invoices&gt;index.blade.php. The styling classes are used to control the layout and appearance of the widget.</p> <pre><code>&lt;div class=\"col-xxl-3 col-xl-4 col-sm-6 widget\"&gt;\n  &lt;a\n    href=\"{{ route('invoices.index',['status'=&gt;2]) }}\"\n    class=\"mb-xl-8 text-decoration-none\"\n  &gt;\n    &lt;div\n      class=\"bg-dark shadow-md rounded-10 p-xxl-10 px-7 py-10 d-flex align-items-center justify-content-between my-3\"\n    &gt;\n      &lt;div\n        class=\"bg-gray-300 widget-icon rounded-10 d-flex align-items-center justify-content-center\"\n      &gt;\n        &lt;i\n          class=\"fas fa-clipboard-check display-4 card-icon {{\\Illuminate\\Support\\Facades\\Auth::user()-&gt;dark_mode ? 'text-black' : 'text-white'}}\"\n        &gt;&lt;/i&gt;\n      &lt;/div&gt;\n      &lt;div\n        class=\"text-end {{\\Illuminate\\Support\\Facades\\Auth::user()-&gt;dark_mode ? 'text-black' : 'text-white'}}\"\n      &gt;\n        &lt;h2\n          class=\"fs-1-xxl fw-bolder {{\\Illuminate\\Support\\Facades\\Auth::user()-&gt;dark_mode ? 'text-black' : 'text-white'}}\"\n        &gt;\n          {{ formatTotalAmount($paid_invoices) }}\n        &lt;/h2&gt;\n        &lt;h3 class=\"mb-0 fs-4 fw-light\"&gt;\n          {{ __('messages.admin_dashboard.total_paid_invoices') }}\n        &lt;/h3&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <p>{{ formatTotalAmount($paid_invoices) }}:this function take $paid_invoices number as a parametre and returns its formatted. the function embedded in app&gt;helpers.php file.</p> <p>{{ __('messages.admin_dashboard.total_paid_invoices') }}:This code retrieves and displays the translated text for the label \"Total paid_invoices\" from the language files.</p>"},{"location":"Admin/dashboard/#total-invoices","title":"Total invoices","text":"<p>the code bellow creates a visually appealing widget-like component that displays the total paid invoices, along with a user icon and stylized text, within a link. The widget is intended to be a clickable link. it leads to <code>{{ route('invoices.index' }}</code> that refers to resources&gt;views&gt;invoices&gt;index.blade.php. The styling classes are used to control the layout and appearance of the widget.</p> <pre><code>&lt;div class=\"col-xxl-3 col-xl-4 col-sm-6 widget\"&gt;\n  &lt;a href=\"{{ route('invoices.index') }}\" class=\"mb-xl-8 text-decoration-none\"&gt;\n    &lt;div\n      class=\"bg-primary shadow-md rounded-10 p-xxl-10 px-7 py-10 d-flex align-items-center justify-content-between my-3\"\n    &gt;\n      &lt;div\n        class=\"bg-cyan-300 widget-icon rounded-10 d-flex align-items-center justify-content-center\"\n      &gt;\n        &lt;i\n          class=\"fas fa-exclamation-triangle display-4 card-icon text-white\"\n        &gt;&lt;/i&gt;\n      &lt;/div&gt;\n      &lt;div class=\"text-end text-white\"&gt;\n        &lt;h2 class=\"fs-1-xxl fw-bolder text-white\"&gt;\n          {{ formatTotalAmount($total_invoices) }}\n        &lt;/h2&gt;\n        &lt;h3 class=\"mb-0 fs-4 fw-light\"&gt;\n          {{ __('messages.admin_dashboard.total_invoices') }}\n        &lt;/h3&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <p>{{ formatTotalAmount($total_invoices) }}:this function take the $total_invoices number as a parametre and returns its formatted. the function embedded in app&gt;helpers.php file.</p> <p>{{ __('messages.admin_dashboard.total_invoices') }}:This code retrieves and displays the translated text for the label \"Total invoices\" from the language files.</p>"},{"location":"Admin/invoices/","title":"Invoices","text":""},{"location":"Admin/invoices/#route","title":"Route","text":"<p>The route <code>Route::resource('invoices', InvoiceController::class);</code> leads to the page /admin/invoices, which displays all the invoices we have.</p>"},{"location":"Admin/invoices/#controller","title":"Controller","text":"<p>The controller of the 'invoices' page located in app&gt;http&gt;controllers&gt;InvoiceController.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Exports\\AdminInvoicesExport;\nuse App\\Http\\Requests\\CreateInvoiceRequest;\nuse App\\Http\\Requests\\UpdateInvoiceRequest;\nuse App\\Mail\\InvoicePaymentReminderMail;\nuse App\\Models\\Currency;\nuse App\\Models\\Invoice;\nuse App\\Models\\Payment;\nuse App\\Models\\Product;\nuse App\\Repositories\\InvoiceRepository;\nuse App\\Repositories\\PaymentRepository;\nuse Barryvdh\\DomPDF\\Facade as PDF;\nuse Carbon\\Carbon;\nuse Exception;\nuse Illuminate\\Contracts\\Foundation\\Application;\nuse Illuminate\\Contracts\\View\\Factory;\nuse Illuminate\\Contracts\\View\\View;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\RedirectResponse;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\Response;\nuse Illuminate\\Support\\Facades\\App;\nuse Illuminate\\Support\\Facades\\DB;\nuse Illuminate\\Support\\Facades\\Mail;\nuse Laracasts\\Flash\\Flash;\nuse Maatwebsite\\Excel\\Facades\\Excel;\nuse Symfony\\Component\\HttpFoundation\\BinaryFileResponse;\n\nclass InvoiceController extends AppBaseController\n{\n    /** @var InvoiceRepository */\n    public $invoiceRepository;\n\n    public function __construct(InvoiceRepository $invoiceRepo)\n    {\n        $this-&gt;invoiceRepository = $invoiceRepo;\n    }\n\n    /**\n     * @param  Request  $request\n     * @return Application|Factory|View\n     * @throws Exception\n     */\n    public function index(Request $request): View|Factory|Application\n    {\n        $this-&gt;updateInvoiceOverDueStatus();\n        $statusArr = Invoice::STATUS_ARR;\n        $status = $request-&gt;status;\n\n        return view('invoices.index', compact('statusArr', 'status'));\n    }\n\n    /**\n     * Show the form for creating a new resource.\n     *\n     * @return Application|Factory|View\n     */\n    public function create(): View|Factory|Application\n    {\n        $data = $this-&gt;invoiceRepository-&gt;getSyncList();\n        $data['currencies'] = getCurrencies();\n        unset($data['statusArr'][0]);\n\n        return view('invoices.create')-&gt;with($data);\n    }\n\n    /**\n     * @param  CreateInvoiceRequest  $request\n     * @return JsonResponse\n     */\n    public function store(CreateInvoiceRequest $request)\n    {\n        try {\n            DB::beginTransaction();\n            $invoice = $this-&gt;invoiceRepository-&gt;saveInvoice($request-&gt;all());\n            if ($request-&gt;status != Invoice::DRAFT) {\n                $this-&gt;invoiceRepository-&gt;saveNotification($request-&gt;all(), $invoice);\n                DB::commit();\n\n                return $this-&gt;sendResponse($invoice, 'Invoice saved &amp; sent successfully.');\n            }\n            DB::commit();\n        } catch (Exception $e) {\n            DB::rollBack();\n\n            return $this-&gt;sendError($e-&gt;getMessage());\n        }\n\n        return $this-&gt;sendResponse($invoice, 'Invoice saved successfully.');\n    }\n\n    /**\n     * Display the specified resource.\n     *\n     * @param  Invoice  $invoice\n     * @return Application|Factory|View\n     */\n    public function show(Invoice $invoice): View|Factory|Application\n    {\n        $invoiceData = $this-&gt;invoiceRepository-&gt;getInvoiceData($invoice);\n\n        return view('invoices.show')-&gt;with($invoiceData);\n    }\n\n    /**\n     * @param  Invoice  $invoice\n     * @return Application|Factory|View|RedirectResponse\n     */\n    public function edit(Invoice $invoice)\n    {\n        if ($invoice-&gt;status == Invoice::PAID || $invoice-&gt;status == Invoice::PARTIALLY) {\n            Flash::error('Paid invoices can not editable.');\n\n            return redirect()-&gt;route('invoices.index');\n        }\n        $data = $this-&gt;invoiceRepository-&gt;prepareEditFormData($invoice);\n        $data['selectedInvoiceTaxes'] = $invoice-&gt;invoiceTaxes()-&gt;pluck('tax_id')-&gt;toArray();\n        $data['currencies'] = getCurrencies();\n\n        return view('invoices.edit')-&gt;with($data);\n    }\n\n    /**\n     * @param  UpdateInvoiceRequest  $request\n     * @param  Invoice  $invoice\n     * @return JsonResponse\n     */\n    public function update(UpdateInvoiceRequest $request, Invoice $invoice): JsonResponse\n    {\n        $input = $request-&gt;all();\n        try {\n            DB::beginTransaction();\n            $invoice = $this-&gt;invoiceRepository-&gt;updateInvoice($invoice-&gt;id, $input);\n            $changes = $invoice-&gt;getChanges();\n            if ($input['invoiceStatus'] == '1') {\n                if (count($changes) &gt; 0 &amp;&amp; $input['invoiceStatus'] == '1') {\n                    $this-&gt;invoiceRepository-&gt;updateNotification($invoice, $input, $changes);\n                }\n                if ($input['invoiceStatus'] == '1' &amp;&amp; $input['status'] == Invoice::DRAFT) {\n                    $this-&gt;invoiceRepository-&gt;draftStatusUpdate($invoice);\n                }\n                DB::commit();\n\n                return $this-&gt;sendResponse($invoice, 'Invoice updated &amp; sent successfully.');\n            }\n            DB::commit();\n        } catch (Exception $e) {\n            DB::rollBack();\n\n            return $this-&gt;sendError($e-&gt;getMessage());\n        }\n\n        return $this-&gt;sendResponse($invoice, 'Invoice updated successfully.');\n    }\n\n    /**\n     * @param  Invoice  $invoice\n     * @return JsonResponse\n     */\n    public function destroy(Invoice $invoice): JsonResponse\n    {\n        $invoice-&gt;delete();\n\n        return $this-&gt;sendSuccess('Invoice Deleted successfully.');\n    }\n\n    public function getProduct($productId): JsonResponse\n    {\n        $product = Product::pluck('unit_price', 'id')-&gt;toArray();\n\n        return $this-&gt;sendResponse($product, 'Product Price retrieved successfully.');\n    }\n\n    /**\n     * @param $currencyId\n     * @return mixed\n     */\n    public function getInvoiceCurrency($currencyId): mixed\n    {\n        $currency = Currency::whereId($currencyId)-&gt;first()-&gt;icon;\n\n        return $this-&gt;sendResponse($currency, 'Invoice Currency retrieved successfully.');\n    }\n\n    /**\n     * @param  Invoice  $invoice\n     * @return Response\n     */\n    public function convertToPdf(Invoice $invoice): Response\n    {\n        ini_set('max_execution_time', 36000000);\n        $invoice-&gt;load(['client.user', 'invoiceTemplate', 'invoiceItems.product', 'invoiceItems.invoiceItemTax','invoiceTaxes']);\n        $invoiceData = $this-&gt;invoiceRepository-&gt;getPdfData($invoice);\n        $invoiceTemplate = $this-&gt;invoiceRepository-&gt;getDefaultTemplate($invoice);\n        $pdf = PDF::loadView(\"invoices.invoice_template_pdf.$invoiceTemplate\", $invoiceData);\n\n        return $pdf-&gt;stream('invoice.pdf');\n    }\n\n    /**\n     * @param  Invoice  $invoice\n     * @param $status\n     * @return mixed\n     */\n    public function updateInvoiceStatus(Invoice $invoice, $status): mixed\n    {\n        $this-&gt;invoiceRepository-&gt;draftStatusUpdate($invoice);\n\n        return $this-&gt;sendSuccess('Invoice Send successfully.');\n    }\n\n    public function updateInvoiceOverDueStatus()\n    {\n        $invoice = Invoice::whereStatus(Invoice::UNPAID)-&gt;get();\n        $currentDate = Carbon::today()-&gt;format('Y-m-d');\n        foreach ($invoice as $invoices) {\n            if ($invoices-&gt;due_date &lt; $currentDate) {\n                $invoices-&gt;update([\n                    'status' =&gt; Invoice::OVERDUE,\n                ]);\n            }\n        }\n    }\n\n    /**\n     * @param $invoiceId\n     * @return mixed\n     */\n    public function invoicePaymentReminder($invoiceId): mixed\n    {\n        $invoice = Invoice::with(['client.user', 'payments'])-&gt;whereId($invoiceId)-&gt;firstOrFail();\n        $paymentReminder = Mail::to($invoice-&gt;client-&gt;user-&gt;email)-&gt;send(new InvoicePaymentReminderMail($invoice));\n\n        return $this-&gt;sendResponse($paymentReminder, 'Payment reminder mail send successfully.');\n    }\n\n    /**\n     * @return BinaryFileResponse\n     */\n    public function exportInvoicesExcel(): BinaryFileResponse\n    {\n        return Excel::download(new AdminInvoicesExport(), 'invoice-excel.xlsx');\n    }\n\n    /**\n     * @param $invoiceId\n     * @return Application|Factory|View\n     */\n    public function showPublicInvoice($invoiceId): View|Factory|Application\n    {\n        $invoice = Invoice::with('client.user')-&gt;whereInvoiceId($invoiceId)-&gt;firstOrFail();\n        $invoiceData = $this-&gt;invoiceRepository-&gt;getInvoiceData($invoice);\n        $invoiceData['statusArr'] = Invoice::STATUS_ARR;\n        $invoiceData['status'] = $invoice-&gt;status;\n        unset($invoiceData['statusArr'][Invoice::DRAFT]);\n        $invoiceData['paymentType'] = Payment::PAYMENT_TYPE;\n        $invoiceData['paymentMode'] = $this-&gt;invoiceRepository-&gt;getPaymentGateways();\n        $invoiceData['stripeKey'] = getSettingValue('stripe_key');\n        $invoiceData['userLang'] = $invoice-&gt;client-&gt;user-&gt;language;\n\n        return view('invoices.public-invoice.public_view')-&gt;with($invoiceData);\n    }\n\n    public function getPublicInvoicePdf($invoiceId)\n    {\n        $invoice = Invoice::whereInvoiceId($invoiceId)-&gt;firstOrFail();\n        $invoice-&gt;load('client.user', 'invoiceTemplate', 'invoiceItems.product', 'invoiceItems.invoiceItemTax');\n        $invoiceData = $this-&gt;invoiceRepository-&gt;getPdfData($invoice);\n        $invoiceTemplate = $this-&gt;invoiceRepository-&gt;getDefaultTemplate($invoice);\n        $pdf = PDF::loadView(\"invoices.invoice_template_pdf.$invoiceTemplate\", $invoiceData);\n\n        return $pdf-&gt;stream('invoice.pdf');\n    }\n\n    public function showPublicPayment($invoiceId): Factory|View|Application\n    {\n        /** @var PaymentRepository $paymentRepo */\n        $paymentRepo = App::make(PaymentRepository::class);\n\n        /** @var Invoice $invoice */\n        $invoice = Invoice::whereInvoiceId($invoiceId)-&gt;firstOrFail();\n        $totalPayable = $paymentRepo-&gt;getTotalPayable($invoice);\n        $paymentType = Payment::PAYMENT_TYPE;\n        $paymentMode = $this-&gt;invoiceRepository-&gt;getPaymentGateways();\n        $stripeKey = getSettingValue('stripe_key');\n        if (empty($stripeKey)) {\n            $stripeKey = config('services.stripe.key');\n        }\n\n        return view('invoices.public-invoice.payment',\n            compact('paymentType', 'paymentMode', 'totalPayable', 'stripeKey', 'invoice'));\n    }\n\n    public function updateRecurring(Invoice $invoice)\n    {\n        $recurringCycle = empty($invoice-&gt;recurring_cycle) ? 1 : $invoice-&gt;recurring_cycle;\n        $invoice-&gt;update([\n            'recurring_status' =&gt; ! $invoice-&gt;recurring_status,\n            'recurring_cycle' =&gt; $recurringCycle,\n        ]);\n\n        return $this-&gt;sendSuccess('Recurring status updated successfully.');\n    }\n\n    /**\n     * @return Response\n     */\n    public function exportInvoicesPdf(): Response\n    {\n        ini_set('max_execution_time', 3600000000);\n        $data['invoices'] = Invoice::with('client.user', 'payments')-&gt;orderBy('created_at', 'desc')-&gt;get();\n        $pdf = PDF::loadView(\"invoices.export_invoices_pdf\", $data);\n\n        return $pdf-&gt;download('Invoices.pdf');\n    }\n}\n</code></pre> <p>The <code>InvoiceController</code> is a PHP class that serves as a controller in our application. It handles HTTP requests related to invoice management and interacts with the application's models, repositories, and views to perform various actions. Let's break down the key functionalities and methods of this controller:</p> <ol> <li> <p>Namespace: The controller is placed in the <code>App\\Http\\Controllers</code> namespace, which is a standard Laravel convention for organizing controllers.</p> </li> <li> <p>Dependencies: The controller has several dependencies injected via its constructor, including the <code>InvoiceRepository</code>. This allows it to interact with the database and perform various actions related to invoices.</p> </li> <li> <p>Methods:</p> </li> <li> <p><code>index</code>: This method handles the display of a list of invoices. It updates the overdue status of invoices and retrieves a list of statuses for filtering.</p> </li> <li> <p><code>create</code>: This method displays a form for creating a new invoice. It retrieves necessary data like currencies and sync lists.</p> </li> <li> <p><code>store</code>: Handles the creation of a new invoice based on the data submitted in the request. It also handles the sending of notifications if the invoice is not in the draft status.</p> </li> <li> <p><code>show</code>: Displays the details of a specific invoice.</p> </li> <li> <p><code>edit</code>: Displays a form for editing an invoice, provided that the invoice is not paid or partially paid.</p> </li> <li> <p><code>update</code>: Handles the update of an existing invoice. It also manages notifications and the status of the invoice.</p> </li> <li> <p><code>destroy</code>: Deletes an invoice.</p> </li> <li> <p><code>getProduct</code>: Retrieves product prices as a JSON response.</p> </li> <li> <p><code>getInvoiceCurrency</code>: Retrieves the currency of an invoice as a JSON response.</p> </li> <li> <p><code>convertToPdf</code>: Generates a PDF representation of an invoice.</p> </li> <li> <p><code>updateInvoiceStatus</code>: Updates the status of an invoice.</p> </li> <li> <p><code>updateInvoiceOverDueStatus</code>: Updates the overdue status of unpaid invoices.</p> </li> <li> <p><code>invoicePaymentReminder</code>: Sends a payment reminder email to the client associated with an invoice.</p> </li> <li> <p><code>exportInvoicesExcel</code>: Exports invoices to an Excel file.</p> </li> <li> <p><code>showPublicInvoice</code>: Displays a public view of an invoice.</p> </li> <li> <p><code>getPublicInvoicePdf</code>: Generates a PDF for a public invoice.</p> </li> <li> <p><code>showPublicPayment</code>: Displays payment information for a public invoice.</p> </li> <li> <p><code>updateRecurring</code>: Updates the recurring status of an invoice.</p> </li> <li> <p><code>exportInvoicesPdf</code>: Exports invoices to a PDF file.</p> </li> <li> <p>Middleware: The controller uses middleware for authentication and authorization to ensure that only authorized users can access these routes.</p> </li> </ol> <p>Overall, this controller is responsible for managing various aspects of invoices, including their creation, editing, deletion, and display. It also handles exporting invoices to different formats, sending payment reminders, and managing recurring invoices.</p>"},{"location":"Admin/invoices/#model","title":"Model","text":"<p>The models related to this controller are :App\\Models\\Currency ,App\\Models\\Invoice , App\\Models\\Payment and App\\Models\\Product .</p>"},{"location":"Admin/invoices/#currency-model","title":"Currency Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass Currency extends Model\n{\n    use HasFactory;\n\n    protected $table = 'currencies';\n\n    protected $fillable = ['name', 'icon', 'code'];\n\n    protected $casts = [\n        'name' =&gt; 'string',\n        'icon' =&gt; 'string',\n        'code' =&gt; 'string',\n    ];\n\n    public static $rules = [\n        'name' =&gt; 'required|string|unique:currencies,name',\n        'icon' =&gt; 'required|unique:currencies,icon',\n        'code' =&gt; 'required|min:3|max:3',\n    ];\n}\n</code></pre> <p>The provided code represents a Laravel Eloquent model named <code>Currency</code>. Eloquent is Laravel's implementation of the Active Record pattern, which is used for interacting with database tables. Here's an explanation of this <code>Currency</code> model:</p> <ol> <li> <p>Namespace: The model is defined within the <code>App\\Models</code> namespace, which is a standard Laravel convention for organizing models.</p> </li> <li> <p>Extends Model: This model class extends <code>Illuminate\\Database\\Eloquent\\Model</code>, which means it inherits various features and functionalities from the Eloquent model class.</p> </li> <li> <p>Use of HasFactory Trait: The <code>HasFactory</code> trait is included in this model. It's used to enable Laravel's factory support, which allows you to easily create model instances for testing or seeding the database.</p> </li> <li> <p>Table Name: The <code>protected $table</code> property is set to <code>'currencies'</code>, which specifies the database table associated with this model. In this case, it indicates that the model corresponds to a table named 'currencies' in the database.</p> </li> <li> <p>Fillable Attributes: The <code>protected $fillable</code> property is an array that lists the attributes of the model that are allowed to be mass-assigned. Mass assignment is commonly used when creating or updating records. In this case, the <code>Currency</code> model allows mass assignment for the 'name,' 'icon,' and 'code' attributes.</p> </li> <li> <p>Attribute Casting: The <code>protected $casts</code> property is an array that defines the data types to which specific attributes should be cast when retrieving them from the database. Here, it specifies that the 'name,' 'icon,' and 'code' attributes should be treated as strings.</p> </li> <li> <p>Validation Rules: The <code>public static $rules</code> property defines validation rules for creating or updating <code>Currency</code> instances. These rules are used by Laravel's validation system and can help ensure that the data entered into the model is valid before it is stored in the database. In this case, the rules require that 'name' and 'icon' are unique within the 'currencies' table, and 'code' must be a string with a minimum length of 3 characters and a maximum length of 3 characters.</p> </li> </ol> <p>In summary, the <code>Currency</code> model is used to interact with a database table named 'currencies' and defines the structure and validation rules for currency-related data. It can be used to create, retrieve, update, and delete currency records in the associated database table.</p>"},{"location":"Admin/invoices/#invoice-model","title":"Invoice Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Carbon\\Carbon;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsToMany;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Support\\Str;\n\nclass Invoice extends Model\n{\n    use HasFactory;\n\n    public const SELECT_DISCOUNT_TYPE = 0;\n    public const FIXED = 1;\n    public const PERCENTAGE = 2;\n\n    public const DISCOUNT_TYPE = [\n        self::SELECT_DISCOUNT_TYPE =&gt; 'Select Discount Type',\n        self::FIXED =&gt; 'Fixed',\n        self::PERCENTAGE =&gt; 'Percentage',\n    ];\n\n    public const DRAFT = 0;\n    public const UNPAID = 1;\n    public const PAID = 2;\n    public const PARTIALLY = 3;\n    public const OVERDUE = 4;\n    public const STATUS_ALL = 5;\n    public const PROCESSING = 6;\n\n    public const STATUS_ARR = [\n        self::STATUS_ALL =&gt; 'All',\n        self::DRAFT =&gt; 'Draft',\n        self::UNPAID =&gt; 'Unpaid',\n        self::PAID =&gt; 'Paid',\n        self::PARTIALLY =&gt; 'Partially Paid',\n        self::OVERDUE =&gt; 'Overdue',\n        self::PROCESSING =&gt; 'Processing',\n    ];\n\n    public const RECURRING_OFF = 0;\n\n    public const RECURRING_ON = 1;\n\n    public const RECURRING_STATUS_ARR = [\n        self::RECURRING_ON =&gt; 'On',\n        self::RECURRING_OFF =&gt; 'Off',\n    ];\n\n    public const MONTHLY = 1;\n    public const QUARTERLY = 2;\n    public const SEMIANNUALLY = 3;\n    public const ANNUALLY = 4;\n\n    public const RECURRING_ARR = [\n        self::MONTHLY =&gt; 'Monthly',\n        self::QUARTERLY =&gt; 'Quarterly',\n        self::SEMIANNUALLY =&gt; 'Semi Annually',\n        self::ANNUALLY =&gt; 'Annually',\n    ];\n\n    /**\n     * Validation rules\n     *\n     * @var array\n     */\n    public static $rules = [\n        'client_id' =&gt; 'required',\n        'invoice_id' =&gt; 'required|unique:invoices,invoice_id',\n        'invoice_date' =&gt; 'required',\n        'due_date' =&gt; 'required',\n    ];\n\n    public static $messages = [\n        'client_id.required' =&gt; 'The Client field is required.',\n        'invoice_date.required' =&gt; 'The invoice date field is required.',\n        'due_date' =&gt; 'The invoice Due date field is required.',\n    ];\n\n    public $table = 'invoices';\n\n    public $appends = ['status_label'];\n\n    public $fillable = [\n        'client_id',\n        'invoice_date',\n        'due_date',\n        'invoice_id',\n        'currency_id',\n        'amount',\n        'discount_type',\n        'discount',\n        'final_amount',\n        'note',\n        'term',\n        'template_id',\n        'status',\n        'recurring_status',\n        'recurring_cycle',\n        'last_recurring_on',\n        'parent_id',\n    ];\n\n    protected $casts = [\n        'client_id' =&gt; 'integer',\n        'parent_id' =&gt; 'integer',\n        'invoice_date' =&gt; 'date',\n        'due_date' =&gt; 'date',\n        'invoice_id' =&gt; 'string',\n        'currency_id' =&gt; 'integer',\n        'amount' =&gt; 'double',\n        'discount_type' =&gt; 'integer',\n        'discount' =&gt; 'double',\n        'final_amount' =&gt; 'double',\n        'note' =&gt; 'string',\n        'term' =&gt; 'string',\n        'template_id' =&gt; 'integer',\n        'status' =&gt; 'integer',\n        'recurring_status' =&gt; 'integer',\n        'recurring_cycle' =&gt; 'integer',\n        'last_recurring_on' =&gt; 'date',\n        'tax' =&gt; 'double',\n    ];\n\n    public function getStatusLabelAttribute(): string\n    {\n        return self::STATUS_ARR[$this-&gt;status];\n    }\n\n    /**\n     * @return BelongsTo\n     */\n    public function client(): BelongsTo\n    {\n        return $this-&gt;belongsTo(Client::class, 'client_id', 'id');\n    }\n\n    /**\n     * @return HasMany\n     */\n    public function invoiceItems(): HasMany\n    {\n        return $this-&gt;hasMany(InvoiceItem::class);\n    }\n\n    /**\n     * @return string\n     */\n    public static function generateUniqueInvoiceId(): string\n    {\n        $invoiceId = mb_strtoupper(Str::random(6));\n        while (true) {\n            $isExist = self::whereInvoiceId($invoiceId)-&gt;exists();\n            if ($isExist) {\n                self::generateUniqueInvoiceId();\n            }\n            break;\n        }\n\n        return $invoiceId;\n    }\n\n    /**\n     * @return HasMany\n     */\n    public function payments(): HasMany\n    {\n        return $this-&gt;hasMany(Payment::class, 'invoice_id', 'id');\n    }\n\n    /**\n     * @return HasMany\n     */\n    public function AdminPayment(): HasMany\n    {\n        return $this-&gt;hasMany(AdminPayment::class, 'invoice_id', 'id');\n    }\n\n    /**\n     * @return BelongsTo\n     */\n    public function invoiceTemplate(): BelongsTo\n    {\n        return $this-&gt;belongsTo(InvoiceSetting::class, 'template_id', 'id');\n    }\n\n    public function parentInvoice(): BelongsTo\n    {\n        return $this-&gt;belongsTo(self::class, 'parent_id', 'id');\n    }\n\n    public function childInvoices(): HasMany\n    {\n        return $this-&gt;hasMany(self::class, 'parent_id', 'id');\n    }\n\n    /**\n     * @param $value\n     * @return Setting|mixed\n     */\n    public function getCurrencyIdAttribute($value)\n    {\n        if (! empty($value)) {\n            return Currency::where('id', $value)-&gt;pluck('id')-&gt;first();\n        }\n\n        return Currency::where('id', getSettingValue('current_currency'))-&gt;pluck('id')-&gt;first();\n    }\n\n    /**\n     * @param $value\n     */\n    public function setInvoiceDateAttribute($value): void\n    {\n        $this-&gt;attributes['invoice_date'] = Carbon::createFromFormat(currentDateFormat(),\n            $value)-&gt;translatedFormat('Y-m-d');\n    }\n\n    /**\n     * @param $value\n     */\n    public function setDueDateAttribute($value): void\n    {\n        $this-&gt;attributes['due_date'] = Carbon::createFromFormat(currentDateFormat(),\n            $value)-&gt;translatedFormat('Y-m-d');\n    }\n\n    /**\n     * @return BelongsToMany\n     */\n    public function invoiceTaxes(): BelongsToMany\n    {\n        return $this-&gt;belongsToMany(Tax::class,'invoice_taxes');\n    }\n}\n</code></pre> <p>The provided code represents a Laravel Eloquent model named <code>Invoice</code>. This model is used to interact with the 'invoices' database table and represents various attributes and behaviors related to invoices. Let's break down the key aspects of this <code>Invoice</code> model:</p> <ol> <li> <p>Namespace: The model is defined within the <code>App\\Models</code> namespace, which is a standard Laravel convention for organizing models.</p> </li> <li> <p>Extends Model: This model class extends <code>Illuminate\\Database\\Eloquent\\Model</code>, which means it inherits various features and functionalities from the Eloquent model class.</p> </li> <li> <p>Use of HasFactory Trait: The <code>HasFactory</code> trait is included in this model. It's used to enable Laravel's factory support, allowing you to easily create model instances for testing or seeding the database.</p> </li> <li> <p>Constants: The model defines several constant values that represent different aspects of invoices, such as discount types, invoice statuses, recurring statuses, and recurring cycle options. These constants are used to provide meaningful labels and options for invoices.</p> </li> <li> <p>Validation Rules and Messages: The model defines validation rules and messages using the <code>$rules</code> and <code>$messages</code> static properties. These rules and messages are used for data validation when creating or updating invoice records.</p> </li> <li> <p>Table Name: The <code>public $table</code> property is set to 'invoices', indicating that this model is associated with the 'invoices' database table.</p> </li> <li> <p>Appends Attribute: The <code>public $appends</code> property is an array that defines additional attributes that should be included when converting the model to an array or JSON. In this case, it includes a 'status_label' attribute.</p> </li> <li> <p>Fillable Attributes: The <code>public $fillable</code> property is an array that lists the attributes of the model that are allowed to be mass-assigned. Mass assignment is commonly used when creating or updating records. In this case, it allows mass assignment for various invoice-related attributes.</p> </li> <li> <p>Attribute Casting: The <code>protected $casts</code> property is an array that defines the data types to which specific attributes should be cast when retrieving them from the database. It ensures that attributes like dates and numeric values are cast to their appropriate data types.</p> </li> <li> <p>Accessors and Mutators: The model defines accessor methods (<code>getCurrencyIdAttribute</code>, <code>getStatusLabelAttribute</code>) and mutator methods (<code>setInvoiceDateAttribute</code>, <code>setDueDateAttribute</code>) to customize the behavior of attribute access and assignment.</p> </li> <li> <p>Relationships: The model defines several relationships with other Eloquent models, including:</p> <ul> <li><code>client()</code>: Belongs to a <code>Client</code> model.</li> <li><code>invoiceItems()</code>: Has many <code>InvoiceItem</code> models.</li> <li><code>payments()</code>: Has many <code>Payment</code> models.</li> <li><code>AdminPayment()</code>: Has many <code>AdminPayment</code> models.</li> <li><code>invoiceTemplate()</code>: Belongs to an <code>InvoiceSetting</code> model.</li> <li><code>parentInvoice()</code>: Belongs to another <code>Invoice</code> model as a parent invoice.</li> <li><code>childInvoices()</code>: Has many <code>Invoice</code> models as child invoices.</li> <li><code>invoiceTaxes()</code>: Belongs to many <code>Tax</code> models through the 'invoice_taxes' pivot table.</li> </ul> </li> <li> <p>Custom Methods: The model defines custom methods like <code>generateUniqueInvoiceId</code> to generate unique invoice IDs and <code>setInvoiceDateAttribute</code> and <code>setDueDateAttribute</code> to format date attributes.</p> </li> </ol>"},{"location":"Admin/invoices/#payment-model","title":"Payment Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Barryvdh\\LaravelIdeHelper\\Eloquent;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Support\\Carbon;\nuse Spatie\\MediaLibrary\\HasMedia;\nuse Spatie\\MediaLibrary\\InteractsWithMedia;\nuse Spatie\\MediaLibrary\\MediaCollections\\Models\\Media;\n\nclass Payment extends Model implements HasMedia\n{\n    use HasFactory, InteractsWithMedia;\n\n    protected $table = 'payments';\n\n    protected $fillable = [\n        'invoice_id', 'amount', 'payment_date', 'payment_mode', 'transaction_id', 'notes', 'is_approved',\n    ];\n\n    protected $casts = [\n        'invoice_id'     =&gt; 'integer',\n        'amount'         =&gt; 'double',\n        'payment_date'   =&gt; 'datetime',\n        'payment_mode'   =&gt; 'integer',\n        'transaction_id' =&gt; 'string',\n        'meta'           =&gt; 'json',\n        'notes'          =&gt; 'string',\n        'user_id'        =&gt; 'integer',\n        'is_approved'    =&gt; 'integer',\n    ];\n\n    public $appends = ['payments_mode'];\n\n    const PAYMENT_ATTACHMENT = 'payment_attachment';\n\n    const FULLPAYMENT = 2;\n    const PARTIALLYPAYMENT = 3;\n\n    const PAYMENT_TYPE = [\n        self::FULLPAYMENT      =&gt; 'Full Payment',\n        self::PARTIALLYPAYMENT =&gt; 'Partially Payment',\n    ];\n\n    const PENDING = 0;\n    const APPROVED = 1;\n    const REJECTED = 2;\n    const STATUS_ALL = 3;\n    const PAID = 'Paid';\n    const PROCESSING = 'Processing';\n    const DENIED = 'Denied';\n    const STATUS_ARR_ALL = 'All';\n\n    const PAYMENT_STATUS = [\n        self::STATUS_ALL =&gt; self::STATUS_ARR_ALL,\n        self::PENDING    =&gt; self::PROCESSING,\n        self::APPROVED   =&gt; self::PAID,\n        self::REJECTED   =&gt; self::DENIED,\n    ];\n\n    const STATUS = [\n        'RECEIVED_AMOUNT' =&gt; 'Received Amount',\n        'PAID_AMOUNT'     =&gt; 'Paid Amount',\n        'DUE_AMOUNT'      =&gt; 'Due Amount',\n    ];\n\n    const MANUAL = 1;\n    const STRIPE = 2;\n    const PAYPAL = 3;\n    const CASH = 4;\n    const RAZORPAY = 5;\n    const ALL = 0;\n\n    const PAYMENT_MODE = [\n        self::ALL      =&gt; 'All',\n        self::MANUAL   =&gt; 'Manual',\n        self::STRIPE   =&gt; 'Stripe',\n        self::PAYPAL   =&gt; 'Paypal',\n        self::CASH     =&gt; 'Cash',\n        self::RAZORPAY =&gt; 'Razorpay',\n    ];\n\n    public static $rules = [\n        'payment_type'       =&gt; 'required',\n        'amount'             =&gt; 'required',\n        'payment_mode'       =&gt; 'required',\n        'payment_attachment' =&gt; 'nullable|mimes:pdf,png,jpeg,jpg',\n    ];\n\n    /**\n     * @return string\n     */\n    public function getPaymentAttachmentAttribute(): string\n    {\n        /** @var Media $media */\n        $media = $this-&gt;getMedia(self::PAYMENT_ATTACHMENT)-&gt;first();\n        if ($media !== null) {\n            return $media-&gt;getFullUrl();\n        }\n\n        return false;\n    }\n\n    /**\n     * @return string\n     */\n    public function getPaymentTypeAttribute(): string\n    {\n        return self::PAYMENT_MODE[$this-&gt;payment_mode];\n    }\n\n    /**\n     * @return string\n     */\n    public function getPaymentsModeAttribute(): string\n    {\n        return self::PAYMENT_MODE[$this-&gt;payment_mode];\n    }\n\n    /**\n     * @return BelongsTo\n     */\n    public function invoice(): BelongsTo\n    {\n        return $this-&gt;belongsTo(Invoice::class);\n    }\n}\n</code></pre> <p>The provided code represents a Laravel Eloquent model named <code>Payment</code>. This model is used to interact with the 'payments' database table and represents various attributes and behaviors related to payments. Let's break down the key aspects of this <code>Payment</code> model:</p> <ol> <li> <p>Namespace: The model is defined within the <code>App\\Models</code> namespace, which is a standard Laravel convention for organizing models.</p> </li> <li> <p>Extends Model: This model class extends <code>Illuminate\\Database\\Eloquent\\Model</code>, which means it inherits various features and functionalities from the Eloquent model class.</p> </li> <li> <p>Use of Traits: The <code>HasFactory</code> and <code>InteractsWithMedia</code> traits are included in this model.</p> </li> <li> <p><code>HasFactory</code> is used to enable Laravel's factory support, allowing you to easily create model instances for testing or seeding the database.</p> </li> <li> <p><code>InteractsWithMedia</code> is used to integrate the model with the Spatie Media Library, which allows you to associate media files (such as payment attachments) with the model.</p> </li> <li> <p>Table Name: The <code>protected $table</code> property is set to 'payments', indicating that this model is associated with the 'payments' database table.</p> </li> <li> <p>Fillable Attributes: The <code>protected $fillable</code> property is an array that lists the attributes of the model that are allowed to be mass-assigned. Mass assignment is commonly used when creating or updating records. In this case, it allows mass assignment for various payment-related attributes such as 'invoice_id,' 'amount,' 'payment_date,' 'payment_mode,' 'transaction_id,' 'notes,' and 'is_approved.'</p> </li> <li> <p>Attribute Casting: The <code>protected $casts</code> property is an array that defines the data types to which specific attributes should be cast when retrieving them from the database. It ensures that attributes like dates, numbers, and JSON fields are cast to their appropriate data types.</p> </li> <li> <p>Appends Attribute: The <code>public $appends</code> property is an array that defines additional attributes that should be included when converting the model to an array or JSON. In this case, it includes a 'payments_mode' attribute.</p> </li> <li> <p>Constants: The model defines constant values that represent different aspects of payments, including payment types, payment statuses, and payment modes.</p> </li> <li> <p>Validation Rules: The model defines validation rules using the <code>$rules</code> static property. These rules are used for data validation when creating or updating payment records.</p> </li> <li> <p>Custom Accessors: The model defines custom accessor methods (<code>getPaymentAttachmentAttribute</code>, <code>getPaymentTypeAttribute</code>, <code>getPaymentsModeAttribute</code>) to customize the behavior of attribute access. These accessors provide formatted URLs for payment attachments and human-readable labels for payment type and mode.</p> </li> <li> <p>Relationships: The model defines a relationship with the <code>Invoice</code> model using the <code>invoice()</code> method, indicating that a payment belongs to an invoice.</p> </li> </ol> <p>Overall, the <code>Payment</code> model provides the structure and functionality to work with payment data in a Laravel application. It allows you to associate payments with invoices, manage payment attributes, and interact with media attachments associated with payments.</p>"},{"location":"Admin/invoices/#product-model","title":"Product Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Notifications\\Notifiable;\nuse Spatie\\MediaLibrary\\HasMedia;\nuse Spatie\\MediaLibrary\\InteractsWithMedia;\nuse Spatie\\MediaLibrary\\MediaCollections\\Models\\Media;\n\nclass Product extends Model implements HasMedia\n{\n    use HasFactory, Notifiable, InteractsWithMedia;\n\n    protected $table = 'products';\n\n    protected $fillable = ['name', 'code', 'category_id', 'unit_price', 'description'];\n\n    protected $casts = [\n        'name' =&gt; 'string',\n        'code' =&gt; 'string',\n        'category_id' =&gt; 'integer',\n        'unit_price' =&gt; 'double',\n        'description' =&gt; 'string',\n    ];\n\n    const Image = 'product';\n\n    protected $appends = ['product_image'];\n\n    public static $rules = [\n        'name' =&gt; 'required',\n        'code' =&gt; 'required|alpha_num|min:3|max:6|unique:products,code',\n        'category_id' =&gt; 'required',\n        'unit_price' =&gt; 'required|numeric',\n    ];\n\n    public static $messages = [\n        'code.required' =&gt; 'The product code field is required.',\n        'code.size' =&gt; 'The product code must be 6 characters.',\n        'code.unique' =&gt; 'The product code has already been taken.',\n    ];\n\n    /**\n     * @return string\n     */\n    public function getProductImageAttribute(): string\n    {\n        /** @var Media $media */\n        $media = $this-&gt;getMedia(self::Image)-&gt;first();\n        if (! empty($media)) {\n            return $media-&gt;getFullUrl();\n        }\n\n        return asset('images/default-product.jpg');\n    }\n\n    public function category()\n    {\n        return $this-&gt;hasOne(Category::class, 'id', 'category_id');\n    }\n}\n</code></pre> <p>The provided code represents a Laravel Eloquent model named <code>Product</code>. This model is used to interact with the 'products' database table and represents various attributes and behaviors related to products. Let's break down the key aspects of this <code>Product</code> model:</p> <ol> <li> <p>Namespace: The model is defined within the <code>App\\Models</code> namespace, which is a standard Laravel convention for organizing models.</p> </li> <li> <p>Use of Traits: The <code>HasFactory</code>, <code>Notifiable</code>, and <code>InteractsWithMedia</code> traits are included in this model.</p> </li> <li> <p><code>HasFactory</code> is used to enable Laravel's factory support, allowing you to easily create model instances for testing or seeding the database.</p> </li> <li><code>Notifiable</code> is used to enable notifications for the model.</li> <li> <p><code>InteractsWithMedia</code> is used to integrate the model with the Spatie Media Library, allowing you to associate media files (such as product images) with the model.</p> </li> <li> <p>Table Name: The <code>protected $table</code> property is set to 'products', indicating that this model is associated with the 'products' database table.</p> </li> <li> <p>Fillable Attributes: The <code>protected $fillable</code> property is an array that lists the attributes of the model that are allowed to be mass-assigned. Mass assignment is commonly used when creating or updating records. In this case, it allows mass assignment for various product-related attributes such as 'name,' 'code,' 'category_id,' 'unit_price,' and 'description.'</p> </li> <li> <p>Attribute Casting: The <code>protected $casts</code> property is an array that defines the data types to which specific attributes should be cast when retrieving them from the database. It ensures that attributes like strings, integers, and doubles are cast to their appropriate data types.</p> </li> <li> <p>Media Library Integration: The model integrates with the Spatie Media Library to manage product images. It defines a constant named <code>Image</code> to specify the media collection for product images.</p> </li> <li> <p>Appends Attribute: The <code>protected $appends</code> property is an array that defines additional attributes that should be included when converting the model to an array or JSON. In this case, it includes a 'product_image' attribute, which provides the URL for the product image.</p> </li> <li> <p>Validation Rules and Messages: The model defines validation rules using the <code>$rules</code> static property. These rules are used for data validation when creating or updating product records. Custom validation error messages are also defined using the <code>$messages</code> static property.</p> </li> <li> <p>Custom Accessor: The model defines a custom accessor method (<code>getProductImageAttribute</code>) to customize the behavior of attribute access for the 'product_image' attribute. This accessor provides the URL for the product image associated with the product. If no image is found, it returns a default image URL.</p> </li> <li> <p>Relationships: The model defines a relationship with the <code>Category</code> model using the <code>category()</code> method. It indicates that a product belongs to a category.</p> </li> </ol> <p>Overall, the <code>Product</code> model provides the structure and functionality to work with product data in a Laravel application. It allows you to manage product attributes, associate products with categories, and handle product images using the Spatie Media Library.</p>"},{"location":"Admin/invoices/#view","title":"View","text":""},{"location":"Admin/invoices/#the-livewire-invoice-table","title":"The livewire: Invoice table","text":"<p>The livewire of the 'Invoice table' located in app&gt;http&gt;livewire&gt;InvoiceTable.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Livewire;\n\nuse App\\Models\\Invoice;\nuse App\\Models\\User;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Support\\Facades\\Auth;\nuse Rappasoft\\LaravelLivewireTables\\Views\\Column;\n\nclass InvoiceTable extends LivewireTableComponent\n{\n    protected $model = Invoice::class;\n    protected string $tableName = 'invoices';\n    public $showButtonOnHeader = true;\n    public $buttonComponent = 'invoices.components.add-button';\n    public bool $showFilterOnHeader = true;\n    public $filterComponent = ['invoices.components.filter', Invoice::STATUS_ARR, Invoice::RECURRING_STATUS_ARR];\n    public $listeners = ['changeInvoiceStatusFilter', 'changeRecurringStatusFilter', 'resetPageTable'];\n    public $status = Invoice::STATUS_ALL;\n    public $recurringStatus = '';\n\n    protected $queryString = ['status'];\n\n    public function configure(): void\n    {\n        $this-&gt;setPrimaryKey('id');\n        $this-&gt;setDefaultSort('created_at', 'desc');\n        $this-&gt;setQueryStringStatus(false);\n\n        $this-&gt;setThAttributes(function (Column $column) {\n            if ($column-&gt;isField('final_amount')) {\n                return [\n                    'class' =&gt; 'd-flex justify-content-end',\n                ];\n            }\n            if ($column-&gt;isField('amount')) {\n                return [\n                    'class' =&gt; 'text-end',\n                ];\n            }\n\n            return ['class' =&gt; 'text-center'];\n        });\n\n        $this-&gt;setTdAttributes(function (Column $column, $row, $columnIndex, $rowIndex) {\n            if (in_array($column-&gt;getField(), ['status', 'id'])) {\n                return [\n                    'class' =&gt; 'text-center',\n                ];\n            }\n            if (in_array($column-&gt;getField(), ['amount', 'final_amount'])) {\n                return [\n                    'class' =&gt; 'text-end',\n                ];\n            }\n\n            return [];\n        });\n    }\n\n    public function columns(): array\n    {\n        return [\n            Column::make(__('messages.invoice.client'), 'client.user.first_name')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;view('invoices.components.client-name'),\n            Column::make('invoice_id', 'invoice_id')\n                -&gt;sortable()\n                -&gt;searchable()-&gt;hideIf(1),\n            Column::make('Last Name', 'client.user.last_name')\n                -&gt;sortable()\n                -&gt;searchable()-&gt;hideIf(1),\n            Column::make(__('messages.invoice.invoice_date'), 'invoice_date')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('invoices.components.invoice-due-date')\n                        -&gt;withValue([\n                            'invoice-date' =&gt; $row-&gt;invoice_date,\n                        ]);\n                }),\n            Column::make(__('messages.invoice.due_date'), 'due_date')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('invoices.components.invoice-due-date')\n                        -&gt;withValue([\n                            'due-date' =&gt; $row-&gt;due_date,\n                        ]);\n                }),\n            Column::make(__('messages.invoice.amount'), 'final_amount')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;view('invoices.components.amount'),\n            Column::make(__('messages.invoice.transactions'), 'amount')\n                -&gt;searchable()\n                -&gt;view('invoices.components.transaction'),\n            Column::make(__('messages.common.status'), 'status')\n                -&gt;searchable()\n                -&gt;view('invoices.components.transaction-status'),\n            Column::make(__('messages.common.action'), 'id')\n                -&gt;view('livewire.invoice-action-button'),\n\n        ];\n    }\n\n    public function builder(): Builder\n    {\n        $query = Invoice::with(['client.user.media', 'payments'])-&gt;select('invoices.*')\n            -&gt;when($this-&gt;status != '' &amp;&amp; $this-&gt;status != Invoice::STATUS_ALL, function ($query) {\n                return $query-&gt;where('invoices.status', $this-&gt;status);\n            })\n            -&gt;when($this-&gt;recurringStatus != '', function ($query) {\n                return $query-&gt;where('invoices.recurring_status', $this-&gt;recurringStatus);\n            });\n\n        /** @var User $user */\n        $user = Auth::user();\n        if ($user-&gt;hasRole(\\App\\Models\\Role::ROLE_CLIENT)) {\n            $query-&gt;where('invoices.status', '!=', Invoice::DRAFT);\n        }\n\n        return $query;\n    }\n\n    /**\n     * @param $status\n     */\n    public function changeInvoiceStatusFilter($status)\n    {\n        $this-&gt;status = $status;\n        $this-&gt;setBuilder($this-&gt;builder());\n    }\n\n    /**\n     * @param $recurringStatus\n     */\n    public function changeRecurringStatusFilter($recurringStatus)\n    {\n        $this-&gt;recurringStatus = $recurringStatus;\n        $this-&gt;setBuilder($this-&gt;builder());\n    }\n}\n</code></pre> <p>The provided code defines a Livewire component named <code>InvoiceTable</code>, which is responsible for rendering a table of invoices and handling various interactions related to filtering and displaying invoice data. Livewire is a Laravel library that allows for building dynamic, interactive web applications.</p> <p>Here's an explanation of the key elements and functionalities of the <code>InvoiceTable</code> Livewire component:</p> <ol> <li> <p>Model and Table Configuration:</p> </li> <li> <p><code>$model</code>: Specifies the Eloquent model associated with this Livewire table, which is <code>Invoice::class</code> in this case.</p> </li> <li> <p><code>$tableName</code>: Sets the table name to 'invoices.'</p> </li> <li> <p>Livewire Component Properties:</p> </li> <li> <p><code>$showButtonOnHeader</code>: Indicates whether to show a button in the table header (set to <code>true</code>).</p> </li> <li><code>$buttonComponent</code>: Specifies the Livewire component responsible for rendering the button (set to 'invoices.components.add-button').</li> <li><code>$showFilterOnHeader</code>: Determines whether to show filters in the table header (set to <code>true</code>).</li> <li><code>$filterComponent</code>: Specifies the Livewire component responsible for rendering the filters, along with two additional filter options related to invoice status and recurring status.</li> <li> <p><code>$listeners</code>: Defines the Livewire listeners that can trigger actions in this component (<code>changeInvoiceStatusFilter</code>, <code>changeRecurringStatusFilter</code>, <code>resetPageTable</code>).</p> </li> <li> <p>Filtering and Status Properties:</p> </li> <li> <p><code>$status</code>: Represents the selected invoice status (default is <code>Invoice::STATUS_ALL</code>).</p> </li> <li> <p><code>$recurringStatus</code>: Represents the selected recurring status.</p> </li> <li> <p>Query String Configuration:</p> </li> <li> <p><code>$queryString</code>: Specifies query string parameters for the Livewire component (in this case, only 'status').</p> </li> <li> <p>Configuration Method (<code>configure</code>):</p> </li> <li> <p><code>configure()</code>: Contains configuration settings for the Livewire table.</p> </li> <li>Sets the primary key, default sorting, and query string status.</li> <li> <p>Defines attributes for table headers and cells.</p> </li> <li> <p>Table Columns (<code>columns()</code> method):</p> </li> <li> <p>Defines an array of table columns using <code>Column::make</code>.</p> </li> <li>Each column specifies a label, field name, sorting, searching, and formatting options.</li> <li> <p>The columns include information about the client, invoice ID, last name, invoice date, due date, amount, transactions, and status.</p> </li> <li> <p>Data Builder (<code>builder()</code> method):</p> </li> <li> <p>Defines a query builder to fetch invoice data.</p> </li> <li>Eager loads related data such as client and payments.</li> <li>Filters invoices based on the selected status and recurring status.</li> <li> <p>Ensures that clients do not see draft invoices.</p> </li> <li> <p>Filtering Methods (<code>changeInvoiceStatusFilter</code> and <code>changeRecurringStatusFilter</code>):</p> </li> <li>These methods are called by Livewire listeners when the invoice status or recurring status filter changes.</li> <li>They update the corresponding properties and rebuild the data builder.</li> </ol> <p>This <code>InvoiceTable</code> Livewire component provides a flexible and interactive way to display and filter invoice data. Users can apply filters to view invoices with specific statuses or recurring statuses, and the component dynamically updates the table based on the selected criteria.</p>"},{"location":"Admin/invoices/#list-of-invoices","title":"List of invoices","text":"<p>The list of invoices view is located in : resources\\views\\invoice\\index.blade.php.</p> <pre><code>@extends('layouts.app')\n@section('title')\n    {{__('messages.invoices')}}\n@endsection\n@section('content')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-flex flex-column \"&gt;\n            @include('flash::message')\n            &lt;livewire:invoice-table/&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    @include('invoices.templates.templates')\n    {{ Form::hidden('currency', getCurrencySymbol(),['id' =&gt; 'currency']) }}\n    {{ Form::hidden('status',  $status,['id' =&gt; 'status']) }}\n@endsection\n</code></pre> <p>The provided code is a Blade view file named <code>index.blade.php</code>, which is used for rendering the index (list) page of invoices in a Laravel application. This view extends a layout (<code>layouts.app</code>) and includes various sections to define the page's title, content, and additional elements. Let's break down the contents of this Blade view:</p> <ol> <li> <p>Extending Layout:</p> </li> <li> <p><code>@extends('layouts.app')</code>: This line specifies that this view extends the <code>layouts.app</code> layout. It means that the content of this view will be embedded within the structure defined in the <code>layouts.app</code> layout.</p> </li> <li> <p>Page Title Section:</p> </li> <li> <p><code>@section('title')</code>: This section is used to set the title of the page, which will be displayed in the browser's title bar or tab.</p> </li> <li> <p><code>{{__('messages.invoices')}}</code>: This line sets the page title to the translated string for \"invoices\" using Laravel's translation functionality.</p> </li> <li> <p>Content Section:</p> </li> <li> <p><code>@section('content')</code>: This section defines the main content of the page.</p> </li> <li> <p><code>&lt;div class=\"container-fluid\"&gt;</code>: This <code>&lt;div&gt;</code> element with the class \"container-fluid\" is used to create a fluid-width container to hold the page's content.</p> </li> <li> <p>Flash Messages:</p> </li> <li> <p><code>@include('flash::message')</code>: This line includes a Blade partial view named <code>flash::message</code>, which typically renders flash messages (notifications or alerts) that may have been set in the application. Flash messages are often used to provide feedback to users after certain actions.</p> </li> <li> <p>Livewire Component:</p> </li> <li> <p><code>&lt;livewire:invoice-table/&gt;</code>: This line embeds a Livewire component named <code>invoice-table</code> in the view. Livewire is a Laravel package for building dynamic, interactive UI components. In this case, it displays an interactive table of invoices. The component is rendered directly within the view.</p> </li> <li> <p>Additional Includes:</p> </li> <li> <p><code>@include('invoices.templates.templates')</code>: This line includes another Blade partial view named <code>invoices.templates.templates</code>. It includes additional templates or components related to invoices. The specific content of this partial view would depend on the application's requirements.</p> </li> <li> <p>Hidden Form Fields:</p> </li> <li><code>{{ Form::hidden('currency', getCurrencySymbol(),['id' =&gt; 'currency']) }}</code>: This line generates a hidden HTML form input field with the name \"currency,\" populated with the result of the <code>getCurrencySymbol()</code> function. It also sets an \"id\" attribute for the input element as \"currency.\"</li> <li><code>{{ Form::hidden('status',  $status,['id' =&gt; 'status']) }}</code>: Similar to the previous line, this generates a hidden form input field with the name \"status\" and a value of <code>$status</code>. It sets an \"id\" attribute for the input element as \"status.\"</li> </ol> <p>In summary, this Blade view is used for the index page of invoices in a Laravel application. It extends a layout, sets the page title, includes flash messages, displays an interactive Livewire component for listing invoices, and includes additional templates or components related to invoices. It also includes hidden form fields that used for passing data to JavaScript or for other purposes in the application.</p>"},{"location":"Admin/invoices/#new-invoice","title":"New invoice","text":"<p>The view of the 'New invoice' located in resources&gt;views&gt;invoices&gt;create.blade.php.</p> <pre><code>@extends('layouts.app')\n@section('title')\n{{ __('messages.invoice.new_invoice') }}\n@endsection\n@section('header_toolbar')\n\n&lt;div class=\"container-fluid\"&gt;\n&lt;div class=\"d-flex align-items-center justify-content-between mb-5\"&gt;\n&lt;h1 class=\"mb-0\"&gt;@yield('title')&lt;/h1&gt;\n&lt;div class=\"text-end\"&gt;\n&lt;a class=\"btn btn-outline-primary float-end\"\n                   href=\"{{ url()-&gt;previous() }}\"&gt;{{ __('messages.common.back') }}&lt;/a&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n@endsection\n@section('content')\n&lt;div class=\"container-fluid\"&gt;\n&lt;div class=\"d-flex flex-column\"&gt;\n&lt;div class=\"row\"&gt;\n&lt;div class=\"col-12\"&gt;\n@include('layouts.errors')\n&lt;div class=\"alert alert-danger display-none hide\" id=\"validationErrorsBox\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"card\"&gt;\n&lt;div class=\"card-body\"&gt;\n{{ Form::open(['route' =&gt; 'invoices.store', 'id' =&gt; 'invoiceForm', 'name' =&gt; 'invoiceForm']) }}\n@include('invoices.fields')\n{{ Form::close() }}\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n@include('invoices.templates.templates')\n{{ Form::hidden('clients',json_encode($clients, true),['id' =&gt; 'clients']) }}\n{{ Form::hidden('products',json_encode($associateProducts, true),['id' =&gt; 'products']) }}\n{{ Form::hidden('taxes',json_encode($associateTaxes, true),['id' =&gt; 'taxes']) }}\n{{ Form::hidden('invoice_note',isset($invoice-&gt;note) ,['id' =&gt; 'invoiceNote']) }}\n{{ Form::hidden('invoice_term',isset($invoice-&gt;term) ,['id' =&gt; 'invoiceTerm']) }}\n{{ Form::hidden('invoice_recurring',isset($invoice-&gt;recurring) ,['id' =&gt; 'invoiceRecurring']) }}\n{{ Form::hidden('thousand_separator',getSettingValue('thousand_separator') ,['id' =&gt; 'thousandSeparator']) }}\n{{ Form::hidden('decimal_separator',isset($invoice-&gt;recurring) ,['id' =&gt; 'decimalSeparator']) }}\n{{ Form::hidden('default_tax',json_encode($defaultTax, true),['id' =&gt; 'defaultTax']) }}\n@endsection\n</code></pre> <p>The provided code is an example of a Blade view file named <code>create.blade.php</code>, which is used for rendering a form to create a new invoice in our application. Let's break down the contents of this Blade view:</p> <ol> <li> <p>Extending Layout:</p> </li> <li> <p><code>@extends('layouts.app')</code>: This line specifies that this view extends the <code>layouts.app</code> layout. It means that the content of this view will be embedded within the structure defined in the <code>layouts.app</code> layout.</p> </li> <li> <p>Page Title Section:</p> </li> <li> <p><code>@section('title')</code>: This section is used to set the title of the page, which will be displayed in the browser's title bar or tab.</p> </li> <li> <p><code>{{ __('messages.invoice.new_invoice') }}</code>: This line sets the page title to a translated string for \"New Invoice.\"</p> </li> <li> <p>Header Toolbar Section:</p> </li> <li> <p><code>@section('header_toolbar')</code>: This section defines the content of the header toolbar at the top of the page.</p> </li> <li><code>&lt;div class=\"container-fluid\"&gt;</code>: This <code>&lt;div&gt;</code> element with the class \"container-fluid\" is used to create a fluid-width container for the header toolbar.</li> <li>Inside the container, there is a flex container (<code>d-flex</code>) with content aligned vertically (<code>align-items-center</code>) and horizontally (<code>justify-content-between</code>).</li> <li>Within the flex container, there is an <code>&lt;h1&gt;</code> element displaying the page title obtained from the \"title\" section.</li> <li> <p>Next to the title, there is a \"Back\" button (<code>&lt;a&gt;</code>) that links to the previous page using <code>url()-&gt;previous()</code>. It's styled as an outline-primary button.</p> </li> <li> <p>Content Section:</p> </li> <li> <p><code>@section('content')</code>: This section defines the main content of the page.</p> </li> <li><code>&lt;div class=\"container-fluid\"&gt;</code>: Similar to the header toolbar section, this <code>&lt;div&gt;</code> element creates a fluid-width container for the page content.</li> <li>Inside the container, there is a flex container (<code>d-flex</code>) with content arranged in a column (<code>flex-column</code>).</li> <li> <p>Within the column, there is a <code>div</code> with a class of \"col-12\" that includes:</p> <ul> <li><code>@include('layouts.errors')</code>: This line includes a Blade partial view named <code>layouts.errors</code>, used for displaying validation errors.</li> <li>An empty <code>&lt;div&gt;</code> with the class \"alert alert-danger display-none hide\" and an <code>id</code> of \"validationErrorsBox.\" This <code>div</code> is initially hidden and used for displaying validation error messages.</li> </ul> </li> <li> <p>Invoice Form:</p> </li> <li> <p><code>&lt;div class=\"card\"&gt;</code>: This <code>&lt;div&gt;</code> represents a card element.</p> </li> <li><code>&lt;div class=\"card-body\"&gt;</code>: Within the card, there is a card body where the main content of the invoice creation form is placed.</li> <li><code>{{ Form::open(['route' =&gt; 'invoices.store', 'id' =&gt; 'invoiceForm', 'name' =&gt; 'invoiceForm']) }}</code>: This line opens an HTML form using Laravel's Form class. The form is configured to submit data to the 'invoices.store' route, has an <code>id</code> of 'invoiceForm,' and a <code>name</code> of 'invoiceForm.'</li> <li><code>@include('invoices.fields')</code>: This line includes a Blade partial view named 'invoices.fields.' This is where the fields and inputs for creating a new invoice are defined.</li> <li> <p><code>{{ Form::close() }}</code>: This line closes the HTML form.</p> </li> <li> <p>Additional Includes:</p> </li> <li> <p><code>@include('invoices.templates.templates')</code>: This line includes another Blade partial view named <code>invoices.templates.templates</code>. It includes additional templates or components related to invoices.</p> </li> <li> <p>Hidden Form Fields and Settings:</p> </li> <li>Several hidden form input fields are included using <code>Form::hidden()</code>. These fields are used to pass data to JavaScript or for other purposes in the application. They include data related to clients, products, taxes, invoice notes, invoice terms, recurring settings, thousand and decimal separators, and default tax settings.</li> </ol> <p>In summary, this Blade view is used for creating a new invoice in our application. It extends a layout, sets the page title, includes a header toolbar with a \"Back\" button, displays validation errors if any, and provides a form for entering invoice details. Hidden form fields are used to store various settings and data for use in the view or JavaScript.</p>"},{"location":"Admin/invoices/#edit-invoice","title":"Edit invoice","text":"<p>The edit invoice page view is located in : resources\\views\\invoices\\edit.blade.php.</p> <pre><code>@extends('layouts.app')\n@section('title')\n    {{ __('messages.invoice.edit_invoice') }}\n@endsection\n@section('content')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-flex flex-column\"&gt;\n            &lt;div class=\"col-12\"&gt;\n                &lt;div class=\"d-flex justify-content-between align-items-end mb-5\"&gt;\n                    &lt;h1&gt;@yield('title')&lt;/h1&gt;\n                    &lt;a class=\"btn btn-outline-primary float-end\"\n                       href=\"{{ url()-&gt;previous() }}\"&gt;{{ __('messages.common.back') }}&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-12\"&gt;\n                    @include('layouts.errors')\n                &lt;/div&gt;\n                &lt;div class=\"card\"&gt;\n                    &lt;div class=\"card-body\"&gt;\n                        {{ Form::model($invoice, ['route' =&gt; ['invoices.update', $invoice-&gt;id], 'id' =&gt; 'invoiceEditForm']) }}\n                        @include('invoices.edit_fields')\n                        {{ Form::close() }}\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    @include('invoices.templates.templates')\n    {{ Form::hidden('invoice_update_url',route('invoices.update', ['invoice' =&gt; $invoice-&gt;id]),['id' =&gt; 'invoiceUpdateUrl']) }}\n    {{ Form::hidden('invoice_url',route('invoices.index'),['id' =&gt; 'invoiceUrl']) }}\n    {{ Form::hidden('invoice_id',$invoice-&gt;id,['id' =&gt; 'invoiceId']) }}\n    {{ Form::hidden('clients',json_encode($clients, true),['id' =&gt; 'clients']) }}\n    {{ Form::hidden('products',json_encode($associateProducts, true),['id' =&gt; 'products']) }}\n    {{ Form::hidden('taxes',json_encode($associateTaxes, true),['id' =&gt; 'taxes']) }}\n    {{ Form::hidden('unique_id',$invoice-&gt;invoiceItems-&gt;count() + 1 ,['id' =&gt; 'uniqueId']) }}\n    {{ Form::hidden('invoice_note',isset($invoice-&gt;note) ? true : false ,['id' =&gt; 'invoiceNote']) }}\n    {{ Form::hidden('invoice_term',isset($invoice-&gt;term) ? true : false ,['id' =&gt; 'invoiceTerm']) }}\n    {{ Form::hidden('invoice_recurring',isset($invoice-&gt;recurring) ? true : false ,['id' =&gt; 'invoiceRecurring']) }}\n    {{ Form::hidden('thousand_separator',getSettingValue('thousand_separator') ,['id' =&gt; 'thousandSeparator']) }}\n    {{ Form::hidden('decimal_separator',getSettingValue('decimal_separator') ,['id' =&gt; 'decimalSeparator']) }}\n    {{ Form::hidden('default_tax',json_encode($defaultTax, true) ,['id' =&gt; 'defaultTax']) }}\n    {{ Form::hidden('edit_due_date',$invoice-&gt;due_date ,['id' =&gt; 'editDueDate']) }}\n@endsection\n</code></pre> <p>The provided code is an example of a Blade view file named <code>edit.blade.php</code>, which is used for editing an existing invoice in our application. Let's break down the contents of this Blade view:</p> <ol> <li> <p>Extending Layout:</p> </li> <li> <p><code>@extends('layouts.app')</code>: This line specifies that this view extends the <code>layouts.app</code> layout. It means that the content of this view will be embedded within the structure defined in the <code>layouts.app</code> layout.</p> </li> <li> <p>Page Title Section:</p> </li> <li> <p><code>@section('title')</code>: This section is used to set the title of the page, which will be displayed in the browser's title bar or tab.</p> </li> <li> <p><code>{{ __('messages.invoice.edit_invoice') }}</code>: This line sets the page title to a translated string for \"Edit Invoice.\"</p> </li> <li> <p>Content Section:</p> </li> <li> <p><code>@section('content')</code>: This section defines the main content of the page.</p> </li> <li><code>&lt;div class=\"container-fluid\"&gt;</code>: This <code>&lt;div&gt;</code> element creates a fluid-width container for the page content.</li> <li>Inside the container, there is a flex container (<code>d-flex</code>) with content arranged in a column (<code>flex-column</code>).</li> <li> <p>Within the column, there is a <code>div</code> with a class of \"col-12\" that includes:</p> <ul> <li>A <code>div</code> with classes \"d-flex justify-content-between align-items-end mb-5\" representing a flex container that aligns its content at the bottom.</li> <li>Inside this flex container, there is an <code>&lt;h1&gt;</code> element displaying the page title obtained from the \"title\" section.</li> <li>Next to the title, there is a \"Back\" button (<code>&lt;a&gt;</code>) that links to the previous page using <code>url()-&gt;previous()</code>. It's styled as an outline-primary button.</li> <li>Another <code>div</code> with a class of \"col-12\" is used to include error messages using <code>@include('layouts.errors')</code>.</li> </ul> </li> <li> <p>Invoice Form:</p> </li> <li> <p><code>&lt;div class=\"card\"&gt;</code>: This <code>&lt;div&gt;</code> represents a card element.</p> </li> <li><code>&lt;div class=\"card-body\"&gt;</code>: Within the card, there is a card body where the main content of the invoice editing form is placed.</li> <li><code>{{ Form::model($invoice, ['route' =&gt; ['invoices.update', $invoice-&gt;id], 'id' =&gt; 'invoiceEditForm']) }}</code>: This line opens an HTML form using Laravel's Form class. The form is configured to submit data to the 'invoices.update' route for updating an existing invoice with the given ID. The <code>model</code> method populates the form fields with data from the <code>$invoice</code> model.</li> <li><code>@include('invoices.edit_fields')</code>: This line includes a Blade partial view named 'invoices.edit_fields.' This is where the fields for editing an invoice are defined.</li> <li> <p><code>{{ Form::close() }}</code>: This line closes the HTML form.</p> </li> <li> <p>Additional Includes:</p> </li> <li> <p><code>@include('invoices.templates.templates')</code>: This line includes another Blade partial view named <code>invoices.templates.templates</code>. It includes additional templates or components related to invoices.</p> </li> <li> <p>Hidden Form Fields and Settings:</p> </li> <li>Several hidden form input fields are included using <code>Form::hidden()</code>. These fields are used to pass data to JavaScript or for other purposes in the application. They include data related to clients, products, taxes, unique identifiers, invoice notes, invoice terms, recurring settings, thousand and decimal separators, default tax settings, and the due date for editing.</li> </ol> <p>In summary, this Blade view is used for editing an existing invoice in a Laravel application. It extends a layout, sets the page title, includes a header toolbar with a \"Back\" button, displays validation errors if any, and provides a form pre-filled with the invoice's existing data. Hidden form fields are used to store various settings and data for use in the view or JavaScript.</p> <p>invoices.edit_fields :</p> <pre><code>&lt;div class=\"row\"&gt;\n    &lt;div class=\"col-lg-3 col-sm-12\"&gt;\n        @if($invoice-&gt;status == \\App\\Models\\Invoice::DRAFT)\n            {{ Form::label('client_id', __('messages.invoice.client').(':'),['class' =&gt; 'form-label required fs-6 mb-3']) }}\n            {{ Form::select('client_id', $clients, $client_id ?? null, ['class' =&gt; 'form-select io-select2', 'id' =&gt; 'client_id', 'placeholder' =&gt; __('messages.invoice.client'),'required', 'data-control' =&gt;'select2']) }}\n        @else\n            {{ Form::label('client_id', __('messages.invoice.client').(':'),['class' =&gt; 'form-label mb-3']) }}\n            &lt;br&gt;\n            &lt;span class=\"text-muted h3\"&gt;{{ $invoice-&gt;client-&gt;user-&gt;full_name }}&lt;/span&gt;\n            &lt;input type=\"hidden\" value=\"{{$invoice-&gt;client-&gt;user_id}}\" name=\"client_id\"&gt;\n        @endif\n    &lt;/div&gt;\n    &lt;div class=\"col-lg-3 col-sm-12 mt-3 mt-lg-1 mb-lg-0 mb-3\"&gt;\n        &lt;h4 class=\"align-items-center\"&gt;{{__('messages.invoice.invoice')}} # &lt;span\n                    class=\"text-gray-500\"&gt;{{ $invoice-&gt;invoice_id }}&lt;/span&gt;&lt;/h4&gt;\n        &lt;input type=\"hidden\" id=\"invoiceId\" value=\"{{ $invoice-&gt;invoice_id }}\" name=\"invoice_id\"/&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-lg-6 col-sm-12\"&gt;\n        &lt;div class=\"mb-5\"&gt;\n            {{ Form::label('status', __('messages.common.status').(':'), ['class' =&gt; 'form-label required mb-3']) }}\n            {{ Form::select('status', $statusArr, isset($invoice) ? $invoice-&gt;status : null, ['class' =&gt; 'form-select', 'id' =&gt; 'status','required','data-control' =&gt;'select2']) }}\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"row mb-2\"&gt;\n        &lt;div class=\"mb-5 col-lg-3 col-sm-12\"&gt;\n            {{ Form::label('invoice_date', __('messages.invoice.invoice_date').(':'),['class' =&gt; 'form-label required mb-3']) }}\n            {{ Form::text('invoice_date',null ,['class' =&gt; 'form-select', 'id' =&gt; 'editInvoiceDate', 'autocomplete' =&gt; 'off','required']) }}\n        &lt;/div&gt;\n        &lt;div class=\"mb-5 col-lg-3 col-sm-12\"&gt;\n            {{ Form::label('due_date', __('messages.invoice.due_date').(':'),['class' =&gt; 'form-label required mb-3']) }}\n            {{ Form::text('due_date', null, ['class' =&gt; 'form-select', 'id' =&gt; 'editDueDate', 'autocomplete' =&gt; 'off','required']) }}\n        &lt;/div&gt;\n        &lt;div class=\"mb-5 col-lg-3 col-sm-12\"&gt;\n            {{ Form::label('templateId', __('messages.setting.invoice_template').(':'),['class' =&gt; 'form-label mb-3']) }}\n            {{ Form::select('template_id', $template,isset($invoice) ? $invoice-&gt;template_id:null, ['class' =&gt; 'form-select', 'id' =&gt; 'templateId','required', 'data-control' =&gt;'select2']) }}\n        &lt;/div&gt;\n        &lt;div class=\"mb-5 col-lg-3 col-sm-12\"&gt;\n            {{ Form::label('currencyType', __('messages.setting.currencies').':', ['class' =&gt; 'form-label mb-3']) }}\n            &lt;select id=\"currencyType\" class=\"form-select invoice-currency-type\" name=\"currency_id\"&gt;\n                &lt;option value=\"\"&gt;Select Currency&lt;/option&gt;\n                @foreach($currencies as $key =&gt; $currency)\n                    &lt;option value=\"{{ $currency['id'] }}\" {{ $invoice-&gt;currency_id == $currency['id'] ? 'selected' : ''}}&gt;{{$currency['icon']}}\n                        &amp;nbsp;&amp;nbsp;&amp;nbsp; {{$currency['name']}}\n                    &lt;/option&gt;\n                @endforeach\n            &lt;/select&gt;\n        &lt;/div&gt;\n        &lt;div class=\"mb-5 col-lg-3 col-sm-12\"&gt;\n            &lt;label class=\"form-check form-switch form-check-custom mt-3\"&gt;\n                &lt;input class=\"form-check-input recurring-status\" type=\"checkbox\"\n                       name=\"recurring_status\"\n                       id=\"recurringStatusToggle\" {{ $invoice-&gt;recurring_status ? \"checked\" : \"\" }}&gt;\n                &lt;span class=\"form-check-label text-gray-600\"\n                      for=\"recurringStatusToggle\"&gt;{{__('messages.invoice.recurring')}}&lt;/span&gt;&amp;nbsp;&amp;nbsp;\n            &lt;/label&gt;\n        &lt;/div&gt;\n        &lt;div class=\"mb-5 col-lg-3 col-sm-12 recurring-cycle-content\"&gt;\n            {{ Form::label('recurringCycle', __('messages.invoice.recurring_cycle').':', ['class' =&gt; 'form-label mb-3']) }}\n            {{ Form::number('recurring_cycle', $invoice-&gt;recurring_cycle, ['class' =&gt; 'form-control', 'id' =&gt; 'recurringCycle', 'autocomplete' =&gt; 'off', 'placeholder'=&gt;'Number of Days for Recurring Cycle']) }}\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;div class=\"mb-0\"&gt;\n    &lt;div class=\"col-12 text-end mb-lg-10 mb-6\"&gt;\n        &lt;button type=\"button\" class=\"btn btn-primary text-start\"\n                id=\"addItem\"&gt; {{ __('messages.invoice.add') }}&lt;/button&gt;\n    &lt;/div&gt;\n    &lt;div class=\"table-responsive\"&gt;\n        &lt;table class=\"table table-striped box-shadow-none mt-4\" id=\"billTbl\"&gt;\n            &lt;thead&gt;\n            &lt;tr class=\"border-bottom fs-7 fw-bolder text-gray-700 text-uppercase\"&gt;\n                &lt;th scope=\"col\"&gt;#&lt;/th&gt;\n                &lt;th scope=\"col\" class=\"required\"&gt;{{ __('messages.product.product') }}&lt;/th&gt;\n                &lt;th scope=\"col\" class=\"required\"&gt;{{ __('messages.invoice.qty') }}&lt;/th&gt;\n                &lt;th scope=\"col\" class=\"required\"&gt;{{ __('messages.product.unit_price') }}&lt;/th&gt;\n                &lt;th scope=\"col\"&gt;{{ __('messages.invoice.tax') }}&lt;/th&gt;\n                &lt;th scope=\"col\" class=\"required\"&gt;{{ __('messages.invoice.amount') }}&lt;/th&gt;\n                &lt;th scope=\"col\" class=\"text-end\"&gt;{{ __('messages.common.action') }}&lt;/th&gt;\n            &lt;/tr&gt;\n            &lt;/thead&gt;\n            &lt;tbody class=\"invoice-item-container\"&gt;\n            @php\n                $i = 1;\n            @endphp\n            @foreach($invoice-&gt;invoiceItems as $invoiceItem)\n                &lt;tr class=\"tax-tr\"&gt;\n                    &lt;td class=\"text-center item-number align-center\"&gt;{{ $i++ }}&lt;/td&gt;\n                    &lt;td class=\"table__item-desc w-25\"&gt;\n                        {{ Form::select('product_id[]', $products, isset($invoiceItem-&gt;product_id)?$invoiceItem-&gt;product_id:$invoiceItem-&gt;product_name??[], ['class' =&gt; 'form-select productId product io-select2', 'required', 'placeholder'=&gt;'Select Product or Enter free text', 'data-control' =&gt; 'select2']) }}\n                        {{ Form::hidden('id[]', $invoiceItem-&gt;id) }}\n                    &lt;/td&gt;\n                    &lt;td class=\"table__qty\"&gt;\n                        {{ Form::number('quantity[]', number_format($invoiceItem-&gt;quantity,2), ['class' =&gt; 'form-control qty ' ,'id'=&gt;'qty','required', 'type' =&gt; 'number', \"min\" =&gt; '0','step'=&gt;'.01','oninput'=&gt;\"validity.valid||(value=value.replace(/[e\\+\\-]/gi,''))\"]) }}\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        {{ Form::number('price[]', $invoiceItem-&gt;price, ['class' =&gt; 'form-control price-input price ','oninput'=&gt;\"validity.valid||(value=value.replace(/[e\\+\\-]/gi,''))\",'min'=&gt;'0','step'=&gt;'.01','required','onKeyPress'=&gt;'if(this.value.length==8) return false;']) }}\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        &lt;select name=\"tax[]\" class='form-select  fw-bold tax io-select2'\n                                data-control='select2' multiple=\"multiple\"&gt;\n                            @foreach($taxes as $tax)\n                                @if(empty($selectedTaxes))\n                                    &lt;option value=\"{{ $tax-&gt;value }}\"\n                                            data-id=\"{{ $tax-&gt;id }}\"&gt;\n                                        {{ $tax-&gt;name }}\n                                    &lt;/option&gt;\n                                @elseif(in_array($tax-&gt;id, $selectedTaxes[$invoiceItem-&gt;id]))\n                                    &lt;option value=\"{{ $tax-&gt;value }}\"\n                                            {{ (in_array($tax-&gt;id, $selectedTaxes[$invoiceItem-&gt;id]) &amp;&amp; in_array($tax-&gt;id, $selectedTaxes[$invoiceItem-&gt;id])) ? 'selected' : '' }}\n                                            data-id=\"{{ $tax-&gt;id }}\"&gt;\n                                        {{ $tax-&gt;name }}\n                                    &lt;/option&gt;\n                                @else\n                                    &lt;option value=\"{{ $tax-&gt;value }}\"\n                                            data-id=\"{{ $tax-&gt;id }}\"&gt;\n                                        {{ $tax-&gt;name }}\n                                    &lt;/option&gt;\n                                @endif\n                            @endforeach\n                        &lt;/select&gt;\n                    &lt;/td&gt;\n                    &lt;td class=\"text-end item-total pt-8 text-nowrap\"&gt;\n                        {{ number_format($invoiceItem-&gt;total, 2) }}\n                    &lt;/td&gt;\n                    &lt;td class=\"text-end\"&gt;\n                        &lt;button type=\"button\" title=\"Delete\"\n                                class=\"btn btn-icon fs-3 text-danger btn-active-color-danger delete-invoice-item\"&gt;\n                            &lt;i class=\"fa-solid fa-trash\"&gt;&lt;/i&gt;\n                        &lt;/button&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n            @endforeach\n            &lt;/tbody&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n    &lt;div class=\"row\"&gt;\n        &lt;div class=\"col-lg-7 col-sm-12 mt-2 mt-lg-0 align-right-for-full-screen\"&gt;\n            &lt;div class=\"mb-2 col-xl-5 col-lg-8 col-sm-12\"&gt;\n                {{ Form::label('discount', __('messages.invoice.discount').(':'), ['class' =&gt; 'form-label mb-1']) }}\n                &lt;div class=\"input-group\"&gt;\n                    {{ Form::number('discount',  isset($invoice) ? $invoice-&gt;discount : 0, ['id'=&gt;'discount','class' =&gt; 'form-control ','oninput'=&gt;\"validity.valid||(value=value.replace(/[e\\+\\-]/gi,''))\",'min'=&gt;'0','value'=&gt;'0','step'=&gt;'.01','pattern'=&gt;\"^\\d*(\\.\\d{0,2})?$\"]) }}\n                    &lt;div class=\"input-group-append\" style=\"width: 210px !important;\"&gt;\n                        {{ Form::select('discount_type', $discount_type, isset($invoice) ? $invoice-&gt;discount_type : 0, ['class' =&gt;'form-select', 'id' =&gt; 'discountType', 'data-control' =&gt;'select2']) }}\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"mb-2 col-xl-5 col-lg-8 col-sm-12\"&gt;\n                {{ Form::label('taxes', __('messages.invoice.tax').(':'),['class' =&gt; 'form-label mb-1']) }}\n                &lt;select name=\"taxes[]\" class='form-select io-select2 fw-bold invoice-taxes'\n                        data-control='select2' multiple=\"multiple\"&gt;\n                    @foreach($taxes as $tax)\n                        &lt;option value=\"{{ $tax-&gt;id }}\" data-tax=\"{{ $tax-&gt;value }}\" {{ in_array($tax-&gt;id, $selectedInvoiceTaxes) ? 'selected' : '' }}&gt;{{ $tax-&gt;name }}&lt;/option&gt;\n                    @endforeach\n                &lt;/select&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"col-xxl-3 col-lg-5 col-md-6 ms-md-auto mt-4 mb-lg-10 mb-6\"&gt;\n            &lt;div class=\"border-top\"&gt;\n                &lt;table class=\"table table-borderless box-shadow-none mb-0 mt-5\"&gt;\n                    &lt;tbody&gt;\n                    &lt;tr&gt;\n                        &lt;td class=\"ps-0\"&gt;{{ __('messages.invoice.sub_total').(':') }}&lt;/td&gt;\n                        &lt;td class=\"text-gray-900 text-end pe-0\"&gt;\n                            @if(!getSettingValue('currency_after_amount'))&lt;span\n                                    class=\"invoice-selected-currency\"&gt;{{ getInvoiceCurrencyIcon($invoice-&gt;currency_id)  }}&lt;/span&gt;@endif\n                            &lt;span id=\"total\" class=\"price\"&gt;\n                                    {{ isset($invoice) ? number_format($invoice-&gt;amount,2) : 0 }}\n                            &lt;/span&gt;\n                            @if(getSettingValue('currency_after_amount'))&lt;span\n                                    class=\"invoice-selected-currency\"&gt;{{ getInvoiceCurrencyIcon($invoice-&gt;currency_id)  }}&lt;/span&gt;@endif\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td class=\"ps-0\"&gt;{{ __('messages.invoice.discount').(':') }}&lt;/td&gt;\n                        &lt;td class=\"text-gray-900 text-end pe-0\"&gt;\n                            @if(!getSettingValue('currency_after_amount'))&lt;span\n                                    class=\"invoice-selected-currency\"&gt;{{ getInvoiceCurrencyIcon($invoice-&gt;currency_id)  }}&lt;/span&gt;@endif\n                            &lt;span id=\"discountAmount\"&gt;\n                                @if(isset($invoice) &amp;&amp; $invoice-&gt;discount_type == \\App\\Models\\Invoice::FIXED)\n                                    {{ $invoice-&gt;discount ?? 0 }}\n                                @else\n                                    {{ isset($invoice) ? number_format($invoice-&gt;amount * $invoice-&gt;discount / 100,2) : 0 }}\n                                @endif\n                            &lt;/span&gt;\n                            @if(getSettingValue('currency_after_amount'))&lt;span\n                                    class=\"invoice-selected-currency\"&gt;{{ getInvoiceCurrencyIcon($invoice-&gt;currency_id)  }}&lt;/span&gt;@endif\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td class=\"ps-0\"&gt;{{ __('messages.invoice.total_tax').(':') }}&lt;/td&gt;\n                        &lt;td class=\"text-gray-900 text-end pe-0\"&gt;\n                            @if(!getSettingValue('currency_after_amount'))&lt;span\n                                    class=\"invoice-selected-currency\"&gt;{{ getInvoiceCurrencyIcon($invoice-&gt;currency_id)  }}&lt;/span&gt;@endif\n                            &lt;span id=\"totalTax\"&gt;\n                                    0\n                            &lt;/span&gt;\n                            @if(getSettingValue('currency_after_amount'))&lt;span\n                                    class=\"invoice-selected-currency\"&gt;{{ getInvoiceCurrencyIcon($invoice-&gt;currency_id)  }}&lt;/span&gt;@endif\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td class=\"ps-0\"&gt;{{ __('messages.invoice.total').(':') }}&lt;/td&gt;\n                        &lt;td class=\"text-gray-900 text-end pe-0\"&gt;\n                            @if(!getSettingValue('currency_after_amount'))&lt;span\n                                    class=\"invoice-selected-currency\"&gt;{{ getInvoiceCurrencyIcon($invoice-&gt;currency_id) }}&lt;/span&gt;@endif\n                            &lt;span id=\"finalAmount\"&gt;\n                                    {{ isset($invoice) ? number_format($invoice-&gt;amount - ($invoice-&gt;amount * $invoice-&gt;discount / 100),2) : 0 }}\n                                &lt;/span&gt;\n                            @if(getSettingValue('currency_after_amount'))&lt;span\n                                    class=\"invoice-selected-currency\"&gt;{{ getInvoiceCurrencyIcon($invoice-&gt;currency_id) }}&lt;/span&gt;@endif\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;/tbody&gt;\n                &lt;/table&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;br&gt;\n    &lt;div class=\"row justify-content-left\"&gt;\n        &lt;div class=\"col-lg-12 col-md-12 col-sm-12 end justify-content-left mb-sm-0 mb-5\"&gt;\n            &lt;button type=\"button\" class=\"btn btn-primary note\" id=\"addNote\"&gt;\n                &lt;i class=\"fas fa-plus\"&gt;&lt;/i&gt; {{ __('messages.invoice.add_note_term') }}\n            &lt;/button&gt;\n            &lt;button type=\"button\" class=\"btn btn-danger note\" id=\"removeNote\"&gt;\n                &lt;i class=\"fas fa-minus\"&gt;&lt;/i&gt; {{ __('messages.invoice.remove_note_term') }}\n            &lt;/button&gt;\n        &lt;/div&gt;\n        &lt;div class=\"col-lg-6 mb-0 mb-sm-5 mt-0 mt-sm-5\" id=\"noteAdd\"&gt;\n            {{ Form::label('note', __('messages.invoice.note').(':'),['class' =&gt; 'form-label fs-6 mb-3']) }}\n            {{ Form::textarea('note',isset($invoice) ? $invoice-&gt;note : null,['class'=&gt;'form-control','id'=&gt;'note','rows'=&gt;'5']) }}\n        &lt;/div&gt;\n        &lt;div class=\"col-lg-6 mt-5 mb-5\" id=\"termRemove\"&gt;\n            {{ Form::label('term', __('messages.invoice.terms').(':'),['class' =&gt; 'form-label fs-6 mb-3']) }}\n            {{ Form::textarea('term',isset($invoice) ? $invoice-&gt;term : null,['class'=&gt;'form-control','id'=&gt;'term','rows'=&gt;'5']) }}\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;!-- Total Amount Field --&gt;\n{{ Form::hidden('amount', isset($invoice) ? number_format($invoice-&gt;amount - ($invoice-&gt;amount * $invoice-&gt;discount / 100),2) : 0, ['class' =&gt; 'form-control', 'id' =&gt; 'total_amount']) }}\n\n&lt;!-- Final Amount Field --&gt;\n{{ Form::hidden('final_amount',isset($invoice) ? $invoice-&gt;final_amount : 0, ['class' =&gt; 'form-control', 'id' =&gt; 'finalTotalAmt']) }}\n\n&lt;!-- Submit Field --&gt;\n&lt;div class=\"float-end\"&gt;\n    &lt;div class=\"form-group col-sm-12\"&gt;\n        &lt;button type=\"button\" name=\"save\" class=\"btn btn-primary mx-1 ms-ms-3 mb-3 mb-sm-0\" id=\"editSave\"\n                data-status=\"0\"\n                value=\"0\"&gt;{{ __('messages.common.save') }}\n        &lt;/button&gt;\n        @if($invoice-&gt;status == \\App\\Models\\Invoice::DRAFT)\n            &lt;button type=\"button\" name=\"save_send\" class=\"btn btn-primary mx-1 ms-ms-3 mb-3 mb-sm-0\"\n                    id=\"editSaveAndSend\" data-status=\"1\"\n                    value=\"1\"&gt;{{ __('messages.common.save_send') }}\n            &lt;/button&gt;\n        @endif\n        &lt;a href=\"{{ route('invoices.index') }}\"\n           class=\"btn btn-secondary btn-active-light-primary\"&gt;{{ __('messages.common.cancel') }}&lt;/a&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>This code represents the form and associated elements for editing an invoice in our application's Blade view. It includes various form fields and controls for modifying the invoice's details. Here's a breakdown of the code:</p> <ol> <li> <p>Client Selection Section:</p> </li> <li> <p>The client selection section allows you to choose a client for the invoice.</p> </li> <li>Depending on the invoice's status (Draft or not), it displays either a client selection dropdown or the selected client's name as plain text.</li> <li>If it's a draft invoice, it displays a dropdown (<code>Form::select</code>) for selecting a client. Otherwise, it shows the selected client's name as text.</li> <li> <p>An <code>input</code> element with the name \"client_id\" is used to store the selected client's ID.</p> </li> <li> <p>Invoice Information Section:</p> </li> <li> <p>This section displays the invoice number and allows the user to change the invoice's status.</p> </li> <li>It shows the invoice number as a header along with an <code>input</code> element (hidden) for storing the invoice ID.</li> <li> <p>A dropdown (<code>Form::select</code>) is used for selecting the invoice's status.</p> </li> <li> <p>Invoice Date, Due Date, and Other Information Section:</p> </li> <li> <p>This part of the form contains various input fields for editing invoice-related details such as invoice date, due date, template selection, currency, and recurring status.</p> </li> <li> <p>It also includes an input for specifying the recurring cycle (the number of days for recurring invoices) if the recurring status is enabled.</p> </li> <li> <p>Invoice Item Table:</p> </li> <li> <p>The code includes a table for listing invoice items (products or services).</p> </li> <li>Each row in the table represents an invoice item and includes fields for selecting products, specifying quantities, prices, taxes, and actions (e.g., delete).</li> <li>The table is populated with data from the existing invoice's items.</li> <li> <p>JavaScript is used to handle actions like adding and deleting items.</p> </li> <li> <p>Discount and Tax Information:</p> </li> <li> <p>This section allows the user to specify a discount amount or percentage and select taxes.</p> </li> <li>The discount input is a <code>Form::number</code> field with options for specifying the discount type.</li> <li> <p>A multi-select dropdown is used for selecting taxes associated with the invoice.</p> </li> <li> <p>Summary and Total Amount Section:</p> </li> <li> <p>This section displays a summary of the invoice, including sub-total, discount amount, total tax, and the final total amount.</p> </li> <li> <p>These amounts are calculated based on the entered data and any discounts or taxes selected.</p> </li> <li> <p>Note and Terms Section:</p> </li> <li> <p>Users can add notes and terms related to the invoice.</p> </li> <li>Buttons are provided for adding or removing notes.</li> <li> <p>Textareas are used for entering and displaying notes and terms.</p> </li> <li> <p>Hidden Fields:</p> </li> <li> <p>Several hidden fields store calculated amounts and other data for use when saving the invoice.</p> </li> <li> <p>These hidden fields include the total amount, final total amount, and other metadata.</p> </li> <li> <p>Form Submission Buttons:</p> </li> <li>Buttons for saving and optionally sending the invoice are included at the bottom of the form.</li> <li>The button labels depend on the invoice's status. If it's a draft invoice, there is an option to \"Save &amp; Send.\"</li> </ol> <p>Overall, this Blade view provides a comprehensive form for editing invoice details, including client selection, invoice item management, tax and discount configuration, and additional notes and terms. The form handles both the display of existing invoice data and the submission of modified data to update the invoice.</p>"},{"location":"Admin/invoices/#show-invoice","title":"Show invoice","text":"<p>The view of the 'show invoice' page located in ressources&gt;views&gt;show&gt;show.blade.php.</p> <pre><code>@extends('layouts.app')\n@section('title')\n    {{ __('messages.invoice.invoice_details')}}\n@endsection\n@section('header_toolbar')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-md-flex align-items-center justify-content-between mb-5\"&gt;\n            &lt;h1 class=\"mb-0\"&gt;@yield('title')&lt;/h1&gt;\n            &lt;div class=\"text-end mt-4 mt-md-0\"&gt;\n                    &lt;a href=\"{{ route('invoices.edit', ['invoice' =&gt; $invoice-&gt;id]) }}\" data-turbo=\"false\"\n                       class=\"btn btn-primary me-4\"&gt;{{__('messages.common.edit')}}&lt;/a&gt;\n                &lt;a href=\"{{ url()-&gt;previous() }}\"\n                   class=\"btn btn-outline-primary\"&gt;{{ __('messages.common.back') }}&lt;/a&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n@endsection\n@section('content')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-flex flex-column\"&gt;\n            @include('flash::message')\n            @include('invoices.show_fields',['isPublicView'=&gt; true])\n        &lt;/div&gt;\n    &lt;/div&gt;\n    @include('transactions.payment-notes-modal')\n@endsection\n@section('scripts')\n    &lt;script src=\"{{ asset('assets/js/invoice/invoice_payment_history.js') }}\"&gt;&lt;/script&gt;\n    &lt;script src=\"{{ asset('assets/js/invoice/invoice_send.js') }}\"&gt;&lt;/script&gt;\n@endsection\n</code></pre> <p>This Blade view represents the display of invoice details our application. Here's a breakdown of the code:</p> <ol> <li> <p>Page Title:</p> </li> <li> <p>Sets the title of the page to \"Invoice Details\" or a localized equivalent.</p> </li> <li> <p>Header Toolbar:</p> </li> <li> <p>The header toolbar contains navigation links and buttons.</p> </li> <li>It includes a \"Back\" button that allows the user to navigate back to the previous page.</li> <li> <p>If the <code>$invoice</code> is editable (e.g., in a draft status), it also includes an \"Edit\" button, linking to the invoice editing page.</p> </li> <li> <p>Content Section:</p> </li> <li> <p>The main content section of the page is contained within a container (<code>&lt;div class=\"container-fluid\"&gt;</code>).</p> </li> <li>It includes a flex column layout and displays any flash messages (notifications) that may be present.</li> <li> <p>The <code>@include('invoices.show_fields',['isPublicView'=&gt; true])</code> directive is used to include a partial view called \"show_fields,\" which contains the actual invoice details to be displayed.</p> </li> <li> <p>Payment Notes Modal:</p> </li> <li> <p>There's an <code>@include</code> directive for including a modal view named \"payment-notes-modal.\" This modal is used to display additional payment-related notes or information.</p> </li> <li> <p>Scripts:</p> </li> <li>JavaScript files are included at the end of the view using the <code>@section('scripts')</code> directive.</li> <li>Two JavaScript files are included: \"invoice_payment_history.js\" and \"invoice_send.js.\" These scripts are responsible for handling payment history and invoice sending functionality.</li> </ol> <p>Overall, this Blade view provides a user-friendly display of invoice details, including the ability to navigate back to the previous page and, if applicable, edit the invoice. It also includes scripts for enhancing the user experience by handling payment history and sending functionality.</p> <p>invoices.Show_fields.blade.php :</p> <pre><code>@php\n    $auth =  Auth::check();\n    $itemTaxesAmount = $invoice-&gt;amount + array_sum($totalTax);\n    $invoiceTaxesAmount = ($itemTaxesAmount * $invoice-&gt;invoiceTaxes-&gt;sum('value') / 100);\n@endphp\n&lt;div&gt;\n    @if($auth &amp;&amp; $isPublicView)\n        &lt;div class=\"d-flex overflow-auto h-55px\"&gt;\n            &lt;ul class=\"nav nav-tabs mb-5 pb-1 overflow-auto flex-nowrap text-nowrap\"&gt;\n                &lt;li class=\"nav-item position-relative me-7 mb-3\" role=\"presentation\"&gt;\n                    &lt;button class=\"nav-link active p-0\" id=\"overview-tab\" data-bs-toggle=\"tab\"\n                            data-bs-target=\"#overview\"\n                            type=\"button\" role=\"tab\" aria-controls=\"overview\" aria-selected=\"true\"&gt;\n                        {{ __('messages.invoice.overview') }}\n                    &lt;/button&gt;\n                &lt;/li&gt;\n                @if($invoice-&gt;parentInvoice)\n                    &lt;li class=\"nav-item position-relative me-7 mb-3\" role=\"presentation\"&gt;\n                        &lt;button class=\"nav-link p-0\" id=\"parentInvoices-tab\" data-bs-toggle=\"tab\"\n                                data-bs-target=\"#parentInvoiceDetail\"\n                                type=\"button\" role=\"tab\" aria-controls=\"parentInvoiceDetail\" aria-selected=\"false\"&gt;\n                            {{ __('messages.invoice.parent_invoice') }}\n                        &lt;/button&gt;\n                    &lt;/li&gt;\n                @endif\n                &lt;li class=\"nav-item position-relative me-7 mb-3\" role=\"presentation\"&gt;\n                    &lt;button class=\"nav-link p-0\" id=\"note_terms-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#note_terms\"\n                            type=\"button\" role=\"tab\" aria-controls=\"note_terms\" aria-selected=\"false\"&gt;\n                        {{ __('messages.invoice.note_terms') }}\n                    &lt;/button&gt;\n                &lt;/li&gt;\n                &lt;li class=\"nav-item position-relative me-7 mb-3\" role=\"presentation\"&gt;\n                    &lt;button class=\"nav-link p-0\" id=\"paymentHistory-tab\" data-bs-toggle=\"tab\"\n                            data-bs-target=\"#paymentHistory\"\n                            type=\"button\" role=\"tab\" aria-controls=\"paymentHistory\" aria-selected=\"false\"&gt;\n                        {{ __('messages.invoice.payment_history') }}\n                    &lt;/button&gt;\n                &lt;/li&gt;\n                @if($invoice-&gt;child_invoices_count &gt; 0)\n                    &lt;li class=\"nav-item position-relative me-7 mb-3\" role=\"presentation\"&gt;\n                        &lt;button class=\"nav-link p-0\" id=\"recurringInvoices-tab\" data-bs-toggle=\"tab\"\n                                data-bs-target=\"#recurringInvoices\"\n                                type=\"button\" role=\"tab\" aria-controls=\"recurringInvoices\" aria-selected=\"false\"&gt;\n                            {{ __('messages.invoice.recurring_invoices') }}\n                        &lt;/button&gt;\n                    &lt;/li&gt;\n                @endif\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    @endif\n    &lt;div class=\"tab-content\" id=\"myTabContent\"&gt;\n        &lt;div class=\"tab-pane fade show active\" id=\"overview\" role=\"tabpanel\"&gt;\n            &lt;div class=\"card\"&gt;\n                &lt;div class=\"d-flex flex-column\"&gt;\n                    &lt;div class=\"card-body\"&gt;\n                        &lt;div class=\"row\"&gt;\n                            &lt;div class=\"col-xxl-9\"&gt;\n                                &lt;div class=\"row\"&gt;\n                                    &lt;div class=\"col-lg-4 col-md-6\"&gt;\n                                        &lt;div class=\"d-flex mb-md-10 mb-5\"&gt;\n                                            &lt;div class=\"image image-circle image-lg-small width-100px\"&gt;\n                                                &lt;img src=\"{{ getLogoUrl() }}\" alt=\"user\" class=\"object-contain\"&gt;\n                                            &lt;/div&gt;\n                                            &lt;h3 class=\"ps-7\"&gt;{{ __('messages.invoice.invoice') }}\n                                                #{{ $invoice-&gt;invoice_id }}\n                                            &lt;/h3&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-lg-3 col-md-3 col-6\"&gt;\n                                        &lt;div class=\"d-flex flex-column mb-md-10 mb-5 mt-3 mt-md-0\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.invoice_date').':' }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-800\"&gt;{{ \\Carbon\\Carbon::parse($invoice-&gt;invoice_date)-&gt;translatedFormat(currentDateFormat()) }}&lt;/span&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-lg-3 col-md-3 col-6\"&gt;\n                                        &lt;div class=\"d-flex flex-column mb-md-10 mb-5 mt-3 mt-md-0\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.due_date').':' }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-800\"&gt;{{ \\Carbon\\Carbon::parse($invoice-&gt;due_date)-&gt;translatedFormat(currentDateFormat()) }}&lt;/span&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-md-2 col-6 mb-3 mb-sm-0\"&gt;\n                                        @if($isPublicView)\n                                            &lt;a target=\"_blank\"\n                                               href=\"{{ route('invoices.pdf',['invoice' =&gt; $invoice-&gt;id]) }}\"\n                                               class=\"btn btn-sm btn-success text-white\"&gt;{{ __('messages.invoice.print_invoice') }}&lt;/a&gt;\n                                        @else\n                                            &lt;a target=\"_blank\"\n                                               href=\"{{ route('public-view-invoice.pdf',['invoice' =&gt; $invoice-&gt;invoice_id]) }}\"\n                                               class=\"btn btn-sm btn-success text-white\"&gt;{{ __('messages.invoice.print_invoice') }}&lt;/a&gt;\n                                        @endif\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-lg-5 col-md-6\"&gt;\n                                        &lt;div class=\"d-flex flex-column mb-md-10 mb-5\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.issue_for').':' }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-800 mb-3\"&gt;{{ $invoice-&gt;client-&gt;user-&gt;full_name }}&lt;/span&gt;\n                                            &lt;p class=\"text-gray-700 fs-4 mb-0\"&gt;\n                                                @if(isset($invoice-&gt;client-&gt;address) &amp;&amp; !empty($invoice-&gt;client-&gt;address))\n                                                    {{ ucfirst($invoice-&gt;client-&gt;address) }}\n                                                @else\n                                                    {{ \"N/A\" }}\n                                                @endif\n                                            &lt;/p&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-md-2 col-md-6\"&gt;\n                                        &lt;div class=\"d-flex flex-column mb-md-10 mb-5\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.issue_by').':' }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-800 mb-3\"&gt;{{ getAppName() }}&lt;/span&gt;\n                                            &lt;p class=\"text-gray-700 fs-4 mb-0\"&gt;\n                                                {!! getSettingValue('company_address') !!}&lt;/p&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-12 table-responsive\"&gt;\n                                        &lt;table class=\"table table-striped box-shadow-none mt-4\"&gt;\n                                            &lt;thead&gt;\n                                            &lt;tr&gt;\n                                                &lt;th scope=\"col\"&gt;{{ __('messages.product.product') }}&lt;/th&gt;\n                                                &lt;th scope=\"col\"&gt;{{ __('messages.invoice.qty') }}&lt;/th&gt;\n                                                &lt;th scope=\"col\" class=\"text-end\"&gt;{{ __('messages.invoice.price') }}&lt;/th&gt;\n                                                &lt;th scope=\"col\"\n                                                    class=\"text-center\"&gt;{{ __('messages.invoice.tax').' (in %)' }}&lt;/th&gt;\n                                                &lt;th scope=\"col\"\n                                                    class=\"text-end\"&gt;{{ __('messages.invoice.amount') }}&lt;/th&gt;\n                                            &lt;/tr&gt;\n                                            &lt;/thead&gt;\n                                            &lt;tbody&gt;\n                                            @foreach($invoice-&gt;invoiceItems as $index =&gt; $invoiceItem)\n                                                &lt;tr&gt;\n                                                    &lt;td class=\"py-4\"&gt;{{ isset($invoiceItem-&gt;product-&gt;name)?$invoiceItem-&gt;product-&gt;name:$invoiceItem-&gt;product_name??'N/A' }}&lt;/td&gt;\n                                                    &lt;td class=\"py-4\"&gt;{{ number_format($invoiceItem-&gt;quantity,2) }}&lt;/td&gt;\n                                                    &lt;td class=\"py-4 text-end min-width-130px\"&gt;{{  isset($invoiceItem-&gt;price) ? getInvoiceCurrencyAmount($invoiceItem-&gt;price,$invoice-&gt;currency_id,true) : 'N/A' }}&lt;/td&gt;\n                                                    &lt;td class=\"py-4 text-center\"&gt;\n                                                        @foreach($invoiceItem-&gt;invoiceItemTax as $keys =&gt; $tax)\n                                                            {{ ($tax-&gt;tax != 0) ? $tax-&gt;tax : 'N/A' }}\n                                                            @if (!$loop-&gt;last)\n                                                                ,\n                                                            @endif\n                                                        @endforeach\n                                                    &lt;/td&gt;\n                                                    &lt;td class=\"py-4 text-end min-width-130px\"&gt;{{ isset($invoiceItem-&gt;total) ? getInvoiceCurrencyAmount($invoiceItem-&gt;total,$invoice-&gt;currency_id,true) : 'N/A' }}&lt;/td&gt;\n                                                &lt;/tr&gt;\n                                            @endforeach\n                                            &lt;/tbody&gt;\n                                        &lt;/table&gt;\n                                    &lt;/div&gt;\n                                    @if(count($invoice-&gt;invoiceTaxes) &gt; 0)\n                                        &lt;div class=\"col-lg-7\"&gt;\n                                            &lt;div class=\"d-flex align-items-center mt-2\"&gt;\n                                                &lt;label for=\"invoice-taxes\"\n                                                       class=\"fs-4 text-gray-600 me-2\"&gt;{{ __('messages.tax_information').':'.' (%)' }}&lt;/label&gt;\n                                            &lt;/div&gt;\n                                            &lt;div class=\"mt-2\"&gt;\n                                                @foreach($invoice-&gt;invoiceTaxes as $tax)\n                                                    &lt;div class=\"mb-1\"&gt;&lt;b&gt;{{ $tax-&gt;value.'%' }}&lt;/b&gt;{{ ' ('. $tax-&gt;name .')' }}&lt;/div&gt;\n                                                @endforeach\n                                            &lt;/div&gt;\n                                        &lt;/div&gt;\n                                    @endif\n                                    &lt;div class=\"col-lg-5 ms-lg-auto mt-4\"&gt;\n                                        &lt;div class=\"border-top\"&gt;\n                                            &lt;table class=\"table table-borderless box-shadow-none mb-0 mt-5\"&gt;\n                                                &lt;tbody&gt;\n                                                &lt;tr&gt;\n                                                    &lt;td class=\"ps-0\"&gt;{{ __('messages.invoice.sub_total').(':') }}&lt;/td&gt;\n                                                    &lt;td class=\"text-gray-900 text-end pe-0\"&gt;{{ isset($invoice-&gt;amount) ? getInvoiceCurrencyAmount($invoice-&gt;amount,$invoice-&gt;currency_id,true) : 'N/A' }}&lt;/td&gt;\n                                                &lt;/tr&gt;\n                                                &lt;tr&gt;\n                                                    &lt;td class=\"ps-0\"&gt;{{ __('messages.invoice.discount').(':') }}&lt;/td&gt;\n                                                    @php $percentageDiscount = ($itemTaxesAmount + $invoiceTaxesAmount); @endphp\n                                                    &lt;td class=\"text-gray-900 text-end pe-0\"&gt;\n                                                        @if($invoice-&gt;discount == 0 || !isset($invoice))\n                                                            &lt;span&gt;N/A&lt;/span&gt;\n                                                        @else\n                                                            @if( $invoice-&gt;discount_type == \\App\\Models\\Invoice::FIXED)\n                                                                {{ getInvoiceCurrencyAmount($invoice-&gt;discount,$invoice-&gt;currency_id,true) }}\n                                                            @else\n                                                                {{ getInvoiceCurrencyAmount($percentageDiscount * $invoice-&gt;discount / 100,$invoice-&gt;currency_id,true)}}\n                                                            @endif\n                                                        @endif\n                                                    &lt;/td&gt;\n                                                &lt;/tr&gt;\n                                                &lt;tr&gt;\n                                                    &lt;td class=\"ps-0\"&gt;{{ __('messages.invoice.tax').(':') }}&lt;/td&gt;\n                                                    @php $totalTaxes = (array_sum($totalTax) + $invoiceTaxesAmount)  @endphp\n                                                    &lt;td class=\"text-gray-900 text-end pe-0\"&gt;\n                                                        {!!   (numberFormat($totalTaxes) != 0 )\n                                                          ? getInvoiceCurrencyAmount($totalTaxes,$invoice-&gt;currency_id,true) :'N/A' !!}\n                                                    &lt;/td&gt;\n                                                &lt;/tr&gt;\n                                                &lt;tr&gt;\n                                                    &lt;td class=\"ps-0\"&gt;{{ __('messages.invoice.total').(':') }}&lt;/td&gt;\n                                                    &lt;td class=\"text-gray-900 text-end pe-0\"&gt;\n                                                        {{ getInvoiceCurrencyAmount($invoice-&gt;final_amount,$invoice-&gt;currency_id,true) }}\n                                                    &lt;/td&gt;\n                                                &lt;/tr&gt;\n                                                &lt;/tbody&gt;\n                                            &lt;/table&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"col-xxl-3 mb-5 mb-lg-0\"&gt;\n                                &lt;div class=\"bg-gray-100 rounded-15 p-md-7 p-5 h-100 mt-xxl-0 mt-5 col-xxl-9 ms-xxl-auto w-100\"&gt;\n                                    &lt;div class=\"mb-8\"&gt;\n                                        @if($invoice-&gt;status == \\App\\Models\\Invoice::UNPAID)\n                                            &lt;span class=\"badge bg-light-danger\"&gt;Pending Payment&lt;/span&gt;\n                                        @elseif($invoice-&gt;status == \\App\\Models\\Invoice::PAID)\n                                            &lt;span class=\"badge bg-light-success me-2\"&gt;Paid&lt;/span&gt;\n                                        @elseif($invoice-&gt;status == \\App\\Models\\Invoice::PARTIALLY)\n                                            &lt;span class=\"badge bg-light-primary\"&gt;Partially Paid&lt;/span&gt;\n                                        @elseif($invoice-&gt;status == \\App\\Models\\Invoice::DRAFT)\n                                            &lt;span class=\"badge bg-light-warning me-5\"&gt;Draft&lt;/span&gt;\n                                        @elseif($invoice-&gt;status == \\App\\Models\\Invoice::OVERDUE)\n                                            &lt;span class=\"badge bg-light-danger\"&gt;Overdue&lt;/span&gt;\n                                        @elseif($invoice-&gt;status == \\App\\Models\\Invoice::PROCESSING)\n                                            &lt;span class=\"badge bg-light-primary\"&gt;Processing&lt;/span&gt;\n                                        @endif\n                                        @if($invoice-&gt;status == \\App\\Models\\Invoice::DRAFT)\n                                            &lt;button class=\"btn btn-success send-btn btn-sm\"\n                                                    data-id=\"{{ $invoice-&gt;id }}\"&gt;Send\n                                            &lt;/button&gt;\n                                        @endif\n                                    &lt;/div&gt;\n\n                                    &lt;h3 class=\"mb-5\"&gt;{{ __('messages.invoice.client_overview') }}&lt;/h3&gt;\n                                    &lt;div class=\"row\"&gt;\n                                        &lt;div class=\"col-xxl-12 col-lg-4 col-sm-6 d-flex flex-column mb-xxl-7 mb-lg-0 mb-4\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.client_name') }}&lt;/label&gt;\n                                            @if($auth)\n                                                &lt;a href=\"{{ route('clients.show', ['client' =&gt; $invoice-&gt;client-&gt;id]) }}\"\n                                                   class=\"link-primary text-decoration-none\"&gt;{{ $invoice-&gt;client-&gt;user-&gt;full_name }}&lt;/a&gt;\n\n                                            @else\n                                                &lt;a href=\"#\"\n                                                   class=\"link-primary fs-4 text-decoration-none\"&gt;{{ $invoice-&gt;client-&gt;user-&gt;full_name }}&lt;/a&gt;\n                                            @endif\n                                        &lt;/div&gt;\n                                        &lt;div class=\"col-xxl-12 col-lg-4 col-sm-6 d-flex flex-column mb-xxl-7 mb-lg-0 mb-4\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.client_email') }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-900\"&gt;{{ $invoice-&gt;client-&gt;user-&gt;email }}&lt;/span&gt;\n                                        &lt;/div&gt;\n                                        &lt;div class=\"col-xxl-12 col-lg-4 col-sm-6 d-flex flex-column mb-xxl-7\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.paid_amount') }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-900\"&gt;{{ getInvoiceCurrencyAmount(getInvoicePaidAmount($invoice-&gt;id),$invoice-&gt;currency_id,true) }}&lt;/span&gt;\n                                        &lt;/div&gt;\n                                        &lt;div class=\"col-xxl-12 col-lg-4 col-sm-6 d-flex flex-column mb-xxl-7\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.remaining_amount') }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-900\"&gt;{{ getInvoiceCurrencyAmount(getInvoiceDueAmount($invoice-&gt;id),$invoice-&gt;currency_id,true) }}\n                                                &lt;/span&gt;\n                                        &lt;/div&gt;\n                                        @if($invoice-&gt;recurring_status == 1)\n                                            &lt;div class=\"col-xxl-12 col-lg-4 col-sm-6 d-flex flex-column mb-xxl-7\"&gt;\n                                                &lt;label for=\"name\"\n                                                       class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.last_recurring_on') }}&lt;/label&gt;\n                                                &lt;span class=\"fs-4 text-gray-900\"&gt;{{ $invoice-&gt;last_recurring_on  ? \\Carbon\\Carbon::parse($invoice-&gt;last_recurring_on)-&gt;translatedFormat(currentDateFormat()) : 'N/A'}}&lt;/span&gt;\n                                            &lt;/div&gt;\n                                            &lt;div class=\"col-xxl-12 col-lg-4 col-sm-6 d-flex flex-column mb-xxl-7\"&gt;\n                                                &lt;label for=\"name\"\n                                                       class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.recurring_cycle') }}&lt;/label&gt;\n                                                &lt;span class=\"fs-4 text-gray-900\"&gt;{{ $invoice-&gt;recurring_cycle }}\n                                                &lt;/span&gt;\n                                            &lt;/div&gt;\n                                        @endif\n                                        @if(!$auth &amp;&amp; $invoice-&gt;status !== \\App\\Models\\Invoice::PAID)\n                                            &lt;a target=\"_blank\"\n                                               href=\"{{ route('invoices.public-payment', ['invoiceId' =&gt; $invoice-&gt;invoice_id]) }}\"\n                                               data-id=\"{{$invoice-&gt;id}}\"\n                                               class=\"btn btn-warning mt-5 payment\"&gt;{{ __('messages.invoice.make_payment') }}&lt;/a&gt;\n                                        @endif\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"tab-pane fade show\" id=\"note_terms\" role=\"tabpanel\"&gt;\n            &lt;div class=\"card\"&gt;\n                &lt;div class=\"card-body pt-5\"&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;div class=\"col-lg-12 mb-5\"&gt;\n                            &lt;div class=\"fw-bold text-gray-600 fs-7\"&gt;{{ __('messages.invoice.note').':' }}&lt;/div&gt;\n                            &lt;div class=\"fs-6\"&gt;{!! $invoice-&gt;note ?? __('messages.invoice.note_not_found') !!}&lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"col-lg-12 mb-5\"&gt;\n                            &lt;div class=\"fw-bold text-gray-600 fs-7\"&gt;{{ __('messages.invoice.terms').':' }}&lt;/div&gt;\n                            &lt;div class=\"fs-6\"&gt;{!! $invoice-&gt;term ?? __('messages.invoice.terms_not_found') !!}&lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"tab-pane fade show\" id=\"paymentHistory\" role=\"tabpanel\"&gt;\n            &lt;div class=\"row\"&gt;\n                &lt;div class=\"col-lg-12 \"&gt;\n                    &lt;livewire:payment-history-table invoiceId=\"{{ $invoice-&gt;id }}\"/&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        @if($invoice-&gt;parentInvoice)\n            &lt;div class=\"tab-pane fade show\" id=\"parentInvoiceDetail\" role=\"tabpanel\" aria-labelledby=\"overview-tab\"&gt;\n                &lt;div class=\"card\"&gt;\n                    &lt;div class=\"card-body\"&gt;\n                        &lt;div class=\"row\"&gt;\n                            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n                                &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.invoice') }}\n                                    :&lt;/label&gt;\n                                &lt;a href=\"{{ route('invoices.show',$invoice-&gt;parentInvoice-&gt;id) }}\" target=\"_blank\"\n                                   class=\"fs-4 text-decoration-none text-primary\"&gt;#{{ $invoice-&gt;parentInvoice-&gt;invoice_id }}&lt;/a&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n                                &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.common.status') }}\n                                    :&lt;/label&gt;\n                                &lt;span class=\"fs-4 text-gray-800\"&gt;{{ $invoice-&gt;parentInvoice-&gt;status_label }}&lt;/span&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n                                &lt;label for=\"name\"\n                                       class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.invoice_date') }}\n                                    :&lt;/label&gt;\n                                &lt;span class=\"fs-4 text-gray-800\"&gt;{{ \\Carbon\\Carbon::parse($invoice-&gt;parentInvoice-&gt;invoice_date)-&gt;translatedFormat(currentDateFormat()) }}&lt;/span&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n                                &lt;label for=\"name\" class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.due_date') }}\n                                    :&lt;/label&gt;\n                                &lt;span class=\"fs-4 text-gray-800\"&gt;{{ \\Carbon\\Carbon::parse($invoice-&gt;parentInvoice-&gt;due_date)-&gt;translatedFormat(currentDateFormat()) }}&lt;/span&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n                                &lt;label for=\"name\"\n                                       class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.paid_amount') }}\n                                    :&lt;/label&gt;\n                                &lt;span class=\"fs-4 text-gray-800\"&gt;{{ getInvoiceCurrencyAmount(getInvoicePaidAmount($invoice-&gt;parentInvoice-&gt;id),$invoice-&gt;parentInvoice-&gt;currency_id,true) }}&lt;/span&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"col-sm-6 d-flex flex-column mb-md-10 mb-5\"&gt;\n                                &lt;label for=\"name\"\n                                       class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.remaining_amount') }}\n                                    :&lt;/label&gt;\n                                &lt;span class=\"fs-4 text-gray-800\"&gt;{{ getInvoiceCurrencyAmount(getInvoiceDueAmount($invoice-&gt;parentInvoice-&gt;id),$invoice-&gt;parentInvoice-&gt;currency_id,true) }}&lt;/span&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        @endif\n        &lt;div class=\"tab-pane fade show\" id=\"recurringInvoices\" role=\"tabpanel\"&gt;\n            &lt;div class=\"row\"&gt;\n                &lt;div class=\"col-lg-12 \"&gt;\n                    &lt;livewire:recurring-invoices-table invoiceId=\"{{ $invoice-&gt;id }}\"/&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>This Blade view represents the display of invoice details in a Laravel application. Here's an explanation of the code:</p> <ol> <li> <p>PHP Section:</p> </li> <li> <p>In this section, several PHP variables are initialized, including <code>$auth</code>, <code>$itemTaxesAmount</code>, and <code>$invoiceTaxesAmount</code>. These variables are used to calculate values and perform logic for displaying invoice details.</p> </li> <li> <p>HTML Structure:</p> </li> <li> <p>The view is structured using HTML and Blade directives.</p> </li> <li> <p>Tab Navigation:</p> </li> <li> <p>If the user is authenticated (<code>$auth</code>) and the view is intended for public display (<code>$isPublicView</code>), a tab navigation menu is displayed. This menu allows users to switch between different sections of the invoice details, such as \"Overview,\" \"Note &amp; Terms,\" \"Payment History,\" and possibly others depending on the invoice's status and related data.</p> </li> <li> <p>Overview Tab:</p> </li> <li> <p>The \"Overview\" tab displays general invoice information, including invoice ID, invoice date, due date, client details, product items, taxes, discounts, and the total amount.</p> </li> <li> <p>Status Badge and Send Button:</p> </li> <li> <p>The invoice's status is displayed as a badge, and a \"Send\" button is shown for invoices in draft status (<code>\\App\\Models\\Invoice::DRAFT</code>).</p> </li> <li> <p>Client Overview:</p> </li> <li> <p>Client-related information is displayed, including the client's name, email, paid amount, and remaining amount. If the invoice is recurring, additional information about the last recurring date and cycle is displayed.</p> </li> <li> <p>Make Payment Button:</p> </li> <li> <p>If the user is not authenticated and the invoice status is not paid (<code>\\App\\Models\\Invoice::PAID</code>), a \"Make Payment\" button is displayed, allowing the user to make a payment.</p> </li> <li> <p>Note &amp; Terms Tab:</p> </li> <li> <p>The \"Note &amp; Terms\" tab displays any notes and terms associated with the invoice.</p> </li> <li> <p>Payment History Tab:</p> </li> <li> <p>The \"Payment History\" tab uses Livewire to load a payment history table for the invoice.</p> </li> <li> <p>Parent Invoice Detail Tab (if applicable):</p> <ul> <li>If the invoice has a parent invoice (<code>$invoice-&gt;parentInvoice</code>), a tab displaying the parent invoice details is shown.</li> </ul> </li> <li> <p>Recurring Invoices Tab:</p> <ul> <li>The \"Recurring Invoices\" tab uses Livewire to load a table of recurring invoices related to the current invoice.</li> </ul> </li> </ol> <p>Overall, this Blade view provides a comprehensive display of invoice details, including general invoice information, client details, payment history, related invoices (if applicable), and more. It also handles conditional rendering of elements based on user authentication and invoice status.</p>"},{"location":"Client/dashboard/","title":"The Client Dashboard","text":""},{"location":"Client/dashboard/#dashboard-url","title":"Dashboard URL","text":"<p>The code bellow creates a route for the The dashboard page, which is accessible at the '/client/dashboard' URL path. The dashboard Page is accessible at: https://invoices.infyom.com/client/dashboard.  The code bellow creates a route for the The dashboard page, which is accessible at the '/client/dashboard' URL path.</p> <pre><code>Route::get('dashboard',\n[Client\\DashboardController::class, 'index'])-&gt;name('client.dashboard');\n</code></pre> <p>the route refers to the method:</p> <pre><code>  public function index(): Factory|View|Application\n    {\n$dashboardData = $this-&gt;dashboardRepository-&gt;getClientDashboardData();\n\nreturn view('client_panel.dashboard.index')-&gt;with($dashboardData);\n}\n</code></pre> <p>This code fetches dashboard data from a repository then renders the view resources&gt;views&gt;client_panel&gt;dashboard&gt;index.blade.php with that data.</p>"},{"location":"Client/dashboard/#the-web-page-title","title":"The web page title","text":"<p>The code bellow allows you to dynamically set the title of the web page using language translation. The translated text (e.g., \"Dashboard\") will be displayed as the title of the page, which helps provide context to users and search engines.</p> <pre><code>@section('title')\n{{ __('messages.dashboard') }}\n@endsection\n</code></pre>"},{"location":"Client/dashboard/#dashboard-components","title":"Dashboard components","text":"<p>The dashboard contains 8 widgets, each widget is a clickable link leading to its own feature.</p>"},{"location":"Client/dashboard/#total-payments","title":"Total Payments","text":"<p>the code bellow creates a visually appealing widget-like component that displays the total payments, along with a user icon and stylized text, within a link. The widget is intended to be a clickable link. it leads to <code>{{ route('client.invoices.index') }}</code> that refers to resources&gt;views&gt;client_panel&gt;invoices&gt;index.blade.php. The styling classes are used to control the layout and appearance of the widget.</p> <pre><code>&lt;div class=\"col-xxl-3 col-xl-4 col-sm-6 widget\"&gt;\n  &lt;a\n    href=\"{{ route('client.invoices.index') }}\"\n    class=\"mb-xl-8 text-decoration-none\"\n  &gt;\n    &lt;div\n      class=\"bg-primary shadow-md rounded-10 p-xxl-10 px-7 py-10 d-flex align-items-center justify-content-between my-3\"\n    &gt;\n      &lt;div\n        class=\"bg-cyan-300 widget-icon rounded-10 d-flex align-items-center justify-content-center\"\n      &gt;\n        &lt;i class=\"fa fa-money-check display-4 card-icon text-white\"&gt;&lt;/i&gt;\n      &lt;/div&gt;\n      &lt;div class=\"text-end text-white\"&gt;\n        &lt;h2 class=\"fs-1-xxl fw-bolder text-white\"&gt;\n          {{getCurrencyAmount($total_payments) }}\n        &lt;/h2&gt;\n        &lt;h3 class=\"mb-0 fs-4 fw-light\"&gt;\n          {{ __('messages.admin_dashboard.total_payments') }}\n        &lt;/h3&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <p>{{ getCurrencyAmount($total_payments) }}: function is used to format and display invoices along with its currency symbol.</p> <pre><code>function getCurrencyAmount($amount, $formatting = false)\n{\nstatic $currencyPosition;\nif (empty($currencyPosition)) {\n$currencyPosition = getSettingValue('currency_after_amount');\n}\n\n$currencySymbol = getCurrencySymbol();\n$formattedAmount = $formatting ? numberFormat($amount) : formatTotalAmount($amount);\nif ($currencyPosition) {\nreturn $formattedAmount.' '.$currencySymbol;\n}\n\nreturn $currencySymbol.' '.$formattedAmount;\n}\n</code></pre> <p>formatTotalAmount($amount):this function take $amount number as a parametre and returns its formatted the function embedded in app&gt;helpers.php file</p> <pre><code>function formatTotalAmount($totalAmount, $precision = 2) {\nif ($totalAmount &lt; 900) {\n// 0 - 900\n$numberFormat = number_format($totalAmount, $precision);\n$suffix = \"\";\n} else {\nif ($totalAmount &lt; 900000) {\n// 0.9k-850k\n$numberFormat = number_format($totalAmount / 1000, $precision);\n$suffix = \"K\";\n} else {\nif ($totalAmount &lt; 900000000) {\n// 0.9m-850m\n$numberFormat = number_format($totalAmount / 1000000, $precision);\n$suffix = \"M\";\n} else {\nif ($totalAmount &lt; 900000000000) {\n// 0.9b-850b\n$numberFormat = number_format($totalAmount / 1000000000, $precision);\n$suffix = \"B\";\n} else {\n// 0.9t+\n$numberFormat = number_format(\n$totalAmount / 1000000000000,\n$precision\n);\n$suffix = \"T\";\n}\n}\n}\n}\n\n// Remove unnecessary zeroes after decimal. \"1.0\" -&gt; \"1\"; \"1.00\" -&gt; \"1\"\n// Intentionally does not affect partials, eg \"1.50\" -&gt; \"1.50\"\nif ($precision &gt; 0) {\n$dotZero = \".\".str_repeat(\"0\", $precision);\n$numberFormat = str_replace($dotZero, \"\", $numberFormat);\n}\n\nreturn $numberFormat.$suffix;\n}\n</code></pre> <p>{{ __('messages.admin_dashboard.total_payments') }}:This code retrieves and displays the translated text for the label \"Total payments\" from the language files.</p>"},{"location":"Client/dashboard/#total-paid","title":"Total paid","text":"<p>the code bellow creates a visually appealing widget-like component that displays the total paid invoices, along with a user icon and stylized text, within a link. The widget is intended to be a clickable link. it leads to <code>{{route('client.invoices.index',['status'=&gt;2]) }}</code> that refers to resources&gt;views&gt;client_panel&gt;invoices&gt;index.blade.php The styling classes are used to control the layout and appearance of the widget.</p> <pre><code>&lt;div class=\"col-xxl-3 col-xl-4 col-sm-6 widget\"&gt;\n  &lt;a\n    href=\"{{ route('client.invoices.index',['status'=&gt;2]) }}\"\n    class=\"mb-xl-8 text-decoration-none\"\n  &gt;\n    &lt;div\n      class=\"bg-success shadow-md rounded-10 p-xxl-10 px-7 py-10 d-flex align-items-center justify-content-between my-3\"\n    &gt;\n      &lt;div\n        class=\"bg-green-300 widget-icon rounded-10 d-flex align-items-center justify-content-center\"\n      &gt;\n        &lt;i class=\"fas fa-money-bill-wave display-4 card-icon text-white\"&gt;&lt;/i&gt;\n      &lt;/div&gt;\n      &lt;div class=\"text-end text-white\"&gt;\n        &lt;h2 class=\"fs-1-xxl fw-bolder text-white\"&gt;\n          {{getCurrencyAmount($paid_amount) }}\n        &lt;/h2&gt;\n        &lt;h3 class=\"mb-0 fs-4 fw-light\"&gt;\n          {{ __('messages.admin_dashboard.total_paid') }}\n        &lt;/h3&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <p>{{getCurrencyAmount($paid_amount) }}: the same functions in https://docummentation.test/client/dashboard/#total-payments , but we give it $paid_amount as a parametres.  {{ __('messages.admin_dashboard.total_paid') }}:This code retrieves and displays the translated text for the label \"Total paid\" from the language files.</p>"},{"location":"Client/dashboard/#total-due","title":"Total due","text":"<p>the code bellow creates a visually appealing widget-like component that displays the total due in invoices, along with a user icon and stylized text, within a link. The widget is intended to be a clickable link. it leads to <code>{{route('client.invoices.index',['status'=&gt;3]) }}</code> that refers to resources&gt;views&gt;client_panel&gt;invoices&gt;index.blade.php The styling classes are used to control the layout and appearance of the widget.</p> <pre><code>&lt;div class=\"col-xxl-3 col-xl-4 col-sm-6 widget\"&gt;\n  &lt;a\n    href=\"{{ route('client.invoices.index',['status'=&gt;3]) }}\"\n    class=\"mb-xl-8 text-decoration-none\"\n  &gt;\n    &lt;div\n      class=\"bg-info shadow-md rounded-10 p-xxl-10 px-7 py-10 d-flex align-items-center justify-content-between my-3\"\n    &gt;\n      &lt;div\n        class=\"bg-blue-300 widget-icon rounded-10 d-flex align-items-center justify-content-center\"\n      &gt;\n        &lt;i class=\"fas fa-credit-card display-4 card-icon text-white\"&gt;&lt;/i&gt;\n      &lt;/div&gt;\n      &lt;div class=\"text-end text-white\"&gt;\n        &lt;h2 class=\"fs-1-xxl fw-bolder text-white\"&gt;\n          {{ getCurrencyAmount($due_amount) }}\n        &lt;/h2&gt;\n        &lt;h3 class=\"mb-0 fs-4 fw-light\"&gt;\n          {{ __('messages.admin_dashboard.total_due') }}\n        &lt;/h3&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <p>{{getCurrencyAmount($due_amount) }}: the same functions in https://docummentation.test/client/dashboard/#total-payments , but we give it $due_amount as a parametres.  {{ __('messages.admin_dashboard.total_due') }}:This code retrieves and displays the translated text for the label \"Total due\" from the language files.</p>"},{"location":"Client/dashboard/#total-invoices","title":"Total invoices","text":"<p>the code bellow creates a visually appealing widget-like component that displays the total paid invoices, along with a user icon and stylized text, within a link. The widget is intended to be a clickable link. it leads to <code>{{ route('client.invoices.index' }}</code> that refers to resources&gt;views&gt;client_panel&gt;invoices&gt;index.blade.php The styling classes are used to control the layout and appearance of the widget.</p> <pre><code>&lt;div class=\"col-xxl-3 col-xl-4 col-sm-6 widget\"&gt;\n  &lt;a\n    href=\"{{ route('client.invoices.index') }}\"\n    class=\"mb-xl-8 text-decoration-none\"\n  &gt;\n    &lt;div\n      class=\"bg-warning shadow-md rounded-10 p-xxl-10 px-7 py-10 d-flex align-items-center justify-content-between my-3\"\n    &gt;\n      &lt;div\n        class=\"bg-yellow-300 widget-icon rounded-10 d-flex align-items-center justify-content-center\"\n      &gt;\n        &lt;i class=\"fas fa-file-invoice display-4 card-icon text-white\"&gt;&lt;/i&gt;\n      &lt;/div&gt;\n      &lt;div class=\"text-end text-white\"&gt;\n        &lt;h2 class=\"fs-1-xxl fw-bolder text-white\"&gt;\n          {{ formatTotalAmount($total_invoices) }}\n        &lt;/h2&gt;\n        &lt;h3 class=\"mb-0 fs-4 fw-light\"&gt;\n          {{ __('messages.admin_dashboard.total_invoices') }}\n        &lt;/h3&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <p>{{ formatTotalAmount($total_invoices) }}:this function take the $total_invoices number as a parametre and returns its formatted. the function embedded in app&gt;helpers.php file.</p> <p>{{ __('messages.admin_dashboard.total_invoices') }}:This code retrieves and displays the translated text for the label \"Total_invoices\" from the language files.</p>"},{"location":"Client/dashboard/#total-paid-invoices","title":"Total paid invoices","text":"<p>the code bellow creates a visually appealing widget-like component that displays the total paid invoices, along with a user icon and stylized text, within a link. The widget is intended to be a clickable link. it leads to <code>{{ route('client.invoices.index',['status'=&gt;2]) }}</code> that refers to resources&gt;views&gt;client_panel&gt;invoices&gt;index.blade.php. The styling classes are used to control the layout and appearance of the widget.</p> <pre><code>&lt;div class=\"col-xxl-3 col-xl-4 col-sm-6 widget\"&gt;\n  &lt;a\n    href=\"{{ route('client.invoices.index',['status'=&gt;2]) }}\"\n    class=\"mb-xl-8 text-decoration-none\"\n  &gt;\n    &lt;div\n      class=\"bg-secondary shadow-md rounded-10 p-xxl-10 px-7 py-10 d-flex align-items-center justify-content-between my-3\"\n    &gt;\n      &lt;div\n        class=\"bg-gray-300 widget-icon rounded-10 d-flex align-items-center justify-content-center\"\n      &gt;\n        &lt;i class=\"fas fa-clipboard-check display-4 card-icon text-dark\"&gt;&lt;/i&gt;\n      &lt;/div&gt;\n      &lt;div class=\"text-end text-dark\"&gt;\n        &lt;h2 class=\"fs-1-xxl fw-bolder text-dark\"&gt;\n          {{ formatTotalAmount($paid_invoices) }}\n        &lt;/h2&gt;\n        &lt;h3 class=\"mb-0 fs-4 fw-light\"&gt;\n          {{ __('messages.admin_dashboard.total_paid_invoices') }}\n        &lt;/h3&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <p>{{ formatTotalAmount($paid_invoices) }}:this function take $paid_invoices number as a parametre and returns its formatted. the function embedded in app&gt;helpers.php file.</p> <p>{{ __('messages.admin_dashboard.total_paid_invoices') }}:This code retrieves and displays the translated text for the label \"Total paid_invoices\" from the language files.</p>"},{"location":"Client/dashboard/#total-unpaid-invoices","title":"Total unpaid invoices","text":"<p>the code bellow creates a visually appealing widget-like component that displays the total unpaid invoices, along with a user icon and stylized text, within a link. The widget is intended to be a clickable link. it leads to <code>{{ route('client.invoices.index'.index',['status'=&gt;1]) }}</code> that refers to resources&gt;views&gt;client_panel&gt;invoices&gt;index.blade.php. The styling classes are used to control the layout and appearance of the widget.</p> <pre><code>&lt;div class=\"col-xxl-3 col-xl-4 col-sm-6 widget\"&gt;\n  &lt;a\n    href=\"{{ route('client.invoices.index',['status'=&gt;1]) }}\"\n    class=\"mb-xl-8 text-decoration-none\"\n  &gt;\n    &lt;div\n      class=\"bg-danger shadow-md rounded-10 p-xxl-10 px-7 py-10 d-flex align-items-center justify-content-between my-3\"\n    &gt;\n      &lt;div\n        class=\"bg-red-300 widget-icon rounded-10 d-flex align-items-center justify-content-center\"\n      &gt;\n        &lt;i\n          class=\"fas fa-exclamation-triangle display-4 card-icon text-white\"\n        &gt;&lt;/i&gt;\n      &lt;/div&gt;\n      &lt;div class=\"text-end text-white\"&gt;\n        &lt;h2 class=\"fs-1-xxl fw-bolder text-white\"&gt;\n          {{ formatTotalAmount($unpaid_invoices) }}\n        &lt;/h2&gt;\n        &lt;h3 class=\"mb-0 fs-4 fw-light\"&gt;\n          {{ __('messages.admin_dashboard.total_unpaid_invoices') }}\n        &lt;/h3&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <p>{{ formatTotalAmount($unpaid_invoices) }}:this function take $unpaid_invoices number as a parametre and returns its formatted. the function embedded in app&gt;helpers.php file.</p> <p>{{ __('messages.admin_dashboard.total_unpaid_invoices') }}:This code retrieves and displays the translated text for the label \"Total unpaid invoices\" from the language files.</p>"},{"location":"Client/invoices/","title":"Invoices","text":""},{"location":"Client/invoices/#route","title":"Route","text":"<p>The routes of invoices section are:</p> <pre><code>  Route::get('invoices',\n        [Client\\InvoiceController::class, 'index'])-&gt;name('client.invoices.index');\n    Route::get('invoices/{invoice}',\n        [Client\\InvoiceController::class, 'show'])-&gt;name('client.invoices.show');\n    Route::get('invoices/{invoice}/pdf',\n        [Client\\InvoiceController::class, 'convertToPdf'])-&gt;name('clients.invoices.pdf');\n</code></pre>"},{"location":"Client/invoices/#controller","title":"Controller","text":"<p>The controller of the 'invoices' page located in app&gt;http&gt;controllers&gt;InvoiceController.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Exports\\AdminInvoicesExport;\nuse App\\Http\\Requests\\CreateInvoiceRequest;\nuse App\\Http\\Requests\\UpdateInvoiceRequest;\nuse App\\Mail\\InvoicePaymentReminderMail;\nuse App\\Models\\Currency;\nuse App\\Models\\Invoice;\nuse App\\Models\\Payment;\nuse App\\Models\\Product;\nuse App\\Repositories\\InvoiceRepository;\nuse App\\Repositories\\PaymentRepository;\nuse Barryvdh\\DomPDF\\Facade as PDF;\nuse Carbon\\Carbon;\nuse Exception;\nuse Illuminate\\Contracts\\Foundation\\Application;\nuse Illuminate\\Contracts\\View\\Factory;\nuse Illuminate\\Contracts\\View\\View;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\RedirectResponse;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\Response;\nuse Illuminate\\Support\\Facades\\App;\nuse Illuminate\\Support\\Facades\\DB;\nuse Illuminate\\Support\\Facades\\Mail;\nuse Laracasts\\Flash\\Flash;\nuse Maatwebsite\\Excel\\Facades\\Excel;\nuse Symfony\\Component\\HttpFoundation\\BinaryFileResponse;\n\nclass InvoiceController extends AppBaseController\n{\n    /** @var InvoiceRepository */\n    public $invoiceRepository;\n\n    public function __construct(InvoiceRepository $invoiceRepo)\n    {\n        $this-&gt;invoiceRepository = $invoiceRepo;\n    }\n\n    /**\n     * @param  Request  $request\n     * @return Application|Factory|View\n     * @throws Exception\n     */\n    public function index(Request $request): View|Factory|Application\n    {\n        $this-&gt;updateInvoiceOverDueStatus();\n        $statusArr = Invoice::STATUS_ARR;\n        $status = $request-&gt;status;\n\n        return view('invoices.index', compact('statusArr', 'status'));\n    }\n\n    /**\n     * Show the form for creating a new resource.\n     *\n     * @return Application|Factory|View\n     */\n    public function create(): View|Factory|Application\n    {\n        $data = $this-&gt;invoiceRepository-&gt;getSyncList();\n        $data['currencies'] = getCurrencies();\n        unset($data['statusArr'][0]);\n\n        return view('invoices.create')-&gt;with($data);\n    }\n\n    /**\n     * @param  CreateInvoiceRequest  $request\n     * @return JsonResponse\n     */\n    public function store(CreateInvoiceRequest $request)\n    {\n        try {\n            DB::beginTransaction();\n            $invoice = $this-&gt;invoiceRepository-&gt;saveInvoice($request-&gt;all());\n            if ($request-&gt;status != Invoice::DRAFT) {\n                $this-&gt;invoiceRepository-&gt;saveNotification($request-&gt;all(), $invoice);\n                DB::commit();\n\n                return $this-&gt;sendResponse($invoice, 'Invoice saved &amp; sent successfully.');\n            }\n            DB::commit();\n        } catch (Exception $e) {\n            DB::rollBack();\n\n            return $this-&gt;sendError($e-&gt;getMessage());\n        }\n\n        return $this-&gt;sendResponse($invoice, 'Invoice saved successfully.');\n    }\n\n    /**\n     * Display the specified resource.\n     *\n     * @param  Invoice  $invoice\n     * @return Application|Factory|View\n     */\n    public function show(Invoice $invoice): View|Factory|Application\n    {\n        $invoiceData = $this-&gt;invoiceRepository-&gt;getInvoiceData($invoice);\n\n        return view('invoices.show')-&gt;with($invoiceData);\n    }\n\n    /**\n     * @param  Invoice  $invoice\n     * @return Application|Factory|View|RedirectResponse\n     */\n    public function edit(Invoice $invoice)\n    {\n        if ($invoice-&gt;status == Invoice::PAID || $invoice-&gt;status == Invoice::PARTIALLY) {\n            Flash::error('Paid invoices can not editable.');\n\n            return redirect()-&gt;route('invoices.index');\n        }\n        $data = $this-&gt;invoiceRepository-&gt;prepareEditFormData($invoice);\n        $data['selectedInvoiceTaxes'] = $invoice-&gt;invoiceTaxes()-&gt;pluck('tax_id')-&gt;toArray();\n        $data['currencies'] = getCurrencies();\n\n        return view('invoices.edit')-&gt;with($data);\n    }\n\n    /**\n     * @param  UpdateInvoiceRequest  $request\n     * @param  Invoice  $invoice\n     * @return JsonResponse\n     */\n    public function update(UpdateInvoiceRequest $request, Invoice $invoice): JsonResponse\n    {\n        $input = $request-&gt;all();\n        try {\n            DB::beginTransaction();\n            $invoice = $this-&gt;invoiceRepository-&gt;updateInvoice($invoice-&gt;id, $input);\n            $changes = $invoice-&gt;getChanges();\n            if ($input['invoiceStatus'] == '1') {\n                if (count($changes) &gt; 0 &amp;&amp; $input['invoiceStatus'] == '1') {\n                    $this-&gt;invoiceRepository-&gt;updateNotification($invoice, $input, $changes);\n                }\n                if ($input['invoiceStatus'] == '1' &amp;&amp; $input['status'] == Invoice::DRAFT) {\n                    $this-&gt;invoiceRepository-&gt;draftStatusUpdate($invoice);\n                }\n                DB::commit();\n\n                return $this-&gt;sendResponse($invoice, 'Invoice updated &amp; sent successfully.');\n            }\n            DB::commit();\n        } catch (Exception $e) {\n            DB::rollBack();\n\n            return $this-&gt;sendError($e-&gt;getMessage());\n        }\n\n        return $this-&gt;sendResponse($invoice, 'Invoice updated successfully.');\n    }\n\n    /**\n     * @param  Invoice  $invoice\n     * @return JsonResponse\n     */\n    public function destroy(Invoice $invoice): JsonResponse\n    {\n        $invoice-&gt;delete();\n\n        return $this-&gt;sendSuccess('Invoice Deleted successfully.');\n    }\n\n    public function getProduct($productId): JsonResponse\n    {\n        $product = Product::pluck('unit_price', 'id')-&gt;toArray();\n\n        return $this-&gt;sendResponse($product, 'Product Price retrieved successfully.');\n    }\n\n    /**\n     * @param $currencyId\n     * @return mixed\n     */\n    public function getInvoiceCurrency($currencyId): mixed\n    {\n        $currency = Currency::whereId($currencyId)-&gt;first()-&gt;icon;\n\n        return $this-&gt;sendResponse($currency, 'Invoice Currency retrieved successfully.');\n    }\n\n    /**\n     * @param  Invoice  $invoice\n     * @return Response\n     */\n    public function convertToPdf(Invoice $invoice): Response\n    {\n        ini_set('max_execution_time', 36000000);\n        $invoice-&gt;load(['client.user', 'invoiceTemplate', 'invoiceItems.product', 'invoiceItems.invoiceItemTax','invoiceTaxes']);\n        $invoiceData = $this-&gt;invoiceRepository-&gt;getPdfData($invoice);\n        $invoiceTemplate = $this-&gt;invoiceRepository-&gt;getDefaultTemplate($invoice);\n        $pdf = PDF::loadView(\"invoices.invoice_template_pdf.$invoiceTemplate\", $invoiceData);\n\n        return $pdf-&gt;stream('invoice.pdf');\n    }\n\n    /**\n     * @param  Invoice  $invoice\n     * @param $status\n     * @return mixed\n     */\n    public function updateInvoiceStatus(Invoice $invoice, $status): mixed\n    {\n        $this-&gt;invoiceRepository-&gt;draftStatusUpdate($invoice);\n\n        return $this-&gt;sendSuccess('Invoice Send successfully.');\n    }\n\n    public function updateInvoiceOverDueStatus()\n    {\n        $invoice = Invoice::whereStatus(Invoice::UNPAID)-&gt;get();\n        $currentDate = Carbon::today()-&gt;format('Y-m-d');\n        foreach ($invoice as $invoices) {\n            if ($invoices-&gt;due_date &lt; $currentDate) {\n                $invoices-&gt;update([\n                    'status' =&gt; Invoice::OVERDUE,\n                ]);\n            }\n        }\n    }\n\n    /**\n     * @param $invoiceId\n     * @return mixed\n     */\n    public function invoicePaymentReminder($invoiceId): mixed\n    {\n        $invoice = Invoice::with(['client.user', 'payments'])-&gt;whereId($invoiceId)-&gt;firstOrFail();\n        $paymentReminder = Mail::to($invoice-&gt;client-&gt;user-&gt;email)-&gt;send(new InvoicePaymentReminderMail($invoice));\n\n        return $this-&gt;sendResponse($paymentReminder, 'Payment reminder mail send successfully.');\n    }\n\n    /**\n     * @return BinaryFileResponse\n     */\n    public function exportInvoicesExcel(): BinaryFileResponse\n    {\n        return Excel::download(new AdminInvoicesExport(), 'invoice-excel.xlsx');\n    }\n\n    /**\n     * @param $invoiceId\n     * @return Application|Factory|View\n     */\n    public function showPublicInvoice($invoiceId): View|Factory|Application\n    {\n        $invoice = Invoice::with('client.user')-&gt;whereInvoiceId($invoiceId)-&gt;firstOrFail();\n        $invoiceData = $this-&gt;invoiceRepository-&gt;getInvoiceData($invoice);\n        $invoiceData['statusArr'] = Invoice::STATUS_ARR;\n        $invoiceData['status'] = $invoice-&gt;status;\n        unset($invoiceData['statusArr'][Invoice::DRAFT]);\n        $invoiceData['paymentType'] = Payment::PAYMENT_TYPE;\n        $invoiceData['paymentMode'] = $this-&gt;invoiceRepository-&gt;getPaymentGateways();\n        $invoiceData['stripeKey'] = getSettingValue('stripe_key');\n        $invoiceData['userLang'] = $invoice-&gt;client-&gt;user-&gt;language;\n\n        return view('invoices.public-invoice.public_view')-&gt;with($invoiceData);\n    }\n\n    public function getPublicInvoicePdf($invoiceId)\n    {\n        $invoice = Invoice::whereInvoiceId($invoiceId)-&gt;firstOrFail();\n        $invoice-&gt;load('client.user', 'invoiceTemplate', 'invoiceItems.product', 'invoiceItems.invoiceItemTax');\n        $invoiceData = $this-&gt;invoiceRepository-&gt;getPdfData($invoice);\n        $invoiceTemplate = $this-&gt;invoiceRepository-&gt;getDefaultTemplate($invoice);\n        $pdf = PDF::loadView(\"invoices.invoice_template_pdf.$invoiceTemplate\", $invoiceData);\n\n        return $pdf-&gt;stream('invoice.pdf');\n    }\n\n    public function showPublicPayment($invoiceId): Factory|View|Application\n    {\n        /** @var PaymentRepository $paymentRepo */\n        $paymentRepo = App::make(PaymentRepository::class);\n\n        /** @var Invoice $invoice */\n        $invoice = Invoice::whereInvoiceId($invoiceId)-&gt;firstOrFail();\n        $totalPayable = $paymentRepo-&gt;getTotalPayable($invoice);\n        $paymentType = Payment::PAYMENT_TYPE;\n        $paymentMode = $this-&gt;invoiceRepository-&gt;getPaymentGateways();\n        $stripeKey = getSettingValue('stripe_key');\n        if (empty($stripeKey)) {\n            $stripeKey = config('services.stripe.key');\n        }\n\n        return view('invoices.public-invoice.payment',\n            compact('paymentType', 'paymentMode', 'totalPayable', 'stripeKey', 'invoice'));\n    }\n\n    public function updateRecurring(Invoice $invoice)\n    {\n        $recurringCycle = empty($invoice-&gt;recurring_cycle) ? 1 : $invoice-&gt;recurring_cycle;\n        $invoice-&gt;update([\n            'recurring_status' =&gt; ! $invoice-&gt;recurring_status,\n            'recurring_cycle' =&gt; $recurringCycle,\n        ]);\n\n        return $this-&gt;sendSuccess('Recurring status updated successfully.');\n    }\n\n    /**\n     * @return Response\n     */\n    public function exportInvoicesPdf(): Response\n    {\n        ini_set('max_execution_time', 3600000000);\n        $data['invoices'] = Invoice::with('client.user', 'payments')-&gt;orderBy('created_at', 'desc')-&gt;get();\n        $pdf = PDF::loadView(\"invoices.export_invoices_pdf\", $data);\n\n        return $pdf-&gt;download('Invoices.pdf');\n    }\n}\n</code></pre> <p>The <code>InvoiceController</code> is a PHP class that serves as a controller in our application. It handles HTTP requests related to invoice management and interacts with the application's models, repositories, and views to perform various actions. Let's break down the key functionalities and methods of this controller:</p> <ol> <li> <p>Namespace: The controller is placed in the <code>App\\Http\\Controllers</code> namespace, which is a standard Laravel convention for organizing controllers.</p> </li> <li> <p>Dependencies: The controller has several dependencies injected via its constructor, including the <code>InvoiceRepository</code>. This allows it to interact with the database and perform various actions related to invoices.</p> </li> <li> <p>Methods:</p> </li> <li> <p><code>index</code>: This method handles the display of a list of invoices. It updates the overdue status of invoices and retrieves a list of statuses for filtering.</p> </li> <li> <p><code>create</code>: This method displays a form for creating a new invoice. It retrieves necessary data like currencies and sync lists.</p> </li> <li> <p><code>store</code>: Handles the creation of a new invoice based on the data submitted in the request. It also handles the sending of notifications if the invoice is not in the draft status.</p> </li> <li> <p><code>show</code>: Displays the details of a specific invoice.</p> </li> <li> <p><code>edit</code>: Displays a form for editing an invoice, provided that the invoice is not paid or partially paid.</p> </li> <li> <p><code>update</code>: Handles the update of an existing invoice. It also manages notifications and the status of the invoice.</p> </li> <li> <p><code>destroy</code>: Deletes an invoice.</p> </li> <li> <p><code>getProduct</code>: Retrieves product prices as a JSON response.</p> </li> <li> <p><code>getInvoiceCurrency</code>: Retrieves the currency of an invoice as a JSON response.</p> </li> <li> <p><code>convertToPdf</code>: Generates a PDF representation of an invoice.</p> </li> <li> <p><code>updateInvoiceStatus</code>: Updates the status of an invoice.</p> </li> <li> <p><code>updateInvoiceOverDueStatus</code>: Updates the overdue status of unpaid invoices.</p> </li> <li> <p><code>invoicePaymentReminder</code>: Sends a payment reminder email to the client associated with an invoice.</p> </li> <li> <p><code>exportInvoicesExcel</code>: Exports invoices to an Excel file.</p> </li> <li> <p><code>showPublicInvoice</code>: Displays a public view of an invoice.</p> </li> <li> <p><code>getPublicInvoicePdf</code>: Generates a PDF for a public invoice.</p> </li> <li> <p><code>showPublicPayment</code>: Displays payment information for a public invoice.</p> </li> <li> <p><code>updateRecurring</code>: Updates the recurring status of an invoice.</p> </li> <li> <p><code>exportInvoicesPdf</code>: Exports invoices to a PDF file.</p> </li> <li> <p>Middleware: The controller uses middleware for authentication and authorization to ensure that only authorized users can access these routes.</p> </li> </ol> <p>Overall, this controller is responsible for managing various aspects of invoices, including their creation, editing, deletion, and display. It also handles exporting invoices to different formats, sending payment reminders, and managing recurring invoices.</p>"},{"location":"Client/invoices/#model","title":"Model","text":"<p>The models related to this controller are :App\\Models\\Currency ,App\\Models\\Invoice , App\\Models\\Payment and App\\Models\\Product .</p>"},{"location":"Client/invoices/#currency-model","title":"Currency Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass Currency extends Model\n{\n    use HasFactory;\n\n    protected $table = 'currencies';\n\n    protected $fillable = ['name', 'icon', 'code'];\n\n    protected $casts = [\n        'name' =&gt; 'string',\n        'icon' =&gt; 'string',\n        'code' =&gt; 'string',\n    ];\n\n    public static $rules = [\n        'name' =&gt; 'required|string|unique:currencies,name',\n        'icon' =&gt; 'required|unique:currencies,icon',\n        'code' =&gt; 'required|min:3|max:3',\n    ];\n}\n</code></pre> <p>The provided code represents a Laravel Eloquent model named <code>Currency</code>. Eloquent is Laravel's implementation of the Active Record pattern, which is used for interacting with database tables. Here's an explanation of this <code>Currency</code> model:</p> <ol> <li> <p>Namespace: The model is defined within the <code>App\\Models</code> namespace, which is a standard Laravel convention for organizing models.</p> </li> <li> <p>Extends Model: This model class extends <code>Illuminate\\Database\\Eloquent\\Model</code>, which means it inherits various features and functionalities from the Eloquent model class.</p> </li> <li> <p>Use of HasFactory Trait: The <code>HasFactory</code> trait is included in this model. It's used to enable Laravel's factory support, which allows you to easily create model instances for testing or seeding the database.</p> </li> <li> <p>Table Name: The <code>protected $table</code> property is set to <code>'currencies'</code>, which specifies the database table associated with this model. In this case, it indicates that the model corresponds to a table named 'currencies' in the database.</p> </li> <li> <p>Fillable Attributes: The <code>protected $fillable</code> property is an array that lists the attributes of the model that are allowed to be mass-assigned. Mass assignment is commonly used when creating or updating records. In this case, the <code>Currency</code> model allows mass assignment for the 'name,' 'icon,' and 'code' attributes.</p> </li> <li> <p>Attribute Casting: The <code>protected $casts</code> property is an array that defines the data types to which specific attributes should be cast when retrieving them from the database. Here, it specifies that the 'name,' 'icon,' and 'code' attributes should be treated as strings.</p> </li> <li> <p>Validation Rules: The <code>public static $rules</code> property defines validation rules for creating or updating <code>Currency</code> instances. These rules are used by Laravel's validation system and can help ensure that the data entered into the model is valid before it is stored in the database. In this case, the rules require that 'name' and 'icon' are unique within the 'currencies' table, and 'code' must be a string with a minimum length of 3 characters and a maximum length of 3 characters.</p> </li> </ol> <p>In summary, the <code>Currency</code> model is used to interact with a database table named 'currencies' and defines the structure and validation rules for currency-related data. It can be used to create, retrieve, update, and delete currency records in the associated database table.</p>"},{"location":"Client/invoices/#invoice-model","title":"Invoice Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Carbon\\Carbon;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsToMany;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Support\\Str;\n\nclass Invoice extends Model\n{\n    use HasFactory;\n\n    public const SELECT_DISCOUNT_TYPE = 0;\n    public const FIXED = 1;\n    public const PERCENTAGE = 2;\n\n    public const DISCOUNT_TYPE = [\n        self::SELECT_DISCOUNT_TYPE =&gt; 'Select Discount Type',\n        self::FIXED =&gt; 'Fixed',\n        self::PERCENTAGE =&gt; 'Percentage',\n    ];\n\n    public const DRAFT = 0;\n    public const UNPAID = 1;\n    public const PAID = 2;\n    public const PARTIALLY = 3;\n    public const OVERDUE = 4;\n    public const STATUS_ALL = 5;\n    public const PROCESSING = 6;\n\n    public const STATUS_ARR = [\n        self::STATUS_ALL =&gt; 'All',\n        self::DRAFT =&gt; 'Draft',\n        self::UNPAID =&gt; 'Unpaid',\n        self::PAID =&gt; 'Paid',\n        self::PARTIALLY =&gt; 'Partially Paid',\n        self::OVERDUE =&gt; 'Overdue',\n        self::PROCESSING =&gt; 'Processing',\n    ];\n\n    public const RECURRING_OFF = 0;\n\n    public const RECURRING_ON = 1;\n\n    public const RECURRING_STATUS_ARR = [\n        self::RECURRING_ON =&gt; 'On',\n        self::RECURRING_OFF =&gt; 'Off',\n    ];\n\n    public const MONTHLY = 1;\n    public const QUARTERLY = 2;\n    public const SEMIANNUALLY = 3;\n    public const ANNUALLY = 4;\n\n    public const RECURRING_ARR = [\n        self::MONTHLY =&gt; 'Monthly',\n        self::QUARTERLY =&gt; 'Quarterly',\n        self::SEMIANNUALLY =&gt; 'Semi Annually',\n        self::ANNUALLY =&gt; 'Annually',\n    ];\n\n    /**\n     * Validation rules\n     *\n     * @var array\n     */\n    public static $rules = [\n        'client_id' =&gt; 'required',\n        'invoice_id' =&gt; 'required|unique:invoices,invoice_id',\n        'invoice_date' =&gt; 'required',\n        'due_date' =&gt; 'required',\n    ];\n\n    public static $messages = [\n        'client_id.required' =&gt; 'The Client field is required.',\n        'invoice_date.required' =&gt; 'The invoice date field is required.',\n        'due_date' =&gt; 'The invoice Due date field is required.',\n    ];\n\n    public $table = 'invoices';\n\n    public $appends = ['status_label'];\n\n    public $fillable = [\n        'client_id',\n        'invoice_date',\n        'due_date',\n        'invoice_id',\n        'currency_id',\n        'amount',\n        'discount_type',\n        'discount',\n        'final_amount',\n        'note',\n        'term',\n        'template_id',\n        'status',\n        'recurring_status',\n        'recurring_cycle',\n        'last_recurring_on',\n        'parent_id',\n    ];\n\n    protected $casts = [\n        'client_id' =&gt; 'integer',\n        'parent_id' =&gt; 'integer',\n        'invoice_date' =&gt; 'date',\n        'due_date' =&gt; 'date',\n        'invoice_id' =&gt; 'string',\n        'currency_id' =&gt; 'integer',\n        'amount' =&gt; 'double',\n        'discount_type' =&gt; 'integer',\n        'discount' =&gt; 'double',\n        'final_amount' =&gt; 'double',\n        'note' =&gt; 'string',\n        'term' =&gt; 'string',\n        'template_id' =&gt; 'integer',\n        'status' =&gt; 'integer',\n        'recurring_status' =&gt; 'integer',\n        'recurring_cycle' =&gt; 'integer',\n        'last_recurring_on' =&gt; 'date',\n        'tax' =&gt; 'double',\n    ];\n\n    public function getStatusLabelAttribute(): string\n    {\n        return self::STATUS_ARR[$this-&gt;status];\n    }\n\n    /**\n     * @return BelongsTo\n     */\n    public function client(): BelongsTo\n    {\n        return $this-&gt;belongsTo(Client::class, 'client_id', 'id');\n    }\n\n    /**\n     * @return HasMany\n     */\n    public function invoiceItems(): HasMany\n    {\n        return $this-&gt;hasMany(InvoiceItem::class);\n    }\n\n    /**\n     * @return string\n     */\n    public static function generateUniqueInvoiceId(): string\n    {\n        $invoiceId = mb_strtoupper(Str::random(6));\n        while (true) {\n            $isExist = self::whereInvoiceId($invoiceId)-&gt;exists();\n            if ($isExist) {\n                self::generateUniqueInvoiceId();\n            }\n            break;\n        }\n\n        return $invoiceId;\n    }\n\n    /**\n     * @return HasMany\n     */\n    public function payments(): HasMany\n    {\n        return $this-&gt;hasMany(Payment::class, 'invoice_id', 'id');\n    }\n\n    /**\n     * @return HasMany\n     */\n    public function AdminPayment(): HasMany\n    {\n        return $this-&gt;hasMany(AdminPayment::class, 'invoice_id', 'id');\n    }\n\n    /**\n     * @return BelongsTo\n     */\n    public function invoiceTemplate(): BelongsTo\n    {\n        return $this-&gt;belongsTo(InvoiceSetting::class, 'template_id', 'id');\n    }\n\n    public function parentInvoice(): BelongsTo\n    {\n        return $this-&gt;belongsTo(self::class, 'parent_id', 'id');\n    }\n\n    public function childInvoices(): HasMany\n    {\n        return $this-&gt;hasMany(self::class, 'parent_id', 'id');\n    }\n\n    /**\n     * @param $value\n     * @return Setting|mixed\n     */\n    public function getCurrencyIdAttribute($value)\n    {\n        if (! empty($value)) {\n            return Currency::where('id', $value)-&gt;pluck('id')-&gt;first();\n        }\n\n        return Currency::where('id', getSettingValue('current_currency'))-&gt;pluck('id')-&gt;first();\n    }\n\n    /**\n     * @param $value\n     */\n    public function setInvoiceDateAttribute($value): void\n    {\n        $this-&gt;attributes['invoice_date'] = Carbon::createFromFormat(currentDateFormat(),\n            $value)-&gt;translatedFormat('Y-m-d');\n    }\n\n    /**\n     * @param $value\n     */\n    public function setDueDateAttribute($value): void\n    {\n        $this-&gt;attributes['due_date'] = Carbon::createFromFormat(currentDateFormat(),\n            $value)-&gt;translatedFormat('Y-m-d');\n    }\n\n    /**\n     * @return BelongsToMany\n     */\n    public function invoiceTaxes(): BelongsToMany\n    {\n        return $this-&gt;belongsToMany(Tax::class,'invoice_taxes');\n    }\n}\n</code></pre> <p>The provided code represents a Laravel Eloquent model named <code>Invoice</code>. This model is used to interact with the 'invoices' database table and represents various attributes and behaviors related to invoices. Let's break down the key aspects of this <code>Invoice</code> model:</p> <ol> <li> <p>Namespace: The model is defined within the <code>App\\Models</code> namespace, which is a standard Laravel convention for organizing models.</p> </li> <li> <p>Extends Model: This model class extends <code>Illuminate\\Database\\Eloquent\\Model</code>, which means it inherits various features and functionalities from the Eloquent model class.</p> </li> <li> <p>Use of HasFactory Trait: The <code>HasFactory</code> trait is included in this model. It's used to enable Laravel's factory support, allowing you to easily create model instances for testing or seeding the database.</p> </li> <li> <p>Constants: The model defines several constant values that represent different aspects of invoices, such as discount types, invoice statuses, recurring statuses, and recurring cycle options. These constants are used to provide meaningful labels and options for invoices.</p> </li> <li> <p>Validation Rules and Messages: The model defines validation rules and messages using the <code>$rules</code> and <code>$messages</code> static properties. These rules and messages are used for data validation when creating or updating invoice records.</p> </li> <li> <p>Table Name: The <code>public $table</code> property is set to 'invoices', indicating that this model is associated with the 'invoices' database table.</p> </li> <li> <p>Appends Attribute: The <code>public $appends</code> property is an array that defines additional attributes that should be included when converting the model to an array or JSON. In this case, it includes a 'status_label' attribute.</p> </li> <li> <p>Fillable Attributes: The <code>public $fillable</code> property is an array that lists the attributes of the model that are allowed to be mass-assigned. Mass assignment is commonly used when creating or updating records. In this case, it allows mass assignment for various invoice-related attributes.</p> </li> <li> <p>Attribute Casting: The <code>protected $casts</code> property is an array that defines the data types to which specific attributes should be cast when retrieving them from the database. It ensures that attributes like dates and numeric values are cast to their appropriate data types.</p> </li> <li> <p>Accessors and Mutators: The model defines accessor methods (<code>getCurrencyIdAttribute</code>, <code>getStatusLabelAttribute</code>) and mutator methods (<code>setInvoiceDateAttribute</code>, <code>setDueDateAttribute</code>) to customize the behavior of attribute access and assignment.</p> </li> <li> <p>Relationships: The model defines several relationships with other Eloquent models, including:</p> <ul> <li><code>client()</code>: Belongs to a <code>Client</code> model.</li> <li><code>invoiceItems()</code>: Has many <code>InvoiceItem</code> models.</li> <li><code>payments()</code>: Has many <code>Payment</code> models.</li> <li><code>AdminPayment()</code>: Has many <code>AdminPayment</code> models.</li> <li><code>invoiceTemplate()</code>: Belongs to an <code>InvoiceSetting</code> model.</li> <li><code>parentInvoice()</code>: Belongs to another <code>Invoice</code> model as a parent invoice.</li> <li><code>childInvoices()</code>: Has many <code>Invoice</code> models as child invoices.</li> <li><code>invoiceTaxes()</code>: Belongs to many <code>Tax</code> models through the 'invoice_taxes' pivot table.</li> </ul> </li> <li> <p>Custom Methods: The model defines custom methods like <code>generateUniqueInvoiceId</code> to generate unique invoice IDs and <code>setInvoiceDateAttribute</code> and <code>setDueDateAttribute</code> to format date attributes.</p> </li> </ol>"},{"location":"Client/invoices/#payment-model","title":"Payment Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Barryvdh\\LaravelIdeHelper\\Eloquent;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Support\\Carbon;\nuse Spatie\\MediaLibrary\\HasMedia;\nuse Spatie\\MediaLibrary\\InteractsWithMedia;\nuse Spatie\\MediaLibrary\\MediaCollections\\Models\\Media;\n\nclass Payment extends Model implements HasMedia\n{\n    use HasFactory, InteractsWithMedia;\n\n    protected $table = 'payments';\n\n    protected $fillable = [\n        'invoice_id', 'amount', 'payment_date', 'payment_mode', 'transaction_id', 'notes', 'is_approved',\n    ];\n\n    protected $casts = [\n        'invoice_id'     =&gt; 'integer',\n        'amount'         =&gt; 'double',\n        'payment_date'   =&gt; 'datetime',\n        'payment_mode'   =&gt; 'integer',\n        'transaction_id' =&gt; 'string',\n        'meta'           =&gt; 'json',\n        'notes'          =&gt; 'string',\n        'user_id'        =&gt; 'integer',\n        'is_approved'    =&gt; 'integer',\n    ];\n\n    public $appends = ['payments_mode'];\n\n    const PAYMENT_ATTACHMENT = 'payment_attachment';\n\n    const FULLPAYMENT = 2;\n    const PARTIALLYPAYMENT = 3;\n\n    const PAYMENT_TYPE = [\n        self::FULLPAYMENT      =&gt; 'Full Payment',\n        self::PARTIALLYPAYMENT =&gt; 'Partially Payment',\n    ];\n\n    const PENDING = 0;\n    const APPROVED = 1;\n    const REJECTED = 2;\n    const STATUS_ALL = 3;\n    const PAID = 'Paid';\n    const PROCESSING = 'Processing';\n    const DENIED = 'Denied';\n    const STATUS_ARR_ALL = 'All';\n\n    const PAYMENT_STATUS = [\n        self::STATUS_ALL =&gt; self::STATUS_ARR_ALL,\n        self::PENDING    =&gt; self::PROCESSING,\n        self::APPROVED   =&gt; self::PAID,\n        self::REJECTED   =&gt; self::DENIED,\n    ];\n\n    const STATUS = [\n        'RECEIVED_AMOUNT' =&gt; 'Received Amount',\n        'PAID_AMOUNT'     =&gt; 'Paid Amount',\n        'DUE_AMOUNT'      =&gt; 'Due Amount',\n    ];\n\n    const MANUAL = 1;\n    const STRIPE = 2;\n    const PAYPAL = 3;\n    const CASH = 4;\n    const RAZORPAY = 5;\n    const ALL = 0;\n\n    const PAYMENT_MODE = [\n        self::ALL      =&gt; 'All',\n        self::MANUAL   =&gt; 'Manual',\n        self::STRIPE   =&gt; 'Stripe',\n        self::PAYPAL   =&gt; 'Paypal',\n        self::CASH     =&gt; 'Cash',\n        self::RAZORPAY =&gt; 'Razorpay',\n    ];\n\n    public static $rules = [\n        'payment_type'       =&gt; 'required',\n        'amount'             =&gt; 'required',\n        'payment_mode'       =&gt; 'required',\n        'payment_attachment' =&gt; 'nullable|mimes:pdf,png,jpeg,jpg',\n    ];\n\n    /**\n     * @return string\n     */\n    public function getPaymentAttachmentAttribute(): string\n    {\n        /** @var Media $media */\n        $media = $this-&gt;getMedia(self::PAYMENT_ATTACHMENT)-&gt;first();\n        if ($media !== null) {\n            return $media-&gt;getFullUrl();\n        }\n\n        return false;\n    }\n\n    /**\n     * @return string\n     */\n    public function getPaymentTypeAttribute(): string\n    {\n        return self::PAYMENT_MODE[$this-&gt;payment_mode];\n    }\n\n    /**\n     * @return string\n     */\n    public function getPaymentsModeAttribute(): string\n    {\n        return self::PAYMENT_MODE[$this-&gt;payment_mode];\n    }\n\n    /**\n     * @return BelongsTo\n     */\n    public function invoice(): BelongsTo\n    {\n        return $this-&gt;belongsTo(Invoice::class);\n    }\n}\n</code></pre> <p>The provided code represents a Laravel Eloquent model named <code>Payment</code>. This model is used to interact with the 'payments' database table and represents various attributes and behaviors related to payments. Let's break down the key aspects of this <code>Payment</code> model:</p> <ol> <li> <p>Namespace: The model is defined within the <code>App\\Models</code> namespace, which is a standard Laravel convention for organizing models.</p> </li> <li> <p>Extends Model: This model class extends <code>Illuminate\\Database\\Eloquent\\Model</code>, which means it inherits various features and functionalities from the Eloquent model class.</p> </li> <li> <p>Use of Traits: The <code>HasFactory</code> and <code>InteractsWithMedia</code> traits are included in this model.</p> </li> <li> <p><code>HasFactory</code> is used to enable Laravel's factory support, allowing you to easily create model instances for testing or seeding the database.</p> </li> <li> <p><code>InteractsWithMedia</code> is used to integrate the model with the Spatie Media Library, which allows you to associate media files (such as payment attachments) with the model.</p> </li> <li> <p>Table Name: The <code>protected $table</code> property is set to 'payments', indicating that this model is associated with the 'payments' database table.</p> </li> <li> <p>Fillable Attributes: The <code>protected $fillable</code> property is an array that lists the attributes of the model that are allowed to be mass-assigned. Mass assignment is commonly used when creating or updating records. In this case, it allows mass assignment for various payment-related attributes such as 'invoice_id,' 'amount,' 'payment_date,' 'payment_mode,' 'transaction_id,' 'notes,' and 'is_approved.'</p> </li> <li> <p>Attribute Casting: The <code>protected $casts</code> property is an array that defines the data types to which specific attributes should be cast when retrieving them from the database. It ensures that attributes like dates, numbers, and JSON fields are cast to their appropriate data types.</p> </li> <li> <p>Appends Attribute: The <code>public $appends</code> property is an array that defines additional attributes that should be included when converting the model to an array or JSON. In this case, it includes a 'payments_mode' attribute.</p> </li> <li> <p>Constants: The model defines constant values that represent different aspects of payments, including payment types, payment statuses, and payment modes.</p> </li> <li> <p>Validation Rules: The model defines validation rules using the <code>$rules</code> static property. These rules are used for data validation when creating or updating payment records.</p> </li> <li> <p>Custom Accessors: The model defines custom accessor methods (<code>getPaymentAttachmentAttribute</code>, <code>getPaymentTypeAttribute</code>, <code>getPaymentsModeAttribute</code>) to customize the behavior of attribute access. These accessors provide formatted URLs for payment attachments and human-readable labels for payment type and mode.</p> </li> <li> <p>Relationships: The model defines a relationship with the <code>Invoice</code> model using the <code>invoice()</code> method, indicating that a payment belongs to an invoice.</p> </li> </ol> <p>Overall, the <code>Payment</code> model provides the structure and functionality to work with payment data in a Laravel application. It allows you to associate payments with invoices, manage payment attributes, and interact with media attachments associated with payments.</p>"},{"location":"Client/invoices/#product-model","title":"Product Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Notifications\\Notifiable;\nuse Spatie\\MediaLibrary\\HasMedia;\nuse Spatie\\MediaLibrary\\InteractsWithMedia;\nuse Spatie\\MediaLibrary\\MediaCollections\\Models\\Media;\n\nclass Product extends Model implements HasMedia\n{\n    use HasFactory, Notifiable, InteractsWithMedia;\n\n    protected $table = 'products';\n\n    protected $fillable = ['name', 'code', 'category_id', 'unit_price', 'description'];\n\n    protected $casts = [\n        'name' =&gt; 'string',\n        'code' =&gt; 'string',\n        'category_id' =&gt; 'integer',\n        'unit_price' =&gt; 'double',\n        'description' =&gt; 'string',\n    ];\n\n    const Image = 'product';\n\n    protected $appends = ['product_image'];\n\n    public static $rules = [\n        'name' =&gt; 'required',\n        'code' =&gt; 'required|alpha_num|min:3|max:6|unique:products,code',\n        'category_id' =&gt; 'required',\n        'unit_price' =&gt; 'required|numeric',\n    ];\n\n    public static $messages = [\n        'code.required' =&gt; 'The product code field is required.',\n        'code.size' =&gt; 'The product code must be 6 characters.',\n        'code.unique' =&gt; 'The product code has already been taken.',\n    ];\n\n    /**\n     * @return string\n     */\n    public function getProductImageAttribute(): string\n    {\n        /** @var Media $media */\n        $media = $this-&gt;getMedia(self::Image)-&gt;first();\n        if (! empty($media)) {\n            return $media-&gt;getFullUrl();\n        }\n\n        return asset('images/default-product.jpg');\n    }\n\n    public function category()\n    {\n        return $this-&gt;hasOne(Category::class, 'id', 'category_id');\n    }\n}\n</code></pre> <p>The provided code represents a Laravel Eloquent model named <code>Product</code>. This model is used to interact with the 'products' database table and represents various attributes and behaviors related to products. Let's break down the key aspects of this <code>Product</code> model:</p> <ol> <li> <p>Namespace: The model is defined within the <code>App\\Models</code> namespace, which is a standard Laravel convention for organizing models.</p> </li> <li> <p>Use of Traits: The <code>HasFactory</code>, <code>Notifiable</code>, and <code>InteractsWithMedia</code> traits are included in this model.</p> </li> <li> <p><code>HasFactory</code> is used to enable Laravel's factory support, allowing you to easily create model instances for testing or seeding the database.</p> </li> <li><code>Notifiable</code> is used to enable notifications for the model.</li> <li> <p><code>InteractsWithMedia</code> is used to integrate the model with the Spatie Media Library, allowing you to associate media files (such as product images) with the model.</p> </li> <li> <p>Table Name: The <code>protected $table</code> property is set to 'products', indicating that this model is associated with the 'products' database table.</p> </li> <li> <p>Fillable Attributes: The <code>protected $fillable</code> property is an array that lists the attributes of the model that are allowed to be mass-assigned. Mass assignment is commonly used when creating or updating records. In this case, it allows mass assignment for various product-related attributes such as 'name,' 'code,' 'category_id,' 'unit_price,' and 'description.'</p> </li> <li> <p>Attribute Casting: The <code>protected $casts</code> property is an array that defines the data types to which specific attributes should be cast when retrieving them from the database. It ensures that attributes like strings, integers, and doubles are cast to their appropriate data types.</p> </li> <li> <p>Media Library Integration: The model integrates with the Spatie Media Library to manage product images. It defines a constant named <code>Image</code> to specify the media collection for product images.</p> </li> <li> <p>Appends Attribute: The <code>protected $appends</code> property is an array that defines additional attributes that should be included when converting the model to an array or JSON. In this case, it includes a 'product_image' attribute, which provides the URL for the product image.</p> </li> <li> <p>Validation Rules and Messages: The model defines validation rules using the <code>$rules</code> static property. These rules are used for data validation when creating or updating product records. Custom validation error messages are also defined using the <code>$messages</code> static property.</p> </li> <li> <p>Custom Accessor: The model defines a custom accessor method (<code>getProductImageAttribute</code>) to customize the behavior of attribute access for the 'product_image' attribute. This accessor provides the URL for the product image associated with the product. If no image is found, it returns a default image URL.</p> </li> <li> <p>Relationships: The model defines a relationship with the <code>Category</code> model using the <code>category()</code> method. It indicates that a product belongs to a category.</p> </li> </ol> <p>Overall, the <code>Product</code> model provides the structure and functionality to work with product data in a Laravel application. It allows you to manage product attributes, associate products with categories, and handle product images using the Spatie Media Library.</p>"},{"location":"Client/invoices/#view","title":"View","text":""},{"location":"Client/invoices/#the-livewire-invoice-table","title":"The livewire: Invoice table","text":"<p>The livewire of the 'client detail invoice table' located in app&gt;http&gt;livewire&gt;ClientInvoiceTable.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Livewire;\n\nuse App\\Models\\Invoice;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Support\\Facades\\Auth;\nuse Rappasoft\\LaravelLivewireTables\\Views\\Column;\n\nclass ClientInvoiceTable extends LivewireTableComponent\n{\n    protected $model = Invoice::class;\n    protected string $tableName = 'invoices';\n    public $showButtonOnHeader = true;\n    public $buttonComponent = 'client_panel.invoices.components.add-button';\n    public bool $showFilterOnHeader = true;\n    public $filterComponent = ['client_panel.invoices.components.filter', Invoice::STATUS_ARR];\n    public $listeners = ['changeInvoiceStatusFilter', 'changeRecurringStatusFilter', 'resetPageTable'];\n    public $status = Invoice::STATUS_ALL;\n\n    public function configure(): void\n    {\n        $this-&gt;setPrimaryKey('id');\n        $this-&gt;setDefaultSort('created_at', 'desc');\n        $this-&gt;setQueryStringStatus(false);\n\n        $this-&gt;setThAttributes(function (Column $column) {\n            if (in_array($column-&gt;getField(), ['id', 'status'])) {\n                return [\n                    'class' =&gt; 'text-center',\n                ];\n            }\n            if ($column-&gt;isField('final_amount')) {\n                return [\n                    'class' =&gt; 'd-flex justify-content-end',\n                ];\n            }\n            if ($column-&gt;isField('amount')) {\n                return [\n                    'class' =&gt; 'text-end',\n                ];\n            }\n\n            return [];\n        });\n\n        $this-&gt;setTdAttributes(function (Column $column, $row, $columnIndex, $rowIndex) {\n            if (in_array($column-&gt;getField(), ['id', 'status'])) {\n                return [\n                    'class' =&gt; 'text-center',\n                ];\n            }\n            if (in_array($column-&gt;getField(), ['final_amount', 'amount'])) {\n                return [\n                    'class' =&gt; 'text-end',\n                ];\n            }\n\n            return [];\n        });\n    }\n\n    public function columns(): array\n    {\n        return [\n            Column::make(__('messages.invoice.invoice_id'), 'invoice_id')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;view('client_panel.invoices.components.invoice-id'),\n            Column::make('invoice_id', 'invoice_id')\n                -&gt;sortable()\n                -&gt;searchable()-&gt;hideIf(1),\n            Column::make('Last Name', 'client.user.last_name')\n                -&gt;sortable()\n                -&gt;searchable()-&gt;hideIf(1),\n            Column::make(__('messages.invoice.invoice_date'), 'invoice_date')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('invoices.components.invoice-due-date')\n                        -&gt;withValue([\n                            'invoice-date' =&gt; $row-&gt;invoice_date,\n                        ]);\n                }),\n            Column::make(__('messages.invoice.due_date'), 'due_date')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('invoices.components.invoice-due-date')\n                        -&gt;withValue([\n                            'due-date' =&gt; $row-&gt;due_date,\n                        ]);\n                }),\n            Column::make(__('messages.invoice.amount'), 'final_amount')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;view('invoices.components.amount'),\n            Column::make(__('messages.invoice.transactions'), 'amount')\n                -&gt;searchable()\n                -&gt;view('invoices.components.transaction'),\n            Column::make(__('messages.common.status'), 'status')\n                -&gt;searchable()\n                -&gt;view('invoices.components.transaction-status'),\n            Column::make(__('messages.common.action'), 'id')\n                -&gt;view('livewire.client-invoice-action-button'),\n\n        ];\n    }\n\n    public function builder(): Builder\n    {\n        $clientId = Auth::user()-&gt;client-&gt;id;\n        $invoiceQuery = Invoice::with(['client.user', 'payments'])-&gt;where('invoices.client_id', $clientId)\n            -&gt;where('invoices.status', '!=', Invoice::DRAFT)\n            -&gt;select('invoices.*');\n\n        $invoiceQuery-&gt;when($this-&gt;status != '' &amp;&amp; $this-&gt;status != Invoice::STATUS_ALL, function ($query) {\n            return $query-&gt;where('invoices.status', $this-&gt;status);\n        });\n\n        return $invoiceQuery;\n    }\n\n    /**\n     * @param $status\n     */\n    public function changeInvoiceStatusFilter($status)\n    {\n        $this-&gt;status = $status;\n        $this-&gt;setBuilder($this-&gt;builder());\n    }\n}\n</code></pre> <p>This code defines a Livewire component called <code>ClientInvoiceTable</code> used for managing and displaying client invoices in our application. Here's a brief explanation of the key parts of the code:</p> <ol> <li> <p>Model and Table Configuration:</p> </li> <li> <p>The <code>$model</code> property specifies that this component works with the <code>Invoice</code> model.</p> </li> <li>The <code>$tableName</code> property defines the table name for the component.</li> <li> <p>Various properties like <code>$showButtonOnHeader</code>, <code>$buttonComponent</code>, <code>$showFilterOnHeader</code>, and <code>$filterComponent</code> control the appearance of buttons and filters in the table header.</p> </li> <li> <p>Listeners:</p> </li> <li> <p>The <code>$listeners</code> property specifies which Livewire events this component listens for. These events include <code>changeInvoiceStatusFilter</code>, <code>changeRecurringStatusFilter</code>, and <code>resetPageTable</code>.</p> </li> <li> <p>Status Filter:</p> </li> <li> <p>The <code>$status</code> property represents the selected invoice status filter, with a default value of <code>Invoice::STATUS_ALL</code>. This filter is used to query invoices based on their status.</p> </li> <li> <p>Configure Method:</p> </li> <li> <p>The <code>configure</code> method sets various configuration options for the Livewire table, such as the primary key, default sorting, and query string handling. It also defines the attributes for <code>&lt;th&gt;</code> and <code>&lt;td&gt;</code> elements in the table columns.</p> </li> <li> <p>Columns Method:</p> </li> <li> <p>The <code>columns</code> method defines the columns for the table. Each column is created using the <code>Column::make</code> method and specifies the field it represents, whether it's sortable or searchable, and how it should be formatted.</p> </li> <li> <p>Builder Method:</p> </li> <li> <p>The <code>builder</code> method defines the query builder used to fetch invoice data. It filters invoices based on the client's ID, status filter, and excludes invoices in draft status.</p> </li> <li> <p>Change Invoice Status Filter Method:</p> </li> <li>The <code>changeInvoiceStatusFilter</code> method updates the <code>$status</code> property based on the selected status filter and sets the builder accordingly.</li> </ol> <p>Overall, this Livewire component is used to create a dynamic and interactive table for displaying client invoices. It provides features for filtering, sorting, and displaying invoice data in a user-friendly way.</p>"},{"location":"Client/invoices/#list-of-invoices","title":"List of invoices","text":"<p>The list of invoices view is located in : resources\\views\\clients_panel\\invoice\\index.blade.php.</p> <pre><code> @extends('client_panel.layouts.app')\n@section('title')\n    Invoices\n@endsection\n@section('content')\n&lt;div class=\"container-fluid\"&gt;\n    &lt;div class=\"d-flex flex-column \"&gt;\n        @include('flash::message')\n        &lt;livewire:client-invoice-table/&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n    {{ Form::hidden('status', $status,['id' =&gt; 'status']) }}\n@endsection\n</code></pre> <p>Here's a brief explanation of its contents:</p> <ol> <li> <p><code>@extends('client_panel.layouts.app')</code>: This line extends a layout named 'app' from the 'client_panel.layouts' directory. It means that this view inherits the structure and layout defined in the 'app' layout.</p> </li> <li> <p><code>@section('title')</code>: This section directive defines the title of the page, which appears within the HTML <code>&lt;title&gt;</code> tag. In this case, it sets the title to \"Invoices.\"</p> </li> <li> <p><code>@section('content')</code>: This section directive marks the beginning of the main content section of the page.</p> </li> <li> <p><code>&lt;div class=\"container-fluid\"&gt;</code>: This <code>&lt;div&gt;</code> element with the class \"container-fluid\" is used to create a responsive container for the page content.</p> </li> <li> <p><code>&lt;div class=\"d-flex flex-column \"&gt;</code>: This <code>&lt;div&gt;</code> element uses Flexbox to create a flexible column layout. It contains the main content of the page.</p> </li> <li> <p><code>@include('flash::message')</code>: This includes a Flash message component or partial view. Flash messages are typically used to display temporary messages to the user, often for notifications or alerts.</p> </li> <li> <p><code>&lt;livewire:client-invoice-table/&gt;</code>: This line includes a Livewire component named \"client-invoice-table.\" Livewire is a Laravel library for building interactive user interfaces. This component is responsible for displaying client invoice data.</p> </li> <li> <p><code>{{ Form::hidden('status', $status,['id' =&gt; 'status']) }}</code>: This code generates a hidden form input field with the name \"status\" and a value equal to the <code>$status</code> variable. The <code>'id' =&gt; 'status'</code> option specifies the HTML ID attribute for this input field.</p> </li> <li> <p><code>@endsection</code>: This section directive marks the end of the main content section.</p> </li> </ol> <p>In summary, this Blade template extends a layout, sets the page title, includes Flash messages, and displays a Livewire component for managing client invoices. It also includes a hidden form input field with the status information.</p>"},{"location":"Client/invoices/#show-invoice","title":"Show invoice","text":"<p>The Show invoice view is located in : resources\\views\\clients_panel\\invoices\\show.blade.php.</p> <pre><code>@extends('client_panel.layouts.app')\n@section('title')\n    {{ __('messages.invoice.invoice_details')}}\n@endsection\n@section('header_toolbar')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-md-flex align-items-center justify-content-between mb-5\"&gt;\n            &lt;h1 class=\"mb-0\"&gt;@yield('title')&lt;/h1&gt;\n            &lt;div class=\"text-end mt-4 mt-md-0\"&gt;\n                &lt;a href=\"{{ url()-&gt;previous() }}\"\n                   class=\"btn btn-outline-primary\"&gt;{{ __('messages.common.back') }}&lt;/a&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    @include('transactions.payment-notes-modal')\n@endsection\n@section('content')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-flex flex-column\"&gt;\n            @include('flash::message')\n            @include('client_panel.invoices.show_fields')\n        &lt;/div&gt;\n    &lt;/div&gt;\n@endsection\n</code></pre> <p>This is a Blade template in our application. Here's a brief explanation of its contents:</p> <ol> <li> <p><code>@extends('client_panel.layouts.app')</code>: This line extends a layout named 'app' from the 'client_panel.layouts' directory. It means that this view inherits the structure and layout defined in the 'app' layout.</p> </li> <li> <p><code>@section('title')</code>: This section directive defines the title of the page. It sets the title to the translation key <code>'messages.invoice.invoice_details'</code>, which is a translated title.</p> </li> <li> <p><code>@section('header_toolbar')</code>: This section directive marks the beginning of the header toolbar section of the page.</p> </li> <li> <p>Within this section, a container is defined with a class \"container-fluid.\"</p> </li> <li> <p>Inside this container, there is a flexbox layout (<code>d-md-flex</code>) that aligns items in the header toolbar. It includes a heading <code>&lt;h1&gt;</code> with the title obtained from the <code>'@yield('title')'</code> directive.</p> </li> <li> <p>Next to the heading, there is a \"Back\" button that links to the previous page using <code>url()-&gt;previous()</code>. This button is styled with the \"btn btn-outline-primary\" classes.</p> </li> <li> <p>The <code>@include('transactions.payment-notes-modal')</code> line includes a Blade partial view named 'payment-notes-modal,' which likely contains additional content or modal elements related to payment notes.</p> </li> <li> <p><code>@section('content')</code>: This section directive marks the beginning of the main content section of the page.</p> </li> <li> <p>Within this section, a container is defined with a class \"container-fluid.\"</p> </li> <li> <p>Inside this container, a flexbox layout (<code>d-flex flex-column</code>) is used to structure the content vertically.</p> </li> <li> <p>Flash messages are included using <code>@include('flash::message')</code>. These are typically used for displaying temporary notifications or alerts.</p> </li> <li> <p>Another partial view named 'show_fields' from the 'client_panel.invoices' directory is included. This view displays the details of the invoice.</p> </li> </ol> <p>client_panel.invoices:</p> <pre><code>@php\n    $itemTaxesAmount = $invoice-&gt;amount + array_sum($totalTax);\n    $invoiceTaxesAmount = ($itemTaxesAmount * $invoice-&gt;invoiceTaxes-&gt;sum('value') / 100);\n@endphp\n&lt;div class=\"d-flex overflow-auto h-55px\"&gt;\n    &lt;ul class=\"nav nav-tabs mb-5 pb-1 overflow-auto flex-nowrap text-nowrap\"&gt;\n        &lt;li class=\"nav-item position-relative me-7 mb-3\" role=\"presentation\"&gt;\n            &lt;button class=\"nav-link active p-0\" id=\"overview-tab\" data-bs-toggle=\"tab\"\n                    data-bs-target=\"#overview\"\n                    type=\"button\" role=\"tab\" aria-controls=\"overview\" aria-selected=\"true\"&gt;\n                {{ __('messages.invoice.overview') }}\n            &lt;/button&gt;\n        &lt;/li&gt;\n        &lt;li class=\"nav-item position-relative me-7 mb-3\" role=\"presentation\"&gt;\n            &lt;button class=\"nav-link p-0\" id=\"note_terms-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#note_terms\"\n                    type=\"button\" role=\"tab\" aria-controls=\"note_terms\" aria-selected=\"false\"&gt;\n                {{ __('messages.invoice.note_terms') }}\n            &lt;/button&gt;\n        &lt;/li&gt;\n        &lt;li class=\"nav-item position-relative me-7 mb-3\" role=\"presentation\"&gt;\n            &lt;button class=\"nav-link p-0\" id=\"paymentHistory-tab\" data-bs-toggle=\"tab\"\n                    data-bs-target=\"#paymentHistory\"\n                    type=\"button\" role=\"tab\" aria-controls=\"paymentHistory\" aria-selected=\"false\"&gt;\n                {{ __('messages.invoice.payment_history') }}\n            &lt;/button&gt;\n        &lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/div&gt;\n&lt;div class=\"tab-content\" id=\"myTabContent\"&gt;\n    &lt;div class=\"tab-pane fade show active\" id=\"overview\" role=\"tabpanel\"&gt;\n        &lt;div class=\"\"&gt;\n            &lt;div class=\"d-flex flex-column\"&gt;\n                &lt;div class=\"card\"&gt;\n                    &lt;div class=\"card-body\"&gt;\n                        &lt;div class=\"row\"&gt;\n                            &lt;div class=\"col-xxl-9\"&gt;\n                                &lt;div class=\"row\"&gt;\n                                    &lt;div class=\"col-lg-4 col-md-6\"&gt;\n                                        &lt;div class=\"d-flex align-items-center mb-md-10 mb-5\"&gt;\n                                            &lt;div class=\"image image-circle image-lg-small width-100px\"&gt;\n                                                &lt;img src=\"{{ getLogoUrl() }}\" alt=\"logo\" class=\"object-contain\"&gt;\n                                            &lt;/div&gt;\n                                            &lt;h3 class=\"ps-7\"&gt;{{__('messages.invoice.invoice')}}\n                                                #{{ $invoice-&gt;invoice_id }}&lt;/h3&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-lg-3 col-md-3 col-6\"&gt;\n                                        &lt;div class=\"d-flex flex-column mb-md-10 mb-5 mt-3 mt-md-0\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.invoice_date').':' }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-800\"&gt;{{ \\Carbon\\Carbon::parse($invoice-&gt;invoice_date)-&gt;translatedFormat(currentDateFormat()) }}&lt;/span&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-lg-3 col-md-3 col-6\"&gt;\n                                        &lt;div class=\"d-flex flex-column mb-md-10 mb-5 mt-3 mt-md-0\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.due_date').':' }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-800\"&gt;{{ \\Carbon\\Carbon::parse($invoice-&gt;due_date)-&gt;translatedFormat(currentDateFormat()) }}&lt;/span&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-md-2 col-6 mb-3 mb-sm-0\"&gt;\n                                        &lt;a target=\"_blank\"\n                                           href=\"{{ route('clients.invoices.pdf',['invoice' =&gt; $invoice-&gt;id]) }}\"\n                                           class=\"btn btn-sm btn-success text-white\"&gt;{{ __('messages.invoice.print_invoice') }}&lt;/a&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-lg-5 col-md-6\"&gt;\n                                        &lt;div class=\"d-flex flex-column mb-md-10 mb-4\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.issue_for').':' }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-800 mb-3\"&gt;{{ $invoice-&gt;client-&gt;user-&gt;full_name }}&lt;/span&gt;\n                                            &lt;p class=\"text-gray-700 fs-4 mb-0\"&gt;\n                                                @if(isset($invoice-&gt;client-&gt;address) &amp;&amp; !empty($invoice-&gt;client-&gt;address))\n                                                    {{ ucfirst($invoice-&gt;client-&gt;address) }}\n                                                @else\n                                                    {{ \"N/A\" }}\n                                                @endif\n                                            &lt;/p&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-md-2 col-md-6\"&gt;\n                                        &lt;div class=\"d-flex flex-column mb-md-10 mb-5\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.issue_by').':' }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-800 mb-3\"&gt;{{ getAppName() }}&lt;/span&gt;\n                                            &lt;p class=\"text-gray-700 fs-4 mb-0\"&gt;\n                                                {!! getSettingValue('company_address') !!}&lt;/p&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-12 table-responsive\"&gt;\n                                        &lt;table class=\"table table-striped box-shadow-none mt-4\"&gt;\n                                            &lt;thead&gt;\n                                            &lt;tr&gt;\n                                                &lt;th scope=\"col\"&gt;{{ __('messages.product.product') }}&lt;/th&gt;\n                                                &lt;th scope=\"col\"&gt;{{ __('messages.invoice.qty') }}&lt;/th&gt;\n                                                &lt;th scope=\"col\" class=\"text-end\"&gt;{{ __('messages.invoice.price') }}&lt;/th&gt;\n                                                &lt;th scope=\"col\"\n                                                    class=\"text-center\"&gt;{{ __('messages.invoice.tax').' (in %)' }}&lt;/th&gt;\n                                                &lt;th scope=\"col\"\n                                                    class=\"text-end\"&gt;{{ __('messages.invoice.amount') }}&lt;/th&gt;\n                                            &lt;/tr&gt;\n                                            &lt;/thead&gt;\n                                            &lt;tbody&gt;\n                                            @foreach($invoice-&gt;invoiceItems as $index =&gt; $invoiceItem)\n                                                &lt;tr&gt;\n                                                    &lt;td class=\"py-4\"&gt;{{ isset($invoiceItem-&gt;product-&gt;name)?$invoiceItem-&gt;product-&gt;name:$invoiceItem-&gt;product_name??'N/A' }}&lt;/td&gt;\n                                                    &lt;td class=\"py-4\"&gt;{{ number_format($invoiceItem-&gt;quantity,2) }}&lt;/td&gt;\n                                                    &lt;td class=\"py-4 text-end min-width-130px\"&gt;{{ isset($invoiceItem-&gt;price) ? getInvoiceCurrencyAmount($invoiceItem-&gt;price,$invoice-&gt;currency_id,true) : 'N/A' }}&lt;/td&gt;\n                                                    &lt;td class=\"py-4 text-center\"&gt;\n                                                        @foreach($invoiceItem-&gt;invoiceItemTax as $keys =&gt; $tax)\n                                                            {{ ($tax-&gt;tax != 0) ? $tax-&gt;tax : 'N/A' }}\n                                                            @if (!$loop-&gt;last)\n                                                                ,\n                                                            @endif\n                                                        @endforeach\n                                                    &lt;/td&gt;\n                                                    &lt;td class=\"py-4 text-end min-width-130px\"&gt;{{ isset($invoiceItem-&gt;total) ? getInvoiceCurrencyAmount($invoiceItem-&gt;total,$invoice-&gt;currency_id,true) : 'N/A' }}&lt;/td&gt;\n                                                &lt;/tr&gt;\n                                            @endforeach\n                                            &lt;/tbody&gt;\n                                        &lt;/table&gt;\n                                    &lt;/div&gt;\n                                    @if(count($invoice-&gt;invoiceTaxes) &gt; 0)\n                                        &lt;div class=\"col-lg-7\"&gt;\n                                            &lt;div class=\"d-flex align-items-center mt-2\"&gt;\n                                                &lt;label for=\"invoice-taxes\"\n                                                       class=\"fs-4 text-gray-600 me-2\"&gt;{{ __('messages.tax_information').':'.' (%)' }}&lt;/label&gt;\n                                            &lt;/div&gt;\n                                            &lt;div class=\"mt-2\"&gt;\n                                                @foreach($invoice-&gt;invoiceTaxes as $tax)\n                                                    &lt;div class=\"mb-1\"&gt;&lt;b&gt;{{ $tax-&gt;value.'%' }}&lt;/b&gt;{{ ' ('. $tax-&gt;name .')' }}&lt;/div&gt;\n                                                @endforeach\n                                            &lt;/div&gt;\n                                        &lt;/div&gt;\n                                    @endif\n                                    &lt;div class=\"col-lg-5 ms-lg-auto mt-4\"&gt;\n                                        &lt;div class=\"border-top\"&gt;\n                                            &lt;table class=\"table table-borderless box-shadow-none mb-0 mt-5\"&gt;\n                                                &lt;tbody&gt;\n                                                &lt;tr&gt;\n                                                    &lt;td class=\"ps-0\"&gt;{{ __('messages.invoice.sub_total').(':') }}&lt;/td&gt;\n                                                    &lt;td class=\"text-gray-900 text-end pe-0\"&gt;{{ isset($invoice-&gt;amount) ? getInvoiceCurrencyAmount($invoice-&gt;amount,$invoice-&gt;currency_id,true) : 'N/A' }}&lt;/td&gt;\n                                                &lt;/tr&gt;\n                                                &lt;tr&gt;\n                                                    &lt;td class=\"ps-0\"&gt;{{ __('messages.invoice.discount').(':') }}&lt;/td&gt;\n                                                    @php $percentageDiscount = ($itemTaxesAmount + $invoiceTaxesAmount); @endphp\n                                                    &lt;td class=\"text-gray-900 text-end pe-0\"&gt;\n                                                        @if($invoice-&gt;discount == 0 || !isset($invoice))\n                                                            &lt;span&gt;N/A&lt;/span&gt;\n                                                        @else\n                                                            @if($invoice-&gt;discount_type == \\App\\Models\\Invoice::FIXED)\n                                                                {{ getInvoiceCurrencyAmount($invoice-&gt;discount,$invoice-&gt;currency_id,true) }}\n                                                            @else\n                                                                {{ getInvoiceCurrencyAmount($percentageDiscount * $invoice-&gt;discount / 100,$invoice-&gt;currency_id,true)}}\n                                                            @endif\n                                                        @endif\n                                                    &lt;/td&gt;\n                                                &lt;/tr&gt;\n                                                &lt;tr&gt;\n                                                    &lt;td class=\"ps-0\"&gt;{{ __('messages.invoice.tax').(':') }}&lt;/td&gt;\n                                                    @php $totalTaxes = (array_sum($totalTax) + $invoiceTaxesAmount)  @endphp\n                                                    &lt;td class=\"text-gray-900 text-end pe-0\"&gt;\n                                                        {!! (numberFormat($totalTaxes) != 0 )\n                                                          ? getInvoiceCurrencyAmount($totalTaxes,$invoice-&gt;currency_id,true) :'N/A' !!}\n                                                    &lt;/td&gt;\n                                                &lt;/tr&gt;\n                                                &lt;tr&gt;\n                                                    &lt;td class=\"ps-0\"&gt;{{ __('messages.invoice.total').(':') }}&lt;/td&gt;\n                                                    &lt;td class=\"text-gray-900 text-end pe-0\"&gt;\n                                                        {{ getInvoiceCurrencyAmount($invoice-&gt;final_amount,$invoice-&gt;currency_id,true) }}\n                                                    &lt;/td&gt;\n                                                &lt;/tr&gt;\n                                                &lt;/tbody&gt;\n                                            &lt;/table&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"col-xxl-3 mb-5 mb-lg-0\"&gt;\n                                &lt;div class=\"bg-gray-100 rounded-15 p-md-7 p-5 h-100 mt-xxl-0 mt-5 col-xxl-9 ms-xxl-auto w-100\"&gt;\n                                    &lt;div class=\"mb-8\"&gt;\n                                        @if($invoice-&gt;status == \\App\\Models\\Invoice::UNPAID)\n                                            &lt;span class=\"badge bg-light-danger\"&gt;Pending Payment&lt;/span&gt;\n                                        @elseif($invoice-&gt;status == \\App\\Models\\Invoice::PAID)\n                                            &lt;span class=\"badge bg-light-success me-2\"&gt;Paid&lt;/span&gt;\n                                        @elseif($invoice-&gt;status == \\App\\Models\\Invoice::PARTIALLY)\n                                            &lt;span class=\"badge bg-light-primary\"&gt;Partially Paid&lt;/span&gt;\n                                        @elseif($invoice-&gt;status == \\App\\Models\\Invoice::DRAFT)\n                                            &lt;span class=\"badge bg-light-warning me-5\"&gt;Draft&lt;/span&gt;\n                                        @elseif($invoice-&gt;status == \\App\\Models\\Invoice::OVERDUE)\n                                            &lt;span class=\"badge bg-light-danger\"&gt;Overdue&lt;/span&gt;\n                                        @elseif($invoice-&gt;status == \\App\\Models\\Invoice::PROCESSING)\n                                            &lt;span class=\"badge bg-light-primary\"&gt;Processing&lt;/span&gt;\n                                        @endif\n                                    &lt;/div&gt;\n                                    &lt;h3 class=\"mb-5\"&gt;{{ __('messages.invoice.client_overview') }}&lt;/h3&gt;\n                                    &lt;div class=\"row\"&gt;\n                                        &lt;div class=\"col-xxl-12 col-lg-4 col-sm-6 d-flex flex-column mb-xxl-7 mb-lg-0 mb-4\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.client_name') }}&lt;/label&gt;\n                                            &lt;a href=\"#\"\n                                               class=\"link-primary fs-4 text-decoration-none\"&gt;{{ $invoice-&gt;client-&gt;user-&gt;full_name }}&lt;/a&gt;\n                                        &lt;/div&gt;\n                                        &lt;div class=\"col-xxl-12 col-lg-4 col-sm-6 d-flex flex-column mb-xxl-7 mb-lg-0 mb-4\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.client_email') }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-900\"&gt;{{ $invoice-&gt;client-&gt;user-&gt;email }}&lt;/span&gt;\n                                        &lt;/div&gt;\n                                        &lt;div class=\"col-xxl-12 col-lg-4 col-sm-6 d-flex flex-column mb-xxl-7\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.paid_amount') }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-900\"&gt;{{ getInvoiceCurrencyAmount(getInvoicePaidAmount($invoice-&gt;id),$invoice-&gt;currency_id,true) }}&lt;/span&gt;\n                                        &lt;/div&gt;\n                                        &lt;div class=\"col-xxl-12 col-lg-4 col-sm-6 d-flex flex-column mb-xxl-7\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.invoice.remaining_amount') }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-900\"&gt;{{ getInvoiceCurrencyAmount(getInvoiceDueAmount($invoice-&gt;id),$invoice-&gt;currency_id,true) }}\n                                                &lt;/span&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"tab-pane fade show\" id=\"note_terms\" role=\"tabpanel\"&gt;\n        &lt;div class=\"card\"&gt;\n            &lt;div class=\"card-body pt-5\"&gt;\n                &lt;div class=\"row\"&gt;\n                    &lt;div class=\"col-lg-12 mb-5\"&gt;\n                        &lt;div class=\"fw-bold text-gray-600 fs-7\"&gt;{{ __('messages.invoice.note').':' }}&lt;/div&gt;\n                        &lt;div class=\"fs-6\"&gt;{!! $invoice-&gt;note ?? __('messages.invoice.note_not_found') !!}&lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"col-lg-12 mb-5\"&gt;\n                        &lt;div class=\"fw-bold text-gray-600 fs-7\"&gt;{{ __('messages.invoice.terms').':' }}&lt;/div&gt;\n                        &lt;div\n                                class=\"fs-6\"&gt;{!! $invoice-&gt;term ?? __('messages.invoice.terms_not_found') !!}&lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"tab-pane fade show\" id=\"paymentHistory\" role=\"tabpanel\"&gt;\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"col-lg-12 \"&gt;\n                &lt;livewire:payment-history-table invoiceId=\"{{ $invoice-&gt;id }}\"/&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>This is a Blade template for displaying invoice details within our application. Here's a brief explanation of its contents:</p> <ol> <li> <p>PHP Code Block: This block of PHP code calculates some values related to taxes and assigns them to variables.</p> </li> <li> <p>Tabs Navigation:</p> </li> <li> <p>A navigation bar for tabs is created using an unordered list (<code>&lt;ul&gt;</code>) with Bootstrap classes.</p> </li> <li>Three tabs are defined: \"Overview,\" \"Note &amp; Terms,\" and \"Payment History.\"</li> <li> <p>The \"Overview\" tab is set to be active by default.</p> </li> <li> <p>Tab Content:</p> </li> <li> <p>A <code>div</code> with the class \"tab-content\" is defined to contain the content of the tabs.</p> </li> <li> <p>Overview Tab Content:</p> </li> <li> <p>This tab displays information about the invoice, including:</p> <ul> <li>Invoice number and logo.</li> <li>Invoice date and due date.</li> <li>Print button to generate a PDF of the invoice.</li> <li>Client details and address.</li> <li>A table displaying invoice items with columns for product, quantity, price, tax, and total.</li> <li>Information about applied taxes.</li> <li>Subtotal, discount, tax, and total amounts.</li> </ul> </li> <li> <p>Note &amp; Terms Tab Content:</p> </li> <li> <p>This tab displays two sections for notes and terms associated with the invoice.</p> </li> <li> <p>Payment History Tab Content:</p> </li> <li> <p>This tab includes a Livewire component (<code>&lt;livewire:payment-history-table&gt;</code>) for displaying the payment history of the invoice.</p> </li> <li> <p>Status Badge:</p> </li> <li> <p>Depending on the invoice status, a corresponding badge is displayed at the top-right corner. Possible status badges include \"Pending Payment,\" \"Paid,\" \"Partially Paid,\" \"Draft,\" \"Overdue,\" and \"Processing.\"</p> </li> <li> <p>Client Overview:</p> </li> <li>Information about the client is displayed, including the client's name, email, paid amount, and remaining amount.</li> </ol>"},{"location":"Client/quotes/","title":"Quotes","text":""},{"location":"Client/quotes/#route","title":"Route","text":"<pre><code>        Route::name('client.')-&gt;group(function () {\n        Route::resource('quotes', Client\\QuoteController::class);\n    });\n</code></pre> <p>This Laravel route definition creates a set of routes with the \"client\" namespace for managing quotes. It uses the <code>Route::resource</code> method to generate standard CRUD (Create, Read, Update, Delete) routes for the \"quotes\" resource, and all these routes will have the \"client.\" prefix in their names.</p>"},{"location":"Client/quotes/#controller","title":"Controller","text":"<p>The controller of the 'Quotes' page located in app&gt;http&gt;controllers&gt;QuoteController.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Exports\\AdminQuotesExport;\nuse App\\Http\\Requests\\CreateQuoteRequest;\nuse App\\Http\\Requests\\UpdateQuoteRequest;\nuse App\\Models\\Invoice;\nuse App\\Models\\InvoiceItem;\nuse App\\Models\\Product;\nuse App\\Models\\Quote;\nuse App\\Repositories\\QuoteRepository;\nuse Barryvdh\\DomPDF\\Facade as PDF;\nuse Carbon\\Carbon;\nuse Exception;\nuse Illuminate\\Contracts\\Foundation\\Application;\nuse Illuminate\\Contracts\\View\\Factory;\nuse Illuminate\\Contracts\\View\\View;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\RedirectResponse;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\Response;\nuse Illuminate\\Support\\Facades\\DB;\nuse Laracasts\\Flash\\Flash;\nuse Maatwebsite\\Excel\\Facades\\Excel;\nuse Symfony\\Component\\HttpFoundation\\BinaryFileResponse;\n\nclass QuoteController extends AppBaseController\n{\n/** @var QuoteRepository */\npublic $quoteRepository;\n\npublic function __construct(QuoteRepository $quoteRepo)\n{\n$this-&gt;quoteRepository = $quoteRepo;\n}\n\n/**\n     * @param  Request  $request\n     * @return Application|Factory|View\n     *\n     * @throws Exception\n     */\npublic function index(Request $request)\n{\n$statusArr = Quote::STATUS_ARR;\n$status = $request-&gt;status;\n\nreturn view('quotes.index', compact('statusArr', 'status'));\n}\n\n/**\n     * Show the form for creating a new resource.\n     *\n     * @return Application|Factory|View\n     */\npublic function create()\n{\n$data = $this-&gt;quoteRepository-&gt;getSyncList();\n\nreturn view('quotes.create')-&gt;with($data);\n}\n\n/**\n     * @param  CreateQuoteRequest  $request\n     * @return JsonResponse\n     */\npublic function store(CreateQuoteRequest $request)\n{\ntry {\nDB::beginTransaction();\n$request-&gt;status = Quote::DRAFT;\n$quote = $this-&gt;quoteRepository-&gt;saveQuote($request-&gt;all());\nDB::commit();\n} catch (Exception $e) {\nDB::rollBack();\n\nreturn $this-&gt;sendError($e-&gt;getMessage());\n}\n\nreturn $this-&gt;sendResponse($quote, 'Quote saved successfully.');\n}\n\n/**\n     * Display the specified resource.\n     *\n     * @param  Quote  $quote\n     * @return Application|Factory|View\n     */\npublic function show(Quote $quote)\n{\n$quoteData = $this-&gt;quoteRepository-&gt;getQuoteData($quote);\n\nreturn view('quotes.show')-&gt;with($quoteData);\n}\n\n/**\n     * @param  Quote  $quote\n     * @return Application|Factory|View|RedirectResponse\n     */\npublic function edit(Quote $quote)\n{\nif ($quote-&gt;status == Quote::CONVERTED) {\nFlash::error('Converted quote can not editable.');\n\nreturn redirect()-&gt;route('quotes.index');\n}\n$data = $this-&gt;quoteRepository-&gt;prepareEditFormData($quote);\n\nreturn view('quotes.edit', compact('quote'))-&gt;with($data);\n}\n\n/**\n     * @param  UpdateQuoteRequest  $request\n     * @param  Quote  $quote\n     * @return JsonResponse\n     */\npublic function update(UpdateQuoteRequest $request, Quote $quote): JsonResponse\n{\n$input = $request-&gt;all();\ntry {\nDB::beginTransaction();\n$quote = $this-&gt;quoteRepository-&gt;updateQuote($quote-&gt;id, $input);\nDB::commit();\n} catch (Exception $e) {\nDB::rollBack();\n\nreturn $this-&gt;sendError($e-&gt;getMessage());\n}\n\nreturn $this-&gt;sendResponse($quote, 'Quote updated successfully.');\n}\n\n/**\n     * @param  Quote  $quote\n     * @return JsonResponse\n     */\npublic function destroy(Quote $quote): JsonResponse\n{\n$quote-&gt;delete();\n\nreturn $this-&gt;sendSuccess('Quote Deleted successfully.');\n}\n\n/**\n     * @param $productId\n     * @return JsonResponse\n     */\npublic function getProduct($productId): JsonResponse\n{\n$product = Product::pluck('unit_price', 'id')-&gt;toArray();\n\nreturn $this-&gt;sendResponse($product, 'Product Price retrieved successfully.');\n}\n\n/**\n     * @param  Quote  $quote\n     * @return Response\n     */\npublic function convertToPdf(Quote $quote): Response\n{\nini_set('max_execution_time', 36000000);\n$quote-&gt;load('client.user', 'invoiceTemplate', 'quoteItems.product', 'quoteItems');\n$quoteData = $this-&gt;quoteRepository-&gt;getPdfData($quote);\n$invoiceTemplate = $this-&gt;quoteRepository-&gt;getDefaultTemplate($quote);\n$pdf = PDF::loadView(\"quotes.quote_template_pdf.$invoiceTemplate\", $quoteData);\n\nreturn $pdf-&gt;stream('quote.pdf');\n}\n\n/**\n     * @param  Request  $request\n     * @return mixed\n     */\npublic function convertToInvoice(Request $request)\n{\n$quoteId = $request-&gt;quoteId;\n$quote = Quote::whereId($quoteId)-&gt;firstOrFail();\n\n$quoteDatas = $this-&gt;quoteRepository-&gt;getQuoteData($quote);\n$quoteData = $quoteDatas['quote'];\n$quoteItems = $quoteDatas['quote']['quoteItems'];\n\nif (! empty(getInvoiceNoPrefix())) {\n$quoteData['quote_id'] = getInvoiceNoPrefix().'-'.$quoteData['quote_id'];\n}\nif (! empty(getInvoiceNoSuffix())) {\n$quoteData['quote_id'] .= '-'.getInvoiceNoSuffix();\n}\n\n$invoice['invoice_id'] = $quoteData['quote_id'];\n$invoice['client_id'] = $quoteData['client_id'];\n$invoice['invoice_date'] = Carbon::parse($quoteData['quote_date'])-&gt;format(currentDateFormat());\n$invoice['due_date'] = Carbon::parse($quoteData['due_date'])-&gt;format(currentDateFormat());\n$invoice['amount'] = $quoteData['amount'];\n$invoice['final_amount'] = $quoteData['final_amount'];\n$invoice['discount_type'] = $quoteData['discount_type'];\n$invoice['discount'] = $quoteData['discount'];\n$invoice['note'] = $quoteData['note'];\n$invoice['term'] = $quoteData['term'];\n$invoice['template_id'] = $quoteData['template_id'];\n$invoice['recurring'] = $quoteData['recurring'];\n$invoice['status'] = Invoice::DRAFT;\n\n$invoice = Invoice::create($invoice);\n\nforeach ($quoteItems as $quoteItem) {\n$invoiceItem = InvoiceItem::create([\n'invoice_id' =&gt; $invoice-&gt;id,\n'product_id' =&gt; $quoteItem['product_id'],\n'product_name' =&gt; $quoteItem['product_name'],\n'quantity' =&gt; $quoteItem['quantity'],\n'price' =&gt; $quoteItem['price'],\n'total' =&gt; $quoteItem['total'],\n]);\n}\n\nQuote::whereId($quoteId)-&gt;update(['status' =&gt; Quote::CONVERTED]);\n\nreturn $this-&gt;sendSuccess('Converted to Invoice successfully!.');\n}\n\n/**\n     * @return BinaryFileResponse\n     */\npublic function exportQuotesExcel(): BinaryFileResponse\n{\nreturn Excel::download(new AdminQuotesExport(), 'quote-excel.xlsx');\n}\n\npublic function getPublicQuotePdf($quoteId)\n{\n$quote = Quote::whereQuoteId($quoteId)-&gt;firstOrFail();\n$quote-&gt;load('client.user', 'invoiceTemplate', 'quoteItems.product', 'quoteItems');\n\n$quoteData = $this-&gt;quoteRepository-&gt;getPdfData($quote);\n$invoiceTemplate = $this-&gt;quoteRepository-&gt;getDefaultTemplate($quote);\n$pdf = PDF::loadView(\"quotes.quote_template_pdf.$invoiceTemplate\", $quoteData);\n\nreturn $pdf-&gt;stream('quote.pdf');\n}\n\n/**\n     * @param $quoteId\n     * @return Application|Factory|View\n     */\npublic function showPublicQuote($quoteId): View|Factory|Application\n{\n$quote = Quote::with('client.user')-&gt;whereQuoteId($quoteId)-&gt;first();\n$quoteData = $this-&gt;quoteRepository-&gt;getQuoteData($quote);\n$quoteData['statusArr'] = Quote::STATUS_ARR;\n$quoteData['status'] = $quote-&gt;status;\n$quoteData['userLang'] = $quote-&gt;client-&gt;user-&gt;language;\n\nreturn view('quotes.public-quote.public_view')-&gt;with($quoteData);\n}\n\n/**\n     * @return Response\n     */\npublic function exportQuotesPdf(): Response\n{\nini_set('max_execution_time', 36000000);\n$data['quotes'] = Quote::with('client.user')-&gt;orderBy('created_at', 'desc')-&gt;get();\n$quotesPdf = PDF::loadView('quotes.export_quotes_pdf', $data);\n\nreturn $quotesPdf-&gt;download('Quotes.pdf');\n}\n}\n</code></pre> <p>Let's break down the code step by step:</p> <ol> <li> <p>Namespace and Imports:    The controller is defined within the <code>App\\Http\\Controllers</code> namespace and imports various classes and libraries that are used throughout the controller's methods.</p> </li> <li> <p>Class Definition and Constructor:    The <code>QuoteController</code> class extends <code>AppBaseController</code>, which suggests that it follows some common practices for controllers. It has a constructor that injects a <code>QuoteRepository</code> instance, presumably to handle interactions with the database related to quotes.</p> </li> <li> <p>Index Method:    The <code>index</code> method is used to display a list of quotes. It retrieves the possible quote statuses and a selected status from the request and then loads a view named <code>quotes.index</code> while passing the retrieved data to the view.</p> </li> <li> <p>Create Method:    The <code>create</code> method is responsible for showing a form to create a new quote. It fetches data using the <code>getSyncList</code> method from the <code>QuoteRepository</code> and passes this data to the <code>quotes.create</code> view.</p> </li> <li> <p>Store Method:    The <code>store</code> method is used to store a new quote. It starts a database transaction, sets the quote status to \"DRAFT,\" and then uses the <code>quoteRepository</code> to save the quote. If successful, the transaction is committed; otherwise, it's rolled back.</p> </li> <li> <p>Show Method:    The <code>show</code> method displays the details of a specific quote. It retrieves the quote data using the <code>getQuoteData</code> method from the <code>QuoteRepository</code> and passes it to the <code>quotes.show</code> view.</p> </li> <li> <p>Edit Method:    The <code>edit</code> method allows editing an existing quote. It checks if the quote's status is \"CONVERTED\"; if it is, an error message is flashed, and the user is redirected to the quotes index. Otherwise, it prepares data for editing using the <code>prepareEditFormData</code> method from the <code>QuoteRepository</code> and loads the <code>quotes.edit</code> view.</p> </li> <li> <p>Update Method:    The <code>update</code> method is used to update an existing quote. It begins a database transaction, updates the quote data using the <code>updateQuote</code> method from the <code>QuoteRepository</code>, and then either commits the transaction or rolls it back based on success or failure.</p> </li> <li> <p>Destroy Method:    The <code>destroy</code> method deletes a quote. It calls the <code>delete</code> method on the quote instance and returns a success message.</p> </li> <li> <p>Various Other Methods:     The controller contains several other methods that handle tasks like getting product information, converting a quote to a PDF, converting a quote to an invoice, exporting quotes to Excel/PDF, and handling public quotes.</p> </li> <li> <p>PDF Generation:     The controller uses the <code>Barryvdh\\DomPDF\\Facade</code> to generate PDFs for quotes and invoices. It loads a Blade view based on the selected template and passes relevant data to generate the PDF.</p> </li> <li> <p>View Loading:     The controller frequently loads views with appropriate data using Laravel's <code>view</code> method. It also uses the <code>with</code> method to pass data to views.</p> </li> </ol> <p>Overall, the <code>QuoteController</code> class serves as the central hub for managing quotes within the Laravel application. It handles various CRUD (Create, Read, Update, Delete) operations related to quotes, interacts with the database through the <code>QuoteRepository</code>, and renders views to provide a user interface for managing quotes.</p>"},{"location":"Client/quotes/#model","title":"Model","text":"<p>The models related to this controller are : App\\Models\\Invoice , App\\Models\\Quote , App\\Models\\Product and App\\Models\\InvoiceItem.</p>"},{"location":"Client/quotes/#invoice-model","title":"Invoice Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Carbon\\Carbon;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsToMany;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Support\\Str;\n\n\nclass Invoice extends Model\n{\nuse HasFactory;\n\npublic const SELECT_DISCOUNT_TYPE = 0;\npublic const FIXED = 1;\npublic const PERCENTAGE = 2;\n\npublic const DISCOUNT_TYPE = [\nself::SELECT_DISCOUNT_TYPE =&gt; 'Select Discount Type',\nself::FIXED =&gt; 'Fixed',\nself::PERCENTAGE =&gt; 'Percentage',\n];\n\npublic const DRAFT = 0;\npublic const UNPAID = 1;\npublic const PAID = 2;\npublic const PARTIALLY = 3;\npublic const OVERDUE = 4;\npublic const STATUS_ALL = 5;\npublic const PROCESSING = 6;\n\npublic const STATUS_ARR = [\nself::STATUS_ALL =&gt; 'All',\nself::DRAFT =&gt; 'Draft',\nself::UNPAID =&gt; 'Unpaid',\nself::PAID =&gt; 'Paid',\nself::PARTIALLY =&gt; 'Partially Paid',\nself::OVERDUE =&gt; 'Overdue',\nself::PROCESSING =&gt; 'Processing',\n];\n\npublic const RECURRING_OFF = 0;\n\npublic const RECURRING_ON = 1;\n\npublic const RECURRING_STATUS_ARR = [\nself::RECURRING_ON =&gt; 'On',\nself::RECURRING_OFF =&gt; 'Off',\n];\n\npublic const MONTHLY = 1;\npublic const QUARTERLY = 2;\npublic const SEMIANNUALLY = 3;\npublic const ANNUALLY = 4;\n\npublic const RECURRING_ARR = [\nself::MONTHLY =&gt; 'Monthly',\nself::QUARTERLY =&gt; 'Quarterly',\nself::SEMIANNUALLY =&gt; 'Semi Annually',\nself::ANNUALLY =&gt; 'Annually',\n];\n\n/**\n     * Validation rules\n     *\n     * @var array\n     */\npublic static $rules = [\n'client_id' =&gt; 'required',\n'invoice_id' =&gt; 'required|unique:invoices,invoice_id',\n'invoice_date' =&gt; 'required',\n'due_date' =&gt; 'required',\n];\n\npublic static $messages = [\n'client_id.required' =&gt; 'The Client field is required.',\n'invoice_date.required' =&gt; 'The invoice date field is required.',\n'due_date' =&gt; 'The invoice Due date field is required.',\n];\n\npublic $table = 'invoices';\n\npublic $appends = ['status_label'];\n\npublic $fillable = [\n'client_id',\n'invoice_date',\n'due_date',\n'invoice_id',\n'currency_id',\n'amount',\n'discount_type',\n'discount',\n'final_amount',\n'note',\n'term',\n'template_id',\n'status',\n'recurring_status',\n'recurring_cycle',\n'last_recurring_on',\n'parent_id',\n];\n\nprotected $casts = [\n'client_id' =&gt; 'integer',\n'parent_id' =&gt; 'integer',\n'invoice_date' =&gt; 'date',\n'due_date' =&gt; 'date',\n'invoice_id' =&gt; 'string',\n'currency_id' =&gt; 'integer',\n'amount' =&gt; 'double',\n'discount_type' =&gt; 'integer',\n'discount' =&gt; 'double',\n'final_amount' =&gt; 'double',\n'note' =&gt; 'string',\n'term' =&gt; 'string',\n'template_id' =&gt; 'integer',\n'status' =&gt; 'integer',\n'recurring_status' =&gt; 'integer',\n'recurring_cycle' =&gt; 'integer',\n'last_recurring_on' =&gt; 'date',\n'tax' =&gt; 'double',\n];\n\npublic function getStatusLabelAttribute(): string\n{\nreturn self::STATUS_ARR[$this-&gt;status];\n}\n\n/**\n     * @return BelongsTo\n     */\npublic function client(): BelongsTo\n{\nreturn $this-&gt;belongsTo(Client::class, 'client_id', 'id');\n}\n\n/**\n     * @return HasMany\n     */\npublic function invoiceItems(): HasMany\n{\nreturn $this-&gt;hasMany(InvoiceItem::class);\n}\n\n/**\n     * @return string\n     */\npublic static function generateUniqueInvoiceId(): string\n{\n$invoiceId = mb_strtoupper(Str::random(6));\nwhile (true) {\n$isExist = self::whereInvoiceId($invoiceId)-&gt;exists();\nif ($isExist) {\nself::generateUniqueInvoiceId();\n}\nbreak;\n}\n\nreturn $invoiceId;\n}\n\n/**\n     * @return HasMany\n     */\npublic function payments(): HasMany\n{\nreturn $this-&gt;hasMany(Payment::class, 'invoice_id', 'id');\n}\n\n/**\n     * @return HasMany\n     */\npublic function AdminPayment(): HasMany\n{\nreturn $this-&gt;hasMany(AdminPayment::class, 'invoice_id', 'id');\n}\n\n/**\n     * @return BelongsTo\n     */\npublic function invoiceTemplate(): BelongsTo\n{\nreturn $this-&gt;belongsTo(InvoiceSetting::class, 'template_id', 'id');\n}\n\npublic function parentInvoice(): BelongsTo\n{\nreturn $this-&gt;belongsTo(self::class, 'parent_id', 'id');\n}\n\npublic function childInvoices(): HasMany\n{\nreturn $this-&gt;hasMany(self::class, 'parent_id', 'id');\n}\n\n/**\n     * @param $value\n     * @return Setting|mixed\n     */\npublic function getCurrencyIdAttribute($value)\n{\nif (! empty($value)) {\nreturn Currency::where('id', $value)-&gt;pluck('id')-&gt;first();\n}\n\nreturn Currency::where('id', getSettingValue('current_currency'))-&gt;pluck('id')-&gt;first();\n}\n\n/**\n     * @param $value\n     */\npublic function setInvoiceDateAttribute($value): void\n{\n$this-&gt;attributes['invoice_date'] = Carbon::createFromFormat(currentDateFormat(),\n$value)-&gt;translatedFormat('Y-m-d');\n}\n\n/**\n     * @param $value\n     */\npublic function setDueDateAttribute($value): void\n{\n$this-&gt;attributes['due_date'] = Carbon::createFromFormat(currentDateFormat(),\n$value)-&gt;translatedFormat('Y-m-d');\n}\n\n/**\n     * @return BelongsToMany\n     */\npublic function invoiceTaxes(): BelongsToMany\n{\nreturn $this-&gt;belongsToMany(Tax::class,'invoice_taxes');\n}\n}\n</code></pre> <p>This model represents invoices within the application and provides methods and properties for interacting with invoice data stored in the database.</p> <p>Let's break down the key parts of this <code>Invoice</code> model class:</p> <ol> <li> <p>Use of Traits and Relationships:    The model class uses the <code>HasFactory</code> trait, indicating that it can be used to create instances of the model using a factory. It also contains several Eloquent relationships to other models, including <code>Client</code>, <code>InvoiceItem</code>, <code>Payment</code>, <code>AdminPayment</code>, <code>InvoiceSetting</code> (which seems to represent invoice templates), and others.</p> </li> <li> <p>Model Properties and Fillable Fields:    The model defines a set of properties that correspond to the columns in the database table. The <code>$fillable</code> array specifies which fields can be mass-assigned when creating or updating instances of the model.</p> </li> <li> <p>Constants for Status and Other Values:    The model includes constants like <code>DRAFT</code>, <code>UNPAID</code>, <code>PAID</code>, <code>RECURRING_OFF</code>, and others to represent various states and types of invoices. These constants are used throughout the code to ensure consistency and avoid hardcoding values.</p> </li> <li> <p>Accessors and Mutators:    The model defines accessor and mutator methods to manipulate and format certain attributes. For example, <code>getCurrencyIdAttribute</code> returns the currency ID, and <code>setInvoiceDateAttribute</code> and <code>setDueDateAttribute</code> modify the format of date attributes when setting them.</p> </li> <li> <p>Custom Methods:    The model contains custom methods like <code>generateUniqueInvoiceId</code> to generate unique invoice IDs, <code>getStatusLabelAttribute</code> to provide a human-readable status label, and others for handling specific tasks related to invoices.</p> </li> <li> <p>Validation Rules and Messages:    The model defines validation rules and custom validation error messages for creating new invoices. These rules ensure that required fields are provided and certain constraints are met.</p> </li> <li> <p>Eloquent Query Scopes:    Eloquent query scopes added to the model to encapsulate common query logic. These scopes can be used to easily retrieve specific sets of invoices based on various conditions.</p> </li> <li> <p>Attributes and Appends:    The <code>$appends</code> array defines additional attributes that are not present in the database but are dynamically computed when the model is accessed. For example, the <code>status_label</code> attribute is computed based on the invoice's status.</p> </li> <li> <p>Getters and Setters:    The model defines getter and setter methods for certain attributes. For instance, <code>getCurrencyIdAttribute</code> retrieves the currency ID for an invoice, considering different scenarios.</p> </li> </ol> <p>Overall, the <code>Invoice</code> model class encapsulates the logic and behavior associated with invoices in the application. It handles relationships, attribute manipulation, validation rules, and custom methods related to invoices, making it a central point for interacting with invoice data in the database.</p>"},{"location":"Client/quotes/#quote-model","title":"Quote Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Carbon\\Carbon;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Support\\Str;\n\nclass Quote extends Model\n{\nuse HasFactory;\n\nconst SELECT_DISCOUNT_TYPE = 0;\n\nconst FIXED = 1;\n\nconst PERCENTAGE = 2;\n\nconst DISCOUNT_TYPE = [\nself::SELECT_DISCOUNT_TYPE =&gt; 'Select Discount Type',\nself::FIXED =&gt; 'Fixed',\nself::PERCENTAGE =&gt; 'Percentage',\n];\n\nconst DRAFT = 0;\n\nconst CONVERTED = 1;\n\nconst STATUS_ALL = 2;\n\nconst STATUS_ARR = [\nself::DRAFT =&gt; 'Draft',\nself::CONVERTED =&gt; 'Converted',\nself::STATUS_ALL =&gt; 'All',\n];\n\nconst MONTHLY = 1;\n\nconst QUARTERLY = 2;\n\nconst SEMIANNUALLY = 3;\n\nconst ANNUALLY = 4;\n\nconst RECURRING_ARR = [\nself::MONTHLY =&gt; 'Monthly',\nself::QUARTERLY =&gt; 'Quarterly',\nself::SEMIANNUALLY =&gt; 'Semi Annually',\nself::ANNUALLY =&gt; 'Annually',\n];\n\nprotected $with = ['quoteItems.product'];\n\n/**\n     * Validation rules\n     *\n     * @var array\n     */\npublic static $rules = [\n'client_id' =&gt; 'required',\n'quote_id' =&gt; 'required|unique:quotes,quote_id',\n'quote_date' =&gt; 'required',\n'due_date' =&gt; 'required',\n];\n\npublic static $messages = [\n'client_id.required' =&gt; 'The Client field is required.',\n'quote_date.required' =&gt; 'The Quote date field is required.',\n'due_date' =&gt; 'The Quote Due date field is required.',\n];\n\npublic $table = 'quotes';\n\npublic $appends = ['status_label'];\n\npublic $fillable = [\n'client_id',\n'quote_date',\n'due_date',\n'quote_id',\n'amount',\n'discount_type',\n'discount',\n'final_amount',\n'note',\n'term',\n'template_id',\n'status',\n];\n\nprotected $casts = [\n'client_id' =&gt; 'integer',\n'quote_date' =&gt; 'date',\n'due_date' =&gt; 'date',\n'quote_id' =&gt; 'string',\n'amount' =&gt; 'double',\n'discount_type' =&gt; 'integer',\n'discount' =&gt; 'double',\n'final_amount' =&gt; 'double',\n'note' =&gt; 'string',\n'term' =&gt; 'string',\n'template_id' =&gt; 'integer',\n'status' =&gt; 'integer',\n'recurring' =&gt; 'integer',\n];\n\npublic function getStatusLabelAttribute(): string\n{\nreturn self::STATUS_ARR[$this-&gt;status];\n}\n\n/**\n     * @return BelongsTo\n     */\npublic function client(): BelongsTo\n{\nreturn $this-&gt;belongsTo(Client::class, 'client_id', 'id');\n}\n\n/**\n     * @return HasMany\n     */\npublic function quoteItems(): HasMany\n{\nreturn $this-&gt;hasMany(QuoteItem::class);\n}\n\n/**\n     * @return string\n     */\npublic static function generateUniqueQuoteId(): string\n{\n$quoteId = mb_strtoupper(Str::random(6));\nwhile (true) {\n$isExist = self::whereQuoteId($quoteId)-&gt;exists();\nif ($isExist) {\nself::generateUniqueQuoteId();\n}\nbreak;\n}\n\nreturn $quoteId;\n}\n\n/**\n     * @return BelongsTo\n     */\npublic function invoiceTemplate(): BelongsTo\n{\nreturn $this-&gt;belongsTo(InvoiceSetting::class, 'template_id', 'id');\n}\n\n/**\n     * @param $value\n     */\npublic function setQuoteDateAttribute($value)\n{\n$this-&gt;attributes['quote_date'] = Carbon::createFromFormat(currentDateFormat(), $value)-&gt;translatedFormat('Y-m-d');\n}\n\n/**\n     * @param $value\n     */\npublic function setDueDateAttribute($value)\n{\n$this-&gt;attributes['due_date'] = Carbon::createFromFormat(currentDateFormat(), $value)-&gt;translatedFormat('Y-m-d');\n}\n}\n</code></pre> <p>The provided code defines an Eloquent model class named <code>Quote</code> within the <code>App\\Models</code> namespace. This model represents quotes within the application and provides methods and properties for interacting with quote data stored in the database. Below is an explanation of the key parts of this <code>Quote</code> model class:</p> <ol> <li> <p>Use of Traits and Relationships:</p> </li> <li> <p>The model class uses the <code>HasFactory</code> trait, which indicates that it can be used to create instances of the model using a factory.</p> </li> <li> <p>It defines several Eloquent relationships to other models, including <code>Client</code> (a client associated with the quote), <code>QuoteItem</code> (items within the quote), and <code>InvoiceSetting</code> (which appears to represent quote templates).</p> </li> <li> <p>Model Properties and Fillable Fields:</p> </li> <li> <p>The model defines a set of properties that correspond to the columns in the database table.</p> </li> <li> <p>The <code>$fillable</code> array specifies which fields can be mass-assigned when creating or updating instances of the model.</p> </li> <li> <p>Constants for Status and Other Values:</p> </li> <li> <p>The model includes constants like <code>DRAFT</code>, <code>CONVERTED</code>, <code>MONTHLY</code>, <code>QUARTERLY</code>, and others to represent various states and types of quotes. These constants are used throughout the code to ensure consistency and avoid hardcoding values.</p> </li> <li> <p>Accessors and Mutators:</p> </li> <li> <p>The model defines an accessor method named <code>getStatusLabelAttribute</code> to provide a human-readable status label for a quote based on its status constant.</p> </li> <li> <p>Validation Rules and Messages:</p> </li> <li> <p>The model defines validation rules and custom validation error messages for creating new quotes. These rules ensure that required fields are provided and certain constraints are met.</p> </li> <li> <p>Attributes and Appends:</p> </li> <li> <p>The <code>$appends</code> array defines additional attributes that are not present in the database but are dynamically computed when the model is accessed. For example, the <code>status_label</code> attribute is computed based on the quote's status.</p> </li> <li> <p>Custom Methods:</p> </li> <li> <p>The model contains custom methods like <code>generateUniqueQuoteId</code> to generate unique quote IDs and setters for <code>quote_date</code> and <code>due_date</code> attributes to modify their date format when setting them.</p> </li> <li> <p>Casting Attributes:</p> </li> <li> <p>The <code>$casts</code> array specifies the data types of certain attributes, such as integers, dates, and doubles, to ensure proper data handling.</p> </li> <li> <p>Eloquent Relationships:</p> </li> <li>The model defines relationships like <code>client()</code> and <code>quoteItems()</code> using Eloquent's <code>belongsTo</code> and <code>hasMany</code> methods. These relationships allow for convenient retrieval of related data.</li> </ol> <p>Overall, the <code>Quote</code> model class encapsulates the logic and behavior associated with quotes in the application. It handles relationships, attribute manipulation, validation rules, and custom methods related to quotes, making it a central point for interacting with quote data in the database.</p>"},{"location":"Client/quotes/#product-model","title":"Product Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Notifications\\Notifiable;\nuse Spatie\\MediaLibrary\\HasMedia;\nuse Spatie\\MediaLibrary\\InteractsWithMedia;\nuse Spatie\\MediaLibrary\\MediaCollections\\Models\\Media;\n\nclass Product extends Model implements HasMedia\n{\nuse HasFactory, Notifiable, InteractsWithMedia;\n\nprotected $table = 'products';\n\nprotected $fillable = ['name', 'code', 'category_id', 'unit_price', 'description'];\n\nprotected $casts = [\n'name' =&gt; 'string',\n'code' =&gt; 'string',\n'category_id' =&gt; 'integer',\n'unit_price' =&gt; 'double',\n'description' =&gt; 'string',\n];\n\nconst Image = 'product';\n\nprotected $appends = ['product_image'];\n\npublic static $rules = [\n'name' =&gt; 'required',\n'code' =&gt; 'required|alpha_num|min:3|max:6|unique:products,code',\n'category_id' =&gt; 'required',\n'unit_price' =&gt; 'required|numeric',\n];\n\npublic static $messages = [\n'code.required' =&gt; 'The product code field is required.',\n'code.size' =&gt; 'The product code must be 6 characters.',\n'code.unique' =&gt; 'The product code has already been taken.',\n];\n\n/**\n     * @return string\n     */\npublic function getProductImageAttribute(): string\n{\n/** @var Media $media */\n$media = $this-&gt;getMedia(self::Image)-&gt;first();\nif (! empty($media)) {\nreturn $media-&gt;getFullUrl();\n}\n\nreturn asset('images/default-product.jpg');\n}\n\npublic function category()\n{\nreturn $this-&gt;hasOne(Category::class, 'id', 'category_id');\n}\n}\n</code></pre> <p>The provided code defines an Eloquent model class named <code>Product</code> within the <code>App\\Models</code> namespace. This model represents products in the application and provides methods and properties for interacting with product data stored in the database. Below is an explanation of the key parts of this <code>Product</code> model class:</p> <ol> <li> <p>Use of Traits and Interfaces:</p> </li> <li> <p>The model class uses the <code>HasFactory</code>, <code>Notifiable</code>, <code>InteractsWithMedia</code> traits, and implements the <code>HasMedia</code> interface.</p> </li> <li>The <code>HasFactory</code> trait allows for easy creation of model instances using factories.</li> <li>The <code>Notifiable</code> trait is used for handling notifications.</li> <li> <p>The <code>InteractsWithMedia</code> trait and <code>HasMedia</code> interface are used for handling media files associated with the model.</p> </li> <li> <p>Model Properties and Fillable Fields:</p> </li> <li> <p>The model defines a set of properties that correspond to the columns in the database table.</p> </li> <li> <p>The <code>$fillable</code> array specifies which fields can be mass-assigned when creating or updating instances of the model.</p> </li> <li> <p>Constants:</p> </li> <li> <p>The model includes a constant named <code>Image</code>, which is used as a reference to the product images associated with this model.</p> </li> <li> <p>Accessors and Mutators:</p> </li> <li> <p>The model defines an accessor method named <code>getProductImageAttribute</code> to retrieve the URL of the product's image.</p> </li> <li> <p>This accessor checks if there is a media associated with the product and returns its URL. If no media is found, it returns a default image URL.</p> </li> <li> <p>Validation Rules and Messages:</p> </li> <li> <p>The model defines validation rules and custom validation error messages for creating new products. These rules ensure that required fields are provided and certain constraints are met, such as the uniqueness of the product code.</p> </li> <li> <p>Attributes and Appends:</p> </li> <li> <p>The <code>$appends</code> array defines additional attributes that are not present in the database but are dynamically computed when the model is accessed. In this case, it includes the <code>product_image</code> attribute.</p> </li> <li> <p>Eloquent Relationships:</p> </li> <li>The model defines a relationship with the <code>Category</code> model using the <code>hasOne</code> method. This relationship represents the category to which a product belongs.</li> </ol> <p>Overall, the <code>Product</code> model class encapsulates the logic and behavior associated with products in the application. It handles relationships, attribute manipulation, validation rules, and custom methods related to products, making it a central point for interacting with product data in the database. Additionally, it supports media management for product images using the Spatie Media Library package.</p>"},{"location":"Client/quotes/#invoice-item-model","title":"Invoice Item Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\n\nclass InvoiceItem extends Model\n{\nuse HasFactory;\n\n/**\n     * Validation rules\n     *\n     * @var array\n     */\npublic static $rules = [\n'product_id' =&gt; 'required',\n'quantity' =&gt; 'required|regex:/^\\d*(\\.\\d{1,2})?$/',\n'price' =&gt; 'required|regex:/^\\d+(\\.\\d{1,2})?$/',\n];\n\nprotected $table = 'invoice_items';\n\npublic $fillable = [\n'invoice_id',\n'product_id',\n'product_name',\n'quantity',\n'price',\n'total',\n];\n\nprotected $casts = [\n'invoice_id' =&gt; 'integer',\n'product_id' =&gt; 'integer',\n'product_name' =&gt; 'string',\n'quantity' =&gt; 'double',\n'price' =&gt; 'double',\n'total' =&gt; 'double',\n];\n\n/**\n     * @return BelongsTo\n     */\npublic function product(): BelongsTo\n{\nreturn $this-&gt;belongsTo(Product::class);\n}\n\n/**\n     * @return HasMany\n     */\npublic function invoiceItemTax(): HasMany\n{\nreturn $this-&gt;hasMany(InvoiceItemTax::class);\n}\n}\n</code></pre> <p>The provided code defines an Eloquent model class named <code>InvoiceItem</code> within the <code>App\\Models</code> namespace. This model represents individual line items on an invoice and provides methods and properties for interacting with invoice item data stored in the database. Below is an explanation of the key parts of this <code>InvoiceItem</code> model class:</p> <ol> <li> <p>Use of Traits and Interfaces:</p> </li> <li> <p>The model class uses the <code>HasFactory</code> trait.</p> </li> <li> <p>Model Properties and Fillable Fields:</p> </li> <li> <p>The model defines a set of properties that correspond to the columns in the database table.</p> </li> <li> <p>The <code>$fillable</code> array specifies which fields can be mass-assigned when creating or updating instances of the model.</p> </li> <li> <p>Validation Rules:</p> </li> <li> <p>The model defines validation rules for creating new invoice items. These rules ensure that required fields, such as <code>product_id</code>, <code>quantity</code>, and <code>price</code>, are provided and that these fields meet certain regex-based constraints.</p> </li> <li> <p>Eloquent Relationships:</p> </li> <li> <p>The model defines two Eloquent relationships:</p> <ul> <li>BelongsTo Relationship with <code>Product</code>: This relationship represents the product associated with the invoice item. It is defined using the <code>belongsTo</code> method.</li> <li>HasMany Relationship with <code>InvoiceItemTax</code>: This relationship represents the taxes associated with the invoice item. It is defined using the <code>hasMany</code> method.</li> </ul> </li> <li> <p>Table Name:</p> </li> <li> <p>The <code>$table</code> property specifies the name of the database table associated with this model, which is set to <code>'invoice_items'</code>.</p> </li> <li> <p>Casting Data Types:</p> </li> <li> <p>The <code>$casts</code> property specifies how certain attributes should be cast to different data types. For example, it casts <code>quantity</code>, <code>price</code>, and <code>total</code> to the <code>double</code> data type.</p> </li> <li> <p>Method Annotations:</p> </li> <li>The class includes method annotations for methods like <code>newModelQuery()</code>, <code>newQuery()</code>, and <code>query()</code>. These are used for building queries on this model.</li> </ol> <p>Overall, the <code>InvoiceItem</code> model class encapsulates the logic and behavior associated with individual line items on an invoice. It defines relationships with other models, validation rules, and data casting to facilitate the management of invoice item data in the application's database.</p>"},{"location":"Client/quotes/#view","title":"View","text":""},{"location":"Client/quotes/#the-livewire-quote-table","title":"The livewire: Quote table","text":"<p>The livewire of the 'client quote table' located in app&gt;http&gt;livewire&gt;ClientQuoteTable.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Livewire;\n\nuse App\\Models\\Quote;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Support\\Facades\\Auth;\nuse Rappasoft\\LaravelLivewireTables\\Views\\Column;\n\nclass ClientQuoteTable extends LivewireTableComponent\n{\n    protected $model = Quote::class;\n    protected string $tableName = 'quotes';\n    public $showButtonOnHeader = true;\n    public $buttonComponent = 'client_panel.quotes.components.add-button';\n    public bool $showFilterOnHeader = true;\n    public $filterComponent = ['quotes.components.filter', Quote::STATUS_ARR];\n    public $listeners = ['changeQuoteStatusFilter', 'resetPageTable'];\n    public $status = Quote::STATUS_ALL;\n\n    public function configure(): void\n    {\n        $this-&gt;setPrimaryKey('id');\n        $this-&gt;setDefaultSort('created_at', 'desc');\n        $this-&gt;setQueryStringStatus(false);\n\n        $this-&gt;setThAttributes(function (Column $column) {\n            if ($column-&gt;isField('final_amount')) {\n                return [\n                    'class' =&gt; 'd-flex justify-content-end',\n                ];\n            }\n\n            return [\n                'class' =&gt; 'text-center',\n            ];\n        });\n\n        $this-&gt;setTdAttributes(function (Column $column, $row, $columnIndex, $rowIndex) {\n            if (in_array($column-&gt;getField(), ['amount', 'status', 'id'])) {\n                return [\n                    'class' =&gt; 'text-center',\n                ];\n            }\n            if ($column-&gt;getField() == 'final_amount') {\n                return [\n                    'class' =&gt; 'text-end',\n                ];\n            }\n\n            return [\n            ];\n        });\n    }\n\n    public function columns(): array\n    {\n        return [\n            Column::make(__('messages.quote.quote_id'), 'client.user.first_name')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;view('client_panel.quotes.components.quote-id'),\n            Column::make('quote_id', 'quote_id')\n                -&gt;sortable()\n                -&gt;searchable()-&gt;hideIf(1),\n            Column::make('Last Name', 'client.user.last_name')\n                -&gt;sortable()\n                -&gt;searchable()-&gt;hideIf(1),\n            Column::make(__('messages.quote.quote_date'), 'quote_date')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('quotes.components.quote-due-date')\n                        -&gt;withValue([\n                            'quote-date' =&gt; $row-&gt;quote_date,\n                        ]);\n                }),\n            Column::make(__('messages.quote.due_date'), 'due_date')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('quotes.components.quote-due-date')\n                        -&gt;withValue([\n                            'due-date' =&gt; $row-&gt;due_date,\n                        ]);\n                }),\n            Column::make(__('messages.quote.amount'), 'final_amount')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;view('quotes.components.amount'),\n            Column::make(__('messages.common.status'), 'status')\n                -&gt;searchable()\n                -&gt;view('quotes.components.quote-status'),\n            Column::make(__('messages.common.action'), 'id')\n                -&gt;view('livewire.client-quote-action-button'),\n        ];\n    }\n\n    /**\n     * @return Builder\n     */\n    public function builder(): Builder\n    {\n        $clientId = Auth::user()-&gt;client-&gt;id;\n        $query = Quote::with(['client.user.media'])-&gt;select('quotes.*')-&gt;where('client_id', $clientId);\n\n        $query-&gt;when($this-&gt;status != Quote::STATUS_ALL, function ($query) {\n            return $query-&gt;where('quotes.status', $this-&gt;status);\n        });\n\n        return $query;\n    }\n\n    /**\n     * @param $status\n     */\n    public function changeQuoteStatusFilter($status)\n    {\n        $this-&gt;status = $status;\n        $this-&gt;setBuilder($this-&gt;builder());\n    }\n}\n</code></pre> <p>This is a Livewire used to manage and display a table of quotes for a client. It uses the <code>Rappasoft\\LaravelLivewireTables</code> package for table functionality. Here's an explanation of the component's key features and methods:</p> <p>Properties:</p> <ul> <li> <p><code>model</code>: Specifies the Eloquent model to use for this Livewire table. In this case, it's set to <code>Quote::class</code>.</p> </li> <li> <p><code>tableName</code>: Defines the name of the table.</p> </li> <li> <p><code>showButtonOnHeader</code>: Determines whether to show a button in the table header. It is set to <code>true</code>.</p> </li> <li> <p><code>buttonComponent</code>: Specifies the Livewire component to render the button in the header. In this case, it's set to <code>'client_panel.quotes.components.add-button'</code>.</p> </li> <li> <p><code>showFilterOnHeader</code>: Controls whether to show a filter in the table header. It is set to <code>true</code>.</p> </li> <li> <p><code>filterComponent</code>: Defines the Livewire component responsible for rendering the filter. It includes an array with the component name and options, such as <code>Quote::STATUS_ARR</code>.</p> </li> <li> <p><code>listeners</code>: Lists the Livewire listeners that this component responds to. It includes <code>changeQuoteStatusFilter</code> and <code>resetPageTable</code>.</p> </li> <li> <p><code>status</code>: Represents the current status filter for the quotes. It is initially set to <code>Quote::STATUS_ALL</code>.</p> </li> </ul> <p>Methods:</p> <ul> <li> <p><code>configure()</code>: This method is used to configure the Livewire table's settings. It defines various settings, such as the primary key, default sorting, and table attributes for columns and cells.</p> </li> <li> <p><code>columns()</code>: This method defines the columns to be displayed in the table. It uses the <code>Column::make</code> method to create columns with various properties, such as labels, field names, sorting, and formatting. The columns include information about quote IDs, dates, amounts, statuses, and an action column for buttons.</p> </li> <li> <p><code>builder()</code>: This method defines the database query builder for fetching quotes. It selects quotes related to the currently authenticated client, filters quotes by status (if the status is not \"All\"), and includes relationships for client information and media.</p> </li> <li> <p><code>changeQuoteStatusFilter($status)</code>: This method is a listener that responds to changes in the quote status filter. It updates the <code>$status</code> property and sets the query builder accordingly.</p> </li> </ul>"},{"location":"Client/quotes/#list-of-quotes","title":"List of Quotes","text":"<p>The list of quotes view is located in : resources\\views\\client_panel\\quotes\\index.blade.php.</p> <pre><code>@extends('client_panel.layouts.app')\n@section('title')\n    Quotes\n@endsection\n@section('content')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-flex flex-column \"&gt;\n            @include('flash::message')\n            &lt;livewire:client-quote-table/&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n@endsection\n</code></pre> <p>This is a Blade template used in our application to display a list of quotes in a client panel. Here's a brief explanation of its contents:</p> <ol> <li> <p>Layout and Section Declaration:</p> </li> <li> <p>The template extends the layout defined in <code>'client_panel.layouts.app'</code>.</p> </li> <li> <p>It sets the title of the page to \"Quotes.\"</p> </li> <li> <p>Content Section:</p> </li> <li> <p>The main content section of the page is defined using the <code>@section('content')</code> directive.</p> </li> <li> <p>Container and Flexbox:</p> </li> <li> <p>The content is wrapped in a container (<code>&lt;div class=\"container-fluid\"&gt;</code>) to control the layout width.</p> </li> <li> <p>A flexbox (<code>&lt;div class=\"d-flex flex-column\"&gt;</code>) is used to arrange the content vertically.</p> </li> <li> <p>Flash Messages:</p> </li> <li> <p>Flash messages are included using <code>@include('flash::message')</code>. These messages are typically used to display notifications or alerts.</p> </li> <li> <p>Livewire Component:</p> </li> <li>A Livewire component (<code>&lt;livewire:client-quote-table/&gt;</code>) is included within the flexbox. This component renders a table or list of quotes for the client.</li> </ol> <p>In summary, this template sets up the structure for displaying a list of quotes in the client panel. It includes a container, flash messages, and a Livewire component for rendering the actual list of quotes. The layout and styling are provided by the parent layout (<code>'client_panel.layouts.app'</code>).</p>"},{"location":"Client/quotes/#show-quote","title":"Show Quote","text":"<p>The view of the 'show quote' page located in ressources&gt;views&gt;client_panel&gt;quote&gt;show.blade.php.</p> <pre><code>@extends('client_panel.layouts.app')\n@section('title')\n    {{ __('messages.quote.quote_details')}}\n@endsection\n@section('header_toolbar')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-md-flex align-items-center justify-content-between mb-5\"&gt;\n            &lt;h1 class=\"mb-0\"&gt;@yield('title')&lt;/h1&gt;\n            &lt;div class=\"text-end mt-4 mt-md-0\"&gt;\n                &lt;a href=\"{{ url()-&gt;previous() }}\"\n                   class=\"btn btn-outline-primary\"&gt;{{ __('messages.common.back') }}&lt;/a&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n@endsection\n@section('content')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-flex flex-column\"&gt;\n            @include('flash::message')\n            @include('client_panel.quotes.show_fields')\n        &lt;/div&gt;\n    &lt;/div&gt;\n@endsection\n</code></pre> <p>This is a Blade template used in our application to display the details of a quote in a client panel. Here's a brief explanation of its contents:</p> <ol> <li> <p>Layout and Section Declaration:</p> </li> <li> <p>The template extends the layout defined in <code>'client_panel.layouts.app'</code>.</p> </li> <li> <p>It sets the title of the page to \"Quote Details.\"</p> </li> <li> <p>Header Toolbar:</p> </li> <li> <p>A container (<code>&lt;div class=\"container-fluid\"&gt;</code>) is used to create a fluid layout.</p> </li> <li>Within the container, there is a flexbox (<code>&lt;div class=\"d-md-flex align-items-center justify-content-between mb-5\"&gt;</code>) that arranges content in a row with a title and a back button.</li> <li>The title is set dynamically using <code>@yield('title')</code>.</li> <li> <p>A \"Back\" button is included with a link to the previous page.</p> </li> <li> <p>Content Section:</p> </li> <li> <p>The main content section of the page is defined using the <code>@section('content')</code> directive.</p> </li> <li> <p>It consists of a container (<code>&lt;div class=\"container-fluid\"&gt;</code>) and a flexbox (<code>&lt;div class=\"d-flex flex-column\"&gt;</code>) for arranging content vertically.</p> </li> <li> <p>Flash Messages:</p> </li> <li> <p>Flash messages are included using <code>@include('flash::message')</code>. These messages are typically used to display notifications or alerts.</p> </li> <li> <p>Quote Details:</p> </li> <li>The quote details are included using <code>@include('client_panel.quotes.show_fields')</code>. This likely includes information about the quote, such as its content, customer details, and any associated data.</li> </ol> <p>In summary, this template sets up the structure for displaying the details of a quote in the client panel. It includes a header toolbar with a dynamic title and a back button, a container for content, and flash messages for notifications. The layout and styling are likely provided by the parent layout (<code>'client_panel.layouts.app'</code>).</p> <p>client_panel.quotes.show_fields:</p> <pre><code>&lt;div&gt;\n    &lt;div class=\"d-flex overflow-auto h-55px\"&gt;\n        &lt;ul class=\"nav nav-tabs mb-5 pb-1 overflow-auto flex-nowrap text-nowrap\"&gt;\n            &lt;li class=\"nav-item position-relative me-7 mb-3\" role=\"presentation\"&gt;\n                &lt;button class=\"nav-link active p-0\" id=\"overview-tab\" data-bs-toggle=\"tab\"\n                        data-bs-target=\"#overview\"\n                        type=\"button\" role=\"tab\" aria-controls=\"overview\" aria-selected=\"true\"&gt;\n                    {{ __('messages.quote.overview') }}\n                &lt;/button&gt;\n            &lt;/li&gt;\n            &lt;li class=\"nav-item position-relative me-7 mb-3\" role=\"presentation\"&gt;\n                &lt;button class=\"nav-link p-0\" id=\"note_terms-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#note_terms\"\n                        type=\"button\" role=\"tab\" aria-controls=\"note_terms\" aria-selected=\"false\"&gt;\n                    {{ __('messages.quote.note_terms') }}\n                &lt;/button&gt;\n            &lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/div&gt;\n    &lt;div class=\"tab-content\" id=\"myTabContent\"&gt;\n        &lt;div class=\"tab-pane fade show active\" id=\"overview\" role=\"tabpanel\"&gt;\n            &lt;div class=\"card\"&gt;\n                &lt;div class=\"d-flex flex-column\"&gt;\n                    &lt;div class=\"card-body\"&gt;\n                        &lt;div class=\"row\"&gt;\n                            &lt;div class=\"col-xxl-9\"&gt;\n                                &lt;div class=\"row\"&gt;\n                                    &lt;div class=\"col-lg-4 col-md-6\"&gt;\n                                        &lt;div class=\"d-flex mb-md-10 mb-5\"&gt;\n                                            &lt;div class=\"image image-circle image-lg-small width-100px\"&gt;\n                                                &lt;img src=\"{{ getLogoUrl() }}\" alt=\"user\" class=\"object-contain\"&gt;\n                                            &lt;/div&gt;\n                                            &lt;h3 class=\"ps-7\"&gt;{{ __('messages.quote.quote') }}\n                                                #{{ $quote-&gt;quote_id }}\n                                            &lt;/h3&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-lg-3 col-md-3 col-6\"&gt;\n                                        &lt;div class=\"d-flex flex-column mb-md-10 mb-5 mt-3 mt-md-0\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.quote.quote_date').':' }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-800\"&gt;{{ \\Carbon\\Carbon::parse($quote-&gt;quote_date)-&gt;translatedFormat(currentDateFormat()) }}&lt;/span&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-lg-3 col-md-3 col-6\"&gt;\n                                        &lt;div class=\"d-flex flex-column mb-md-10 mb-5 mt-3 mt-md-0\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.quote.due_date').':' }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-800\"&gt;{{ \\Carbon\\Carbon::parse($quote-&gt;due_date)-&gt;translatedFormat(currentDateFormat()) }}&lt;/span&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-md-2 col-6 mb-3 mb-sm-0\"&gt;\n                                        &lt;a target=\"_blank\"\n                                           href=\"{{ route('client.quotes.pdf',['quote' =&gt; $quote-&gt;id]) }}\"\n                                           class=\"btn btn-sm btn-success text-white\"&gt;{{ __('messages.quote.print_quote') }}&lt;/a&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-lg-5 col-md-6\"&gt;\n                                        &lt;div class=\"d-flex flex-column mb-md-10 mb-4\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.quote.issue_for').':' }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-800 mb-3\"&gt;{{ $quote-&gt;client-&gt;user-&gt;full_name }}&lt;/span&gt;\n                                            &lt;p class=\"text-gray-700 fs-4 mb-0\"&gt;\n                                                @if(isset($quote-&gt;client-&gt;address) &amp;&amp; !empty($quote-&gt;client-&gt;address))\n                                                    {{ ucfirst($quote-&gt;client-&gt;address) }}\n                                                @else\n                                                    {{ \"N/A\" }}\n                                                @endif\n                                            &lt;/p&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-md-2 col-md-6\"&gt;\n                                        &lt;div class=\"d-flex flex-column mb-md-10 mb-5\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.quote.issue_by').':' }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-800 mb-3\"&gt;{{ getAppName() }}&lt;/span&gt;\n                                            &lt;p class=\"text-gray-700 fs-4 mb-0\"&gt;\n                                                {!! getSettingValue('company_address') !!}&lt;/p&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-12 table-responsive\"&gt;\n                                        &lt;table class=\"table table-striped box-shadow-none mt-4\"&gt;\n                                            &lt;thead&gt;\n                                            &lt;tr&gt;\n                                                &lt;th scope=\"col\"&gt;{{ __('messages.product.product') }}&lt;/th&gt;\n                                                &lt;th scope=\"col\"&gt;{{ __('messages.quote.qty') }}&lt;/th&gt;\n                                                &lt;th scope=\"col\" class=\"text-end\"&gt;{{ __('messages.quote.price') }}&lt;/th&gt;\n                                                &lt;th scope=\"col\" class=\"text-end\"&gt;{{ __('messages.quote.amount') }}&lt;/th&gt;\n                                            &lt;/tr&gt;\n                                            &lt;/thead&gt;\n                                            &lt;tbody&gt;\n                                            @foreach($quote-&gt;quoteItems as $index =&gt; $quoteItem)\n                                                &lt;tr&gt;\n                                                    &lt;td class=\"py-4\"&gt;{{ isset($quoteItem-&gt;product-&gt;name)?$quoteItem-&gt;product-&gt;name:$quoteItem-&gt;product_name??'N/A' }}&lt;/td&gt;\n                                                    &lt;td class=\"py-4\"&gt;{{ $quoteItem-&gt;quantity }}&lt;/td&gt;\n                                                    &lt;td class=\"py-4 text-end min-width-130px\"&gt;{{  isset($quoteItem-&gt;price) ? getCurrencyAmount($quoteItem-&gt;price,true,$quote-&gt;tenant_id) : 'N/A' }}&lt;/td&gt;\n                                                    &lt;td class=\"py-4 text-end min-width-130px\"&gt;{{ isset($quoteItem-&gt;total) ? getCurrencyAmount($quoteItem-&gt;total,true,$quote-&gt;tenant_id) : 'N/A' }}&lt;/td&gt;\n                                                &lt;/tr&gt;\n                                            @endforeach\n                                            &lt;/tbody&gt;\n                                        &lt;/table&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-lg-5 ms-lg-auto mt-4\"&gt;\n                                        &lt;div class=\"border-top\"&gt;\n                                            &lt;table class=\"table table-borderless box-shadow-none mb-0 mt-5\"&gt;\n                                                &lt;tbody&gt;\n                                                &lt;tr&gt;\n                                                    &lt;td class=\"ps-0\"&gt;{{ __('messages.quote.sub_total').(':') }}&lt;/td&gt;\n                                                    &lt;td class=\"text-gray-900 text-end pe-0\"&gt;{{ isset($quote-&gt;amount) ? getCurrencyAmount($quote-&gt;amount,true,$quote-&gt;tenant_id) : 'N/A' }}&lt;/td&gt;\n                                                &lt;/tr&gt;\n                                                &lt;tr&gt;\n                                                    &lt;td class=\"ps-0\"&gt;{{ __('messages.quote.discount').(':') }}&lt;/td&gt;\n                                                    &lt;td class=\"text-gray-900 text-end pe-0\"&gt;\n                                                        @if($quote-&gt;discount == 0 || !isset($quote))\n                                                            &lt;span&gt;N/A&lt;/span&gt;\n                                                        @else\n                                                            @if( $quote-&gt;discount_type == \\App\\Models\\Quote::FIXED)\n                                                                {{ getCurrencyAmount($quote-&gt;discount,true,$quote-&gt;tenant_id) }}\n                                                            @else\n                                                                {{ getCurrencyAmount($quote-&gt;amount * $quote-&gt;discount / 100,true,$quote-&gt;tenant_id)}}\n                                                            @endif\n                                                        @endif\n                                                    &lt;/td&gt;\n                                                &lt;/tr&gt;\n                                                &lt;tr&gt;\n                                                    &lt;td class=\"ps-0\"&gt;{{ __('messages.quote.total').(':') }}&lt;/td&gt;\n                                                    &lt;td class=\"text-gray-900 text-end pe-0\"&gt;\n                                                        {{ getCurrencyAmount($quote-&gt;final_amount,true,$quote-&gt;tenant_id) }}\n                                                    &lt;/td&gt;\n                                                &lt;/tr&gt;\n                                                &lt;/tbody&gt;\n                                            &lt;/table&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"col-xxl-3 mb-5 mb-lg-0\"&gt;\n                                &lt;div class=\"bg-gray-100 rounded-15 p-md-7 p-5 h-100 mt-xxl-0 mt-5 col-xxl-9 ms-xxl-auto w-100\"&gt;\n                                    &lt;div class=\"mb-8\"&gt;\n                                        @if($quote-&gt;status == \\App\\Models\\Quote::DRAFT)\n                                            &lt;span class=\"badge bg-light-warning me-5\"&gt;Draft&lt;/span&gt;\n                                        @elseif($quote-&gt;status == \\App\\Models\\Quote::CONVERTED)\n                                            &lt;span class=\"badge bg-light-success me-5\"&gt;Converted&lt;/span&gt;\n                                        @endif\n                                    &lt;/div&gt;\n\n                                    &lt;h3 class=\"mb-5\"&gt;{{ __('messages.quote.client_overview') }}&lt;/h3&gt;\n                                    &lt;div class=\"row\"&gt;\n                                        &lt;div class=\"col-xxl-12 col-lg-4 col-sm-6 d-flex flex-column mb-xxl-7 mb-lg-0 mb-4\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.quote.client_name') }}&lt;/label&gt;\n                                            &lt;a href=\"#\"\n                                               class=\"link-primary fs-4 text-decoration-none\"&gt;{{ $quote-&gt;client-&gt;user-&gt;full_name }}&lt;/a&gt;\n                                        &lt;/div&gt;\n                                        &lt;div class=\"col-xxl-12 col-lg-4 col-sm-6 d-flex flex-column mb-xxl-7 mb-lg-0 mb-4\"&gt;\n                                            &lt;label for=\"name\"\n                                                   class=\"pb-2 fs-4 text-gray-600\"&gt;{{ __('messages.quote.client_email') }}&lt;/label&gt;\n                                            &lt;span class=\"fs-4 text-gray-900\"&gt;{{ $quote-&gt;client-&gt;user-&gt;email }}&lt;/span&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"tab-pane fade show\" id=\"note_terms\" role=\"tabpanel\"&gt;\n            &lt;div class=\"card\"&gt;\n                &lt;div class=\"card-body pt-5\"&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;div class=\"col-lg-12 mb-5\"&gt;\n                            &lt;div class=\"fw-bold text-gray-600 fs-7\"&gt;{{ __('messages.quote.note').':' }}&lt;/div&gt;\n                            &lt;div class=\"fs-6\"&gt;{!! $quote-&gt;note ?? __('messages.quote.note_not_found') !!}&lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"col-lg-12 mb-5\"&gt;\n                            &lt;div class=\"fw-bold text-gray-600 fs-7\"&gt;{{ __('messages.quote.terms').':' }}&lt;/div&gt;\n                            &lt;div class=\"fs-6\"&gt;{!! $quote-&gt;term ?? __('messages.quote.terms_not_found') !!}&lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>This Blade template is used to display the details of a quote in our application's client panel. Here's an explanation of its structure and content:</p> <ol> <li> <p>Tab Navigation:</p> </li> <li> <p>This section sets up tab navigation using Bootstrap's nav tabs. It allows users to switch between different sections of the quote details page.</p> </li> <li> <p>Two tabs are defined: \"Overview\" and \"Note &amp; Terms.\" The \"Overview\" tab is active by default.</p> </li> <li> <p>Tab Content:</p> </li> <li> <p>This section contains the content of the tabs.</p> </li> <li>The \"Overview\" tab includes information about the quote, such as its ID, dates, client details, and a table displaying quote items.</li> <li> <p>The \"Note &amp; Terms\" tab displays any notes and terms associated with the quote.</p> </li> <li> <p>Quote Information (Overview Tab):</p> </li> <li> <p>Various details of the quote are displayed, including the quote ID, quote date, due date, and links for printing the quote.</p> </li> <li>Information about the client, such as their name and address, is shown.</li> <li>A table lists the quote items, including product names, quantities, prices, and total amounts.</li> <li> <p>Subtotals, discounts, and the final total of the quote are displayed.</p> </li> <li> <p>Quote Status Badge:</p> </li> <li> <p>Depending on the quote's status, a badge is displayed. It indicates whether the quote is in \"Draft\" status or has been \"Converted.\"</p> </li> <li> <p>Client Overview (Overview Tab):</p> </li> <li> <p>Information about the client, such as their name and email, is displayed in a separate section.</p> </li> <li> <p>Note &amp; Terms (Note &amp; Terms Tab):</p> </li> <li>This section displays any notes and terms associated with the quote. If they are not available, default messages are shown.</li> </ol> <p>Overall, this template provides a structured and organized way to present the details of a quote to users in a client panel. It uses Bootstrap for tab navigation and styling, and it dynamically fetches data from the Laravel application to populate the quote information.</p>"},{"location":"Client/transactions/","title":"Transactions","text":""},{"location":"Client/transactions/#route","title":"Route","text":"<p>The route that leads to client's transactions is:</p> <pre><code>Route::get('transactions', [Client\\PaymentController::class, 'index'])-&gt;name('client.transactions.index');\n</code></pre>"},{"location":"Client/transactions/#controller","title":"Controller","text":"<p>The controller of the 'Transactions' page located in app&gt;http&gt;controllers&gt;PaymentController.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Exports\\AdminTransactionsExport;\nuse App\\Models\\Invoice;\nuse App\\Models\\Payment;\nuse App\\Models\\Role;\nuse Barryvdh\\DomPDF\\Facade as PDF;\nuse Illuminate\\Contracts\\Foundation\\Application;\nuse Illuminate\\Contracts\\View\\Factory;\nuse Illuminate\\Contracts\\View\\View;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\Response;\nuse Laracasts\\Flash\\Flash;\nuse Maatwebsite\\Excel\\Facades\\Excel;\nuse Symfony\\Component\\HttpFoundation\\BinaryFileResponse;\n\nclass PaymentController extends AppBaseController\n{\n    /**\n     * @return Application|Factory|View\n     */\n    public function index(): View|Factory|Application\n    {\n        return view('transactions.index');\n    }\n\n    /**\n     * @return BinaryFileResponse\n     */\n    public function exportTransactionsExcel(): BinaryFileResponse\n    {\n        return Excel::download(new AdminTransactionsExport(), 'transaction.xlsx');\n    }\n\n    /**\n     * @param $id\n     * @return JsonResponse\n     */\n    public function showPaymentNotes($id): JsonResponse\n    {\n        $paymentNotes = Payment::where('id', $id)-&gt;first();\n\n        return $this-&gt;sendResponse($paymentNotes-&gt;notes, 'Note retrieved successfully.');\n    }\n\n    /**\n     * @param  Request  $request\n     * @return mixed\n     */\n    public function changeTransactionStatus(Request $request): mixed\n    {\n        $input = $request-&gt;all();\n\n        /** @var Payment $payment */\n        $payment = Payment::whereId($input['id'])-&gt;wherePaymentMode(Payment::MANUAL)-&gt;with('invoice')-&gt;firstOrFail();\n\n        if ($input['status'] == Payment::MANUAL) {\n            $payment-&gt;update([\n                'is_approved' =&gt; $input['status'],\n            ]);\n            $this-&gt;updatePayment($payment);\n\n            return $this-&gt;sendSuccess('Manual Payment Approved successfully.');\n        }\n\n        $payment-&gt;update([\n            'is_approved' =&gt; $input['status'],\n        ]);\n        $this-&gt;updatePayment($payment);\n\n        return $this-&gt;sendSuccess('Manual Payment Denied successfully.');\n    }\n\n    /**\n     * @param  Payment  $payment\n     * @return void\n     */\n    private function updatePayment(Payment $payment): void\n    {\n        $paymentInvoice = $payment-&gt;invoice;\n        $totalPayment = Payment::whereInvoiceId($paymentInvoice-&gt;id)-&gt;whereIsApproved(Payment::APPROVED)-&gt;sum('amount');\n        $status = Invoice::PARTIALLY;\n        if ($payment-&gt;amount == $paymentInvoice-&gt;final_amount || $totalPayment == $paymentInvoice-&gt;final_amount) {\n            $status = $payment-&gt;is_approved == Payment::APPROVED ? Invoice::PAID : Invoice::UNPAID;\n        } elseif ($totalPayment == 0) {\n            $status = Invoice::UNPAID;\n        }\n        $paymentInvoice-&gt;update([\n            'status' =&gt; $status,\n        ]);\n    }\n\n    public function downloadAttachment($transactionId)\n    {\n        /** @var Payment $transaction */\n        $transaction = Payment::with('media')-&gt;findOrFail($transactionId);\n        $attachment = $transaction-&gt;media-&gt;first();\n\n        if (getLogInUser()-&gt;hasrole(Role::CLIENT)) {\n            if ($transaction-&gt;invoice-&gt;client-&gt;user_id !== getLogInUserId()) {\n                Flash::error('Seems, you are not allowed to access this record.');\n\n                return redirect()-&gt;back();\n            }\n        }\n\n        if ($attachment) {\n            return $attachment;\n        }\n\n        return null;\n    }\n\n    /**\n     * @return Response\n     */\n    public function exportTransactionsPdf(): Response\n    {\n        ini_set('max_execution_time', 36000000);\n        $data['payments'] = Payment::with(['invoice.client.user'])-&gt;orderBy('created_at', 'desc')-&gt;get();\n        $transactionsPdf = PDF::loadView('transactions.export_transactions_pdf', $data);\n\n        return $transactionsPdf-&gt;download('Transactions.pdf');\n    }\n}\n</code></pre> <p>This is a PHP class called <code>PaymentController</code> in our application. It is a controller responsible for handling various actions related to payments and transactions. Let's break down the key methods and functionality in this controller:</p> <ol> <li> <p>Namespace and Imports:</p> </li> <li> <p>The controller is in the <code>App\\Http\\Controllers</code> namespace.</p> </li> <li> <p>It imports several classes and facades that are used within the controller, such as models, export, and PDF generation libraries.</p> </li> <li> <p>Index Method:</p> </li> <li> <p>The <code>index</code> method is responsible for rendering a view named 'transactions.index'.</p> </li> <li> <p>Export Transactions Excel Method:</p> </li> <li> <p>The <code>exportTransactionsExcel</code> method is used for exporting transactions to an Excel file using the Maatwebsite\\Excel library.</p> </li> <li> <p>It returns a <code>BinaryFileResponse</code>, typically triggering a file download when accessed.</p> </li> <li> <p>Show Payment Notes Method:</p> </li> <li> <p>The <code>showPaymentNotes</code> method retrieves payment notes for a given payment ID.</p> </li> <li> <p>It returns a JSON response with the payment notes and a success message.</p> </li> <li> <p>Change Transaction Status Method:</p> </li> <li> <p>The <code>changeTransactionStatus</code> method updates the status of a payment transaction.</p> </li> <li>It accepts a POST request with an 'id' and 'status' parameter.</li> <li>Depending on the 'status' parameter, it either approves or denies a manual payment and updates the payment accordingly.</li> <li> <p>It returns a success message as a JSON response.</p> </li> <li> <p>Update Payment Method (Private):</p> </li> <li> <p>The <code>updatePayment</code> method is a private method used internally to update the status of an associated invoice based on the payment status.</p> </li> <li> <p>It calculates the total payment for an invoice and updates the invoice status accordingly.</p> </li> <li> <p>Download Attachment Method:</p> </li> <li> <p>The <code>downloadAttachment</code> method is used to download attachments associated with a payment transaction.</p> </li> <li> <p>It checks permissions for accessing the attachment based on the user's role and returns the attachment file if it exists.</p> </li> <li> <p>Export Transactions PDF Method:</p> </li> <li>The <code>exportTransactionsPdf</code> method generates a PDF document containing payment transactions using the DomPDF library.</li> <li>It sets a longer execution time to accommodate potentially large PDF generation.</li> <li>It loads the data into a PDF view named 'transactions.export_transactions_pdf' and triggers a PDF download.</li> </ol> <p>Overall, this controller handles various tasks related to payment transactions, including exporting transactions to Excel and PDF, changing transaction statuses, and managing attachments associated with transactions. It integrates with Laravel's features and libraries to perform these actions efficiently.</p>"},{"location":"Client/transactions/#model","title":"Model","text":"<p>The models related to this controller are :App\\Models\\Invoice , App\\Models\\Payment and App\\Models\\Role .</p>"},{"location":"Client/transactions/#invoice-model","title":"Invoice Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Carbon\\Carbon;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsToMany;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Support\\Str;\n\nclass Invoice extends Model\n{\n    use HasFactory;\n\n    public const SELECT_DISCOUNT_TYPE = 0;\n    public const FIXED = 1;\n    public const PERCENTAGE = 2;\n\n    public const DISCOUNT_TYPE = [\n        self::SELECT_DISCOUNT_TYPE =&gt; 'Select Discount Type',\n        self::FIXED =&gt; 'Fixed',\n        self::PERCENTAGE =&gt; 'Percentage',\n    ];\n\n    public const DRAFT = 0;\n    public const UNPAID = 1;\n    public const PAID = 2;\n    public const PARTIALLY = 3;\n    public const OVERDUE = 4;\n    public const STATUS_ALL = 5;\n    public const PROCESSING = 6;\n\n    public const STATUS_ARR = [\n        self::STATUS_ALL =&gt; 'All',\n        self::DRAFT =&gt; 'Draft',\n        self::UNPAID =&gt; 'Unpaid',\n        self::PAID =&gt; 'Paid',\n        self::PARTIALLY =&gt; 'Partially Paid',\n        self::OVERDUE =&gt; 'Overdue',\n        self::PROCESSING =&gt; 'Processing',\n    ];\n\n    public const RECURRING_OFF = 0;\n\n    public const RECURRING_ON = 1;\n\n    public const RECURRING_STATUS_ARR = [\n        self::RECURRING_ON =&gt; 'On',\n        self::RECURRING_OFF =&gt; 'Off',\n    ];\n\n    public const MONTHLY = 1;\n    public const QUARTERLY = 2;\n    public const SEMIANNUALLY = 3;\n    public const ANNUALLY = 4;\n\n    public const RECURRING_ARR = [\n        self::MONTHLY =&gt; 'Monthly',\n        self::QUARTERLY =&gt; 'Quarterly',\n        self::SEMIANNUALLY =&gt; 'Semi Annually',\n        self::ANNUALLY =&gt; 'Annually',\n    ];\n\n    /**\n     * Validation rules\n     *\n     * @var array\n     */\n    public static $rules = [\n        'client_id' =&gt; 'required',\n        'invoice_id' =&gt; 'required|unique:invoices,invoice_id',\n        'invoice_date' =&gt; 'required',\n        'due_date' =&gt; 'required',\n    ];\n\n    public static $messages = [\n        'client_id.required' =&gt; 'The Client field is required.',\n        'invoice_date.required' =&gt; 'The invoice date field is required.',\n        'due_date' =&gt; 'The invoice Due date field is required.',\n    ];\n\n    public $table = 'invoices';\n\n    public $appends = ['status_label'];\n\n    public $fillable = [\n        'client_id',\n        'invoice_date',\n        'due_date',\n        'invoice_id',\n        'currency_id',\n        'amount',\n        'discount_type',\n        'discount',\n        'final_amount',\n        'note',\n        'term',\n        'template_id',\n        'status',\n        'recurring_status',\n        'recurring_cycle',\n        'last_recurring_on',\n        'parent_id',\n    ];\n\n    protected $casts = [\n        'client_id' =&gt; 'integer',\n        'parent_id' =&gt; 'integer',\n        'invoice_date' =&gt; 'date',\n        'due_date' =&gt; 'date',\n        'invoice_id' =&gt; 'string',\n        'currency_id' =&gt; 'integer',\n        'amount' =&gt; 'double',\n        'discount_type' =&gt; 'integer',\n        'discount' =&gt; 'double',\n        'final_amount' =&gt; 'double',\n        'note' =&gt; 'string',\n        'term' =&gt; 'string',\n        'template_id' =&gt; 'integer',\n        'status' =&gt; 'integer',\n        'recurring_status' =&gt; 'integer',\n        'recurring_cycle' =&gt; 'integer',\n        'last_recurring_on' =&gt; 'date',\n        'tax' =&gt; 'double',\n    ];\n\n    public function getStatusLabelAttribute(): string\n    {\n        return self::STATUS_ARR[$this-&gt;status];\n    }\n\n    /**\n     * @return BelongsTo\n     */\n    public function client(): BelongsTo\n    {\n        return $this-&gt;belongsTo(Client::class, 'client_id', 'id');\n    }\n\n    /**\n     * @return HasMany\n     */\n    public function invoiceItems(): HasMany\n    {\n        return $this-&gt;hasMany(InvoiceItem::class);\n    }\n\n    /**\n     * @return string\n     */\n    public static function generateUniqueInvoiceId(): string\n    {\n        $invoiceId = mb_strtoupper(Str::random(6));\n        while (true) {\n            $isExist = self::whereInvoiceId($invoiceId)-&gt;exists();\n            if ($isExist) {\n                self::generateUniqueInvoiceId();\n            }\n            break;\n        }\n\n        return $invoiceId;\n    }\n\n    /**\n     * @return HasMany\n     */\n    public function payments(): HasMany\n    {\n        return $this-&gt;hasMany(Payment::class, 'invoice_id', 'id');\n    }\n\n    /**\n     * @return HasMany\n     */\n    public function AdminPayment(): HasMany\n    {\n        return $this-&gt;hasMany(AdminPayment::class, 'invoice_id', 'id');\n    }\n\n    /**\n     * @return BelongsTo\n     */\n    public function invoiceTemplate(): BelongsTo\n    {\n        return $this-&gt;belongsTo(InvoiceSetting::class, 'template_id', 'id');\n    }\n\n    public function parentInvoice(): BelongsTo\n    {\n        return $this-&gt;belongsTo(self::class, 'parent_id', 'id');\n    }\n\n    public function childInvoices(): HasMany\n    {\n        return $this-&gt;hasMany(self::class, 'parent_id', 'id');\n    }\n\n    /**\n     * @param $value\n     * @return Setting|mixed\n     */\n    public function getCurrencyIdAttribute($value)\n    {\n        if (! empty($value)) {\n            return Currency::where('id', $value)-&gt;pluck('id')-&gt;first();\n        }\n\n        return Currency::where('id', getSettingValue('current_currency'))-&gt;pluck('id')-&gt;first();\n    }\n\n    /**\n     * @param $value\n     */\n    public function setInvoiceDateAttribute($value): void\n    {\n        $this-&gt;attributes['invoice_date'] = Carbon::createFromFormat(currentDateFormat(),\n            $value)-&gt;translatedFormat('Y-m-d');\n    }\n\n    /**\n     * @param $value\n     */\n    public function setDueDateAttribute($value): void\n    {\n        $this-&gt;attributes['due_date'] = Carbon::createFromFormat(currentDateFormat(),\n            $value)-&gt;translatedFormat('Y-m-d');\n    }\n\n    /**\n     * @return BelongsToMany\n     */\n    public function invoiceTaxes(): BelongsToMany\n    {\n        return $this-&gt;belongsToMany(Tax::class,'invoice_taxes');\n    }\n}\n</code></pre> <p>The provided code represents a Laravel Eloquent model named <code>Invoice</code>. This model is used to interact with the 'invoices' database table and represents various attributes and behaviors related to invoices. Let's break down the key aspects of this <code>Invoice</code> model:</p> <ol> <li> <p>Namespace: The model is defined within the <code>App\\Models</code> namespace, which is a standard Laravel convention for organizing models.</p> </li> <li> <p>Extends Model: This model class extends <code>Illuminate\\Database\\Eloquent\\Model</code>, which means it inherits various features and functionalities from the Eloquent model class.</p> </li> <li> <p>Use of HasFactory Trait: The <code>HasFactory</code> trait is included in this model. It's used to enable Laravel's factory support, allowing you to easily create model instances for testing or seeding the database.</p> </li> <li> <p>Constants: The model defines several constant values that represent different aspects of invoices, such as discount types, invoice statuses, recurring statuses, and recurring cycle options. These constants are used to provide meaningful labels and options for invoices.</p> </li> <li> <p>Validation Rules and Messages: The model defines validation rules and messages using the <code>$rules</code> and <code>$messages</code> static properties. These rules and messages are used for data validation when creating or updating invoice records.</p> </li> <li> <p>Table Name: The <code>public $table</code> property is set to 'invoices', indicating that this model is associated with the 'invoices' database table.</p> </li> <li> <p>Appends Attribute: The <code>public $appends</code> property is an array that defines additional attributes that should be included when converting the model to an array or JSON. In this case, it includes a 'status_label' attribute.</p> </li> <li> <p>Fillable Attributes: The <code>public $fillable</code> property is an array that lists the attributes of the model that are allowed to be mass-assigned. Mass assignment is commonly used when creating or updating records. In this case, it allows mass assignment for various invoice-related attributes.</p> </li> <li> <p>Attribute Casting: The <code>protected $casts</code> property is an array that defines the data types to which specific attributes should be cast when retrieving them from the database. It ensures that attributes like dates and numeric values are cast to their appropriate data types.</p> </li> <li> <p>Accessors and Mutators: The model defines accessor methods (<code>getCurrencyIdAttribute</code>, <code>getStatusLabelAttribute</code>) and mutator methods (<code>setInvoiceDateAttribute</code>, <code>setDueDateAttribute</code>) to customize the behavior of attribute access and assignment.</p> </li> <li> <p>Relationships: The model defines several relationships with other Eloquent models, including:</p> <ul> <li><code>client()</code>: Belongs to a <code>Client</code> model.</li> <li><code>invoiceItems()</code>: Has many <code>InvoiceItem</code> models.</li> <li><code>payments()</code>: Has many <code>Payment</code> models.</li> <li><code>AdminPayment()</code>: Has many <code>AdminPayment</code> models.</li> <li><code>invoiceTemplate()</code>: Belongs to an <code>InvoiceSetting</code> model.</li> <li><code>parentInvoice()</code>: Belongs to another <code>Invoice</code> model as a parent invoice.</li> <li><code>childInvoices()</code>: Has many <code>Invoice</code> models as child invoices.</li> <li><code>invoiceTaxes()</code>: Belongs to many <code>Tax</code> models through the 'invoice_taxes' pivot table.</li> </ul> </li> <li> <p>Custom Methods: The model defines custom methods like <code>generateUniqueInvoiceId</code> to generate unique invoice IDs and <code>setInvoiceDateAttribute</code> and <code>setDueDateAttribute</code> to format date attributes.</p> </li> </ol>"},{"location":"Client/transactions/#payment-model","title":"Payment Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Barryvdh\\LaravelIdeHelper\\Eloquent;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Support\\Carbon;\nuse Spatie\\MediaLibrary\\HasMedia;\nuse Spatie\\MediaLibrary\\InteractsWithMedia;\nuse Spatie\\MediaLibrary\\MediaCollections\\Models\\Media;\n\nclass Payment extends Model implements HasMedia\n{\n    use HasFactory, InteractsWithMedia;\n\n    protected $table = 'payments';\n\n    protected $fillable = [\n        'invoice_id', 'amount', 'payment_date', 'payment_mode', 'transaction_id', 'notes', 'is_approved',\n    ];\n\n    protected $casts = [\n        'invoice_id'     =&gt; 'integer',\n        'amount'         =&gt; 'double',\n        'payment_date'   =&gt; 'datetime',\n        'payment_mode'   =&gt; 'integer',\n        'transaction_id' =&gt; 'string',\n        'meta'           =&gt; 'json',\n        'notes'          =&gt; 'string',\n        'user_id'        =&gt; 'integer',\n        'is_approved'    =&gt; 'integer',\n    ];\n\n    public $appends = ['payments_mode'];\n\n    const PAYMENT_ATTACHMENT = 'payment_attachment';\n\n    const FULLPAYMENT = 2;\n    const PARTIALLYPAYMENT = 3;\n\n    const PAYMENT_TYPE = [\n        self::FULLPAYMENT      =&gt; 'Full Payment',\n        self::PARTIALLYPAYMENT =&gt; 'Partially Payment',\n    ];\n\n    const PENDING = 0;\n    const APPROVED = 1;\n    const REJECTED = 2;\n    const STATUS_ALL = 3;\n    const PAID = 'Paid';\n    const PROCESSING = 'Processing';\n    const DENIED = 'Denied';\n    const STATUS_ARR_ALL = 'All';\n\n    const PAYMENT_STATUS = [\n        self::STATUS_ALL =&gt; self::STATUS_ARR_ALL,\n        self::PENDING    =&gt; self::PROCESSING,\n        self::APPROVED   =&gt; self::PAID,\n        self::REJECTED   =&gt; self::DENIED,\n    ];\n\n    const STATUS = [\n        'RECEIVED_AMOUNT' =&gt; 'Received Amount',\n        'PAID_AMOUNT'     =&gt; 'Paid Amount',\n        'DUE_AMOUNT'      =&gt; 'Due Amount',\n    ];\n\n    const MANUAL = 1;\n    const STRIPE = 2;\n    const PAYPAL = 3;\n    const CASH = 4;\n    const RAZORPAY = 5;\n    const ALL = 0;\n\n    const PAYMENT_MODE = [\n        self::ALL      =&gt; 'All',\n        self::MANUAL   =&gt; 'Manual',\n        self::STRIPE   =&gt; 'Stripe',\n        self::PAYPAL   =&gt; 'Paypal',\n        self::CASH     =&gt; 'Cash',\n        self::RAZORPAY =&gt; 'Razorpay',\n    ];\n\n    public static $rules = [\n        'payment_type'       =&gt; 'required',\n        'amount'             =&gt; 'required',\n        'payment_mode'       =&gt; 'required',\n        'payment_attachment' =&gt; 'nullable|mimes:pdf,png,jpeg,jpg',\n    ];\n\n    /**\n     * @return string\n     */\n    public function getPaymentAttachmentAttribute(): string\n    {\n        /** @var Media $media */\n        $media = $this-&gt;getMedia(self::PAYMENT_ATTACHMENT)-&gt;first();\n        if ($media !== null) {\n            return $media-&gt;getFullUrl();\n        }\n\n        return false;\n    }\n\n    /**\n     * @return string\n     */\n    public function getPaymentTypeAttribute(): string\n    {\n        return self::PAYMENT_MODE[$this-&gt;payment_mode];\n    }\n\n    /**\n     * @return string\n     */\n    public function getPaymentsModeAttribute(): string\n    {\n        return self::PAYMENT_MODE[$this-&gt;payment_mode];\n    }\n\n    /**\n     * @return BelongsTo\n     */\n    public function invoice(): BelongsTo\n    {\n        return $this-&gt;belongsTo(Invoice::class);\n    }\n}\n</code></pre> <p>The provided code represents a Laravel Eloquent model named <code>Payment</code>. This model is used to interact with the 'payments' database table and represents various attributes and behaviors related to payments. Let's break down the key aspects of this <code>Payment</code> model:</p> <ol> <li> <p>Namespace: The model is defined within the <code>App\\Models</code> namespace, which is a standard Laravel convention for organizing models.</p> </li> <li> <p>Extends Model: This model class extends <code>Illuminate\\Database\\Eloquent\\Model</code>, which means it inherits various features and functionalities from the Eloquent model class.</p> </li> <li> <p>Use of Traits: The <code>HasFactory</code> and <code>InteractsWithMedia</code> traits are included in this model.</p> </li> <li> <p><code>HasFactory</code> is used to enable Laravel's factory support, allowing you to easily create model instances for testing or seeding the database.</p> </li> <li> <p><code>InteractsWithMedia</code> is used to integrate the model with the Spatie Media Library, which allows you to associate media files (such as payment attachments) with the model.</p> </li> <li> <p>Table Name: The <code>protected $table</code> property is set to 'payments', indicating that this model is associated with the 'payments' database table.</p> </li> <li> <p>Fillable Attributes: The <code>protected $fillable</code> property is an array that lists the attributes of the model that are allowed to be mass-assigned. Mass assignment is commonly used when creating or updating records. In this case, it allows mass assignment for various payment-related attributes such as 'invoice_id,' 'amount,' 'payment_date,' 'payment_mode,' 'transaction_id,' 'notes,' and 'is_approved.'</p> </li> <li> <p>Attribute Casting: The <code>protected $casts</code> property is an array that defines the data types to which specific attributes should be cast when retrieving them from the database. It ensures that attributes like dates, numbers, and JSON fields are cast to their appropriate data types.</p> </li> <li> <p>Appends Attribute: The <code>public $appends</code> property is an array that defines additional attributes that should be included when converting the model to an array or JSON. In this case, it includes a 'payments_mode' attribute.</p> </li> <li> <p>Constants: The model defines constant values that represent different aspects of payments, including payment types, payment statuses, and payment modes.</p> </li> <li> <p>Validation Rules: The model defines validation rules using the <code>$rules</code> static property. These rules are used for data validation when creating or updating payment records.</p> </li> <li> <p>Custom Accessors: The model defines custom accessor methods (<code>getPaymentAttachmentAttribute</code>, <code>getPaymentTypeAttribute</code>, <code>getPaymentsModeAttribute</code>) to customize the behavior of attribute access. These accessors provide formatted URLs for payment attachments and human-readable labels for payment type and mode.</p> </li> <li> <p>Relationships: The model defines a relationship with the <code>Invoice</code> model using the <code>invoice()</code> method, indicating that a payment belongs to an invoice.</p> </li> </ol> <p>Overall, the <code>Payment</code> model provides the structure and functionality to work with payment data in our application. It allows you to associate payments with invoices, manage payment attributes, and interact with media attachments associated with payments.</p>"},{"location":"Client/transactions/#role-model","title":"Role Model","text":"<pre><code>&lt;?php\n\nnamespace App\\Models;\n\nuse Database\\Factories\\RoleFactory;\nuse Eloquent as Model;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Support\\Carbon;\nuse Spatie\\Permission\\Models\\Role as roleModal;\n\nclass Role extends roleModal\n{\n    use HasFactory;\n\n    protected $table = 'roles';\n\n    public const ADMIN = 1;\n\n    public const CLIENT = 2;\n\n    const ROLE_ADMIN = 'admin';\n\n    const ROLE_CLIENT = 'client';\n\n    protected $fillable = [\n        'name',\n        'display_name',\n        'is_default',\n        'permission_id',\n        'guard_name',\n    ];\n\n    protected $casts = [\n        'name' =&gt; 'string',\n        'display_name' =&gt; 'string',\n        'is_default' =&gt; 'integer',\n        'guard_name' =&gt; 'string',\n    ];\n\n    public static $rules = [\n        'display_name' =&gt; 'required',\n        'permission_id' =&gt; 'required',\n    ];\n}\n</code></pre> <p>The provided code defines a Laravel model class called <code>Role</code>, which extends the <code>Spatie\\Permission\\Models\\Role</code> model. It is a custom extension of the Spatie Permission package's Role model. Here's an explanation of the key elements within this <code>Role</code> model:</p> <ol> <li> <p>Namespace and Imports:</p> </li> <li> <p>The model is in the <code>App\\Models</code> namespace.</p> </li> <li> <p>It imports the necessary classes, including <code>Model</code> and <code>HasFactory</code>.</p> </li> <li> <p>Use of HasFactory:</p> </li> <li> <p>The <code>HasFactory</code> trait is used, indicating that this model can be used with factory classes for database seeding and testing.</p> </li> <li> <p>Table Name:</p> </li> <li> <p>The protected property <code>$table</code> specifies the name of the database table associated with this model. In this case, it's set to <code>'roles'</code>.</p> </li> <li> <p>Constants for Role Types:</p> </li> <li> <p>Two constants, <code>ADMIN</code> and <code>CLIENT</code>, are defined, each with an integer value.</p> </li> <li> <p>These constants represent different role types within the application, such as administrator and client roles.</p> </li> <li> <p>Role Names:</p> </li> <li> <p>Two constants, <code>ROLE_ADMIN</code> and <code>ROLE_CLIENT</code>, are defined, each representing the display name for a role.</p> </li> <li> <p>These constants are used for displaying the role names in the application.</p> </li> <li> <p>Fillable Attributes:</p> </li> <li> <p>The <code>protected $fillable</code> property lists the attributes that can be mass-assigned when creating or updating a <code>Role</code> model.</p> </li> <li> <p>Attributes include 'name', 'display_name', 'is_default', 'permission_id', and 'guard_name'.</p> </li> <li> <p>Attribute Type Casting:</p> </li> <li> <p>The <code>protected $casts</code> property specifies the data types to which certain attributes should be cast.</p> </li> <li> <p>For example, 'is_default' is cast to an integer, and 'name' and 'display_name' are cast to strings.</p> </li> <li> <p>Validation Rules:</p> </li> <li>The <code>public static $rules</code> property defines validation rules for creating or updating a <code>Role</code> model.</li> <li>It requires that 'display_name' and 'permission_id' attributes are provided.</li> </ol> <p>This <code>Role</code> model is tailored for managing user roles within the application. It extends the Spatie Permission package's Role model to provide additional functionality and customization specific to the application's requirements.</p>"},{"location":"Client/transactions/#view","title":"View","text":""},{"location":"Client/transactions/#the-livewire-transactions-table","title":"The livewire: Transactions table","text":"<p>The livewire of the 'client transactions table' located in app&gt;http&gt;livewire&gt;ClientTransactionTable.php.</p> <pre><code>&lt;?php\n\nnamespace App\\Http\\Livewire;\n\nuse App\\Models\\Payment;\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Support\\Facades\\Auth;\nuse Rappasoft\\LaravelLivewireTables\\Views\\Column;\n\nclass ClientTransactionTable extends LivewireTableComponent\n{\n    protected $model = Payment::class;\n    protected string $tableName = 'payments';\n\n    // for table header button\n    public $showButtonOnHeader = true;\n    public $buttonComponent = 'client_panel.transactions.components.export-button';\n    public bool $showFilterOnHeader = true;\n    public $filterComponent = ['transactions.components.filter-button', Payment::PAYMENT_MODE, Payment::PAYMENT_STATUS];\n    protected $listeners = ['changePaymentModeFilter', 'changePaymentStatusFilter', 'resetPageTable'];\n    public $paymentModeFilter = Payment::ALL;\n    public $paymentStatusFilter = Payment::STATUS_ALL;\n\n    public function configure(): void\n    {\n        $this-&gt;setPrimaryKey('id');\n        $this-&gt;setDefaultSort('created_at', 'desc');\n        $this-&gt;setQueryStringStatus(false);\n\n        $this-&gt;setThAttributes(function (Column $column) {\n            if ($column-&gt;isField('amount')) {\n                return [\n                    'class' =&gt; 'd-flex justify-content-end',\n                ];\n            }\n\n            if ($column-&gt;isField('payment_mode')) {\n                return [\n                    'class' =&gt; 'text-center',\n                ];\n            }\n            if ($column-&gt;isField('id')) {\n                return [\n                    'class' =&gt; 'text-center',\n                ];\n            }\n\n            return [\n            ];\n        });\n\n        $this-&gt;setTdAttributes(function (Column $column, $row, $columnIndex, $rowIndex) {\n            if (in_array($column-&gt;getField(), ['payment_mode'])) {\n                return [\n                    'class' =&gt; 'text-center',\n                ];\n            }\n            if (in_array($column-&gt;getField(), ['invoice_id'])) {\n                return [\n                    'class' =&gt; 'w-25',\n                ];\n            }\n            if (in_array($column-&gt;getField(), ['payment_date'])) {\n                return [\n                    'class' =&gt; 'w-35',\n                ];\n            }\n            if (in_array($column-&gt;getField(), ['amount'])) {\n                return [\n                    'class' =&gt; 'text-end w-35',\n                ];\n            }\n            if ($column-&gt;getField() === 'id') {\n                return [\n                    'class' =&gt; 'text-center',\n                ];\n            }\n\n            return [\n            ];\n        });\n    }\n\n    public function columns(): array\n    {\n        return [\n            Column::make(__('messages.invoice.invoice_id'), 'invoice.invoice_id')\n//                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('transactions.components.invoice-id-payment-date')\n                        -&gt;withValue([\n                            'invoice-id-route' =&gt; route('client.invoices.show', $row-&gt;invoice-&gt;id),\n                            'invoice-id' =&gt; $row-&gt;invoice-&gt;invoice_id,\n                        ]);\n                }),\n            Column::make('Last Name', 'invoice.client.user.last_name')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;hideif('admin'),\n            Column::make(__('messages.payment.payment_date'), 'payment_date')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return view('transactions.components.invoice-id-payment-date')\n                        -&gt;withValue([\n                            'payment-date' =&gt; $row-&gt;payment_date,\n                        ]);\n                }),\n            Column::make(__('messages.invoice.amount'), 'amount')\n                -&gt;sortable()\n                -&gt;searchable()\n                -&gt;format(function ($value, $row, Column $column) {\n                    return getInvoiceCurrencyAmount($row-&gt;amount, $row-&gt;invoice-&gt;currency_id, true);\n                }),\n            Column::make(__('messages.invoice.payment_method'), 'payment_mode')\n                -&gt;searchable()\n                -&gt;view('transactions.components.payment-mode'),\n            Column::make(__('messages.common.status'), 'payment_mode')\n                -&gt;searchable()\n                -&gt;view('transactions.components.transaction-status'),\n            Column::make(__('messages.common.attachment'), 'id')\n                -&gt;searchable()\n                -&gt;view('transactions.components.transaction-attachment'),\n        ];\n    }\n\n    public function builder(): Builder\n    {\n        $query = Payment::with('invoice.client.user')-&gt;whereHas('invoice.client')\n            -&gt;where('user_id', Auth::id())-&gt;select('payments.*');\n\n        $query-&gt;when(isset($this-&gt;paymentModeFilter), function (Builder $q) {\n            if ($this-&gt;paymentModeFilter != Payment::ALL) {\n                $q-&gt;where('payment_mode', $this-&gt;paymentModeFilter);\n            }\n        });\n\n        $query-&gt;when(isset($this-&gt;paymentStatusFilter), function (Builder $q) {\n            if ($this-&gt;paymentStatusFilter != Payment::STATUS_ALL) {\n                $q-&gt;where('is_approved', $this-&gt;paymentStatusFilter);\n            }\n        });\n\n        return $query;\n    }\n\n    /**\n     * @param $mode\n     */\n    public function changePaymentModeFilter($mode)\n    {\n        $this-&gt;resetPage($this-&gt;getComputedPageName());\n        $this-&gt;paymentModeFilter = $mode;\n        $this-&gt;setBuilder($this-&gt;builder());\n    }\n\n    /**\n     * @param $status\n     */\n    public function changePaymentStatusFilter($status)\n    {\n        $this-&gt;resetPage($this-&gt;getComputedPageName());\n        $this-&gt;paymentStatusFilter = $status;\n        $this-&gt;setBuilder($this-&gt;builder());\n    }\n}\n</code></pre> <p>The provided PHP code is a Livewire component in our application, responsible for managing and rendering a table of client transactions within the client panel. Here's an explanation of the key aspects of this Livewire component:</p> <ol> <li> <p>Model and Table Name:</p> </li> <li> <p>The <code>protected $model</code> property is set to <code>Payment::class</code>, indicating that this Livewire component is associated with the <code>Payment</code> model.</p> </li> <li> <p>The <code>protected string $tableName</code> property is set to 'payments', specifying the name of the Livewire table component.</p> </li> <li> <p>Table Header Options:</p> </li> <li> <p><code>$showButtonOnHeader</code> and <code>$buttonComponent</code> are used to show a button in the table header. The button is specified by the <code>client_panel.transactions.components.export-button</code> Livewire component.</p> </li> <li> <p><code>$showFilterOnHeader</code> and <code>$filterComponent</code> are used to show filters in the table header. Filters are specified by the <code>transactions.components.filter-button</code> Livewire component, and two filter options are passed: <code>Payment::PAYMENT_MODE</code> and <code>Payment::PAYMENT_STATUS</code>.</p> </li> <li> <p>Event Listeners:</p> </li> <li> <p>The Livewire component defines event listeners for changes in payment mode and payment status filters, as well as resetting the page.</p> </li> <li> <p>Filter Properties:</p> </li> <li> <p><code>$paymentModeFilter</code> and <code>$paymentStatusFilter</code> store the selected payment mode and payment status filter values.</p> </li> <li> <p>Configuration:</p> </li> <li> <p>The <code>configure</code> method is used for configuration:</p> <ul> <li>It sets the primary key for the table to 'id'.</li> <li>It specifies the default sorting by 'created_at' in descending order.</li> <li>It disables the use of query string parameters for filtering.</li> <li>It defines attributes for table header (<code>th</code>) and table data (<code>td</code>) columns.</li> </ul> </li> <li> <p>Table Columns:</p> </li> <li> <p>The <code>columns</code> method defines the columns to be displayed in the table, including invoice ID, client last name, payment date, amount, payment method, transaction status, and attachment.</p> </li> <li> <p>Builder Method:</p> </li> <li> <p>The <code>builder</code> method defines the query builder used to retrieve transaction data based on the selected filters (payment mode and payment status).</p> </li> <li>It includes related data, such as the associated invoice, client, and user.</li> <li> <p>It filters transactions based on the selected payment mode and payment status.</p> </li> <li> <p>Filter Methods:</p> </li> <li><code>changePaymentModeFilter</code> and <code>changePaymentStatusFilter</code> methods are used to change and apply the payment mode and payment status filters. They also reset the table page to the first page when filters are changed.</li> </ol> <p>Overall, this Livewire component provides a dynamic and interactive table for displaying client transactions in a client panel. Users can filter transactions by payment mode and payment status, and export data using the provided button.</p>"},{"location":"Client/transactions/#list-of-transactions","title":"List of Transactions","text":"<p>The list of transactions view is located in : resources\\views\\client_panel\\Transactions\\index.blade.php.</p> <pre><code>@extends('client_panel.layouts.app')\n@section('title')\n    Transactions\n@endsection\n@section('content')\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"d-flex flex-column \"&gt;\n            @include('flash::message')\n            &lt;livewire:client-transaction-table/&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    @include('transactions.payment-notes-modal')\n    {{ Form::hidden('currency', getCurrencySymbol() ,['id' =&gt; 'currency']) }}\n@endsection\n</code></pre> <p>The provided Blade template appears to be part of a Laravel application's client panel and is responsible for rendering a page to display transactions. Here's an explanation of the key components within this template:</p> <ol> <li> <p>Page Title and Content Section:</p> </li> <li> <p>The <code>@section('title')</code> directive sets the title of the page to \"Transactions.\"</p> </li> <li> <p>Container and Content:</p> </li> <li> <p>The page content is wrapped within a <code>&lt;div&gt;</code> with the class <code>container-fluid</code>, providing a fluid container for the page layout.</p> </li> <li> <p>Within this container, there's a <code>flex-column</code> layout, which typically arranges child elements vertically.</p> </li> <li> <p>Flash Messages:</p> </li> <li> <p><code>@include('flash::message')</code> is used to include flash messages. Flash messages are typically used to display notifications or alerts to users.</p> </li> <li> <p>Livewire Component:</p> </li> <li> <p><code>&lt;livewire:client-transaction-table/&gt;</code> includes a Livewire component called <code>client-transaction-table</code>. This component is responsible for rendering a table of transactions and handles filtering, sorting, and pagination of the transaction data.</p> </li> <li> <p>Payment Notes Modal:</p> </li> <li> <p><code>@include('transactions.payment-notes-modal')</code> includes a modal for displaying payment notes. Modals are often used to show additional information or allow user interactions without navigating away from the current page.</p> </li> <li> <p>Hidden Input for Currency:</p> </li> <li><code>{{ Form::hidden('currency', getCurrencySymbol() ,['id' =&gt; 'currency']) }}</code> creates a hidden input field with the name \"currency\" and a value retrieved from the <code>getCurrencySymbol()</code> function. This hidden input used to store currency-related information on the page, possibly for JavaScript functionality.</li> </ol>"}]}