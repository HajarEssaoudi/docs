
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../dashboard/">
      
      
        <link rel="next" href="../invoices/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.18">
    
    
      
        <title>Quotes - InfyInvoices</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#quotes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="InfyInvoices" class="md-header__button md-logo" aria-label="InfyInvoices" data-md-component="logo">
      
  <img src="../../logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            InfyInvoices
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Quotes
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../Login/" class="md-tabs__link">
      Authentication page
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Admin/dashboard/" class="md-tabs__link">
        Admin
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../dashboard/" class="md-tabs__link md-tabs__link--active">
        Client
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../layout/" class="md-tabs__link">
      Layout
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="InfyInvoices" class="md-nav__button md-logo" aria-label="InfyInvoices" data-md-component="logo">
      
  <img src="../../logo.png" alt="logo">

    </a>
    InfyInvoices
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Login/" class="md-nav__link">
        Authentication page
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Admin
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Admin
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Admin/dashboard/" class="md-nav__link">
        Dashboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Admin/admins/" class="md-nav__link">
        admins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Admin/clients/" class="md-nav__link">
        clients
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Admin/categories/" class="md-nav__link">
        categories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Admin/Taxes/" class="md-nav__link">
        Taxes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Admin/Products/" class="md-nav__link">
        Products
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Admin/Quotes/" class="md-nav__link">
        Quotes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Admin/invoices/" class="md-nav__link">
        invoices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Admin/Transactions/" class="md-nav__link">
        Transactions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Admin/Payments/" class="md-nav__link">
        Payments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Admin/InvoiceTemplates/" class="md-nav__link">
        Invoice Templates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Admin/Settings/" class="md-nav__link">
        Settings
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Client
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Client
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dashboard/" class="md-nav__link">
        Dashboard
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Quotes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Quotes
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#route" class="md-nav__link">
    Route
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#controller" class="md-nav__link">
    Controller
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model" class="md-nav__link">
    Model
  </a>
  
    <nav class="md-nav" aria-label="Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#invoice-model" class="md-nav__link">
    Invoice Model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quote-model" class="md-nav__link">
    Quote Model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#product-model" class="md-nav__link">
    Product Model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#invoice-item-model" class="md-nav__link">
    Invoice Item Model
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#view" class="md-nav__link">
    View
  </a>
  
    <nav class="md-nav" aria-label="View">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-livewire-quote-table" class="md-nav__link">
    The livewire: Quote table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-of-quotes" class="md-nav__link">
    List of Quotes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-quote" class="md-nav__link">
    Show Quote
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../invoices/" class="md-nav__link">
        Invoices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../transactions/" class="md-nav__link">
        Transactions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../layout/" class="md-nav__link">
        Layout
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="quotes">Quotes</h1>
<h2 id="route">Route</h2>
<div class="highlight"><pre><span></span><code><span class="x">        Route::name(&#39;client.&#39;)-&gt;group(function () {</span>
<span class="x">        Route::resource(&#39;quotes&#39;, Client\QuoteController::class);</span>
<span class="x">    });</span>
</code></pre></div>
<p>This Laravel route definition creates a set of routes with the "client" namespace for managing quotes. It uses the <code>Route::resource</code> method to generate standard CRUD (Create, Read, Update, Delete) routes for the "quotes" resource, and all these routes will have the "client." prefix in their names.</p>
<h2 id="controller">Controller</h2>
<p>The controller of the 'Quotes' page located in <strong>app&gt;http&gt;controllers&gt;QuoteController.php</strong>.</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Http</span><span class="err">\</span><span class="nx">Controllers</span><span class="p">;</span>

<span class="nx">use</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Exports</span><span class="err">\</span><span class="nx">AdminQuotesExport</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Http</span><span class="err">\</span><span class="nx">Requests</span><span class="err">\</span><span class="nx">CreateQuoteRequest</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Http</span><span class="err">\</span><span class="nx">Requests</span><span class="err">\</span><span class="nx">UpdateQuoteRequest</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Models</span><span class="err">\</span><span class="nx">Invoice</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Models</span><span class="err">\</span><span class="nx">InvoiceItem</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Models</span><span class="err">\</span><span class="nx">Product</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Models</span><span class="err">\</span><span class="nx">Quote</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Repositories</span><span class="err">\</span><span class="nx">QuoteRepository</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Barryvdh</span><span class="err">\</span><span class="nx">DomPDF</span><span class="err">\</span><span class="nx">Facade</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">PDF</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Carbon</span><span class="err">\</span><span class="nx">Carbon</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Exception</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Contracts</span><span class="err">\</span><span class="nx">Foundation</span><span class="err">\</span><span class="nx">Application</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Contracts</span><span class="err">\</span><span class="nx">View</span><span class="err">\</span><span class="nx">Factory</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Contracts</span><span class="err">\</span><span class="nx">View</span><span class="err">\</span><span class="nx">View</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Http</span><span class="err">\</span><span class="nx">JsonResponse</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Http</span><span class="err">\</span><span class="nx">RedirectResponse</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Http</span><span class="err">\</span><span class="nx">Request</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Http</span><span class="err">\</span><span class="nx">Response</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Support</span><span class="err">\</span><span class="nx">Facades</span><span class="err">\</span><span class="nx">DB</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Laracasts</span><span class="err">\</span><span class="nx">Flash</span><span class="err">\</span><span class="nx">Flash</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Maatwebsite</span><span class="err">\</span><span class="nx">Excel</span><span class="err">\</span><span class="nx">Facades</span><span class="err">\</span><span class="nx">Excel</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Symfony</span><span class="err">\</span><span class="nx">Component</span><span class="err">\</span><span class="nx">HttpFoundation</span><span class="err">\</span><span class="nx">BinaryFileResponse</span><span class="p">;</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">QuoteController</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">AppBaseController</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/** @var QuoteRepository */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="nx">$quoteRepository</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">__construct</span><span class="p">(</span><span class="nx">QuoteRepository</span><span class="w"> </span><span class="nx">$quoteRepo</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteRepo</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param  Request  $request</span>
<span class="cm">     * @return Application|Factory|View</span>
<span class="cm">     *</span>
<span class="cm">     * @throws Exception</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">index</span><span class="p">(</span><span class="nx">Request</span><span class="w"> </span><span class="nx">$request</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$statusArr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Quote</span><span class="o">::</span><span class="nx">STATUS_ARR</span><span class="p">;</span>
<span class="w">        </span><span class="nx">$status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$request</span><span class="o">-&gt;</span><span class="nx">status</span><span class="p">;</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">view</span><span class="p">(</span><span class="s1">&#39;quotes.index&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">compact</span><span class="p">(</span><span class="s1">&#39;statusArr&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;status&#39;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Show the form for creating a new resource.</span>
<span class="cm">     *</span>
<span class="cm">     * @return Application|Factory|View</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">create</span><span class="p">()</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">getSyncList</span><span class="p">();</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">view</span><span class="p">(</span><span class="s1">&#39;quotes.create&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="kd">with</span><span class="p">(</span><span class="nx">$data</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param  CreateQuoteRequest  $request</span>
<span class="cm">     * @return JsonResponse</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">store</span><span class="p">(</span><span class="nx">CreateQuoteRequest</span><span class="w"> </span><span class="nx">$request</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">DB</span><span class="o">::</span><span class="nx">beginTransaction</span><span class="p">();</span>
<span class="w">            </span><span class="nx">$request</span><span class="o">-&gt;</span><span class="nx">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Quote</span><span class="o">::</span><span class="nx">DRAFT</span><span class="p">;</span>
<span class="w">            </span><span class="nx">$quote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">saveQuote</span><span class="p">(</span><span class="nx">$request</span><span class="o">-&gt;</span><span class="nx">all</span><span class="p">());</span>
<span class="w">            </span><span class="nx">DB</span><span class="o">::</span><span class="nx">commit</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">Exception</span><span class="w"> </span><span class="nx">$e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">DB</span><span class="o">::</span><span class="nx">rollBack</span><span class="p">();</span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">sendError</span><span class="p">(</span><span class="nx">$e</span><span class="o">-&gt;</span><span class="nx">getMessage</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">sendResponse</span><span class="p">(</span><span class="nx">$quote</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Quote saved successfully.&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Display the specified resource.</span>
<span class="cm">     *</span>
<span class="cm">     * @param  Quote  $quote</span>
<span class="cm">     * @return Application|Factory|View</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">show</span><span class="p">(</span><span class="nx">Quote</span><span class="w"> </span><span class="nx">$quote</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$quoteData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">getQuoteData</span><span class="p">(</span><span class="nx">$quote</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">view</span><span class="p">(</span><span class="s1">&#39;quotes.show&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="kd">with</span><span class="p">(</span><span class="nx">$quoteData</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param  Quote  $quote</span>
<span class="cm">     * @return Application|Factory|View|RedirectResponse</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">edit</span><span class="p">(</span><span class="nx">Quote</span><span class="w"> </span><span class="nx">$quote</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">$quote</span><span class="o">-&gt;</span><span class="nx">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">Quote</span><span class="o">::</span><span class="nx">CONVERTED</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">Flash</span><span class="o">::</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Converted quote can not editable.&#39;</span><span class="p">);</span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="nx">route</span><span class="p">(</span><span class="s1">&#39;quotes.index&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="nx">$data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">prepareEditFormData</span><span class="p">(</span><span class="nx">$quote</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">view</span><span class="p">(</span><span class="s1">&#39;quotes.edit&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">compact</span><span class="p">(</span><span class="s1">&#39;quote&#39;</span><span class="p">))</span><span class="o">-&gt;</span><span class="kd">with</span><span class="p">(</span><span class="nx">$data</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param  UpdateQuoteRequest  $request</span>
<span class="cm">     * @param  Quote  $quote</span>
<span class="cm">     * @return JsonResponse</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">update</span><span class="p">(</span><span class="nx">UpdateQuoteRequest</span><span class="w"> </span><span class="nx">$request</span><span class="p">,</span><span class="w"> </span><span class="nx">Quote</span><span class="w"> </span><span class="nx">$quote</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">JsonResponse</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$request</span><span class="o">-&gt;</span><span class="nx">all</span><span class="p">();</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">DB</span><span class="o">::</span><span class="nx">beginTransaction</span><span class="p">();</span>
<span class="w">            </span><span class="nx">$quote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">updateQuote</span><span class="p">(</span><span class="nx">$quote</span><span class="o">-&gt;</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">$input</span><span class="p">);</span>
<span class="w">            </span><span class="nx">DB</span><span class="o">::</span><span class="nx">commit</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">Exception</span><span class="w"> </span><span class="nx">$e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">DB</span><span class="o">::</span><span class="nx">rollBack</span><span class="p">();</span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">sendError</span><span class="p">(</span><span class="nx">$e</span><span class="o">-&gt;</span><span class="nx">getMessage</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">sendResponse</span><span class="p">(</span><span class="nx">$quote</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Quote updated successfully.&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param  Quote  $quote</span>
<span class="cm">     * @return JsonResponse</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">destroy</span><span class="p">(</span><span class="nx">Quote</span><span class="w"> </span><span class="nx">$quote</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">JsonResponse</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$quote</span><span class="o">-&gt;</span><span class="ow">delete</span><span class="p">();</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">sendSuccess</span><span class="p">(</span><span class="s1">&#39;Quote Deleted successfully.&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param $productId</span>
<span class="cm">     * @return JsonResponse</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">getProduct</span><span class="p">(</span><span class="nx">$productId</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">JsonResponse</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$product</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Product</span><span class="o">::</span><span class="nx">pluck</span><span class="p">(</span><span class="s1">&#39;unit_price&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">toArray</span><span class="p">();</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">sendResponse</span><span class="p">(</span><span class="nx">$product</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Product Price retrieved successfully.&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param  Quote  $quote</span>
<span class="cm">     * @return Response</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">convertToPdf</span><span class="p">(</span><span class="nx">Quote</span><span class="w"> </span><span class="nx">$quote</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Response</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">ini_set</span><span class="p">(</span><span class="s1">&#39;max_execution_time&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">36000000</span><span class="p">);</span>
<span class="w">        </span><span class="nx">$quote</span><span class="o">-&gt;</span><span class="nx">load</span><span class="p">(</span><span class="s1">&#39;client.user&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;invoiceTemplate&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;quoteItems.product&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;quoteItems&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="nx">$quoteData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">getPdfData</span><span class="p">(</span><span class="nx">$quote</span><span class="p">);</span>
<span class="w">        </span><span class="nx">$invoiceTemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">getDefaultTemplate</span><span class="p">(</span><span class="nx">$quote</span><span class="p">);</span>
<span class="w">        </span><span class="nx">$pdf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">PDF</span><span class="o">::</span><span class="nx">loadView</span><span class="p">(</span><span class="s2">&quot;quotes.quote_template_pdf.$invoiceTemplate&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$pdf</span><span class="o">-&gt;</span><span class="nx">stream</span><span class="p">(</span><span class="s1">&#39;quote.pdf&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param  Request  $request</span>
<span class="cm">     * @return mixed</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">convertToInvoice</span><span class="p">(</span><span class="nx">Request</span><span class="w"> </span><span class="nx">$request</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$quoteId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$request</span><span class="o">-&gt;</span><span class="nx">quoteId</span><span class="p">;</span>
<span class="w">        </span><span class="nx">$quote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Quote</span><span class="o">::</span><span class="nx">whereId</span><span class="p">(</span><span class="nx">$quoteId</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">firstOrFail</span><span class="p">();</span>

<span class="w">        </span><span class="nx">$quoteDatas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">getQuoteData</span><span class="p">(</span><span class="nx">$quote</span><span class="p">);</span>
<span class="w">        </span><span class="nx">$quoteData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteDatas</span><span class="p">[</span><span class="s1">&#39;quote&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$quoteItems</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteDatas</span><span class="p">[</span><span class="s1">&#39;quote&#39;</span><span class="p">][</span><span class="s1">&#39;quoteItems&#39;</span><span class="p">];</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="w"> </span><span class="nx">empty</span><span class="p">(</span><span class="nx">getInvoiceNoPrefix</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;quote_id&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">getInvoiceNoPrefix</span><span class="p">().</span><span class="s1">&#39;-&#39;</span><span class="p">.</span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;quote_id&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="w"> </span><span class="nx">empty</span><span class="p">(</span><span class="nx">getInvoiceNoSuffix</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;quote_id&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;-&#39;</span><span class="p">.</span><span class="nx">getInvoiceNoSuffix</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;invoice_id&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;quote_id&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;client_id&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;client_id&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;invoice_date&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Carbon</span><span class="o">::</span><span class="nx">parse</span><span class="p">(</span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;quote_date&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="nx">format</span><span class="p">(</span><span class="nx">currentDateFormat</span><span class="p">());</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;due_date&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Carbon</span><span class="o">::</span><span class="nx">parse</span><span class="p">(</span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;due_date&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="nx">format</span><span class="p">(</span><span class="nx">currentDateFormat</span><span class="p">());</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;final_amount&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;final_amount&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;discount_type&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;discount_type&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;discount&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;discount&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;note&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;note&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;term&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;term&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;template_id&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;template_id&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;recurring&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;recurring&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Invoice</span><span class="o">::</span><span class="nx">DRAFT</span><span class="p">;</span>

<span class="w">        </span><span class="nx">$invoice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Invoice</span><span class="o">::</span><span class="nx">create</span><span class="p">(</span><span class="nx">$invoice</span><span class="p">);</span>

<span class="w">        </span><span class="nx">foreach</span><span class="w"> </span><span class="p">(</span><span class="nx">$quoteItems</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">$quoteItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">$invoiceItem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">InvoiceItem</span><span class="o">::</span><span class="nx">create</span><span class="p">([</span>
<span class="w">                </span><span class="s1">&#39;invoice_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">$invoice</span><span class="o">-&gt;</span><span class="nx">id</span><span class="p">,</span>
<span class="w">                </span><span class="s1">&#39;product_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">$quoteItem</span><span class="p">[</span><span class="s1">&#39;product_id&#39;</span><span class="p">],</span>
<span class="w">                </span><span class="s1">&#39;product_name&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">$quoteItem</span><span class="p">[</span><span class="s1">&#39;product_name&#39;</span><span class="p">],</span>
<span class="w">                </span><span class="s1">&#39;quantity&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">$quoteItem</span><span class="p">[</span><span class="s1">&#39;quantity&#39;</span><span class="p">],</span>
<span class="w">                </span><span class="s1">&#39;price&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">$quoteItem</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">],</span>
<span class="w">                </span><span class="s1">&#39;total&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">$quoteItem</span><span class="p">[</span><span class="s1">&#39;total&#39;</span><span class="p">],</span>
<span class="w">            </span><span class="p">]);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nx">Quote</span><span class="o">::</span><span class="nx">whereId</span><span class="p">(</span><span class="nx">$quoteId</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">update</span><span class="p">([</span><span class="s1">&#39;status&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">Quote</span><span class="o">::</span><span class="nx">CONVERTED</span><span class="p">]);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">sendSuccess</span><span class="p">(</span><span class="s1">&#39;Converted to Invoice successfully!.&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return BinaryFileResponse</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">exportQuotesExcel</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">BinaryFileResponse</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">Excel</span><span class="o">::</span><span class="nx">download</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">AdminQuotesExport</span><span class="p">(),</span><span class="w"> </span><span class="s1">&#39;quote-excel.xlsx&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">getPublicQuotePdf</span><span class="p">(</span><span class="nx">$quoteId</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$quote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Quote</span><span class="o">::</span><span class="nx">whereQuoteId</span><span class="p">(</span><span class="nx">$quoteId</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">firstOrFail</span><span class="p">();</span>
<span class="w">        </span><span class="nx">$quote</span><span class="o">-&gt;</span><span class="nx">load</span><span class="p">(</span><span class="s1">&#39;client.user&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;invoiceTemplate&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;quoteItems.product&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;quoteItems&#39;</span><span class="p">);</span>

<span class="w">        </span><span class="nx">$quoteData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">getPdfData</span><span class="p">(</span><span class="nx">$quote</span><span class="p">);</span>
<span class="w">        </span><span class="nx">$invoiceTemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">getDefaultTemplate</span><span class="p">(</span><span class="nx">$quote</span><span class="p">);</span>
<span class="w">        </span><span class="nx">$pdf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">PDF</span><span class="o">::</span><span class="nx">loadView</span><span class="p">(</span><span class="s2">&quot;quotes.quote_template_pdf.$invoiceTemplate&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$pdf</span><span class="o">-&gt;</span><span class="nx">stream</span><span class="p">(</span><span class="s1">&#39;quote.pdf&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param $quoteId</span>
<span class="cm">     * @return Application|Factory|View</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">showPublicQuote</span><span class="p">(</span><span class="nx">$quoteId</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">View</span><span class="o">|</span><span class="nx">Factory</span><span class="o">|</span><span class="nx">Application</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$quote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Quote</span><span class="o">::</span><span class="kd">with</span><span class="p">(</span><span class="s1">&#39;client.user&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">whereQuoteId</span><span class="p">(</span><span class="nx">$quoteId</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">first</span><span class="p">();</span>
<span class="w">        </span><span class="nx">$quoteData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">getQuoteData</span><span class="p">(</span><span class="nx">$quote</span><span class="p">);</span>
<span class="w">        </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;statusArr&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Quote</span><span class="o">::</span><span class="nx">STATUS_ARR</span><span class="p">;</span>
<span class="w">        </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quote</span><span class="o">-&gt;</span><span class="nx">status</span><span class="p">;</span>
<span class="w">        </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;userLang&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quote</span><span class="o">-&gt;</span><span class="nx">client</span><span class="o">-&gt;</span><span class="nx">user</span><span class="o">-&gt;</span><span class="nx">language</span><span class="p">;</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">view</span><span class="p">(</span><span class="s1">&#39;quotes.public-quote.public_view&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="kd">with</span><span class="p">(</span><span class="nx">$quoteData</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return Response</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">exportQuotesPdf</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">Response</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">ini_set</span><span class="p">(</span><span class="s1">&#39;max_execution_time&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">36000000</span><span class="p">);</span>
<span class="w">        </span><span class="nx">$data</span><span class="p">[</span><span class="s1">&#39;quotes&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Quote</span><span class="o">::</span><span class="kd">with</span><span class="p">(</span><span class="s1">&#39;client.user&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">orderBy</span><span class="p">(</span><span class="s1">&#39;created_at&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;desc&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">get</span><span class="p">();</span>
<span class="w">        </span><span class="nx">$quotesPdf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">PDF</span><span class="o">::</span><span class="nx">loadView</span><span class="p">(</span><span class="s1">&#39;quotes.export_quotes_pdf&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">$data</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$quotesPdf</span><span class="o">-&gt;</span><span class="nx">download</span><span class="p">(</span><span class="s1">&#39;Quotes.pdf&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Let's break down the code step by step:</p>
<ol>
<li>
<p><strong>Namespace and Imports:</strong>
   The controller is defined within the <code>App\Http\Controllers</code> namespace and imports various classes and libraries that are used throughout the controller's methods.</p>
</li>
<li>
<p><strong>Class Definition and Constructor:</strong>
   The <code>QuoteController</code> class extends <code>AppBaseController</code>, which suggests that it follows some common practices for controllers. It has a constructor that injects a <code>QuoteRepository</code> instance, presumably to handle interactions with the database related to quotes.</p>
</li>
<li>
<p><strong>Index Method:</strong>
   The <code>index</code> method is used to display a list of quotes. It retrieves the possible quote statuses and a selected status from the request and then loads a view named <code>quotes.index</code> while passing the retrieved data to the view.</p>
</li>
<li>
<p><strong>Create Method:</strong>
   The <code>create</code> method is responsible for showing a form to create a new quote. It fetches data using the <code>getSyncList</code> method from the <code>QuoteRepository</code> and passes this data to the <code>quotes.create</code> view.</p>
</li>
<li>
<p><strong>Store Method:</strong>
   The <code>store</code> method is used to store a new quote. It starts a database transaction, sets the quote status to "DRAFT," and then uses the <code>quoteRepository</code> to save the quote. If successful, the transaction is committed; otherwise, it's rolled back.</p>
</li>
<li>
<p><strong>Show Method:</strong>
   The <code>show</code> method displays the details of a specific quote. It retrieves the quote data using the <code>getQuoteData</code> method from the <code>QuoteRepository</code> and passes it to the <code>quotes.show</code> view.</p>
</li>
<li>
<p><strong>Edit Method:</strong>
   The <code>edit</code> method allows editing an existing quote. It checks if the quote's status is "CONVERTED"; if it is, an error message is flashed, and the user is redirected to the quotes index. Otherwise, it prepares data for editing using the <code>prepareEditFormData</code> method from the <code>QuoteRepository</code> and loads the <code>quotes.edit</code> view.</p>
</li>
<li>
<p><strong>Update Method:</strong>
   The <code>update</code> method is used to update an existing quote. It begins a database transaction, updates the quote data using the <code>updateQuote</code> method from the <code>QuoteRepository</code>, and then either commits the transaction or rolls it back based on success or failure.</p>
</li>
<li>
<p><strong>Destroy Method:</strong>
   The <code>destroy</code> method deletes a quote. It calls the <code>delete</code> method on the quote instance and returns a success message.</p>
</li>
<li>
<p><strong>Various Other Methods:</strong>
    The controller contains several other methods that handle tasks like getting product information, converting a quote to a PDF, converting a quote to an invoice, exporting quotes to Excel/PDF, and handling public quotes.</p>
</li>
<li>
<p><strong>PDF Generation:</strong>
    The controller uses the <code>Barryvdh\DomPDF\Facade</code> to generate PDFs for quotes and invoices. It loads a Blade view based on the selected template and passes relevant data to generate the PDF.</p>
</li>
<li>
<p><strong>View Loading:</strong>
    The controller frequently loads views with appropriate data using Laravel's <code>view</code> method. It also uses the <code>with</code> method to pass data to views.</p>
</li>
</ol>
<p>Overall, the <code>QuoteController</code> class serves as the central hub for managing quotes within the Laravel application. It handles various CRUD (Create, Read, Update, Delete) operations related to quotes, interacts with the database through the <code>QuoteRepository</code>, and renders views to provide a user interface for managing quotes.</p>
<h2 id="model">Model</h2>
<p>The models related to this controller are : <strong>App\Models\Invoice</strong> , <strong>App\Models\Quote</strong> , <strong>App\Models\Product</strong> and <strong>App\Models\InvoiceItem</strong>.</p>
<h3 id="invoice-model">Invoice Model</h3>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Models</span><span class="p">;</span>

<span class="nx">use</span><span class="w"> </span><span class="nx">Carbon</span><span class="err">\</span><span class="nx">Carbon</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Builder</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Collection</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Factories</span><span class="err">\</span><span class="nx">HasFactory</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Model</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Relations</span><span class="err">\</span><span class="nx">BelongsTo</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Relations</span><span class="err">\</span><span class="nx">BelongsToMany</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Relations</span><span class="err">\</span><span class="nx">HasMany</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Support</span><span class="err">\</span><span class="nx">Str</span><span class="p">;</span>


<span class="kd">class</span><span class="w"> </span><span class="nx">Invoice</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Model</span>
<span class="p">{</span>
<span class="w">    </span><span class="nx">use</span><span class="w"> </span><span class="nx">HasFactory</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">SELECT_DISCOUNT_TYPE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">FIXED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">PERCENTAGE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">DISCOUNT_TYPE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">SELECT_DISCOUNT_TYPE</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Select Discount Type&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">FIXED</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Fixed&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">PERCENTAGE</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Percentage&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">DRAFT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">UNPAID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">PAID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">PARTIALLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">OVERDUE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">STATUS_ALL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">PROCESSING</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">6</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">STATUS_ARR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">STATUS_ALL</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;All&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">DRAFT</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Draft&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">UNPAID</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Unpaid&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">PAID</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Paid&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">PARTIALLY</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Partially Paid&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">OVERDUE</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Overdue&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">PROCESSING</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Processing&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">RECURRING_OFF</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">RECURRING_ON</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">RECURRING_STATUS_ARR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">RECURRING_ON</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;On&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">RECURRING_OFF</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Off&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">MONTHLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">QUARTERLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">SEMIANNUALLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">ANNUALLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">RECURRING_ARR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">MONTHLY</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Monthly&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">QUARTERLY</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Quarterly&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">SEMIANNUALLY</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Semi Annually&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">ANNUALLY</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Annually&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Validation rules</span>
<span class="cm">     *</span>
<span class="cm">     * @var array</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nx">$rules</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;client_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;invoice_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required|unique:invoices,invoice_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;invoice_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;due_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nx">$messages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;client_id.required&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;The Client field is required.&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;invoice_date.required&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;The invoice date field is required.&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;due_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;The invoice Due date field is required.&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="nx">$table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;invoices&#39;</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="nx">$appends</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;status_label&#39;</span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="nx">$fillable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;client_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;invoice_date&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;due_date&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;invoice_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;currency_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;amount&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;discount_type&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;discount&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;final_amount&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;note&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;term&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;template_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;status&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;recurring_status&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;recurring_cycle&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;last_recurring_on&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;parent_id&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">protected</span><span class="w"> </span><span class="nx">$casts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;client_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;parent_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;invoice_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;date&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;due_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;date&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;invoice_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;currency_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;amount&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;discount_type&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;discount&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;final_amount&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;note&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;term&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;template_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;status&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;recurring_status&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;recurring_cycle&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;last_recurring_on&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;date&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;tax&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">getStatusLabelAttribute</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">self</span><span class="o">::</span><span class="nx">STATUS_ARR</span><span class="p">[</span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">status</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return BelongsTo</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">client</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">BelongsTo</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">belongsTo</span><span class="p">(</span><span class="nx">Client</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;client_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return HasMany</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">invoiceItems</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">HasMany</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">hasMany</span><span class="p">(</span><span class="nx">InvoiceItem</span><span class="o">::</span><span class="kd">class</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return string</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">generateUniqueInvoiceId</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$invoiceId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">mb_strtoupper</span><span class="p">(</span><span class="nx">Str</span><span class="o">::</span><span class="nx">random</span><span class="p">(</span><span class="mf">6</span><span class="p">));</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">$isExist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">self</span><span class="o">::</span><span class="nx">whereInvoiceId</span><span class="p">(</span><span class="nx">$invoiceId</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">exists</span><span class="p">();</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">$isExist</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">self</span><span class="o">::</span><span class="nx">generateUniqueInvoiceId</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$invoiceId</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return HasMany</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">payments</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">HasMany</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">hasMany</span><span class="p">(</span><span class="nx">Payment</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;invoice_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return HasMany</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">AdminPayment</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">HasMany</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">hasMany</span><span class="p">(</span><span class="nx">AdminPayment</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;invoice_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return BelongsTo</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">invoiceTemplate</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">BelongsTo</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">belongsTo</span><span class="p">(</span><span class="nx">InvoiceSetting</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;template_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">parentInvoice</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">BelongsTo</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">belongsTo</span><span class="p">(</span><span class="nx">self</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;parent_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">childInvoices</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">HasMany</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">hasMany</span><span class="p">(</span><span class="nx">self</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;parent_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param $value</span>
<span class="cm">     * @return Setting|mixed</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">getCurrencyIdAttribute</span><span class="p">(</span><span class="nx">$value</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="w"> </span><span class="nx">empty</span><span class="p">(</span><span class="nx">$value</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">Currency</span><span class="o">::</span><span class="nx">where</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">$value</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">pluck</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">first</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">Currency</span><span class="o">::</span><span class="nx">where</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">getSettingValue</span><span class="p">(</span><span class="s1">&#39;current_currency&#39;</span><span class="p">))</span><span class="o">-&gt;</span><span class="nx">pluck</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">first</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param $value</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">setInvoiceDateAttribute</span><span class="p">(</span><span class="nx">$value</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">attributes</span><span class="p">[</span><span class="s1">&#39;invoice_date&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Carbon</span><span class="o">::</span><span class="nx">createFromFormat</span><span class="p">(</span><span class="nx">currentDateFormat</span><span class="p">(),</span>
<span class="w">            </span><span class="nx">$value</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">translatedFormat</span><span class="p">(</span><span class="s1">&#39;Y-m-d&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param $value</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">setDueDateAttribute</span><span class="p">(</span><span class="nx">$value</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">attributes</span><span class="p">[</span><span class="s1">&#39;due_date&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Carbon</span><span class="o">::</span><span class="nx">createFromFormat</span><span class="p">(</span><span class="nx">currentDateFormat</span><span class="p">(),</span>
<span class="w">            </span><span class="nx">$value</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">translatedFormat</span><span class="p">(</span><span class="s1">&#39;Y-m-d&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return BelongsToMany</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">invoiceTaxes</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">BelongsToMany</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">belongsToMany</span><span class="p">(</span><span class="nx">Tax</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="s1">&#39;invoice_taxes&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>This model represents invoices within the application and provides methods and properties for interacting with invoice data stored in the database.</p>
<p>Let's break down the key parts of this <code>Invoice</code> model class:</p>
<ol>
<li>
<p><strong>Use of Traits and Relationships:</strong>
   The model class uses the <code>HasFactory</code> trait, indicating that it can be used to create instances of the model using a factory. It also contains several Eloquent relationships to other models, including <code>Client</code>, <code>InvoiceItem</code>, <code>Payment</code>, <code>AdminPayment</code>, <code>InvoiceSetting</code> (which seems to represent invoice templates), and others.</p>
</li>
<li>
<p><strong>Model Properties and Fillable Fields:</strong>
   The model defines a set of properties that correspond to the columns in the database table. The <code>$fillable</code> array specifies which fields can be mass-assigned when creating or updating instances of the model.</p>
</li>
<li>
<p><strong>Constants for Status and Other Values:</strong>
   The model includes constants like <code>DRAFT</code>, <code>UNPAID</code>, <code>PAID</code>, <code>RECURRING_OFF</code>, and others to represent various states and types of invoices. These constants are used throughout the code to ensure consistency and avoid hardcoding values.</p>
</li>
<li>
<p><strong>Accessors and Mutators:</strong>
   The model defines accessor and mutator methods to manipulate and format certain attributes. For example, <code>getCurrencyIdAttribute</code> returns the currency ID, and <code>setInvoiceDateAttribute</code> and <code>setDueDateAttribute</code> modify the format of date attributes when setting them.</p>
</li>
<li>
<p><strong>Custom Methods:</strong>
   The model contains custom methods like <code>generateUniqueInvoiceId</code> to generate unique invoice IDs, <code>getStatusLabelAttribute</code> to provide a human-readable status label, and others for handling specific tasks related to invoices.</p>
</li>
<li>
<p><strong>Validation Rules and Messages:</strong>
   The model defines validation rules and custom validation error messages for creating new invoices. These rules ensure that required fields are provided and certain constraints are met.</p>
</li>
<li>
<p><strong>Eloquent Query Scopes:</strong>
   Eloquent query scopes added to the model to encapsulate common query logic. These scopes can be used to easily retrieve specific sets of invoices based on various conditions.</p>
</li>
<li>
<p><strong>Attributes and Appends:</strong>
   The <code>$appends</code> array defines additional attributes that are not present in the database but are dynamically computed when the model is accessed. For example, the <code>status_label</code> attribute is computed based on the invoice's status.</p>
</li>
<li>
<p><strong>Getters and Setters:</strong>
   The model defines getter and setter methods for certain attributes. For instance, <code>getCurrencyIdAttribute</code> retrieves the currency ID for an invoice, considering different scenarios.</p>
</li>
</ol>
<p>Overall, the <code>Invoice</code> model class encapsulates the logic and behavior associated with invoices in the application. It handles relationships, attribute manipulation, validation rules, and custom methods related to invoices, making it a central point for interacting with invoice data in the database.</p>
<h3 id="quote-model">Quote Model</h3>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Models</span><span class="p">;</span>

<span class="nx">use</span><span class="w"> </span><span class="nx">Carbon</span><span class="err">\</span><span class="nx">Carbon</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Factories</span><span class="err">\</span><span class="nx">HasFactory</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Model</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Relations</span><span class="err">\</span><span class="nx">BelongsTo</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Relations</span><span class="err">\</span><span class="nx">HasMany</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Support</span><span class="err">\</span><span class="nx">Str</span><span class="p">;</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">Quote</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Model</span>
<span class="p">{</span>
<span class="w">    </span><span class="nx">use</span><span class="w"> </span><span class="nx">HasFactory</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">SELECT_DISCOUNT_TYPE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">FIXED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">PERCENTAGE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">DISCOUNT_TYPE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">SELECT_DISCOUNT_TYPE</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Select Discount Type&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">FIXED</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Fixed&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">PERCENTAGE</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Percentage&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">DRAFT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">CONVERTED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">STATUS_ALL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">STATUS_ARR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">DRAFT</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Draft&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">CONVERTED</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Converted&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">STATUS_ALL</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;All&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">MONTHLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">QUARTERLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">SEMIANNUALLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">ANNUALLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">RECURRING_ARR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">MONTHLY</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Monthly&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">QUARTERLY</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Quarterly&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">SEMIANNUALLY</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Semi Annually&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">ANNUALLY</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Annually&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">protected</span><span class="w"> </span><span class="nx">$with</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;quoteItems.product&#39;</span><span class="p">];</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Validation rules</span>
<span class="cm">     *</span>
<span class="cm">     * @var array</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nx">$rules</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;client_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quote_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required|unique:quotes,quote_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quote_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;due_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nx">$messages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;client_id.required&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;The Client field is required.&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quote_date.required&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;The Quote date field is required.&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;due_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;The Quote Due date field is required.&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="nx">$table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;quotes&#39;</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="nx">$appends</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;status_label&#39;</span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="nx">$fillable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;client_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quote_date&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;due_date&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quote_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;amount&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;discount_type&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;discount&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;final_amount&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;note&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;term&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;template_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;status&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">protected</span><span class="w"> </span><span class="nx">$casts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;client_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quote_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;date&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;due_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;date&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quote_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;amount&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;discount_type&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;discount&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;final_amount&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;note&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;term&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;template_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;status&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;recurring&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">getStatusLabelAttribute</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">self</span><span class="o">::</span><span class="nx">STATUS_ARR</span><span class="p">[</span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">status</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return BelongsTo</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">client</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">BelongsTo</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">belongsTo</span><span class="p">(</span><span class="nx">Client</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;client_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return HasMany</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">quoteItems</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">HasMany</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">hasMany</span><span class="p">(</span><span class="nx">QuoteItem</span><span class="o">::</span><span class="kd">class</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return string</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">generateUniqueQuoteId</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$quoteId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">mb_strtoupper</span><span class="p">(</span><span class="nx">Str</span><span class="o">::</span><span class="nx">random</span><span class="p">(</span><span class="mf">6</span><span class="p">));</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">$isExist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">self</span><span class="o">::</span><span class="nx">whereQuoteId</span><span class="p">(</span><span class="nx">$quoteId</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">exists</span><span class="p">();</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">$isExist</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">self</span><span class="o">::</span><span class="nx">generateUniqueQuoteId</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$quoteId</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return BelongsTo</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">invoiceTemplate</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">BelongsTo</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">belongsTo</span><span class="p">(</span><span class="nx">InvoiceSetting</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;template_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param $value</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">setQuoteDateAttribute</span><span class="p">(</span><span class="nx">$value</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">attributes</span><span class="p">[</span><span class="s1">&#39;quote_date&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Carbon</span><span class="o">::</span><span class="nx">createFromFormat</span><span class="p">(</span><span class="nx">currentDateFormat</span><span class="p">(),</span><span class="w"> </span><span class="nx">$value</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">translatedFormat</span><span class="p">(</span><span class="s1">&#39;Y-m-d&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param $value</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">setDueDateAttribute</span><span class="p">(</span><span class="nx">$value</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">attributes</span><span class="p">[</span><span class="s1">&#39;due_date&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Carbon</span><span class="o">::</span><span class="nx">createFromFormat</span><span class="p">(</span><span class="nx">currentDateFormat</span><span class="p">(),</span><span class="w"> </span><span class="nx">$value</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">translatedFormat</span><span class="p">(</span><span class="s1">&#39;Y-m-d&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The provided code defines an Eloquent model class named <code>Quote</code> within the <code>App\Models</code> namespace. This model represents quotes within the application and provides methods and properties for interacting with quote data stored in the database. Below is an explanation of the key parts of this <code>Quote</code> model class:</p>
<ol>
<li>
<p><strong>Use of Traits and Relationships:</strong></p>
</li>
<li>
<p>The model class uses the <code>HasFactory</code> trait, which indicates that it can be used to create instances of the model using a factory.</p>
</li>
<li>
<p>It defines several Eloquent relationships to other models, including <code>Client</code> (a client associated with the quote), <code>QuoteItem</code> (items within the quote), and <code>InvoiceSetting</code> (which appears to represent quote templates).</p>
</li>
<li>
<p><strong>Model Properties and Fillable Fields:</strong></p>
</li>
<li>
<p>The model defines a set of properties that correspond to the columns in the database table.</p>
</li>
<li>
<p>The <code>$fillable</code> array specifies which fields can be mass-assigned when creating or updating instances of the model.</p>
</li>
<li>
<p><strong>Constants for Status and Other Values:</strong></p>
</li>
<li>
<p>The model includes constants like <code>DRAFT</code>, <code>CONVERTED</code>, <code>MONTHLY</code>, <code>QUARTERLY</code>, and others to represent various states and types of quotes. These constants are used throughout the code to ensure consistency and avoid hardcoding values.</p>
</li>
<li>
<p><strong>Accessors and Mutators:</strong></p>
</li>
<li>
<p>The model defines an accessor method named <code>getStatusLabelAttribute</code> to provide a human-readable status label for a quote based on its status constant.</p>
</li>
<li>
<p><strong>Validation Rules and Messages:</strong></p>
</li>
<li>
<p>The model defines validation rules and custom validation error messages for creating new quotes. These rules ensure that required fields are provided and certain constraints are met.</p>
</li>
<li>
<p><strong>Attributes and Appends:</strong></p>
</li>
<li>
<p>The <code>$appends</code> array defines additional attributes that are not present in the database but are dynamically computed when the model is accessed. For example, the <code>status_label</code> attribute is computed based on the quote's status.</p>
</li>
<li>
<p><strong>Custom Methods:</strong></p>
</li>
<li>
<p>The model contains custom methods like <code>generateUniqueQuoteId</code> to generate unique quote IDs and setters for <code>quote_date</code> and <code>due_date</code> attributes to modify their date format when setting them.</p>
</li>
<li>
<p><strong>Casting Attributes:</strong></p>
</li>
<li>
<p>The <code>$casts</code> array specifies the data types of certain attributes, such as integers, dates, and doubles, to ensure proper data handling.</p>
</li>
<li>
<p><strong>Eloquent Relationships:</strong></p>
</li>
<li>The model defines relationships like <code>client()</code> and <code>quoteItems()</code> using Eloquent's <code>belongsTo</code> and <code>hasMany</code> methods. These relationships allow for convenient retrieval of related data.</li>
</ol>
<p>Overall, the <code>Quote</code> model class encapsulates the logic and behavior associated with quotes in the application. It handles relationships, attribute manipulation, validation rules, and custom methods related to quotes, making it a central point for interacting with quote data in the database.</p>
<h3 id="product-model">Product Model</h3>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Models</span><span class="p">;</span>

<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Factories</span><span class="err">\</span><span class="nx">HasFactory</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Model</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Notifications</span><span class="err">\</span><span class="nx">Notifiable</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Spatie</span><span class="err">\</span><span class="nx">MediaLibrary</span><span class="err">\</span><span class="nx">HasMedia</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Spatie</span><span class="err">\</span><span class="nx">MediaLibrary</span><span class="err">\</span><span class="nx">InteractsWithMedia</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Spatie</span><span class="err">\</span><span class="nx">MediaLibrary</span><span class="err">\</span><span class="nx">MediaCollections</span><span class="err">\</span><span class="nx">Models</span><span class="err">\</span><span class="nx">Media</span><span class="p">;</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Model</span><span class="w"> </span><span class="kr">implements</span><span class="w"> </span><span class="nx">HasMedia</span>
<span class="p">{</span>
<span class="w">    </span><span class="nx">use</span><span class="w"> </span><span class="nx">HasFactory</span><span class="p">,</span><span class="w"> </span><span class="nx">Notifiable</span><span class="p">,</span><span class="w"> </span><span class="nx">InteractsWithMedia</span><span class="p">;</span>

<span class="w">    </span><span class="kr">protected</span><span class="w"> </span><span class="nx">$table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;products&#39;</span><span class="p">;</span>

<span class="w">    </span><span class="kr">protected</span><span class="w"> </span><span class="nx">$fillable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;code&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;category_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;unit_price&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;description&#39;</span><span class="p">];</span>

<span class="w">    </span><span class="kr">protected</span><span class="w"> </span><span class="nx">$casts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;name&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;code&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;category_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;unit_price&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;description&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">Image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;product&#39;</span><span class="p">;</span>

<span class="w">    </span><span class="kr">protected</span><span class="w"> </span><span class="nx">$appends</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;product_image&#39;</span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nx">$rules</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;name&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;code&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required|alpha_num|min:3|max:6|unique:products,code&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;category_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;unit_price&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required|numeric&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nx">$messages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;code.required&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;The product code field is required.&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;code.size&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;The product code must be 6 characters.&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;code.unique&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;The product code has already been taken.&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return string</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">getProductImageAttribute</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="cm">/** @var Media $media */</span>
<span class="w">        </span><span class="nx">$media</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">getMedia</span><span class="p">(</span><span class="nx">self</span><span class="o">::</span><span class="nx">Image</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">first</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="w"> </span><span class="nx">empty</span><span class="p">(</span><span class="nx">$media</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">$media</span><span class="o">-&gt;</span><span class="nx">getFullUrl</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">asset</span><span class="p">(</span><span class="s1">&#39;images/default-product.jpg&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">category</span><span class="p">()</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">hasOne</span><span class="p">(</span><span class="nx">Category</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;category_id&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The provided code defines an Eloquent model class named <code>Product</code> within the <code>App\Models</code> namespace. This model represents products in the application and provides methods and properties for interacting with product data stored in the database. Below is an explanation of the key parts of this <code>Product</code> model class:</p>
<ol>
<li>
<p><strong>Use of Traits and Interfaces:</strong></p>
</li>
<li>
<p>The model class uses the <code>HasFactory</code>, <code>Notifiable</code>, <code>InteractsWithMedia</code> traits, and implements the <code>HasMedia</code> interface.</p>
</li>
<li>The <code>HasFactory</code> trait allows for easy creation of model instances using factories.</li>
<li>The <code>Notifiable</code> trait is used for handling notifications.</li>
<li>
<p>The <code>InteractsWithMedia</code> trait and <code>HasMedia</code> interface are used for handling media files associated with the model.</p>
</li>
<li>
<p><strong>Model Properties and Fillable Fields:</strong></p>
</li>
<li>
<p>The model defines a set of properties that correspond to the columns in the database table.</p>
</li>
<li>
<p>The <code>$fillable</code> array specifies which fields can be mass-assigned when creating or updating instances of the model.</p>
</li>
<li>
<p><strong>Constants:</strong></p>
</li>
<li>
<p>The model includes a constant named <code>Image</code>, which is used as a reference to the product images associated with this model.</p>
</li>
<li>
<p><strong>Accessors and Mutators:</strong></p>
</li>
<li>
<p>The model defines an accessor method named <code>getProductImageAttribute</code> to retrieve the URL of the product's image.</p>
</li>
<li>
<p>This accessor checks if there is a media associated with the product and returns its URL. If no media is found, it returns a default image URL.</p>
</li>
<li>
<p><strong>Validation Rules and Messages:</strong></p>
</li>
<li>
<p>The model defines validation rules and custom validation error messages for creating new products. These rules ensure that required fields are provided and certain constraints are met, such as the uniqueness of the product code.</p>
</li>
<li>
<p><strong>Attributes and Appends:</strong></p>
</li>
<li>
<p>The <code>$appends</code> array defines additional attributes that are not present in the database but are dynamically computed when the model is accessed. In this case, it includes the <code>product_image</code> attribute.</p>
</li>
<li>
<p><strong>Eloquent Relationships:</strong></p>
</li>
<li>The model defines a relationship with the <code>Category</code> model using the <code>hasOne</code> method. This relationship represents the category to which a product belongs.</li>
</ol>
<p>Overall, the <code>Product</code> model class encapsulates the logic and behavior associated with products in the application. It handles relationships, attribute manipulation, validation rules, and custom methods related to products, making it a central point for interacting with product data in the database. Additionally, it supports media management for product images using the Spatie Media Library package.</p>
<h3 id="invoice-item-model">Invoice Item Model</h3>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Models</span><span class="p">;</span>

<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Builder</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Factories</span><span class="err">\</span><span class="nx">HasFactory</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Model</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Relations</span><span class="err">\</span><span class="nx">BelongsTo</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Relations</span><span class="err">\</span><span class="nx">HasMany</span><span class="p">;</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">InvoiceItem</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Model</span>
<span class="p">{</span>
<span class="w">    </span><span class="nx">use</span><span class="w"> </span><span class="nx">HasFactory</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Validation rules</span>
<span class="cm">     *</span>
<span class="cm">     * @var array</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nx">$rules</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;product_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quantity&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required|regex:/^\d*(\.\d{1,2})?$/&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;price&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required|regex:/^\d+(\.\d{1,2})?$/&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">protected</span><span class="w"> </span><span class="nx">$table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;invoice_items&#39;</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="nx">$fillable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;invoice_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;product_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;product_name&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quantity&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;price&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;total&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">protected</span><span class="w"> </span><span class="nx">$casts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;invoice_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;product_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;product_name&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quantity&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;price&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;total&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return BelongsTo</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">product</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">BelongsTo</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">belongsTo</span><span class="p">(</span><span class="nx">Product</span><span class="o">::</span><span class="kd">class</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return HasMany</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">invoiceItemTax</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">HasMany</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">hasMany</span><span class="p">(</span><span class="nx">InvoiceItemTax</span><span class="o">::</span><span class="kd">class</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The provided code defines an Eloquent model class named <code>InvoiceItem</code> within the <code>App\Models</code> namespace. This model represents individual line items on an invoice and provides methods and properties for interacting with invoice item data stored in the database. Below is an explanation of the key parts of this <code>InvoiceItem</code> model class:</p>
<ol>
<li>
<p><strong>Use of Traits and Interfaces:</strong></p>
</li>
<li>
<p>The model class uses the <code>HasFactory</code> trait.</p>
</li>
<li>
<p><strong>Model Properties and Fillable Fields:</strong></p>
</li>
<li>
<p>The model defines a set of properties that correspond to the columns in the database table.</p>
</li>
<li>
<p>The <code>$fillable</code> array specifies which fields can be mass-assigned when creating or updating instances of the model.</p>
</li>
<li>
<p><strong>Validation Rules:</strong></p>
</li>
<li>
<p>The model defines validation rules for creating new invoice items. These rules ensure that required fields, such as <code>product_id</code>, <code>quantity</code>, and <code>price</code>, are provided and that these fields meet certain regex-based constraints.</p>
</li>
<li>
<p><strong>Eloquent Relationships:</strong></p>
</li>
<li>
<p>The model defines two Eloquent relationships:</p>
<ul>
<li><strong>BelongsTo Relationship with <code>Product</code></strong>: This relationship represents the product associated with the invoice item. It is defined using the <code>belongsTo</code> method.</li>
<li><strong>HasMany Relationship with <code>InvoiceItemTax</code></strong>: This relationship represents the taxes associated with the invoice item. It is defined using the <code>hasMany</code> method.</li>
</ul>
</li>
<li>
<p><strong>Table Name:</strong></p>
</li>
<li>
<p>The <code>$table</code> property specifies the name of the database table associated with this model, which is set to <code>'invoice_items'</code>.</p>
</li>
<li>
<p><strong>Casting Data Types:</strong></p>
</li>
<li>
<p>The <code>$casts</code> property specifies how certain attributes should be cast to different data types. For example, it casts <code>quantity</code>, <code>price</code>, and <code>total</code> to the <code>double</code> data type.</p>
</li>
<li>
<p><strong>Method Annotations:</strong></p>
</li>
<li>The class includes method annotations for methods like <code>newModelQuery()</code>, <code>newQuery()</code>, and <code>query()</code>. These are used for building queries on this model.</li>
</ol>
<p>Overall, the <code>InvoiceItem</code> model class encapsulates the logic and behavior associated with individual line items on an invoice. It defines relationships with other models, validation rules, and data casting to facilitate the management of invoice item data in the application's database.</p>
<h2 id="view">View</h2>
<h3 id="the-livewire-quote-table">The livewire: Quote table</h3>
<p>The livewire of the 'client quote table' located in <strong>app&gt;http&gt;livewire&gt;ClientQuoteTable.php</strong>.</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Livewire</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Models\Quote</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Builder</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Auth</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Rappasoft\LaravelLivewireTables\Views\Column</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ClientQuoteTable</span> <span class="k">extends</span> <span class="nx">LivewireTableComponent</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$model</span> <span class="o">=</span> <span class="nx">Quote</span><span class="o">::</span><span class="na">class</span><span class="p">;</span>
    <span class="k">protected</span> <span class="nx">string</span> <span class="nv">$tableName</span> <span class="o">=</span> <span class="s1">&#39;quotes&#39;</span><span class="p">;</span>
    <span class="k">public</span> <span class="nv">$showButtonOnHeader</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="k">public</span> <span class="nv">$buttonComponent</span> <span class="o">=</span> <span class="s1">&#39;client_panel.quotes.components.add-button&#39;</span><span class="p">;</span>
    <span class="k">public</span> <span class="nx">bool</span> <span class="nv">$showFilterOnHeader</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="k">public</span> <span class="nv">$filterComponent</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;quotes.components.filter&#39;</span><span class="p">,</span> <span class="nx">Quote</span><span class="o">::</span><span class="na">STATUS_ARR</span><span class="p">];</span>
    <span class="k">public</span> <span class="nv">$listeners</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;changeQuoteStatusFilter&#39;</span><span class="p">,</span> <span class="s1">&#39;resetPageTable&#39;</span><span class="p">];</span>
    <span class="k">public</span> <span class="nv">$status</span> <span class="o">=</span> <span class="nx">Quote</span><span class="o">::</span><span class="na">STATUS_ALL</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">configure</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setPrimaryKey</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setDefaultSort</span><span class="p">(</span><span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setQueryStringStatus</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setThAttributes</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">Column</span> <span class="nv">$column</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$column</span><span class="o">-&gt;</span><span class="na">isField</span><span class="p">(</span><span class="s1">&#39;final_amount&#39;</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">return</span> <span class="p">[</span>
                    <span class="s1">&#39;class&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;d-flex justify-content-end&#39;</span><span class="p">,</span>
                <span class="p">];</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="p">[</span>
                <span class="s1">&#39;class&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;text-center&#39;</span><span class="p">,</span>
            <span class="p">];</span>
        <span class="p">});</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setTdAttributes</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">Column</span> <span class="nv">$column</span><span class="p">,</span> <span class="nv">$row</span><span class="p">,</span> <span class="nv">$columnIndex</span><span class="p">,</span> <span class="nv">$rowIndex</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$column</span><span class="o">-&gt;</span><span class="na">getField</span><span class="p">(),</span> <span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">]))</span> <span class="p">{</span>
                <span class="k">return</span> <span class="p">[</span>
                    <span class="s1">&#39;class&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;text-center&#39;</span><span class="p">,</span>
                <span class="p">];</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$column</span><span class="o">-&gt;</span><span class="na">getField</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;final_amount&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="p">[</span>
                    <span class="s1">&#39;class&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;text-end&#39;</span><span class="p">,</span>
                <span class="p">];</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="p">[</span>
            <span class="p">];</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">columns</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="nx">Column</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s1">&#39;messages.quote.quote_id&#39;</span><span class="p">),</span> <span class="s1">&#39;client.user.first_name&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">sortable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">searchable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;client_panel.quotes.components.quote-id&#39;</span><span class="p">),</span>
            <span class="nx">Column</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="s1">&#39;quote_id&#39;</span><span class="p">,</span> <span class="s1">&#39;quote_id&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">sortable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">searchable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">hideIf</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
            <span class="nx">Column</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="s1">&#39;Last Name&#39;</span><span class="p">,</span> <span class="s1">&#39;client.user.last_name&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">sortable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">searchable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">hideIf</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
            <span class="nx">Column</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s1">&#39;messages.quote.quote_date&#39;</span><span class="p">),</span> <span class="s1">&#39;quote_date&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">sortable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">searchable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$row</span><span class="p">,</span> <span class="nx">Column</span> <span class="nv">$column</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;quotes.components.quote-due-date&#39;</span><span class="p">)</span>
                        <span class="o">-&gt;</span><span class="na">withValue</span><span class="p">([</span>
                            <span class="s1">&#39;quote-date&#39;</span> <span class="o">=&gt;</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">quote_date</span><span class="p">,</span>
                        <span class="p">]);</span>
                <span class="p">}),</span>
            <span class="nx">Column</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s1">&#39;messages.quote.due_date&#39;</span><span class="p">),</span> <span class="s1">&#39;due_date&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">sortable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">searchable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$row</span><span class="p">,</span> <span class="nx">Column</span> <span class="nv">$column</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;quotes.components.quote-due-date&#39;</span><span class="p">)</span>
                        <span class="o">-&gt;</span><span class="na">withValue</span><span class="p">([</span>
                            <span class="s1">&#39;due-date&#39;</span> <span class="o">=&gt;</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">due_date</span><span class="p">,</span>
                        <span class="p">]);</span>
                <span class="p">}),</span>
            <span class="nx">Column</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s1">&#39;messages.quote.amount&#39;</span><span class="p">),</span> <span class="s1">&#39;final_amount&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">sortable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">searchable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;quotes.components.amount&#39;</span><span class="p">),</span>
            <span class="nx">Column</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s1">&#39;messages.common.status&#39;</span><span class="p">),</span> <span class="s1">&#39;status&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">searchable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;quotes.components.quote-status&#39;</span><span class="p">),</span>
            <span class="nx">Column</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s1">&#39;messages.common.action&#39;</span><span class="p">),</span> <span class="s1">&#39;id&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;livewire.client-quote-action-button&#39;</span><span class="p">),</span>
        <span class="p">];</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @return Builder</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">builder</span><span class="p">()</span><span class="o">:</span> <span class="nx">Builder</span>
    <span class="p">{</span>
        <span class="nv">$clientId</span> <span class="o">=</span> <span class="nx">Auth</span><span class="o">::</span><span class="na">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">client</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">;</span>
        <span class="nv">$query</span> <span class="o">=</span> <span class="nx">Quote</span><span class="o">::</span><span class="na">with</span><span class="p">([</span><span class="s1">&#39;client.user.media&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">select</span><span class="p">(</span><span class="s1">&#39;quotes.*&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;client_id&#39;</span><span class="p">,</span> <span class="nv">$clientId</span><span class="p">);</span>

        <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">when</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">status</span> <span class="o">!=</span> <span class="nx">Quote</span><span class="o">::</span><span class="na">STATUS_ALL</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$query</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;quotes.status&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">status</span><span class="p">);</span>
        <span class="p">});</span>

        <span class="k">return</span> <span class="nv">$query</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @param $status</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">changeQuoteStatusFilter</span><span class="p">(</span><span class="nv">$status</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">status</span> <span class="o">=</span> <span class="nv">$status</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setBuilder</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">builder</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>This is a Livewire used to manage and display a table of quotes for a client. It uses the <code>Rappasoft\LaravelLivewireTables</code> package for table functionality. Here's an explanation of the component's key features and methods:</p>
<p><strong>Properties:</strong></p>
<ul>
<li>
<p><code>model</code>: Specifies the Eloquent model to use for this Livewire table. In this case, it's set to <code>Quote::class</code>.</p>
</li>
<li>
<p><code>tableName</code>: Defines the name of the table.</p>
</li>
<li>
<p><code>showButtonOnHeader</code>: Determines whether to show a button in the table header. It is set to <code>true</code>.</p>
</li>
<li>
<p><code>buttonComponent</code>: Specifies the Livewire component to render the button in the header. In this case, it's set to <code>'client_panel.quotes.components.add-button'</code>.</p>
</li>
<li>
<p><code>showFilterOnHeader</code>: Controls whether to show a filter in the table header. It is set to <code>true</code>.</p>
</li>
<li>
<p><code>filterComponent</code>: Defines the Livewire component responsible for rendering the filter. It includes an array with the component name and options, such as <code>Quote::STATUS_ARR</code>.</p>
</li>
<li>
<p><code>listeners</code>: Lists the Livewire listeners that this component responds to. It includes <code>changeQuoteStatusFilter</code> and <code>resetPageTable</code>.</p>
</li>
<li>
<p><code>status</code>: Represents the current status filter for the quotes. It is initially set to <code>Quote::STATUS_ALL</code>.</p>
</li>
</ul>
<p><strong>Methods:</strong></p>
<ul>
<li>
<p><code>configure()</code>: This method is used to configure the Livewire table's settings. It defines various settings, such as the primary key, default sorting, and table attributes for columns and cells.</p>
</li>
<li>
<p><code>columns()</code>: This method defines the columns to be displayed in the table. It uses the <code>Column::make</code> method to create columns with various properties, such as labels, field names, sorting, and formatting. The columns include information about quote IDs, dates, amounts, statuses, and an action column for buttons.</p>
</li>
<li>
<p><code>builder()</code>: This method defines the database query builder for fetching quotes. It selects quotes related to the currently authenticated client, filters quotes by status (if the status is not "All"), and includes relationships for client information and media.</p>
</li>
<li>
<p><code>changeQuoteStatusFilter($status)</code>: This method is a listener that responds to changes in the quote status filter. It updates the <code>$status</code> property and sets the query builder accordingly.</p>
</li>
</ul>
<h3 id="list-of-quotes">List of Quotes</h3>
<p>The list of quotes view is located in : <strong>resources\views\client_panel\quotes\index.blade.php</strong>.</p>
<div class="highlight"><pre><span></span><code><span class="x">@extends(&#39;client_panel.layouts.app&#39;)</span>
<span class="x">@section(&#39;title&#39;)</span>
<span class="x">    Quotes</span>
<span class="x">@endsection</span>
<span class="x">@section(&#39;content&#39;)</span>
<span class="x">    &lt;div class=&quot;container-fluid&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;d-flex flex-column &quot;&gt;</span>
<span class="x">            @include(&#39;flash::message&#39;)</span>
<span class="x">            &lt;livewire:client-quote-table/&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">@endsection</span>
</code></pre></div>
<p>This is a Blade template used in our application to display a list of quotes in a client panel. Here's a brief explanation of its contents:</p>
<ol>
<li>
<p><strong>Layout and Section Declaration</strong>:</p>
</li>
<li>
<p>The template extends the layout defined in <code>'client_panel.layouts.app'</code>.</p>
</li>
<li>
<p>It sets the title of the page to "Quotes."</p>
</li>
<li>
<p><strong>Content Section</strong>:</p>
</li>
<li>
<p>The main content section of the page is defined using the <code>@section('content')</code> directive.</p>
</li>
<li>
<p><strong>Container and Flexbox</strong>:</p>
</li>
<li>
<p>The content is wrapped in a container (<code>&lt;div class="container-fluid"&gt;</code>) to control the layout width.</p>
</li>
<li>
<p>A flexbox (<code>&lt;div class="d-flex flex-column"&gt;</code>) is used to arrange the content vertically.</p>
</li>
<li>
<p><strong>Flash Messages</strong>:</p>
</li>
<li>
<p>Flash messages are included using <code>@include('flash::message')</code>. These messages are typically used to display notifications or alerts.</p>
</li>
<li>
<p><strong>Livewire Component</strong>:</p>
</li>
<li>A Livewire component (<code>&lt;livewire:client-quote-table/&gt;</code>) is included within the flexbox. This component renders a table or list of quotes for the client.</li>
</ol>
<p>In summary, this template sets up the structure for displaying a list of quotes in the client panel. It includes a container, flash messages, and a Livewire component for rendering the actual list of quotes. The layout and styling are provided by the parent layout (<code>'client_panel.layouts.app'</code>).</p>
<h3 id="show-quote">Show Quote</h3>
<p>The view of the 'show quote' page located in <strong>ressources&gt;views&gt;client_panel&gt;quote&gt;show.blade.php</strong>.</p>
<div class="highlight"><pre><span></span><code><span class="x">@extends(&#39;client_panel.layouts.app&#39;)</span>
<span class="x">@section(&#39;title&#39;)</span>
<span class="x">    {{ __(&#39;messages.quote.quote_details&#39;)}}</span>
<span class="x">@endsection</span>
<span class="x">@section(&#39;header_toolbar&#39;)</span>
<span class="x">    &lt;div class=&quot;container-fluid&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;d-md-flex align-items-center justify-content-between mb-5&quot;&gt;</span>
<span class="x">            &lt;h1 class=&quot;mb-0&quot;&gt;@yield(&#39;title&#39;)&lt;/h1&gt;</span>
<span class="x">            &lt;div class=&quot;text-end mt-4 mt-md-0&quot;&gt;</span>
<span class="x">                &lt;a href=&quot;{{ url()-&gt;previous() }}&quot;</span>
<span class="x">                   class=&quot;btn btn-outline-primary&quot;&gt;{{ __(&#39;messages.common.back&#39;) }}&lt;/a&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">@endsection</span>
<span class="x">@section(&#39;content&#39;)</span>
<span class="x">    &lt;div class=&quot;container-fluid&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;d-flex flex-column&quot;&gt;</span>
<span class="x">            @include(&#39;flash::message&#39;)</span>
<span class="x">            @include(&#39;client_panel.quotes.show_fields&#39;)</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">@endsection</span>
</code></pre></div>
<p>This is a Blade template used in our application to display the details of a quote in a client panel. Here's a brief explanation of its contents:</p>
<ol>
<li>
<p><strong>Layout and Section Declaration</strong>:</p>
</li>
<li>
<p>The template extends the layout defined in <code>'client_panel.layouts.app'</code>.</p>
</li>
<li>
<p>It sets the title of the page to "Quote Details."</p>
</li>
<li>
<p><strong>Header Toolbar</strong>:</p>
</li>
<li>
<p>A container (<code>&lt;div class="container-fluid"&gt;</code>) is used to create a fluid layout.</p>
</li>
<li>Within the container, there is a flexbox (<code>&lt;div class="d-md-flex align-items-center justify-content-between mb-5"&gt;</code>) that arranges content in a row with a title and a back button.</li>
<li>The title is set dynamically using <code>@yield('title')</code>.</li>
<li>
<p>A "Back" button is included with a link to the previous page.</p>
</li>
<li>
<p><strong>Content Section</strong>:</p>
</li>
<li>
<p>The main content section of the page is defined using the <code>@section('content')</code> directive.</p>
</li>
<li>
<p>It consists of a container (<code>&lt;div class="container-fluid"&gt;</code>) and a flexbox (<code>&lt;div class="d-flex flex-column"&gt;</code>) for arranging content vertically.</p>
</li>
<li>
<p><strong>Flash Messages</strong>:</p>
</li>
<li>
<p>Flash messages are included using <code>@include('flash::message')</code>. These messages are typically used to display notifications or alerts.</p>
</li>
<li>
<p><strong>Quote Details</strong>:</p>
</li>
<li>The quote details are included using <code>@include('client_panel.quotes.show_fields')</code>. This likely includes information about the quote, such as its content, customer details, and any associated data.</li>
</ol>
<p>In summary, this template sets up the structure for displaying the details of a quote in the client panel. It includes a header toolbar with a dynamic title and a back button, a container for content, and flash messages for notifications. The layout and styling are likely provided by the parent layout (<code>'client_panel.layouts.app'</code>).</p>
<p><strong>client_panel.quotes.show_fields:</strong></p>
<div class="highlight"><pre><span></span><code><span class="x">&lt;div&gt;</span>
<span class="x">    &lt;div class=&quot;d-flex overflow-auto h-55px&quot;&gt;</span>
<span class="x">        &lt;ul class=&quot;nav nav-tabs mb-5 pb-1 overflow-auto flex-nowrap text-nowrap&quot;&gt;</span>
<span class="x">            &lt;li class=&quot;nav-item position-relative me-7 mb-3&quot; role=&quot;presentation&quot;&gt;</span>
<span class="x">                &lt;button class=&quot;nav-link active p-0&quot; id=&quot;overview-tab&quot; data-bs-toggle=&quot;tab&quot;</span>
<span class="x">                        data-bs-target=&quot;#overview&quot;</span>
<span class="x">                        type=&quot;button&quot; role=&quot;tab&quot; aria-controls=&quot;overview&quot; aria-selected=&quot;true&quot;&gt;</span>
<span class="x">                    {{ __(&#39;messages.quote.overview&#39;) }}</span>
<span class="x">                &lt;/button&gt;</span>
<span class="x">            &lt;/li&gt;</span>
<span class="x">            &lt;li class=&quot;nav-item position-relative me-7 mb-3&quot; role=&quot;presentation&quot;&gt;</span>
<span class="x">                &lt;button class=&quot;nav-link p-0&quot; id=&quot;note_terms-tab&quot; data-bs-toggle=&quot;tab&quot; data-bs-target=&quot;#note_terms&quot;</span>
<span class="x">                        type=&quot;button&quot; role=&quot;tab&quot; aria-controls=&quot;note_terms&quot; aria-selected=&quot;false&quot;&gt;</span>
<span class="x">                    {{ __(&#39;messages.quote.note_terms&#39;) }}</span>
<span class="x">                &lt;/button&gt;</span>
<span class="x">            &lt;/li&gt;</span>
<span class="x">        &lt;/ul&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">    &lt;div class=&quot;tab-content&quot; id=&quot;myTabContent&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;tab-pane fade show active&quot; id=&quot;overview&quot; role=&quot;tabpanel&quot;&gt;</span>
<span class="x">            &lt;div class=&quot;card&quot;&gt;</span>
<span class="x">                &lt;div class=&quot;d-flex flex-column&quot;&gt;</span>
<span class="x">                    &lt;div class=&quot;card-body&quot;&gt;</span>
<span class="x">                        &lt;div class=&quot;row&quot;&gt;</span>
<span class="x">                            &lt;div class=&quot;col-xxl-9&quot;&gt;</span>
<span class="x">                                &lt;div class=&quot;row&quot;&gt;</span>
<span class="x">                                    &lt;div class=&quot;col-lg-4 col-md-6&quot;&gt;</span>
<span class="x">                                        &lt;div class=&quot;d-flex mb-md-10 mb-5&quot;&gt;</span>
<span class="x">                                            &lt;div class=&quot;image image-circle image-lg-small width-100px&quot;&gt;</span>
<span class="x">                                                &lt;img src=&quot;{{ getLogoUrl() }}&quot; alt=&quot;user&quot; class=&quot;object-contain&quot;&gt;</span>
<span class="x">                                            &lt;/div&gt;</span>
<span class="x">                                            &lt;h3 class=&quot;ps-7&quot;&gt;{{ __(&#39;messages.quote.quote&#39;) }}</span>
<span class="x">                                                #{{ $quote-&gt;quote_id }}</span>
<span class="x">                                            &lt;/h3&gt;</span>
<span class="x">                                        &lt;/div&gt;</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                    &lt;div class=&quot;col-lg-3 col-md-3 col-6&quot;&gt;</span>
<span class="x">                                        &lt;div class=&quot;d-flex flex-column mb-md-10 mb-5 mt-3 mt-md-0&quot;&gt;</span>
<span class="x">                                            &lt;label for=&quot;name&quot;</span>
<span class="x">                                                   class=&quot;pb-2 fs-4 text-gray-600&quot;&gt;{{ __(&#39;messages.quote.quote_date&#39;).&#39;:&#39; }}&lt;/label&gt;</span>
<span class="x">                                            &lt;span class=&quot;fs-4 text-gray-800&quot;&gt;{{ \Carbon\Carbon::parse($quote-&gt;quote_date)-&gt;translatedFormat(currentDateFormat()) }}&lt;/span&gt;</span>
<span class="x">                                        &lt;/div&gt;</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                    &lt;div class=&quot;col-lg-3 col-md-3 col-6&quot;&gt;</span>
<span class="x">                                        &lt;div class=&quot;d-flex flex-column mb-md-10 mb-5 mt-3 mt-md-0&quot;&gt;</span>
<span class="x">                                            &lt;label for=&quot;name&quot;</span>
<span class="x">                                                   class=&quot;pb-2 fs-4 text-gray-600&quot;&gt;{{ __(&#39;messages.quote.due_date&#39;).&#39;:&#39; }}&lt;/label&gt;</span>
<span class="x">                                            &lt;span class=&quot;fs-4 text-gray-800&quot;&gt;{{ \Carbon\Carbon::parse($quote-&gt;due_date)-&gt;translatedFormat(currentDateFormat()) }}&lt;/span&gt;</span>
<span class="x">                                        &lt;/div&gt;</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                    &lt;div class=&quot;col-md-2 col-6 mb-3 mb-sm-0&quot;&gt;</span>
<span class="x">                                        &lt;a target=&quot;_blank&quot;</span>
<span class="x">                                           href=&quot;{{ route(&#39;client.quotes.pdf&#39;,[&#39;quote&#39; =&gt; $quote-&gt;id]) }}&quot;</span>
<span class="x">                                           class=&quot;btn btn-sm btn-success text-white&quot;&gt;{{ __(&#39;messages.quote.print_quote&#39;) }}&lt;/a&gt;</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                    &lt;div class=&quot;col-lg-5 col-md-6&quot;&gt;</span>
<span class="x">                                        &lt;div class=&quot;d-flex flex-column mb-md-10 mb-4&quot;&gt;</span>
<span class="x">                                            &lt;label for=&quot;name&quot;</span>
<span class="x">                                                   class=&quot;pb-2 fs-4 text-gray-600&quot;&gt;{{ __(&#39;messages.quote.issue_for&#39;).&#39;:&#39; }}&lt;/label&gt;</span>
<span class="x">                                            &lt;span class=&quot;fs-4 text-gray-800 mb-3&quot;&gt;{{ $quote-&gt;client-&gt;user-&gt;full_name }}&lt;/span&gt;</span>
<span class="x">                                            &lt;p class=&quot;text-gray-700 fs-4 mb-0&quot;&gt;</span>
<span class="x">                                                @if(isset($quote-&gt;client-&gt;address) &amp;&amp; !empty($quote-&gt;client-&gt;address))</span>
<span class="x">                                                    {{ ucfirst($quote-&gt;client-&gt;address) }}</span>
<span class="x">                                                @else</span>
<span class="x">                                                    {{ &quot;N/A&quot; }}</span>
<span class="x">                                                @endif</span>
<span class="x">                                            &lt;/p&gt;</span>
<span class="x">                                        &lt;/div&gt;</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                    &lt;div class=&quot;col-md-2 col-md-6&quot;&gt;</span>
<span class="x">                                        &lt;div class=&quot;d-flex flex-column mb-md-10 mb-5&quot;&gt;</span>
<span class="x">                                            &lt;label for=&quot;name&quot;</span>
<span class="x">                                                   class=&quot;pb-2 fs-4 text-gray-600&quot;&gt;{{ __(&#39;messages.quote.issue_by&#39;).&#39;:&#39; }}&lt;/label&gt;</span>
<span class="x">                                            &lt;span class=&quot;fs-4 text-gray-800 mb-3&quot;&gt;{{ getAppName() }}&lt;/span&gt;</span>
<span class="x">                                            &lt;p class=&quot;text-gray-700 fs-4 mb-0&quot;&gt;</span>
<span class="x">                                                {!! getSettingValue(&#39;company_address&#39;) !!}&lt;/p&gt;</span>
<span class="x">                                        &lt;/div&gt;</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                    &lt;div class=&quot;col-12 table-responsive&quot;&gt;</span>
<span class="x">                                        &lt;table class=&quot;table table-striped box-shadow-none mt-4&quot;&gt;</span>
<span class="x">                                            &lt;thead&gt;</span>
<span class="x">                                            &lt;tr&gt;</span>
<span class="x">                                                &lt;th scope=&quot;col&quot;&gt;{{ __(&#39;messages.product.product&#39;) }}&lt;/th&gt;</span>
<span class="x">                                                &lt;th scope=&quot;col&quot;&gt;{{ __(&#39;messages.quote.qty&#39;) }}&lt;/th&gt;</span>
<span class="x">                                                &lt;th scope=&quot;col&quot; class=&quot;text-end&quot;&gt;{{ __(&#39;messages.quote.price&#39;) }}&lt;/th&gt;</span>
<span class="x">                                                &lt;th scope=&quot;col&quot; class=&quot;text-end&quot;&gt;{{ __(&#39;messages.quote.amount&#39;) }}&lt;/th&gt;</span>
<span class="x">                                            &lt;/tr&gt;</span>
<span class="x">                                            &lt;/thead&gt;</span>
<span class="x">                                            &lt;tbody&gt;</span>
<span class="x">                                            @foreach($quote-&gt;quoteItems as $index =&gt; $quoteItem)</span>
<span class="x">                                                &lt;tr&gt;</span>
<span class="x">                                                    &lt;td class=&quot;py-4&quot;&gt;{{ isset($quoteItem-&gt;product-&gt;name)?$quoteItem-&gt;product-&gt;name:$quoteItem-&gt;product_name??&#39;N/A&#39; }}&lt;/td&gt;</span>
<span class="x">                                                    &lt;td class=&quot;py-4&quot;&gt;{{ $quoteItem-&gt;quantity }}&lt;/td&gt;</span>
<span class="x">                                                    &lt;td class=&quot;py-4 text-end min-width-130px&quot;&gt;{{  isset($quoteItem-&gt;price) ? getCurrencyAmount($quoteItem-&gt;price,true,$quote-&gt;tenant_id) : &#39;N/A&#39; }}&lt;/td&gt;</span>
<span class="x">                                                    &lt;td class=&quot;py-4 text-end min-width-130px&quot;&gt;{{ isset($quoteItem-&gt;total) ? getCurrencyAmount($quoteItem-&gt;total,true,$quote-&gt;tenant_id) : &#39;N/A&#39; }}&lt;/td&gt;</span>
<span class="x">                                                &lt;/tr&gt;</span>
<span class="x">                                            @endforeach</span>
<span class="x">                                            &lt;/tbody&gt;</span>
<span class="x">                                        &lt;/table&gt;</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                    &lt;div class=&quot;col-lg-5 ms-lg-auto mt-4&quot;&gt;</span>
<span class="x">                                        &lt;div class=&quot;border-top&quot;&gt;</span>
<span class="x">                                            &lt;table class=&quot;table table-borderless box-shadow-none mb-0 mt-5&quot;&gt;</span>
<span class="x">                                                &lt;tbody&gt;</span>
<span class="x">                                                &lt;tr&gt;</span>
<span class="x">                                                    &lt;td class=&quot;ps-0&quot;&gt;{{ __(&#39;messages.quote.sub_total&#39;).(&#39;:&#39;) }}&lt;/td&gt;</span>
<span class="x">                                                    &lt;td class=&quot;text-gray-900 text-end pe-0&quot;&gt;{{ isset($quote-&gt;amount) ? getCurrencyAmount($quote-&gt;amount,true,$quote-&gt;tenant_id) : &#39;N/A&#39; }}&lt;/td&gt;</span>
<span class="x">                                                &lt;/tr&gt;</span>
<span class="x">                                                &lt;tr&gt;</span>
<span class="x">                                                    &lt;td class=&quot;ps-0&quot;&gt;{{ __(&#39;messages.quote.discount&#39;).(&#39;:&#39;) }}&lt;/td&gt;</span>
<span class="x">                                                    &lt;td class=&quot;text-gray-900 text-end pe-0&quot;&gt;</span>
<span class="x">                                                        @if($quote-&gt;discount == 0 || !isset($quote))</span>
<span class="x">                                                            &lt;span&gt;N/A&lt;/span&gt;</span>
<span class="x">                                                        @else</span>
<span class="x">                                                            @if( $quote-&gt;discount_type == \App\Models\Quote::FIXED)</span>
<span class="x">                                                                {{ getCurrencyAmount($quote-&gt;discount,true,$quote-&gt;tenant_id) }}</span>
<span class="x">                                                            @else</span>
<span class="x">                                                                {{ getCurrencyAmount($quote-&gt;amount * $quote-&gt;discount / 100,true,$quote-&gt;tenant_id)}}</span>
<span class="x">                                                            @endif</span>
<span class="x">                                                        @endif</span>
<span class="x">                                                    &lt;/td&gt;</span>
<span class="x">                                                &lt;/tr&gt;</span>
<span class="x">                                                &lt;tr&gt;</span>
<span class="x">                                                    &lt;td class=&quot;ps-0&quot;&gt;{{ __(&#39;messages.quote.total&#39;).(&#39;:&#39;) }}&lt;/td&gt;</span>
<span class="x">                                                    &lt;td class=&quot;text-gray-900 text-end pe-0&quot;&gt;</span>
<span class="x">                                                        {{ getCurrencyAmount($quote-&gt;final_amount,true,$quote-&gt;tenant_id) }}</span>
<span class="x">                                                    &lt;/td&gt;</span>
<span class="x">                                                &lt;/tr&gt;</span>
<span class="x">                                                &lt;/tbody&gt;</span>
<span class="x">                                            &lt;/table&gt;</span>
<span class="x">                                        &lt;/div&gt;</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                &lt;/div&gt;</span>
<span class="x">                            &lt;/div&gt;</span>
<span class="x">                            &lt;div class=&quot;col-xxl-3 mb-5 mb-lg-0&quot;&gt;</span>
<span class="x">                                &lt;div class=&quot;bg-gray-100 rounded-15 p-md-7 p-5 h-100 mt-xxl-0 mt-5 col-xxl-9 ms-xxl-auto w-100&quot;&gt;</span>
<span class="x">                                    &lt;div class=&quot;mb-8&quot;&gt;</span>
<span class="x">                                        @if($quote-&gt;status == \App\Models\Quote::DRAFT)</span>
<span class="x">                                            &lt;span class=&quot;badge bg-light-warning me-5&quot;&gt;Draft&lt;/span&gt;</span>
<span class="x">                                        @elseif($quote-&gt;status == \App\Models\Quote::CONVERTED)</span>
<span class="x">                                            &lt;span class=&quot;badge bg-light-success me-5&quot;&gt;Converted&lt;/span&gt;</span>
<span class="x">                                        @endif</span>
<span class="x">                                    &lt;/div&gt;</span>

<span class="x">                                    &lt;h3 class=&quot;mb-5&quot;&gt;{{ __(&#39;messages.quote.client_overview&#39;) }}&lt;/h3&gt;</span>
<span class="x">                                    &lt;div class=&quot;row&quot;&gt;</span>
<span class="x">                                        &lt;div class=&quot;col-xxl-12 col-lg-4 col-sm-6 d-flex flex-column mb-xxl-7 mb-lg-0 mb-4&quot;&gt;</span>
<span class="x">                                            &lt;label for=&quot;name&quot;</span>
<span class="x">                                                   class=&quot;pb-2 fs-4 text-gray-600&quot;&gt;{{ __(&#39;messages.quote.client_name&#39;) }}&lt;/label&gt;</span>
<span class="x">                                            &lt;a href=&quot;#&quot;</span>
<span class="x">                                               class=&quot;link-primary fs-4 text-decoration-none&quot;&gt;{{ $quote-&gt;client-&gt;user-&gt;full_name }}&lt;/a&gt;</span>
<span class="x">                                        &lt;/div&gt;</span>
<span class="x">                                        &lt;div class=&quot;col-xxl-12 col-lg-4 col-sm-6 d-flex flex-column mb-xxl-7 mb-lg-0 mb-4&quot;&gt;</span>
<span class="x">                                            &lt;label for=&quot;name&quot;</span>
<span class="x">                                                   class=&quot;pb-2 fs-4 text-gray-600&quot;&gt;{{ __(&#39;messages.quote.client_email&#39;) }}&lt;/label&gt;</span>
<span class="x">                                            &lt;span class=&quot;fs-4 text-gray-900&quot;&gt;{{ $quote-&gt;client-&gt;user-&gt;email }}&lt;/span&gt;</span>
<span class="x">                                        &lt;/div&gt;</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                &lt;/div&gt;</span>
<span class="x">                            &lt;/div&gt;</span>
<span class="x">                        &lt;/div&gt;</span>
<span class="x">                    &lt;/div&gt;</span>
<span class="x">                &lt;/div&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">        &lt;div class=&quot;tab-pane fade show&quot; id=&quot;note_terms&quot; role=&quot;tabpanel&quot;&gt;</span>
<span class="x">            &lt;div class=&quot;card&quot;&gt;</span>
<span class="x">                &lt;div class=&quot;card-body pt-5&quot;&gt;</span>
<span class="x">                    &lt;div class=&quot;row&quot;&gt;</span>
<span class="x">                        &lt;div class=&quot;col-lg-12 mb-5&quot;&gt;</span>
<span class="x">                            &lt;div class=&quot;fw-bold text-gray-600 fs-7&quot;&gt;{{ __(&#39;messages.quote.note&#39;).&#39;:&#39; }}&lt;/div&gt;</span>
<span class="x">                            &lt;div class=&quot;fs-6&quot;&gt;{!! $quote-&gt;note ?? __(&#39;messages.quote.note_not_found&#39;) !!}&lt;/div&gt;</span>
<span class="x">                        &lt;/div&gt;</span>
<span class="x">                        &lt;div class=&quot;col-lg-12 mb-5&quot;&gt;</span>
<span class="x">                            &lt;div class=&quot;fw-bold text-gray-600 fs-7&quot;&gt;{{ __(&#39;messages.quote.terms&#39;).&#39;:&#39; }}&lt;/div&gt;</span>
<span class="x">                            &lt;div class=&quot;fs-6&quot;&gt;{!! $quote-&gt;term ?? __(&#39;messages.quote.terms_not_found&#39;) !!}&lt;/div&gt;</span>
<span class="x">                        &lt;/div&gt;</span>
<span class="x">                    &lt;/div&gt;</span>
<span class="x">                &lt;/div&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">&lt;/div&gt;</span>
</code></pre></div>
<p>This Blade template is used to display the details of a quote in our application's client panel. Here's an explanation of its structure and content:</p>
<ol>
<li>
<p><strong>Tab Navigation</strong>:</p>
</li>
<li>
<p>This section sets up tab navigation using Bootstrap's nav tabs. It allows users to switch between different sections of the quote details page.</p>
</li>
<li>
<p>Two tabs are defined: "Overview" and "Note &amp; Terms." The "Overview" tab is active by default.</p>
</li>
<li>
<p><strong>Tab Content</strong>:</p>
</li>
<li>
<p>This section contains the content of the tabs.</p>
</li>
<li>The "Overview" tab includes information about the quote, such as its ID, dates, client details, and a table displaying quote items.</li>
<li>
<p>The "Note &amp; Terms" tab displays any notes and terms associated with the quote.</p>
</li>
<li>
<p><strong>Quote Information (Overview Tab)</strong>:</p>
</li>
<li>
<p>Various details of the quote are displayed, including the quote ID, quote date, due date, and links for printing the quote.</p>
</li>
<li>Information about the client, such as their name and address, is shown.</li>
<li>A table lists the quote items, including product names, quantities, prices, and total amounts.</li>
<li>
<p>Subtotals, discounts, and the final total of the quote are displayed.</p>
</li>
<li>
<p><strong>Quote Status Badge</strong>:</p>
</li>
<li>
<p>Depending on the quote's status, a badge is displayed. It indicates whether the quote is in "Draft" status or has been "Converted."</p>
</li>
<li>
<p><strong>Client Overview (Overview Tab)</strong>:</p>
</li>
<li>
<p>Information about the client, such as their name and email, is displayed in a separate section.</p>
</li>
<li>
<p><strong>Note &amp; Terms (Note &amp; Terms Tab)</strong>:</p>
</li>
<li>This section displays any notes and terms associated with the quote. If they are not available, default messages are shown.</li>
</ol>
<p>Overall, this template provides a structured and organized way to present the details of a quote to users in a client panel. It uses Bootstrap for tab navigation and styling, and it dynamically fetches data from the Laravel application to populate the quote information.</p>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>