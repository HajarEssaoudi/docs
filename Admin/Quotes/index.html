
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../Products/">
      
      
        <link rel="next" href="../invoices/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.18">
    
    
      
        <title>Quotes - InfyInvoices</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#quotes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="InfyInvoices" class="md-header__button md-logo" aria-label="InfyInvoices" data-md-component="logo">
      
  <img src="../../logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            InfyInvoices
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Quotes
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../Login/" class="md-tabs__link">
      Authentication page
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../dashboard/" class="md-tabs__link md-tabs__link--active">
        Admin
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Client/dashboard/" class="md-tabs__link">
        Client
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../layout/" class="md-tabs__link">
      Layout
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="InfyInvoices" class="md-nav__button md-logo" aria-label="InfyInvoices" data-md-component="logo">
      
  <img src="../../logo.png" alt="logo">

    </a>
    InfyInvoices
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Login/" class="md-nav__link">
        Authentication page
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Admin
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Admin
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dashboard/" class="md-nav__link">
        Dashboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../admins/" class="md-nav__link">
        admins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../clients/" class="md-nav__link">
        clients
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../categories/" class="md-nav__link">
        categories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Taxes/" class="md-nav__link">
        Taxes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Products/" class="md-nav__link">
        Products
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Quotes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Quotes
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#route" class="md-nav__link">
    Route
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#controller" class="md-nav__link">
    Controller
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model" class="md-nav__link">
    Model
  </a>
  
    <nav class="md-nav" aria-label="Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#invoice-model" class="md-nav__link">
    Invoice Model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quote-model" class="md-nav__link">
    Quote Model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#product-model" class="md-nav__link">
    Product Model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#invoice-item-model" class="md-nav__link">
    Invoice Item Model
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#view" class="md-nav__link">
    View
  </a>
  
    <nav class="md-nav" aria-label="View">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-livewire-quote-table" class="md-nav__link">
    The livewire: Quote table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-of-quotes" class="md-nav__link">
    List of Quotes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-quote" class="md-nav__link">
    New quote
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edit-quote" class="md-nav__link">
    Edit quote
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-quote" class="md-nav__link">
    Show Quote
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#buttons-blade" class="md-nav__link">
    Buttons blade
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../invoices/" class="md-nav__link">
        invoices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Transactions/" class="md-nav__link">
        Transactions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Payments/" class="md-nav__link">
        Payments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../InvoiceTemplates/" class="md-nav__link">
        Invoice Templates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Settings/" class="md-nav__link">
        Settings
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Client
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Client
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Client/dashboard/" class="md-nav__link">
        Dashboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Client/quotes/" class="md-nav__link">
        Quotes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Client/invoices/" class="md-nav__link">
        Invoices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Client/transactions/" class="md-nav__link">
        Transactions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../layout/" class="md-nav__link">
        Layout
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="quotes">Quotes</h1>
<h2 id="route">Route</h2>
<p>The route <code>Route::resource('quotes', QuoteController::class);</code> leads to the page <strong>/admin/quotes</strong>, which displays all the quotes we have.</p>
<h2 id="controller">Controller</h2>
<p>The controller of the 'Quotes' page located in <strong>app&gt;http&gt;controllers&gt;QuoteController.php</strong>.</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Http</span><span class="err">\</span><span class="nx">Controllers</span><span class="p">;</span>

<span class="nx">use</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Exports</span><span class="err">\</span><span class="nx">AdminQuotesExport</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Http</span><span class="err">\</span><span class="nx">Requests</span><span class="err">\</span><span class="nx">CreateQuoteRequest</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Http</span><span class="err">\</span><span class="nx">Requests</span><span class="err">\</span><span class="nx">UpdateQuoteRequest</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Models</span><span class="err">\</span><span class="nx">Invoice</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Models</span><span class="err">\</span><span class="nx">InvoiceItem</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Models</span><span class="err">\</span><span class="nx">Product</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Models</span><span class="err">\</span><span class="nx">Quote</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Repositories</span><span class="err">\</span><span class="nx">QuoteRepository</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Barryvdh</span><span class="err">\</span><span class="nx">DomPDF</span><span class="err">\</span><span class="nx">Facade</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">PDF</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Carbon</span><span class="err">\</span><span class="nx">Carbon</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Exception</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Contracts</span><span class="err">\</span><span class="nx">Foundation</span><span class="err">\</span><span class="nx">Application</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Contracts</span><span class="err">\</span><span class="nx">View</span><span class="err">\</span><span class="nx">Factory</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Contracts</span><span class="err">\</span><span class="nx">View</span><span class="err">\</span><span class="nx">View</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Http</span><span class="err">\</span><span class="nx">JsonResponse</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Http</span><span class="err">\</span><span class="nx">RedirectResponse</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Http</span><span class="err">\</span><span class="nx">Request</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Http</span><span class="err">\</span><span class="nx">Response</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Support</span><span class="err">\</span><span class="nx">Facades</span><span class="err">\</span><span class="nx">DB</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Laracasts</span><span class="err">\</span><span class="nx">Flash</span><span class="err">\</span><span class="nx">Flash</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Maatwebsite</span><span class="err">\</span><span class="nx">Excel</span><span class="err">\</span><span class="nx">Facades</span><span class="err">\</span><span class="nx">Excel</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Symfony</span><span class="err">\</span><span class="nx">Component</span><span class="err">\</span><span class="nx">HttpFoundation</span><span class="err">\</span><span class="nx">BinaryFileResponse</span><span class="p">;</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">QuoteController</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">AppBaseController</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/** @var QuoteRepository */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="nx">$quoteRepository</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">__construct</span><span class="p">(</span><span class="nx">QuoteRepository</span><span class="w"> </span><span class="nx">$quoteRepo</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteRepo</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param  Request  $request</span>
<span class="cm">     * @return Application|Factory|View</span>
<span class="cm">     *</span>
<span class="cm">     * @throws Exception</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">index</span><span class="p">(</span><span class="nx">Request</span><span class="w"> </span><span class="nx">$request</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$statusArr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Quote</span><span class="o">::</span><span class="nx">STATUS_ARR</span><span class="p">;</span>
<span class="w">        </span><span class="nx">$status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$request</span><span class="o">-&gt;</span><span class="nx">status</span><span class="p">;</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">view</span><span class="p">(</span><span class="s1">&#39;quotes.index&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">compact</span><span class="p">(</span><span class="s1">&#39;statusArr&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;status&#39;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Show the form for creating a new resource.</span>
<span class="cm">     *</span>
<span class="cm">     * @return Application|Factory|View</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">create</span><span class="p">()</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">getSyncList</span><span class="p">();</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">view</span><span class="p">(</span><span class="s1">&#39;quotes.create&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="kd">with</span><span class="p">(</span><span class="nx">$data</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param  CreateQuoteRequest  $request</span>
<span class="cm">     * @return JsonResponse</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">store</span><span class="p">(</span><span class="nx">CreateQuoteRequest</span><span class="w"> </span><span class="nx">$request</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">DB</span><span class="o">::</span><span class="nx">beginTransaction</span><span class="p">();</span>
<span class="w">            </span><span class="nx">$request</span><span class="o">-&gt;</span><span class="nx">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Quote</span><span class="o">::</span><span class="nx">DRAFT</span><span class="p">;</span>
<span class="w">            </span><span class="nx">$quote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">saveQuote</span><span class="p">(</span><span class="nx">$request</span><span class="o">-&gt;</span><span class="nx">all</span><span class="p">());</span>
<span class="w">            </span><span class="nx">DB</span><span class="o">::</span><span class="nx">commit</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">Exception</span><span class="w"> </span><span class="nx">$e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">DB</span><span class="o">::</span><span class="nx">rollBack</span><span class="p">();</span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">sendError</span><span class="p">(</span><span class="nx">$e</span><span class="o">-&gt;</span><span class="nx">getMessage</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">sendResponse</span><span class="p">(</span><span class="nx">$quote</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Quote saved successfully.&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Display the specified resource.</span>
<span class="cm">     *</span>
<span class="cm">     * @param  Quote  $quote</span>
<span class="cm">     * @return Application|Factory|View</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">show</span><span class="p">(</span><span class="nx">Quote</span><span class="w"> </span><span class="nx">$quote</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$quoteData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">getQuoteData</span><span class="p">(</span><span class="nx">$quote</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">view</span><span class="p">(</span><span class="s1">&#39;quotes.show&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="kd">with</span><span class="p">(</span><span class="nx">$quoteData</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param  Quote  $quote</span>
<span class="cm">     * @return Application|Factory|View|RedirectResponse</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">edit</span><span class="p">(</span><span class="nx">Quote</span><span class="w"> </span><span class="nx">$quote</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">$quote</span><span class="o">-&gt;</span><span class="nx">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">Quote</span><span class="o">::</span><span class="nx">CONVERTED</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">Flash</span><span class="o">::</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Converted quote can not editable.&#39;</span><span class="p">);</span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="nx">route</span><span class="p">(</span><span class="s1">&#39;quotes.index&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="nx">$data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">prepareEditFormData</span><span class="p">(</span><span class="nx">$quote</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">view</span><span class="p">(</span><span class="s1">&#39;quotes.edit&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">compact</span><span class="p">(</span><span class="s1">&#39;quote&#39;</span><span class="p">))</span><span class="o">-&gt;</span><span class="kd">with</span><span class="p">(</span><span class="nx">$data</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param  UpdateQuoteRequest  $request</span>
<span class="cm">     * @param  Quote  $quote</span>
<span class="cm">     * @return JsonResponse</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">update</span><span class="p">(</span><span class="nx">UpdateQuoteRequest</span><span class="w"> </span><span class="nx">$request</span><span class="p">,</span><span class="w"> </span><span class="nx">Quote</span><span class="w"> </span><span class="nx">$quote</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">JsonResponse</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$request</span><span class="o">-&gt;</span><span class="nx">all</span><span class="p">();</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">DB</span><span class="o">::</span><span class="nx">beginTransaction</span><span class="p">();</span>
<span class="w">            </span><span class="nx">$quote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">updateQuote</span><span class="p">(</span><span class="nx">$quote</span><span class="o">-&gt;</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">$input</span><span class="p">);</span>
<span class="w">            </span><span class="nx">DB</span><span class="o">::</span><span class="nx">commit</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">Exception</span><span class="w"> </span><span class="nx">$e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">DB</span><span class="o">::</span><span class="nx">rollBack</span><span class="p">();</span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">sendError</span><span class="p">(</span><span class="nx">$e</span><span class="o">-&gt;</span><span class="nx">getMessage</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">sendResponse</span><span class="p">(</span><span class="nx">$quote</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Quote updated successfully.&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param  Quote  $quote</span>
<span class="cm">     * @return JsonResponse</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">destroy</span><span class="p">(</span><span class="nx">Quote</span><span class="w"> </span><span class="nx">$quote</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">JsonResponse</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$quote</span><span class="o">-&gt;</span><span class="ow">delete</span><span class="p">();</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">sendSuccess</span><span class="p">(</span><span class="s1">&#39;Quote Deleted successfully.&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param $productId</span>
<span class="cm">     * @return JsonResponse</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">getProduct</span><span class="p">(</span><span class="nx">$productId</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">JsonResponse</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$product</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Product</span><span class="o">::</span><span class="nx">pluck</span><span class="p">(</span><span class="s1">&#39;unit_price&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">toArray</span><span class="p">();</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">sendResponse</span><span class="p">(</span><span class="nx">$product</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Product Price retrieved successfully.&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param  Quote  $quote</span>
<span class="cm">     * @return Response</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">convertToPdf</span><span class="p">(</span><span class="nx">Quote</span><span class="w"> </span><span class="nx">$quote</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Response</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">ini_set</span><span class="p">(</span><span class="s1">&#39;max_execution_time&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">36000000</span><span class="p">);</span>
<span class="w">        </span><span class="nx">$quote</span><span class="o">-&gt;</span><span class="nx">load</span><span class="p">(</span><span class="s1">&#39;client.user&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;invoiceTemplate&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;quoteItems.product&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;quoteItems&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="nx">$quoteData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">getPdfData</span><span class="p">(</span><span class="nx">$quote</span><span class="p">);</span>
<span class="w">        </span><span class="nx">$invoiceTemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">getDefaultTemplate</span><span class="p">(</span><span class="nx">$quote</span><span class="p">);</span>
<span class="w">        </span><span class="nx">$pdf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">PDF</span><span class="o">::</span><span class="nx">loadView</span><span class="p">(</span><span class="s2">&quot;quotes.quote_template_pdf.$invoiceTemplate&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$pdf</span><span class="o">-&gt;</span><span class="nx">stream</span><span class="p">(</span><span class="s1">&#39;quote.pdf&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param  Request  $request</span>
<span class="cm">     * @return mixed</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">convertToInvoice</span><span class="p">(</span><span class="nx">Request</span><span class="w"> </span><span class="nx">$request</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$quoteId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$request</span><span class="o">-&gt;</span><span class="nx">quoteId</span><span class="p">;</span>
<span class="w">        </span><span class="nx">$quote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Quote</span><span class="o">::</span><span class="nx">whereId</span><span class="p">(</span><span class="nx">$quoteId</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">firstOrFail</span><span class="p">();</span>

<span class="w">        </span><span class="nx">$quoteDatas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">getQuoteData</span><span class="p">(</span><span class="nx">$quote</span><span class="p">);</span>
<span class="w">        </span><span class="nx">$quoteData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteDatas</span><span class="p">[</span><span class="s1">&#39;quote&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$quoteItems</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteDatas</span><span class="p">[</span><span class="s1">&#39;quote&#39;</span><span class="p">][</span><span class="s1">&#39;quoteItems&#39;</span><span class="p">];</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="w"> </span><span class="nx">empty</span><span class="p">(</span><span class="nx">getInvoiceNoPrefix</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;quote_id&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">getInvoiceNoPrefix</span><span class="p">().</span><span class="s1">&#39;-&#39;</span><span class="p">.</span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;quote_id&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="w"> </span><span class="nx">empty</span><span class="p">(</span><span class="nx">getInvoiceNoSuffix</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;quote_id&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;-&#39;</span><span class="p">.</span><span class="nx">getInvoiceNoSuffix</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;invoice_id&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;quote_id&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;client_id&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;client_id&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;invoice_date&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Carbon</span><span class="o">::</span><span class="nx">parse</span><span class="p">(</span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;quote_date&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="nx">format</span><span class="p">(</span><span class="nx">currentDateFormat</span><span class="p">());</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;due_date&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Carbon</span><span class="o">::</span><span class="nx">parse</span><span class="p">(</span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;due_date&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="nx">format</span><span class="p">(</span><span class="nx">currentDateFormat</span><span class="p">());</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;final_amount&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;final_amount&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;discount_type&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;discount_type&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;discount&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;discount&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;note&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;note&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;term&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;term&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;template_id&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;template_id&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;recurring&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;recurring&#39;</span><span class="p">];</span>
<span class="w">        </span><span class="nx">$invoice</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Invoice</span><span class="o">::</span><span class="nx">DRAFT</span><span class="p">;</span>

<span class="w">        </span><span class="nx">$invoice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Invoice</span><span class="o">::</span><span class="nx">create</span><span class="p">(</span><span class="nx">$invoice</span><span class="p">);</span>

<span class="w">        </span><span class="nx">foreach</span><span class="w"> </span><span class="p">(</span><span class="nx">$quoteItems</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">$quoteItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">$invoiceItem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">InvoiceItem</span><span class="o">::</span><span class="nx">create</span><span class="p">([</span>
<span class="w">                </span><span class="s1">&#39;invoice_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">$invoice</span><span class="o">-&gt;</span><span class="nx">id</span><span class="p">,</span>
<span class="w">                </span><span class="s1">&#39;product_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">$quoteItem</span><span class="p">[</span><span class="s1">&#39;product_id&#39;</span><span class="p">],</span>
<span class="w">                </span><span class="s1">&#39;product_name&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">$quoteItem</span><span class="p">[</span><span class="s1">&#39;product_name&#39;</span><span class="p">],</span>
<span class="w">                </span><span class="s1">&#39;quantity&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">$quoteItem</span><span class="p">[</span><span class="s1">&#39;quantity&#39;</span><span class="p">],</span>
<span class="w">                </span><span class="s1">&#39;price&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">$quoteItem</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">],</span>
<span class="w">                </span><span class="s1">&#39;total&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">$quoteItem</span><span class="p">[</span><span class="s1">&#39;total&#39;</span><span class="p">],</span>
<span class="w">            </span><span class="p">]);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nx">Quote</span><span class="o">::</span><span class="nx">whereId</span><span class="p">(</span><span class="nx">$quoteId</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">update</span><span class="p">([</span><span class="s1">&#39;status&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">Quote</span><span class="o">::</span><span class="nx">CONVERTED</span><span class="p">]);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">sendSuccess</span><span class="p">(</span><span class="s1">&#39;Converted to Invoice successfully!.&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return BinaryFileResponse</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">exportQuotesExcel</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">BinaryFileResponse</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">Excel</span><span class="o">::</span><span class="nx">download</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">AdminQuotesExport</span><span class="p">(),</span><span class="w"> </span><span class="s1">&#39;quote-excel.xlsx&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">getPublicQuotePdf</span><span class="p">(</span><span class="nx">$quoteId</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$quote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Quote</span><span class="o">::</span><span class="nx">whereQuoteId</span><span class="p">(</span><span class="nx">$quoteId</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">firstOrFail</span><span class="p">();</span>
<span class="w">        </span><span class="nx">$quote</span><span class="o">-&gt;</span><span class="nx">load</span><span class="p">(</span><span class="s1">&#39;client.user&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;invoiceTemplate&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;quoteItems.product&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;quoteItems&#39;</span><span class="p">);</span>

<span class="w">        </span><span class="nx">$quoteData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">getPdfData</span><span class="p">(</span><span class="nx">$quote</span><span class="p">);</span>
<span class="w">        </span><span class="nx">$invoiceTemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">getDefaultTemplate</span><span class="p">(</span><span class="nx">$quote</span><span class="p">);</span>
<span class="w">        </span><span class="nx">$pdf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">PDF</span><span class="o">::</span><span class="nx">loadView</span><span class="p">(</span><span class="s2">&quot;quotes.quote_template_pdf.$invoiceTemplate&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">$quoteData</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$pdf</span><span class="o">-&gt;</span><span class="nx">stream</span><span class="p">(</span><span class="s1">&#39;quote.pdf&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param $quoteId</span>
<span class="cm">     * @return Application|Factory|View</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">showPublicQuote</span><span class="p">(</span><span class="nx">$quoteId</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">View</span><span class="o">|</span><span class="nx">Factory</span><span class="o">|</span><span class="nx">Application</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$quote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Quote</span><span class="o">::</span><span class="kd">with</span><span class="p">(</span><span class="s1">&#39;client.user&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">whereQuoteId</span><span class="p">(</span><span class="nx">$quoteId</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">first</span><span class="p">();</span>
<span class="w">        </span><span class="nx">$quoteData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">quoteRepository</span><span class="o">-&gt;</span><span class="nx">getQuoteData</span><span class="p">(</span><span class="nx">$quote</span><span class="p">);</span>
<span class="w">        </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;statusArr&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Quote</span><span class="o">::</span><span class="nx">STATUS_ARR</span><span class="p">;</span>
<span class="w">        </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quote</span><span class="o">-&gt;</span><span class="nx">status</span><span class="p">;</span>
<span class="w">        </span><span class="nx">$quoteData</span><span class="p">[</span><span class="s1">&#39;userLang&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$quote</span><span class="o">-&gt;</span><span class="nx">client</span><span class="o">-&gt;</span><span class="nx">user</span><span class="o">-&gt;</span><span class="nx">language</span><span class="p">;</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">view</span><span class="p">(</span><span class="s1">&#39;quotes.public-quote.public_view&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="kd">with</span><span class="p">(</span><span class="nx">$quoteData</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return Response</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">exportQuotesPdf</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">Response</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">ini_set</span><span class="p">(</span><span class="s1">&#39;max_execution_time&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">36000000</span><span class="p">);</span>
<span class="w">        </span><span class="nx">$data</span><span class="p">[</span><span class="s1">&#39;quotes&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Quote</span><span class="o">::</span><span class="kd">with</span><span class="p">(</span><span class="s1">&#39;client.user&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">orderBy</span><span class="p">(</span><span class="s1">&#39;created_at&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;desc&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">get</span><span class="p">();</span>
<span class="w">        </span><span class="nx">$quotesPdf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">PDF</span><span class="o">::</span><span class="nx">loadView</span><span class="p">(</span><span class="s1">&#39;quotes.export_quotes_pdf&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">$data</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$quotesPdf</span><span class="o">-&gt;</span><span class="nx">download</span><span class="p">(</span><span class="s1">&#39;Quotes.pdf&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Let's break down the code step by step:</p>
<ol>
<li>
<p><strong>Namespace and Imports:</strong>
   The controller is defined within the <code>App\Http\Controllers</code> namespace and imports various classes and libraries that are used throughout the controller's methods.</p>
</li>
<li>
<p><strong>Class Definition and Constructor:</strong>
   The <code>QuoteController</code> class extends <code>AppBaseController</code>, which suggests that it follows some common practices for controllers. It has a constructor that injects a <code>QuoteRepository</code> instance, presumably to handle interactions with the database related to quotes.</p>
</li>
<li>
<p><strong>Index Method:</strong>
   The <code>index</code> method is used to display a list of quotes. It retrieves the possible quote statuses and a selected status from the request and then loads a view named <code>quotes.index</code> while passing the retrieved data to the view.</p>
</li>
<li>
<p><strong>Create Method:</strong>
   The <code>create</code> method is responsible for showing a form to create a new quote. It fetches data using the <code>getSyncList</code> method from the <code>QuoteRepository</code> and passes this data to the <code>quotes.create</code> view.</p>
</li>
<li>
<p><strong>Store Method:</strong>
   The <code>store</code> method is used to store a new quote. It starts a database transaction, sets the quote status to "DRAFT," and then uses the <code>quoteRepository</code> to save the quote. If successful, the transaction is committed; otherwise, it's rolled back.</p>
</li>
<li>
<p><strong>Show Method:</strong>
   The <code>show</code> method displays the details of a specific quote. It retrieves the quote data using the <code>getQuoteData</code> method from the <code>QuoteRepository</code> and passes it to the <code>quotes.show</code> view.</p>
</li>
<li>
<p><strong>Edit Method:</strong>
   The <code>edit</code> method allows editing an existing quote. It checks if the quote's status is "CONVERTED"; if it is, an error message is flashed, and the user is redirected to the quotes index. Otherwise, it prepares data for editing using the <code>prepareEditFormData</code> method from the <code>QuoteRepository</code> and loads the <code>quotes.edit</code> view.</p>
</li>
<li>
<p><strong>Update Method:</strong>
   The <code>update</code> method is used to update an existing quote. It begins a database transaction, updates the quote data using the <code>updateQuote</code> method from the <code>QuoteRepository</code>, and then either commits the transaction or rolls it back based on success or failure.</p>
</li>
<li>
<p><strong>Destroy Method:</strong>
   The <code>destroy</code> method deletes a quote. It calls the <code>delete</code> method on the quote instance and returns a success message.</p>
</li>
<li>
<p><strong>Various Other Methods:</strong>
    The controller contains several other methods that handle tasks like getting product information, converting a quote to a PDF, converting a quote to an invoice, exporting quotes to Excel/PDF, and handling public quotes.</p>
</li>
<li>
<p><strong>PDF Generation:</strong>
    The controller uses the <code>Barryvdh\DomPDF\Facade</code> to generate PDFs for quotes and invoices. It loads a Blade view based on the selected template and passes relevant data to generate the PDF.</p>
</li>
<li>
<p><strong>View Loading:</strong>
    The controller frequently loads views with appropriate data using Laravel's <code>view</code> method. It also uses the <code>with</code> method to pass data to views.</p>
</li>
</ol>
<p>Overall, the <code>QuoteController</code> class serves as the central hub for managing quotes within the Laravel application. It handles various CRUD (Create, Read, Update, Delete) operations related to quotes, interacts with the database through the <code>QuoteRepository</code>, and renders views to provide a user interface for managing quotes.</p>
<h2 id="model">Model</h2>
<p>The models related to this controller are : <strong>App\Models\Invoice</strong> , <strong>App\Models\Quote</strong> , <strong>App\Models\Product</strong> and <strong>App\Models\InvoiceItem</strong>.</p>
<h3 id="invoice-model">Invoice Model</h3>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Models</span><span class="p">;</span>

<span class="nx">use</span><span class="w"> </span><span class="nx">Carbon</span><span class="err">\</span><span class="nx">Carbon</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Builder</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Collection</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Factories</span><span class="err">\</span><span class="nx">HasFactory</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Model</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Relations</span><span class="err">\</span><span class="nx">BelongsTo</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Relations</span><span class="err">\</span><span class="nx">BelongsToMany</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Relations</span><span class="err">\</span><span class="nx">HasMany</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Support</span><span class="err">\</span><span class="nx">Str</span><span class="p">;</span>


<span class="kd">class</span><span class="w"> </span><span class="nx">Invoice</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Model</span>
<span class="p">{</span>
<span class="w">    </span><span class="nx">use</span><span class="w"> </span><span class="nx">HasFactory</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">SELECT_DISCOUNT_TYPE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">FIXED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">PERCENTAGE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">DISCOUNT_TYPE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">SELECT_DISCOUNT_TYPE</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Select Discount Type&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">FIXED</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Fixed&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">PERCENTAGE</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Percentage&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">DRAFT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">UNPAID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">PAID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">PARTIALLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">OVERDUE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">STATUS_ALL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">PROCESSING</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">6</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">STATUS_ARR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">STATUS_ALL</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;All&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">DRAFT</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Draft&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">UNPAID</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Unpaid&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">PAID</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Paid&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">PARTIALLY</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Partially Paid&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">OVERDUE</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Overdue&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">PROCESSING</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Processing&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">RECURRING_OFF</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">RECURRING_ON</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">RECURRING_STATUS_ARR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">RECURRING_ON</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;On&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">RECURRING_OFF</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Off&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">MONTHLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">QUARTERLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">SEMIANNUALLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">ANNUALLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">RECURRING_ARR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">MONTHLY</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Monthly&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">QUARTERLY</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Quarterly&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">SEMIANNUALLY</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Semi Annually&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">ANNUALLY</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Annually&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Validation rules</span>
<span class="cm">     *</span>
<span class="cm">     * @var array</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nx">$rules</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;client_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;invoice_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required|unique:invoices,invoice_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;invoice_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;due_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nx">$messages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;client_id.required&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;The Client field is required.&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;invoice_date.required&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;The invoice date field is required.&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;due_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;The invoice Due date field is required.&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="nx">$table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;invoices&#39;</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="nx">$appends</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;status_label&#39;</span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="nx">$fillable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;client_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;invoice_date&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;due_date&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;invoice_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;currency_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;amount&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;discount_type&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;discount&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;final_amount&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;note&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;term&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;template_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;status&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;recurring_status&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;recurring_cycle&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;last_recurring_on&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;parent_id&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">protected</span><span class="w"> </span><span class="nx">$casts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;client_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;parent_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;invoice_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;date&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;due_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;date&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;invoice_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;currency_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;amount&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;discount_type&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;discount&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;final_amount&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;note&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;term&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;template_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;status&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;recurring_status&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;recurring_cycle&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;last_recurring_on&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;date&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;tax&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">getStatusLabelAttribute</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">self</span><span class="o">::</span><span class="nx">STATUS_ARR</span><span class="p">[</span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">status</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return BelongsTo</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">client</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">BelongsTo</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">belongsTo</span><span class="p">(</span><span class="nx">Client</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;client_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return HasMany</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">invoiceItems</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">HasMany</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">hasMany</span><span class="p">(</span><span class="nx">InvoiceItem</span><span class="o">::</span><span class="kd">class</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return string</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">generateUniqueInvoiceId</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$invoiceId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">mb_strtoupper</span><span class="p">(</span><span class="nx">Str</span><span class="o">::</span><span class="nx">random</span><span class="p">(</span><span class="mf">6</span><span class="p">));</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">$isExist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">self</span><span class="o">::</span><span class="nx">whereInvoiceId</span><span class="p">(</span><span class="nx">$invoiceId</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">exists</span><span class="p">();</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">$isExist</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">self</span><span class="o">::</span><span class="nx">generateUniqueInvoiceId</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$invoiceId</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return HasMany</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">payments</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">HasMany</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">hasMany</span><span class="p">(</span><span class="nx">Payment</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;invoice_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return HasMany</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">AdminPayment</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">HasMany</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">hasMany</span><span class="p">(</span><span class="nx">AdminPayment</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;invoice_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return BelongsTo</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">invoiceTemplate</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">BelongsTo</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">belongsTo</span><span class="p">(</span><span class="nx">InvoiceSetting</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;template_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">parentInvoice</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">BelongsTo</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">belongsTo</span><span class="p">(</span><span class="nx">self</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;parent_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">childInvoices</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">HasMany</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">hasMany</span><span class="p">(</span><span class="nx">self</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;parent_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param $value</span>
<span class="cm">     * @return Setting|mixed</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">getCurrencyIdAttribute</span><span class="p">(</span><span class="nx">$value</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="w"> </span><span class="nx">empty</span><span class="p">(</span><span class="nx">$value</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">Currency</span><span class="o">::</span><span class="nx">where</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">$value</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">pluck</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">first</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">Currency</span><span class="o">::</span><span class="nx">where</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">getSettingValue</span><span class="p">(</span><span class="s1">&#39;current_currency&#39;</span><span class="p">))</span><span class="o">-&gt;</span><span class="nx">pluck</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">first</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param $value</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">setInvoiceDateAttribute</span><span class="p">(</span><span class="nx">$value</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">attributes</span><span class="p">[</span><span class="s1">&#39;invoice_date&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Carbon</span><span class="o">::</span><span class="nx">createFromFormat</span><span class="p">(</span><span class="nx">currentDateFormat</span><span class="p">(),</span>
<span class="w">            </span><span class="nx">$value</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">translatedFormat</span><span class="p">(</span><span class="s1">&#39;Y-m-d&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param $value</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">setDueDateAttribute</span><span class="p">(</span><span class="nx">$value</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">attributes</span><span class="p">[</span><span class="s1">&#39;due_date&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Carbon</span><span class="o">::</span><span class="nx">createFromFormat</span><span class="p">(</span><span class="nx">currentDateFormat</span><span class="p">(),</span>
<span class="w">            </span><span class="nx">$value</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">translatedFormat</span><span class="p">(</span><span class="s1">&#39;Y-m-d&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return BelongsToMany</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">invoiceTaxes</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">BelongsToMany</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">belongsToMany</span><span class="p">(</span><span class="nx">Tax</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="s1">&#39;invoice_taxes&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>This model represents invoices within the application and provides methods and properties for interacting with invoice data stored in the database.</p>
<p>Let's break down the key parts of this <code>Invoice</code> model class:</p>
<ol>
<li>
<p><strong>Use of Traits and Relationships:</strong>
   The model class uses the <code>HasFactory</code> trait, indicating that it can be used to create instances of the model using a factory. It also contains several Eloquent relationships to other models, including <code>Client</code>, <code>InvoiceItem</code>, <code>Payment</code>, <code>AdminPayment</code>, <code>InvoiceSetting</code> (which seems to represent invoice templates), and others.</p>
</li>
<li>
<p><strong>Model Properties and Fillable Fields:</strong>
   The model defines a set of properties that correspond to the columns in the database table. The <code>$fillable</code> array specifies which fields can be mass-assigned when creating or updating instances of the model.</p>
</li>
<li>
<p><strong>Constants for Status and Other Values:</strong>
   The model includes constants like <code>DRAFT</code>, <code>UNPAID</code>, <code>PAID</code>, <code>RECURRING_OFF</code>, and others to represent various states and types of invoices. These constants are used throughout the code to ensure consistency and avoid hardcoding values.</p>
</li>
<li>
<p><strong>Accessors and Mutators:</strong>
   The model defines accessor and mutator methods to manipulate and format certain attributes. For example, <code>getCurrencyIdAttribute</code> returns the currency ID, and <code>setInvoiceDateAttribute</code> and <code>setDueDateAttribute</code> modify the format of date attributes when setting them.</p>
</li>
<li>
<p><strong>Custom Methods:</strong>
   The model contains custom methods like <code>generateUniqueInvoiceId</code> to generate unique invoice IDs, <code>getStatusLabelAttribute</code> to provide a human-readable status label, and others for handling specific tasks related to invoices.</p>
</li>
<li>
<p><strong>Validation Rules and Messages:</strong>
   The model defines validation rules and custom validation error messages for creating new invoices. These rules ensure that required fields are provided and certain constraints are met.</p>
</li>
<li>
<p><strong>Eloquent Query Scopes:</strong>
   Eloquent query scopes added to the model to encapsulate common query logic. These scopes can be used to easily retrieve specific sets of invoices based on various conditions.</p>
</li>
<li>
<p><strong>Attributes and Appends:</strong>
   The <code>$appends</code> array defines additional attributes that are not present in the database but are dynamically computed when the model is accessed. For example, the <code>status_label</code> attribute is computed based on the invoice's status.</p>
</li>
<li>
<p><strong>Getters and Setters:</strong>
   The model defines getter and setter methods for certain attributes. For instance, <code>getCurrencyIdAttribute</code> retrieves the currency ID for an invoice, considering different scenarios.</p>
</li>
</ol>
<p>Overall, the <code>Invoice</code> model class encapsulates the logic and behavior associated with invoices in the application. It handles relationships, attribute manipulation, validation rules, and custom methods related to invoices, making it a central point for interacting with invoice data in the database.</p>
<h3 id="quote-model">Quote Model</h3>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Models</span><span class="p">;</span>

<span class="nx">use</span><span class="w"> </span><span class="nx">Carbon</span><span class="err">\</span><span class="nx">Carbon</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Factories</span><span class="err">\</span><span class="nx">HasFactory</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Model</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Relations</span><span class="err">\</span><span class="nx">BelongsTo</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Relations</span><span class="err">\</span><span class="nx">HasMany</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Support</span><span class="err">\</span><span class="nx">Str</span><span class="p">;</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">Quote</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Model</span>
<span class="p">{</span>
<span class="w">    </span><span class="nx">use</span><span class="w"> </span><span class="nx">HasFactory</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">SELECT_DISCOUNT_TYPE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">FIXED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">PERCENTAGE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">DISCOUNT_TYPE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">SELECT_DISCOUNT_TYPE</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Select Discount Type&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">FIXED</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Fixed&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">PERCENTAGE</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Percentage&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">DRAFT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">CONVERTED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">STATUS_ALL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">STATUS_ARR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">DRAFT</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Draft&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">CONVERTED</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Converted&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">STATUS_ALL</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;All&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">MONTHLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">QUARTERLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">SEMIANNUALLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">ANNUALLY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">RECURRING_ARR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">MONTHLY</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Monthly&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">QUARTERLY</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Quarterly&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">SEMIANNUALLY</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Semi Annually&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">self</span><span class="o">::</span><span class="nx">ANNUALLY</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;Annually&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">protected</span><span class="w"> </span><span class="nx">$with</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;quoteItems.product&#39;</span><span class="p">];</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Validation rules</span>
<span class="cm">     *</span>
<span class="cm">     * @var array</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nx">$rules</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;client_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quote_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required|unique:quotes,quote_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quote_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;due_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nx">$messages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;client_id.required&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;The Client field is required.&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quote_date.required&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;The Quote date field is required.&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;due_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;The Quote Due date field is required.&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="nx">$table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;quotes&#39;</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="nx">$appends</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;status_label&#39;</span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="nx">$fillable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;client_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quote_date&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;due_date&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quote_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;amount&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;discount_type&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;discount&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;final_amount&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;note&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;term&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;template_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;status&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">protected</span><span class="w"> </span><span class="nx">$casts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;client_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quote_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;date&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;due_date&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;date&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quote_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;amount&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;discount_type&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;discount&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;final_amount&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;note&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;term&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;template_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;status&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;recurring&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">getStatusLabelAttribute</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">self</span><span class="o">::</span><span class="nx">STATUS_ARR</span><span class="p">[</span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">status</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return BelongsTo</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">client</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">BelongsTo</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">belongsTo</span><span class="p">(</span><span class="nx">Client</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;client_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return HasMany</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">quoteItems</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">HasMany</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">hasMany</span><span class="p">(</span><span class="nx">QuoteItem</span><span class="o">::</span><span class="kd">class</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return string</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">generateUniqueQuoteId</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$quoteId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">mb_strtoupper</span><span class="p">(</span><span class="nx">Str</span><span class="o">::</span><span class="nx">random</span><span class="p">(</span><span class="mf">6</span><span class="p">));</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">$isExist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">self</span><span class="o">::</span><span class="nx">whereQuoteId</span><span class="p">(</span><span class="nx">$quoteId</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">exists</span><span class="p">();</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">$isExist</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">self</span><span class="o">::</span><span class="nx">generateUniqueQuoteId</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$quoteId</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return BelongsTo</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">invoiceTemplate</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">BelongsTo</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">belongsTo</span><span class="p">(</span><span class="nx">InvoiceSetting</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;template_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param $value</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">setQuoteDateAttribute</span><span class="p">(</span><span class="nx">$value</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">attributes</span><span class="p">[</span><span class="s1">&#39;quote_date&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Carbon</span><span class="o">::</span><span class="nx">createFromFormat</span><span class="p">(</span><span class="nx">currentDateFormat</span><span class="p">(),</span><span class="w"> </span><span class="nx">$value</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">translatedFormat</span><span class="p">(</span><span class="s1">&#39;Y-m-d&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param $value</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">setDueDateAttribute</span><span class="p">(</span><span class="nx">$value</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">attributes</span><span class="p">[</span><span class="s1">&#39;due_date&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Carbon</span><span class="o">::</span><span class="nx">createFromFormat</span><span class="p">(</span><span class="nx">currentDateFormat</span><span class="p">(),</span><span class="w"> </span><span class="nx">$value</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">translatedFormat</span><span class="p">(</span><span class="s1">&#39;Y-m-d&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The provided code defines an Eloquent model class named <code>Quote</code> within the <code>App\Models</code> namespace. This model represents quotes within the application and provides methods and properties for interacting with quote data stored in the database. Below is an explanation of the key parts of this <code>Quote</code> model class:</p>
<ol>
<li>
<p><strong>Use of Traits and Relationships:</strong></p>
</li>
<li>
<p>The model class uses the <code>HasFactory</code> trait, which indicates that it can be used to create instances of the model using a factory.</p>
</li>
<li>
<p>It defines several Eloquent relationships to other models, including <code>Client</code> (a client associated with the quote), <code>QuoteItem</code> (items within the quote), and <code>InvoiceSetting</code> (which appears to represent quote templates).</p>
</li>
<li>
<p><strong>Model Properties and Fillable Fields:</strong></p>
</li>
<li>
<p>The model defines a set of properties that correspond to the columns in the database table.</p>
</li>
<li>
<p>The <code>$fillable</code> array specifies which fields can be mass-assigned when creating or updating instances of the model.</p>
</li>
<li>
<p><strong>Constants for Status and Other Values:</strong></p>
</li>
<li>
<p>The model includes constants like <code>DRAFT</code>, <code>CONVERTED</code>, <code>MONTHLY</code>, <code>QUARTERLY</code>, and others to represent various states and types of quotes. These constants are used throughout the code to ensure consistency and avoid hardcoding values.</p>
</li>
<li>
<p><strong>Accessors and Mutators:</strong></p>
</li>
<li>
<p>The model defines an accessor method named <code>getStatusLabelAttribute</code> to provide a human-readable status label for a quote based on its status constant.</p>
</li>
<li>
<p><strong>Validation Rules and Messages:</strong></p>
</li>
<li>
<p>The model defines validation rules and custom validation error messages for creating new quotes. These rules ensure that required fields are provided and certain constraints are met.</p>
</li>
<li>
<p><strong>Attributes and Appends:</strong></p>
</li>
<li>
<p>The <code>$appends</code> array defines additional attributes that are not present in the database but are dynamically computed when the model is accessed. For example, the <code>status_label</code> attribute is computed based on the quote's status.</p>
</li>
<li>
<p><strong>Custom Methods:</strong></p>
</li>
<li>
<p>The model contains custom methods like <code>generateUniqueQuoteId</code> to generate unique quote IDs and setters for <code>quote_date</code> and <code>due_date</code> attributes to modify their date format when setting them.</p>
</li>
<li>
<p><strong>Casting Attributes:</strong></p>
</li>
<li>
<p>The <code>$casts</code> array specifies the data types of certain attributes, such as integers, dates, and doubles, to ensure proper data handling.</p>
</li>
<li>
<p><strong>Eloquent Relationships:</strong></p>
</li>
<li>The model defines relationships like <code>client()</code> and <code>quoteItems()</code> using Eloquent's <code>belongsTo</code> and <code>hasMany</code> methods. These relationships allow for convenient retrieval of related data.</li>
</ol>
<p>Overall, the <code>Quote</code> model class encapsulates the logic and behavior associated with quotes in the application. It handles relationships, attribute manipulation, validation rules, and custom methods related to quotes, making it a central point for interacting with quote data in the database.</p>
<h3 id="product-model">Product Model</h3>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Models</span><span class="p">;</span>

<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Factories</span><span class="err">\</span><span class="nx">HasFactory</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Model</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Notifications</span><span class="err">\</span><span class="nx">Notifiable</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Spatie</span><span class="err">\</span><span class="nx">MediaLibrary</span><span class="err">\</span><span class="nx">HasMedia</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Spatie</span><span class="err">\</span><span class="nx">MediaLibrary</span><span class="err">\</span><span class="nx">InteractsWithMedia</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Spatie</span><span class="err">\</span><span class="nx">MediaLibrary</span><span class="err">\</span><span class="nx">MediaCollections</span><span class="err">\</span><span class="nx">Models</span><span class="err">\</span><span class="nx">Media</span><span class="p">;</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Model</span><span class="w"> </span><span class="kr">implements</span><span class="w"> </span><span class="nx">HasMedia</span>
<span class="p">{</span>
<span class="w">    </span><span class="nx">use</span><span class="w"> </span><span class="nx">HasFactory</span><span class="p">,</span><span class="w"> </span><span class="nx">Notifiable</span><span class="p">,</span><span class="w"> </span><span class="nx">InteractsWithMedia</span><span class="p">;</span>

<span class="w">    </span><span class="kr">protected</span><span class="w"> </span><span class="nx">$table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;products&#39;</span><span class="p">;</span>

<span class="w">    </span><span class="kr">protected</span><span class="w"> </span><span class="nx">$fillable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;code&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;category_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;unit_price&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;description&#39;</span><span class="p">];</span>

<span class="w">    </span><span class="kr">protected</span><span class="w"> </span><span class="nx">$casts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;name&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;code&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;category_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;unit_price&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;description&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">Image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;product&#39;</span><span class="p">;</span>

<span class="w">    </span><span class="kr">protected</span><span class="w"> </span><span class="nx">$appends</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;product_image&#39;</span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nx">$rules</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;name&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;code&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required|alpha_num|min:3|max:6|unique:products,code&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;category_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;unit_price&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required|numeric&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nx">$messages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;code.required&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;The product code field is required.&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;code.size&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;The product code must be 6 characters.&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;code.unique&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;The product code has already been taken.&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return string</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">getProductImageAttribute</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="cm">/** @var Media $media */</span>
<span class="w">        </span><span class="nx">$media</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">getMedia</span><span class="p">(</span><span class="nx">self</span><span class="o">::</span><span class="nx">Image</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">first</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="w"> </span><span class="nx">empty</span><span class="p">(</span><span class="nx">$media</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">$media</span><span class="o">-&gt;</span><span class="nx">getFullUrl</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">asset</span><span class="p">(</span><span class="s1">&#39;images/default-product.jpg&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">category</span><span class="p">()</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">hasOne</span><span class="p">(</span><span class="nx">Category</span><span class="o">::</span><span class="kd">class</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;category_id&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The provided code defines an Eloquent model class named <code>Product</code> within the <code>App\Models</code> namespace. This model represents products in the application and provides methods and properties for interacting with product data stored in the database. Below is an explanation of the key parts of this <code>Product</code> model class:</p>
<ol>
<li>
<p><strong>Use of Traits and Interfaces:</strong></p>
</li>
<li>
<p>The model class uses the <code>HasFactory</code>, <code>Notifiable</code>, <code>InteractsWithMedia</code> traits, and implements the <code>HasMedia</code> interface.</p>
</li>
<li>The <code>HasFactory</code> trait allows for easy creation of model instances using factories.</li>
<li>The <code>Notifiable</code> trait is used for handling notifications.</li>
<li>
<p>The <code>InteractsWithMedia</code> trait and <code>HasMedia</code> interface are used for handling media files associated with the model.</p>
</li>
<li>
<p><strong>Model Properties and Fillable Fields:</strong></p>
</li>
<li>
<p>The model defines a set of properties that correspond to the columns in the database table.</p>
</li>
<li>
<p>The <code>$fillable</code> array specifies which fields can be mass-assigned when creating or updating instances of the model.</p>
</li>
<li>
<p><strong>Constants:</strong></p>
</li>
<li>
<p>The model includes a constant named <code>Image</code>, which is used as a reference to the product images associated with this model.</p>
</li>
<li>
<p><strong>Accessors and Mutators:</strong></p>
</li>
<li>
<p>The model defines an accessor method named <code>getProductImageAttribute</code> to retrieve the URL of the product's image.</p>
</li>
<li>
<p>This accessor checks if there is a media associated with the product and returns its URL. If no media is found, it returns a default image URL.</p>
</li>
<li>
<p><strong>Validation Rules and Messages:</strong></p>
</li>
<li>
<p>The model defines validation rules and custom validation error messages for creating new products. These rules ensure that required fields are provided and certain constraints are met, such as the uniqueness of the product code.</p>
</li>
<li>
<p><strong>Attributes and Appends:</strong></p>
</li>
<li>
<p>The <code>$appends</code> array defines additional attributes that are not present in the database but are dynamically computed when the model is accessed. In this case, it includes the <code>product_image</code> attribute.</p>
</li>
<li>
<p><strong>Eloquent Relationships:</strong></p>
</li>
<li>The model defines a relationship with the <code>Category</code> model using the <code>hasOne</code> method. This relationship represents the category to which a product belongs.</li>
</ol>
<p>Overall, the <code>Product</code> model class encapsulates the logic and behavior associated with products in the application. It handles relationships, attribute manipulation, validation rules, and custom methods related to products, making it a central point for interacting with product data in the database. Additionally, it supports media management for product images using the Spatie Media Library package.</p>
<h3 id="invoice-item-model">Invoice Item Model</h3>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span><span class="w"> </span><span class="nx">App</span><span class="err">\</span><span class="nx">Models</span><span class="p">;</span>

<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Builder</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Factories</span><span class="err">\</span><span class="nx">HasFactory</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Model</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Relations</span><span class="err">\</span><span class="nx">BelongsTo</span><span class="p">;</span>
<span class="nx">use</span><span class="w"> </span><span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Database</span><span class="err">\</span><span class="nx">Eloquent</span><span class="err">\</span><span class="nx">Relations</span><span class="err">\</span><span class="nx">HasMany</span><span class="p">;</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">InvoiceItem</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Model</span>
<span class="p">{</span>
<span class="w">    </span><span class="nx">use</span><span class="w"> </span><span class="nx">HasFactory</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Validation rules</span>
<span class="cm">     *</span>
<span class="cm">     * @var array</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nx">$rules</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;product_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quantity&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required|regex:/^\d*(\.\d{1,2})?$/&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;price&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;required|regex:/^\d+(\.\d{1,2})?$/&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">protected</span><span class="w"> </span><span class="nx">$table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;invoice_items&#39;</span><span class="p">;</span>

<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="nx">$fillable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;invoice_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;product_id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;product_name&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quantity&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;price&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;total&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="kr">protected</span><span class="w"> </span><span class="nx">$casts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s1">&#39;invoice_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;product_id&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;integer&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;product_name&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;quantity&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;price&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;total&#39;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">];</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return BelongsTo</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">product</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">BelongsTo</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">belongsTo</span><span class="p">(</span><span class="nx">Product</span><span class="o">::</span><span class="kd">class</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @return HasMany</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">invoiceItemTax</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">HasMany</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">hasMany</span><span class="p">(</span><span class="nx">InvoiceItemTax</span><span class="o">::</span><span class="kd">class</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The provided code defines an Eloquent model class named <code>InvoiceItem</code> within the <code>App\Models</code> namespace. This model represents individual line items on an invoice and provides methods and properties for interacting with invoice item data stored in the database. Below is an explanation of the key parts of this <code>InvoiceItem</code> model class:</p>
<ol>
<li>
<p><strong>Use of Traits and Interfaces:</strong></p>
</li>
<li>
<p>The model class uses the <code>HasFactory</code> trait.</p>
</li>
<li>
<p><strong>Model Properties and Fillable Fields:</strong></p>
</li>
<li>
<p>The model defines a set of properties that correspond to the columns in the database table.</p>
</li>
<li>
<p>The <code>$fillable</code> array specifies which fields can be mass-assigned when creating or updating instances of the model.</p>
</li>
<li>
<p><strong>Validation Rules:</strong></p>
</li>
<li>
<p>The model defines validation rules for creating new invoice items. These rules ensure that required fields, such as <code>product_id</code>, <code>quantity</code>, and <code>price</code>, are provided and that these fields meet certain regex-based constraints.</p>
</li>
<li>
<p><strong>Eloquent Relationships:</strong></p>
</li>
<li>
<p>The model defines two Eloquent relationships:</p>
<ul>
<li><strong>BelongsTo Relationship with <code>Product</code></strong>: This relationship represents the product associated with the invoice item. It is defined using the <code>belongsTo</code> method.</li>
<li><strong>HasMany Relationship with <code>InvoiceItemTax</code></strong>: This relationship represents the taxes associated with the invoice item. It is defined using the <code>hasMany</code> method.</li>
</ul>
</li>
<li>
<p><strong>Table Name:</strong></p>
</li>
<li>
<p>The <code>$table</code> property specifies the name of the database table associated with this model, which is set to <code>'invoice_items'</code>.</p>
</li>
<li>
<p><strong>Casting Data Types:</strong></p>
</li>
<li>
<p>The <code>$casts</code> property specifies how certain attributes should be cast to different data types. For example, it casts <code>quantity</code>, <code>price</code>, and <code>total</code> to the <code>double</code> data type.</p>
</li>
<li>
<p><strong>Method Annotations:</strong></p>
</li>
<li>The class includes method annotations for methods like <code>newModelQuery()</code>, <code>newQuery()</code>, and <code>query()</code>. These are used for building queries on this model.</li>
</ol>
<p>Overall, the <code>InvoiceItem</code> model class encapsulates the logic and behavior associated with individual line items on an invoice. It defines relationships with other models, validation rules, and data casting to facilitate the management of invoice item data in the application's database.</p>
<h2 id="view">View</h2>
<h3 id="the-livewire-quote-table">The livewire: Quote table</h3>
<p>The livewire of the 'Quote table' located in <strong>app&gt;http&gt;livewire&gt;QuoteTable.php</strong>.</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Livewire</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Models\Quote</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Builder</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Rappasoft\LaravelLivewireTables\Views\Column</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">QuoteTable</span> <span class="k">extends</span> <span class="nx">LivewireTableComponent</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$model</span> <span class="o">=</span> <span class="nx">Quote</span><span class="o">::</span><span class="na">class</span><span class="p">;</span>
    <span class="k">protected</span> <span class="nx">string</span> <span class="nv">$tableName</span> <span class="o">=</span> <span class="s1">&#39;quotes&#39;</span><span class="p">;</span>
    <span class="k">public</span> <span class="nv">$showButtonOnHeader</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="k">public</span> <span class="nv">$buttonComponent</span> <span class="o">=</span> <span class="s1">&#39;quotes.components.add-button&#39;</span><span class="p">;</span>
    <span class="k">public</span> <span class="nx">bool</span> <span class="nv">$showFilterOnHeader</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="k">public</span> <span class="nv">$filterComponent</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;quotes.components.filter&#39;</span><span class="p">,</span> <span class="nx">Quote</span><span class="o">::</span><span class="na">STATUS_ARR</span><span class="p">];</span>
    <span class="k">public</span> <span class="nv">$listeners</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;changeQuoteStatusFilter&#39;</span><span class="p">,</span> <span class="s1">&#39;resetPageTable&#39;</span><span class="p">];</span>
    <span class="k">public</span> <span class="nv">$status</span> <span class="o">=</span> <span class="nx">Quote</span><span class="o">::</span><span class="na">STATUS_ALL</span><span class="p">;</span>

    <span class="k">protected</span> <span class="nv">$queryString</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">];</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">configure</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setPrimaryKey</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setDefaultSort</span><span class="p">(</span><span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setQueryStringStatus</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setThAttributes</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">Column</span> <span class="nv">$column</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$column</span><span class="o">-&gt;</span><span class="na">isField</span><span class="p">(</span><span class="s1">&#39;final_amount&#39;</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">return</span> <span class="p">[</span>
                    <span class="s1">&#39;class&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;d-flex justify-content-end&#39;</span><span class="p">,</span>
                <span class="p">];</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="p">[];</span>
        <span class="p">});</span>

    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">columns</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="nx">Column</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s1">&#39;messages.quote.client&#39;</span><span class="p">),</span> <span class="s1">&#39;client.user.first_name&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">sortable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">searchable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;quotes.components.client-name&#39;</span><span class="p">),</span>
            <span class="nx">Column</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="s1">&#39;quote_id&#39;</span><span class="p">,</span> <span class="s1">&#39;quote_id&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">sortable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">searchable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">hideIf</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
            <span class="nx">Column</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="s1">&#39;Last Name&#39;</span><span class="p">,</span> <span class="s1">&#39;client.user.last_name&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">sortable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">searchable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">hideIf</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
            <span class="nx">Column</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s1">&#39;messages.quote.quote_date&#39;</span><span class="p">),</span> <span class="s1">&#39;quote_date&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">sortable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">searchable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$row</span><span class="p">,</span> <span class="nx">Column</span> <span class="nv">$column</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;quotes.components.quote-due-date&#39;</span><span class="p">)</span>
                        <span class="o">-&gt;</span><span class="na">withValue</span><span class="p">([</span>
                            <span class="s1">&#39;quote-date&#39;</span> <span class="o">=&gt;</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">quote_date</span><span class="p">,</span>
                        <span class="p">]);</span>
                <span class="p">}),</span>
            <span class="nx">Column</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s1">&#39;messages.quote.due_date&#39;</span><span class="p">),</span> <span class="s1">&#39;due_date&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">sortable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">searchable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$row</span><span class="p">,</span> <span class="nx">Column</span> <span class="nv">$column</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;quotes.components.quote-due-date&#39;</span><span class="p">)</span>
                        <span class="o">-&gt;</span><span class="na">withValue</span><span class="p">([</span>
                            <span class="s1">&#39;due-date&#39;</span> <span class="o">=&gt;</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">due_date</span><span class="p">,</span>
                        <span class="p">]);</span>
                <span class="p">}),</span>
            <span class="nx">Column</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s1">&#39;messages.quote.amount&#39;</span><span class="p">),</span> <span class="s1">&#39;final_amount&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">sortable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">searchable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;quotes.components.amount&#39;</span><span class="p">),</span>
            <span class="nx">Column</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s1">&#39;messages.common.status&#39;</span><span class="p">),</span> <span class="s1">&#39;status&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">searchable</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;quotes.components.quote-status&#39;</span><span class="p">),</span>
            <span class="nx">Column</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nx">__</span><span class="p">(</span><span class="s1">&#39;messages.common.action&#39;</span><span class="p">),</span> <span class="s1">&#39;id&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;livewire.quote-action-button&#39;</span><span class="p">),</span>
        <span class="p">];</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @return Builder</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">builder</span><span class="p">()</span><span class="o">:</span> <span class="nx">Builder</span>
    <span class="p">{</span>
        <span class="nv">$query</span> <span class="o">=</span> <span class="nx">Quote</span><span class="o">::</span><span class="na">with</span><span class="p">([</span><span class="s1">&#39;client.user.media&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">select</span><span class="p">(</span><span class="s1">&#39;quotes.*&#39;</span><span class="p">);</span>

        <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">when</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">status</span> <span class="o">!=</span> <span class="nx">Quote</span><span class="o">::</span><span class="na">STATUS_ALL</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$query</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;quotes.status&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">status</span><span class="p">);</span>
        <span class="p">});</span>

        <span class="k">return</span> <span class="nv">$query</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @param $status</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">changeQuoteStatusFilter</span><span class="p">(</span><span class="nv">$status</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">status</span> <span class="o">=</span> <span class="nv">$status</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setBuilder</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">builder</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>This PHP code defines a class called "QuoteTable" that is part of a Laravel Livewire component. Here's an explanation of what this code does:</p>
<ol>
<li>
<p>Namespace and Use Statements:</p>
</li>
<li>
<p>The code specifies the namespace for this class within the "App\Http\Livewire" namespace.</p>
</li>
<li>
<p>It imports the necessary classes and dependencies like "Quote" model, "Builder," and "Column" from various Laravel packages.</p>
</li>
<li>
<p>Class Definition:</p>
</li>
<li>
<p>The "QuoteTable" class extends another class called "LivewireTableComponent," indicating that it's a custom Livewire component for displaying a table of quotes.</p>
</li>
<li>
<p>Property Definitions:</p>
</li>
<li>
<p>The class defines several properties:</p>
<ul>
<li><code>$model</code>: Specifies the Eloquent model class to use for retrieving data, in this case, the "Quote" model.</li>
<li><code>$tableName</code>: Sets the name for the table (presumably in the database) as 'quotes.'</li>
<li><code>$showButtonOnHeader</code> and <code>$buttonComponent</code>: Determine whether to display a button in the table header and the associated button component.</li>
<li><code>$showFilterOnHeader</code> and <code>$filterComponent</code>: Indicate whether to display a filter input in the table header and the associated filter component.</li>
<li><code>$listeners</code>: Specifies the Livewire listeners that this component responds to.</li>
<li><code>$status</code>: Represents the current status filter for the quotes.</li>
</ul>
</li>
<li>
<p>Protected Property Definitions:</p>
</li>
<li>
<p><code>$queryString</code>: Defines the query string parameters to include in the URL.</p>
</li>
<li>
<p>Public Methods:</p>
</li>
<li><code>configure()</code>: Configures various aspects of the table, such as primary key, default sorting, and query string handling.</li>
<li><code>columns()</code>: Defines an array of table columns, each column represented by a "Column" instance. These columns specify the data to display, whether they are sortable, searchable, and how to format the data.</li>
<li><code>builder()</code>: Creates a query builder instance for fetching data from the "Quote" model's database table. It includes conditions based on the "status" filter.</li>
<li><code>changeQuoteStatusFilter($status)</code>: Updates the "status" filter property when a Livewire event is triggered, and sets the builder to include the new filter criteria.</li>
</ol>
<h3 id="list-of-quotes">List of Quotes</h3>
<p>The list of quotes view is located in : <strong>resources\views\quotes\index.blade.php</strong>.</p>
<div class="highlight"><pre><span></span><code><span class="x">@extends(&#39;layouts.app&#39;)</span>
<span class="x">@section(&#39;title&#39;)</span>
<span class="x">    {{__(&#39;messages.quotes&#39;)}}</span>
<span class="x">@endsection</span>
<span class="x">@section(&#39;content&#39;)</span>
<span class="x">&lt;div class=&quot;container-fluid&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;d-flex flex-column &quot;&gt;</span>
<span class="x">            @include(&#39;flash::message&#39;)</span>
<span class="x">            &lt;livewire:quote-table/&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">    @include(&#39;quotes.templates.templates&#39;)</span>
<span class="x">    {{ Form::hidden(&#39;currency&#39;, getCurrencySymbol(),[&#39;id&#39; =&gt; &#39;currency&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;status&#39;,  $status,[&#39;id&#39; =&gt; &#39;status&#39;]) }}</span>
<span class="x">@endsection</span>
</code></pre></div>
<p>This Blade template file, named "index.blade.php," is used in a Laravel application to define the content and layout for a particular page. Here's an explanation of what this code does:</p>
<ol>
<li>
<p>Extends Layout:</p>
</li>
<li>
<p>The template extends the "layouts.app" layout, indicating that it should inherit the structure and content defined in the "layouts.app" Blade layout file.</p>
</li>
<li>
<p>Section: Title</p>
</li>
<li>
<p>Sets the page's title to the translated string "messages.quotes" using the <code>@section</code> directive. The actual translation depends on the localization settings of the application.</p>
</li>
<li>
<p>Section: Content</p>
</li>
<li>
<p>Defines the main content section of the page using the <code>@section</code> directive.</p>
</li>
<li>
<p>Encloses the content in a <code>&lt;div&gt;</code> element with the class "container-fluid," which is often used for creating a responsive container for page content.</p>
</li>
<li>
<p>Flash Messages:</p>
</li>
<li>
<p>Includes a partial view that displays flash messages, typically used for showing temporary notifications or alerts. The <code>@include</code> directive is used to include the view named "flash::message."</p>
</li>
<li>
<p>Livewire Component:</p>
</li>
<li>
<p>Embeds a Livewire component named "quote-table" using the <code>livewire:quote-table</code> directive. This component is responsible for displaying a table of quotes on the page.</p>
</li>
<li>
<p>Additional Includes:</p>
</li>
<li>
<p>Includes another Blade view named "quotes.templates.templates." This inclusion load additional templates.</p>
</li>
<li>
<p>Hidden Form Fields:</p>
</li>
<li>Adds two hidden form fields using Laravel's <code>Form::hidden</code> method.</li>
<li>The first hidden field has the name "currency" and its value is set to the result of the "getCurrencySymbol()" function. The field also has an "id" attribute set to "currency."</li>
<li>The second hidden field has the name "status," and its value is set to the value of the "$status" variable. This field also has an "id" attribute set to "status."
     T</li>
</ol>
<h3 id="new-quote">New quote</h3>
<p>The view of the 'New Quote' located in <strong>resources&gt;views&gt;quotes&gt;create.blade.php</strong>.</p>
<div class="highlight"><pre><span></span><code><span class="x">@extends(&#39;layouts.app&#39;)</span>
<span class="x">@section(&#39;title&#39;)</span>
<span class="x">    {{ __(&#39;messages.quote.new_quote&#39;) }}</span>
<span class="x">@endsection</span>
<span class="x">@section(&#39;header_toolbar&#39;)</span>
<span class="x">    &lt;div class=&quot;container-fluid&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;d-flex align-items-center justify-content-between mb-5&quot;&gt;</span>
<span class="x">            &lt;h1 class=&quot;mb-0&quot;&gt;@yield(&#39;title&#39;)&lt;/h1&gt;</span>
<span class="x">            &lt;div class=&quot;text-end&quot;&gt;</span>
<span class="x">                &lt;a class=&quot;btn btn-outline-primary float-end&quot;</span>
<span class="x">                    href=&quot;{{ url()-&gt;previous() }}&quot;&gt;{{ __(&#39;messages.common.back&#39;) }}&lt;/a&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">@endsection</span>
<span class="x">@section(&#39;content&#39;)</span>
<span class="x">    &lt;div class=&quot;container-fluid&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;d-flex flex-column&quot;&gt;</span>
<span class="x">            &lt;div class=&quot;row&quot;&gt;</span>
<span class="x">                &lt;div class=&quot;col-12&quot;&gt;</span>
<span class="x">                    @include(&#39;layouts.errors&#39;)</span>
<span class="x">                    &lt;div class=&quot;alert alert-danger display-none hide&quot; id=&quot;validationErrorsBox&quot;&gt;&lt;/div&gt;</span>
<span class="x">                &lt;/div&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">            &lt;div class=&quot;card&quot;&gt;</span>
<span class="x">                &lt;div class=&quot;card-body&quot;&gt;</span>
<span class="x">                    {{ Form::open([&#39;route&#39; =&gt; &#39;quotes.store&#39;, &#39;id&#39; =&gt; &#39;quoteForm&#39;, &#39;name&#39; =&gt; &#39;quoteForm&#39;]) }}</span>
<span class="x">                    @include(&#39;quotes.fields&#39;)</span>
<span class="x">                    {{ Form::close() }}</span>
<span class="x">                &lt;/div&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">    @include(&#39;quotes.templates.templates&#39;)</span>
<span class="x">    {{ Form::hidden(&#39;clients&#39;,json_encode($clients, true),[&#39;id&#39; =&gt; &#39;clients&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;products&#39;,json_encode($associateProducts, true),[&#39;id&#39; =&gt; &#39;products&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;quote_note&#39;,isset($quote-&gt;note) ,[&#39;id&#39; =&gt; &#39;quoteNote&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;quote_term&#39;,isset($quote-&gt;term) ,[&#39;id&#39; =&gt; &#39;quoteTerm&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;quote_recurring&#39;,isset($quote-&gt;recurring) ,[&#39;id&#39; =&gt; &#39;quoteRecurring&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;thousand_separator&#39;,getSettingValue(&#39;thousand_separator&#39;) ,[&#39;id&#39; =&gt; &#39;thousandSeparator&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;decimal_separator&#39;,isset($quote-&gt;recurring) ,[&#39;id&#39; =&gt; &#39;decimalSeparator&#39;]) }}</span>

<span class="x">@endsection</span>
</code></pre></div>
<p>This Blade template, used for creating a new quote in our Laravel-based web application, defines the layout and content for the "create quote" page. Let's break down what each section of the code does:</p>
<ol>
<li>
<p>Extends Layout:</p>
</li>
<li>
<p>The template extends the "layouts.app" layout, inheriting its structure and content.</p>
</li>
<li>
<p>Section: Title</p>
</li>
<li>
<p>Sets the page title to the translated string "messages.quote.new_quote." The actual translation will depend on the language settings of the application.</p>
</li>
<li>
<p>Section: Header Toolbar</p>
</li>
<li>
<p>Defines a container with the class "container-fluid" for the page header and toolbar.</p>
</li>
<li>
<p>Within this container, it creates a flexible header with a title (the title is dynamically obtained from the "title" section) and a "Back" button. The button links to the previous page using <code>url()-&gt;previous()</code>. The button's text is translated using the "messages.common.back" key.</p>
</li>
<li>
<p>Section: Content</p>
</li>
<li>
<p>Defines the main content section of the page.</p>
</li>
<li>Inside a container, it includes a section for displaying validation errors (if any) using <code>@include('layouts.errors')</code>. Additionally, it sets up a hidden alert element with the ID "validationErrorsBox."</li>
<li>A card element is used to enclose the form for creating a new quote.</li>
<li>Within the card's body, it opens a form using <code>Form::open</code>, specifying the form's route as 'quotes.store' and setting various attributes like 'id' and 'name' for the form.</li>
<li>It includes a Blade view named 'quotes.fields,' presumably for rendering form fields related to creating a quote.</li>
<li>
<p>The form is closed using <code>{{ Form::close() }}</code>.</p>
</li>
<li>
<p>Additional Includes</p>
</li>
<li>Includes another Blade view named 'quotes.templates.templates.' This inclusion might load additional templates or content specific to the "quotes" section of the application.</li>
<li>Defines several hidden form fields using <code>Form::hidden</code>, each with a specific purpose:<ul>
<li>'clients' and 'products' are populated with JSON-encoded data from the '<span class="arithmatex">\(clients' and '\)</span>associateProducts' variables, respectively.</li>
<li>'quote_note,' 'quote_term,' and 'quote_recurring' are populated based on the presence of corresponding data in the '$quote' variable.</li>
<li>'thousand_separator' and 'decimal_separator' are populated with values retrieved from application settings.</li>
</ul>
</li>
</ol>
<p>In summary, this Blade template sets up the layout and content for the "create quote" page. It includes a header with a title and a "Back" button, a form for creating a new quote, and hidden form fields with various data for use in the form or elsewhere in the page. The template also includes error handling for form validation errors.</p>
<h3 id="edit-quote">Edit quote</h3>
<p>The view of the 'Edit quote' located in <strong>resources&gt;views&gt;quotes&gt;edit.blade.php</strong>.</p>
<div class="highlight"><pre><span></span><code><span class="x">@extends(&#39;layouts.app&#39;)</span>
<span class="x">@section(&#39;title&#39;)</span>
<span class="x">    {{ __(&#39;messages.quote.edit_quote&#39;) }}</span>
<span class="x">@endsection</span>
<span class="x">@section(&#39;header_toolbar&#39;)</span>
<span class="x">@endsection</span>
<span class="x">@section(&#39;content&#39;)</span>
<span class="x">    &lt;div class=&quot;container-fluid&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;d-flex flex-column&quot;&gt;</span>
<span class="x">            &lt;div class=&quot;col-12&quot;&gt;</span>
<span class="x">                &lt;div class=&quot;d-flex justify-content-between align-items-end mb-5&quot;&gt;</span>
<span class="x">                    &lt;h1&gt;@yield(&#39;title&#39;)&lt;/h1&gt;</span>
<span class="x">                    &lt;a class=&quot;btn btn-outline-primary float-end&quot;</span>
<span class="x">                       href=&quot;{{ url()-&gt;previous() }}&quot;&gt;{{ __(&#39;messages.common.back&#39;) }}&lt;/a&gt;</span>
<span class="x">                &lt;/div&gt;</span>
<span class="x">                &lt;div class=&quot;col-12&quot;&gt;</span>
<span class="x">                    @include(&#39;layouts.errors&#39;)</span>
<span class="x">                &lt;/div&gt;</span>
<span class="x">                &lt;div class=&quot;card&quot;&gt;</span>
<span class="x">                    &lt;div class=&quot;card-body&quot;&gt;</span>
<span class="x">                        {{ Form::model($quote, [&#39;route&#39; =&gt; [&#39;quotes.update&#39;, $quote-&gt;id], &#39;id&#39; =&gt; &#39;quoteEditForm&#39;]) }}</span>
<span class="x">                        @include(&#39;quotes.edit_fields&#39;)</span>
<span class="x">                        {{ Form::close() }}</span>
<span class="x">                    &lt;/div&gt;</span>
<span class="x">                &lt;/div&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">    @include(&#39;quotes.templates.templates&#39;)</span>
<span class="x">    {{ Form::hidden(&#39;quote_update_url&#39;,route(&#39;quotes.update&#39;, [&#39;quote&#39; =&gt; $quote-&gt;id]),[&#39;id&#39; =&gt; &#39;quoteUpdateUrl&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;quote_url&#39;,route(&#39;quotes.index&#39;),[&#39;id&#39; =&gt; &#39;quoteUrl&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;quote_id&#39;,$quote-&gt;id,[&#39;id&#39; =&gt; &#39;quoteId&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;clients&#39;,json_encode($clients, true),[&#39;id&#39; =&gt; &#39;clients&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;products&#39;,json_encode($associateProducts, true),[&#39;id&#39; =&gt; &#39;products&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;unique_id&#39;,$quote-&gt;quoteItems-&gt;count() + 1 ,[&#39;id&#39; =&gt; &#39;uniqueId&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;quote_note&#39;,isset($quote-&gt;note) ? true : false ,[&#39;id&#39; =&gt; &#39;quoteNoteData&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;quote_term&#39;,isset($quote-&gt;term) ? true : false ,[&#39;id&#39; =&gt; &#39;quoteTermData&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;quote_recurring&#39;,isset($quote-&gt;recurring) ? true : false ,[&#39;id&#39; =&gt; &#39;invoiceRecurring&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;thousand_separator&#39;,getSettingValue(&#39;thousand_separator&#39;) ,[&#39;id&#39; =&gt; &#39;thousandSeparator&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;decimal_separator&#39;,getSettingValue(&#39;decimal_separator&#39;) ,[&#39;id&#39; =&gt; &#39;decimalSeparator&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;edit_date&#39;,$quote-&gt;quote_date ,[&#39;id&#39; =&gt; &#39;editQuoteDateAdmin&#39;]) }}</span>
<span class="x">    {{ Form::hidden(&#39;edit_due_date&#39;,$quote-&gt;due_date ,[&#39;id&#39; =&gt; &#39;editQuoteDueDate&#39;]) }}</span>
<span class="x">@endsection</span>
</code></pre></div>
<p>This Blade template, is used for editing an existing quote in our application, defines the layout and content for the "edit quote" page. Let's break down what each section of the code does:</p>
<ol>
<li>
<p>Extends Layout:</p>
</li>
<li>
<p>The template extends the "layouts.app" layout, inheriting its structure and content.</p>
</li>
<li>
<p>Section: Title</p>
</li>
<li>
<p>Sets the page title to the translated string "messages.quote.edit_quote." The actual translation will depend on the localization settings of the application.</p>
</li>
<li>
<p>Section: Header Toolbar (Empty)</p>
</li>
<li>
<p>This section is empty, indicating that no additional content or elements are included in the page's header toolbar. It leaves room for customization if needed.</p>
</li>
<li>
<p>Section: Content</p>
</li>
<li>
<p>Defines the main content section of the page within a container.</p>
</li>
<li>
<p>Inside a container, it includes a section for displaying the page title and a "Back" button.</p>
<ul>
<li>The page title is obtained from the "title" section (i.e., "messages.quote.edit_quote").</li>
<li>The "Back" button links to the previous page using <code>url()-&gt;previous()</code> and displays the translated text "messages.common.back."</li>
</ul>
</li>
<li>
<p>Error Handling</p>
</li>
<li>
<p>Includes a partial view named 'layouts.errors,' presumably for displaying validation errors if they occur during form submission.</p>
</li>
<li>
<p>Form for Editing Quote</p>
</li>
<li>
<p>Encloses a form using <code>Form::model</code> to populate it with data from the "$quote" variable. The form's route for submission is set to 'quotes.update,' and the "id" attribute is set to 'quoteEditForm.'</p>
</li>
<li>It includes a Blade view named 'quotes.edit_fields,' for rendering form fields related to editing a quote.</li>
<li>
<p>The form is closed using <code>{{ Form::close() }}</code>.</p>
</li>
<li>
<p>Additional Includes</p>
</li>
<li>Includes another Blade view named 'quotes.templates.templates.' This inclusion load additional templates.</li>
<li>Defines several hidden form fields with various purposes, including storing data related to the quote being edited, settings, and other information. For example:<ul>
<li>'quote_update_url' and 'quote_url' store URLs for updating and viewing quotes.</li>
<li>'quote_id' stores the ID of the quote.</li>
<li>'unique_id' is used for generating unique identifiers.</li>
<li>'quote_note,' 'quote_term,' and 'quote_recurring' store boolean values based on the presence of corresponding data in the "$quote" variable.</li>
<li>'thousand_separator' and 'decimal_separator' store settings values for formatting numbers.</li>
<li>'edit_date' and 'edit_due_date' store date values related to the quote.</li>
</ul>
</li>
</ol>
<p>In summary, this Blade template sets up the layout and content for the "edit quote" page. It includes a form for editing quote details, handles error display, and includes hidden form fields to store various data related to the quote and application settings. The template allows for flexibility and customization in handling quote editing operations.
<strong>The edit_fields product view:</strong></p>
<div class="highlight"><pre><span></span><code><span class="x">&lt;div class=&quot;row&quot;&gt;</span>
<span class="x">    &lt;div class=&quot;col-lg-4 col-sm-12 mb-5&quot;&gt;</span>
<span class="x">        {{ Form::label(&#39;client_id&#39;, __(&#39;messages.quote.client&#39;).(&#39;:&#39;),[&#39;class&#39; =&gt; &#39;form-label required fs-6 mb-3&#39;]) }}</span>
<span class="x">        {{ Form::select(&#39;client_id&#39;, $clients, $client_id ?? null, [&#39;class&#39; =&gt; &#39;form-select io-select2&#39;, &#39;id&#39; =&gt; &#39;client_id&#39;, &#39;placeholder&#39; =&gt;__(&#39;messages.quote.client&#39;),&#39;required&#39;, &#39;data-control&#39; =&gt;&#39;select2&#39;]) }}</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">    &lt;div class=&quot;col-lg-4 col-sm-12 mb-5&quot;&gt;</span>
<span class="x">        {{ Form::label(&#39;quote_id&#39;, __(&#39;messages.quote.quote&#39;).(&#39; #&#39;),[&#39;class&#39; =&gt; &#39;form-label fs-6 mb-3&#39;]) }}</span>
<span class="x">        &lt;span class=&quot;text-gray-500&quot;&gt;{{ $quote-&gt;quote_id }}&lt;/span&gt;</span>
<span class="x">        &lt;input type=&quot;hidden&quot; id=&quot;quoteId&quot; value=&quot;{{ $quote-&gt;quote_id }}&quot; name=&quot;quote_id&quot;/&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">    &lt;div class=&quot;col-lg-4 col-sm-12&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;mb-5&quot;&gt;</span>
<span class="x">            {{ Form::label(&#39;status&#39;, __(&#39;messages.common.status&#39;).(&#39;:&#39;), [&#39;class&#39; =&gt; &#39;form-label required mb-3&#39;]) }}</span>
<span class="x">            {{ Form::select(&#39;status&#39;, $statusArr, isset($quote) ? $quote-&gt;status : null, [&#39;class&#39; =&gt; &#39;form-select&#39;, &#39;id&#39; =&gt; &#39;status&#39;,&#39;required&#39;,&#39;data-control&#39; =&gt;&#39;select2&#39;]) }}</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">    &lt;div class=&quot;col-lg-4 col-sm-12 mb-5&quot;&gt;</span>
<span class="x">        {{ Form::label(&#39;quote_date&#39;, __(&#39;messages.quote.quote_date&#39;).(&#39;:&#39;),[&#39;class&#39; =&gt; &#39;form-label required mb-3&#39;]) }}</span>
<span class="x">        {{ Form::text(&#39;quote_date&#39;,null ,[&#39;class&#39; =&gt; &#39;form-select&#39;, &#39;id&#39; =&gt; &#39;editQuoteDate&#39;, &#39;autocomplete&#39; =&gt; &#39;off&#39;,&#39;required&#39;]) }}</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">    &lt;div class=&quot;mb-5 col-lg-4 col-sm-12&quot;&gt;</span>
<span class="x">        {{ Form::label(&#39;due_date&#39;, __(&#39;messages.quote.due_date&#39;).(&#39;:&#39;),[&#39;class&#39; =&gt; &#39;form-label required mb-3&#39;]) }}</span>
<span class="x">        {{ Form::text(&#39;due_date&#39;, null, [&#39;class&#39; =&gt; &#39;form-select&#39;, &#39;id&#39; =&gt; &#39;editQuoteDueDate&#39;, &#39;autocomplete&#39; =&gt; &#39;off&#39;,&#39;required&#39;]) }}</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">    &lt;div class=&quot;mb-5 col-lg-4 col-sm-12&quot;&gt;</span>
<span class="x">        {{ Form::label(&#39;templateId&#39;, __(&#39;messages.setting.invoice_template&#39;).(&#39;:&#39;),[&#39;class&#39; =&gt; &#39;form-label mb-3&#39;]) }}</span>
<span class="x">        {{ Form::select(&#39;template_id&#39;, $template,isset($quote) ? $quote-&gt;template_id:null, [&#39;class&#39; =&gt; &#39;form-select&#39;, &#39;id&#39; =&gt; &#39;templateId&#39;,&#39;required&#39;, &#39;data-control&#39; =&gt;&#39;select2&#39;]) }}</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">    &lt;div class=&quot;mt-5&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;col-12 text-end mb-lg-10 mb-6&quot;&gt;</span>
<span class="x">            &lt;button type=&quot;button&quot; class=&quot;btn btn-primary text-start&quot;</span>
<span class="x">                    id=&quot;addQuoteItem&quot;&gt; {{ __(&#39;messages.invoice.add&#39;) }}&lt;/button&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">        &lt;div class=&quot;table-responsive&quot;&gt;</span>
<span class="x">            &lt;table class=&quot;table table-striped box-shadow-none mt-4&quot; id=&quot;billTbl&quot;&gt;</span>
<span class="x">                &lt;thead&gt;</span>
<span class="x">                &lt;tr class=&quot;border-bottom fs-7 fw-bolder text-gray-700 text-uppercase&quot;&gt;</span>
<span class="x">                    &lt;th scope=&quot;col&quot;&gt;#&lt;/th&gt;</span>
<span class="x">                    &lt;th scope=&quot;col&quot; class=&quot;required&quot;&gt;{{ __(&#39;messages.product.product&#39;) }}&lt;/th&gt;</span>
<span class="x">                    &lt;th scope=&quot;col&quot; class=&quot;required&quot;&gt;{{ __(&#39;messages.invoice.qty&#39;) }}&lt;/th&gt;</span>
<span class="x">                    &lt;th scope=&quot;col&quot; class=&quot;required&quot;&gt;{{ __(&#39;messages.product.unit_price&#39;) }}&lt;/th&gt;</span>
<span class="x">                    &lt;th scope=&quot;col&quot; class=&quot;required&quot;&gt;{{ __(&#39;messages.invoice.amount&#39;) }}&lt;/th&gt;</span>
<span class="x">                    &lt;th scope=&quot;col&quot; class=&quot;text-end&quot;&gt;{{ __(&#39;messages.common.action&#39;) }}&lt;/th&gt;</span>
<span class="x">                &lt;/tr&gt;</span>
<span class="x">                &lt;/thead&gt;</span>
<span class="x">                &lt;tbody class=&quot;quote-item-container&quot;&gt;</span>
<span class="x">                @php</span>
<span class="x">                    $i = 1;</span>
<span class="x">                @endphp</span>
<span class="x">                @foreach($quote-&gt;quoteItems as $quoteItem)</span>
<span class="x">                    &lt;tr class=&quot;tax-tr&quot;&gt;</span>
<span class="x">                        &lt;td class=&quot;text-center item-number align-center&quot;&gt;{{ $i++ }}&lt;/td&gt;</span>
<span class="x">                        &lt;td class=&quot;table__item-desc w-25&quot;&gt;</span>
<span class="x">                            {{ Form::select(&#39;product_id[]&#39;, $products, isset($quoteItem-&gt;product_id)?$quoteItem-&gt;product_id:$quoteItem-&gt;product_name??[], [&#39;class&#39; =&gt; &#39;form-select productId product-quote io-select2&#39;, &#39;required&#39;, &#39;placeholder&#39;=&gt;&#39;Select Product or Enter free text&#39;, &#39;data-control&#39; =&gt; &#39;select2&#39;]) }}</span>
<span class="x">                            {{ Form::hidden(&#39;id[]&#39;, $quoteItem-&gt;id) }}</span>
<span class="x">                        &lt;/td&gt;</span>
<span class="x">                        &lt;td class=&quot;table__qty&quot;&gt;</span>
<span class="x">                            {{ Form::number(&#39;quantity[]&#39;, $quoteItem-&gt;quantity, [&#39;class&#39; =&gt; &#39;form-control qty-quote&#39; ,&#39;id&#39;=&gt;&#39;qty&#39;,&#39;required&#39;, &#39;type&#39; =&gt; &#39;number&#39;, &quot;min&quot; =&gt; 1,&#39;oninput&#39;=&gt;&quot;validity.valid||(value=value.replace(/\D+/g, &#39;&#39;))&quot;]) }}</span>
<span class="x">                        &lt;/td&gt;</span>
<span class="x">                        &lt;td&gt;</span>
<span class="x">                            {{ Form::number(&#39;price[]&#39;, $quoteItem-&gt;price, [&#39;class&#39; =&gt; &#39;form-control price-input price-quote&#39;,&#39;oninput&#39;=&gt;&quot;validity.valid||(value=value.replace(/[e\+\-]/gi,&#39;&#39;))&quot;,&#39;min&#39;=&gt;&#39;0&#39;,&#39;step&#39;=&gt;&#39;.01&#39;,&#39;required&#39;,&#39;onKeyPress&#39;=&gt;&#39;if(this.value.length==8) return false;&#39;]) }}</span>
<span class="x">                        &lt;/td&gt;</span>
<span class="x">                        &lt;td class=&quot;quote-item-total pt-8 text-nowrap&quot;&gt;</span>
<span class="x">                            {{ number_format($quoteItem-&gt;total, 2) }}</span>
<span class="x">                        &lt;/td&gt;</span>
<span class="x">                        &lt;td class=&quot;text-end&quot;&gt;</span>
<span class="x">                            &lt;button type=&quot;button&quot; title=&quot;Delete&quot;</span>
<span class="x">                                    class=&quot;btn btn-icon fs-3 text-danger btn-active-color-danger delete-quote-item&quot;&gt;</span>
<span class="x">                                &lt;i class=&quot;fa-solid fa-trash&quot;&gt;&lt;/i&gt;</span>
<span class="x">                            &lt;/button&gt;</span>
<span class="x">                        &lt;/td&gt;</span>
<span class="x">                    &lt;/tr&gt;</span>
<span class="x">                @endforeach</span>
<span class="x">                &lt;/tbody&gt;</span>
<span class="x">            &lt;/table&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">        &lt;div class=&quot;row&quot;&gt;</span>
<span class="x">            &lt;div class=&quot;col-lg-7 col-sm-12 mt-2 mt-lg-0 align-right-for-full-screen&quot;&gt;</span>
<span class="x">                &lt;div class=&quot;mb-2 col-xl-6 col-lg-10 col-sm-12 float-right&quot;&gt;</span>
<span class="x">                    {{ Form::label(&#39;discount&#39;, __(&#39;messages.invoice.discount&#39;).(&#39;:&#39;), [&#39;class&#39; =&gt; &#39;form-label mb-1&#39;]) }}</span>
<span class="x">                    &lt;div class=&quot;input-group&quot;&gt;</span>
<span class="x">                        {{ Form::number(&#39;discount&#39;,  isset($quote) ? $quote-&gt;discount : 0, [&#39;id&#39;=&gt;&#39;discount&#39;,&#39;class&#39; =&gt; &#39;form-control &#39;,&#39;oninput&#39;=&gt;&quot;validity.valid||(value=value.replace(/[e\+\-]/gi,&#39;&#39;))&quot;,&#39;min&#39;=&gt;&#39;0&#39;,&#39;value&#39;=&gt;&#39;0&#39;,&#39;step&#39;=&gt;&#39;.01&#39;,&#39;pattern&#39;=&gt;&quot;^\d*(\.\d{0,2})?$&quot;]) }}</span>
<span class="x">                        &lt;div class=&quot;input-group-append&quot; style=&quot;width: 210px !important;&quot;&gt;</span>
<span class="x">                            {{ Form::select(&#39;discount_type&#39;, $discount_type, isset($quote) ? $quote-&gt;discount_type : 0, [&#39;class&#39; =&gt;&#39;form-select&#39;, &#39;id&#39; =&gt; &#39;discountType&#39;, &#39;data-control&#39; =&gt;&#39;select2&#39;]) }}</span>
<span class="x">                        &lt;/div&gt;</span>
<span class="x">                    &lt;/div&gt;</span>
<span class="x">                &lt;/div&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">            &lt;div class=&quot;col-xxl-3 col-lg-5 col-md-6 ms-md-auto mt-4 mb-lg-10 mb-6&quot;&gt;</span>
<span class="x">                &lt;div class=&quot;border-top&quot;&gt;</span>
<span class="x">                    &lt;table class=&quot;table table-borderless box-shadow-none mb-0 mt-5&quot;&gt;</span>
<span class="x">                        &lt;tbody&gt;</span>
<span class="x">                        &lt;tr&gt;</span>
<span class="x">                            &lt;td class=&quot;ps-0&quot;&gt;{{ __(&#39;messages.invoice.sub_total&#39;).(&#39;:&#39;) }}&lt;/td&gt;</span>
<span class="x">                            &lt;td class=&quot;text-gray-900 text-end pe-0&quot;&gt;</span>
<span class="x">                                &lt;span&gt;{{ getCurrencySymbol()  }}&lt;/span&gt; &lt;span id=&quot;quoteTotal&quot; class=&quot;price&quot;&gt;</span>
<span class="x">                                    {{ isset($quote) ? number_format($quote-&gt;amount,2) : 0 }}</span>
<span class="x">                            &lt;/span&gt;</span>
<span class="x">                            &lt;/td&gt;</span>
<span class="x">                        &lt;/tr&gt;</span>
<span class="x">                        &lt;tr&gt;</span>
<span class="x">                            &lt;td class=&quot;ps-0&quot;&gt;{{ __(&#39;messages.invoice.discount&#39;).(&#39;:&#39;) }}&lt;/td&gt;</span>
<span class="x">                            &lt;td class=&quot;text-gray-900 text-end pe-0&quot;&gt;</span>
<span class="x">                                &lt;span&gt;{{ getCurrencySymbol()  }}&lt;/span&gt; &lt;span id=&quot;quoteDiscountAmount&quot;&gt;</span>
<span class="x">                                @if(isset($quote) &amp;&amp; $quote-&gt;discount_type == \App\Models\Invoice::FIXED)</span>
<span class="x">                                        {{ $quote-&gt;discount ?? 0 }}</span>
<span class="x">                                    @else</span>
<span class="x">                                        {{ isset($quote) ? number_format($quote-&gt;amount * $quote-&gt;discount / 100,2) : 0 }}</span>
<span class="x">                                    @endif</span>
<span class="x">                            &lt;/span&gt;</span>
<span class="x">                            &lt;/td&gt;</span>
<span class="x">                        &lt;/tr&gt;</span>
<span class="x">                        &lt;tr&gt;</span>
<span class="x">                            &lt;td class=&quot;ps-0&quot;&gt;{{ __(&#39;messages.invoice.total&#39;).(&#39;:&#39;) }}&lt;/td&gt;</span>
<span class="x">                            &lt;td class=&quot;text-gray-900 text-end pe-0&quot;&gt;</span>
<span class="x">                                &lt;span&gt;{{ getCurrencySymbol() }}&lt;/span&gt; &lt;span id=&quot;quoteFinalAmount&quot;&gt;</span>
<span class="x">                                    {{ isset($quote) ? number_format($quote-&gt;amount - ($quote-&gt;amount * $quote-&gt;discount / 100),2) : 0 }}</span>
<span class="x">                                &lt;/span&gt;</span>
<span class="x">                            &lt;/td&gt;</span>
<span class="x">                        &lt;/tr&gt;</span>
<span class="x">                        &lt;/tbody&gt;</span>
<span class="x">                    &lt;/table&gt;</span>
<span class="x">                &lt;/div&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">        &lt;br&gt;</span>
<span class="x">        &lt;div class=&quot;row justify-content-left&quot;&gt;</span>
<span class="x">            &lt;div class=&quot;col-lg-12 col-md-12 col-sm-12 end justify-content-left mb-sm-0 mb-5&quot;&gt;</span>
<span class="x">                &lt;button type=&quot;button&quot; class=&quot;btn btn-primary note&quot; id=&quot;quoteAddNote&quot;&gt;</span>
<span class="x">                    &lt;i class=&quot;fas fa-plus&quot;&gt;&lt;/i&gt; {{ __(&#39;messages.invoice.add_note_term&#39;) }}</span>
<span class="x">                &lt;/button&gt;</span>
<span class="x">                &lt;button type=&quot;button&quot; class=&quot;btn btn-danger note&quot; id=&quot;quoteRemoveNote&quot;&gt;</span>
<span class="x">                    &lt;i class=&quot;fas fa-minus&quot;&gt;&lt;/i&gt; {{ __(&#39;messages.invoice.remove_note_term&#39;) }}</span>
<span class="x">                &lt;/button&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">            &lt;div class=&quot;col-lg-6 mb-0 mb-sm-5 mt-0 mt-sm-5&quot; id=&quot;quoteNoteAdd&quot;&gt;</span>
<span class="x">                {{ Form::label(&#39;note&#39;, __(&#39;messages.invoice.note&#39;).(&#39;:&#39;),[&#39;class&#39; =&gt; &#39;form-label fs-6 mb-3&#39;]) }}</span>
<span class="x">                {{ Form::textarea(&#39;note&#39;,isset($quote) ? $quote-&gt;note : null,[&#39;class&#39;=&gt;&#39;form-control&#39;,&#39;id&#39;=&gt;&#39;quoteNote&#39;,&#39;rows&#39;=&gt;&#39;5&#39;]) }}</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">            &lt;div class=&quot;col-lg-6 mt-5 mb-5&quot; id=&quot;quoteTermRemove&quot;&gt;</span>
<span class="x">                {{ Form::label(&#39;term&#39;, __(&#39;messages.invoice.terms&#39;).(&#39;:&#39;),[&#39;class&#39; =&gt; &#39;form-label fs-6 mb-3&#39;]) }}</span>
<span class="x">                {{ Form::textarea(&#39;term&#39;,isset($quote) ? $quote-&gt;term : null,[&#39;class&#39;=&gt;&#39;form-control&#39;,&#39;id&#39;=&gt;&#39;quoteTerm&#39;,&#39;rows&#39;=&gt;&#39;5&#39;]) }}</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">&lt;/div&gt;</span>
<span class="x">&lt;!-- Total Amount Field --&gt;</span>
<span class="x">{{ Form::hidden(&#39;amount&#39;, isset($quote) ? number_format($quote-&gt;amount - ($quote-&gt;amount * $quote-&gt;discount / 100),2) : 0, [&#39;class&#39; =&gt; &#39;form-control&#39;, &#39;id&#39; =&gt; &#39;quoteTotalAmount&#39;]) }}</span>
<span class="x">&lt;!-- Submit Field --&gt;</span>
<span class="x">&lt;div class=&quot;float-end&quot;&gt;</span>
<span class="x">    &lt;div class=&quot;form-group col-sm-12&quot;&gt;</span>
<span class="x">        &lt;button type=&quot;button&quot; name=&quot;save&quot; class=&quot;btn btn-primary mx-3&quot; id=&quot;editSaveQuote&quot; data-status=&quot;0&quot;</span>
<span class="x">                value=&quot;0&quot;&gt;{{ __(&#39;messages.common.save&#39;) }}</span>
<span class="x">        &lt;/button&gt;</span>
<span class="x">        &lt;a href=&quot;{{ route(&#39;invoices.index&#39;) }}&quot;</span>
<span class="x">           class=&quot;btn btn-secondary btn-active-light-primary&quot;&gt;{{ __(&#39;messages.common.cancel&#39;) }}&lt;/a&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">&lt;/div&gt;</span>
</code></pre></div>
<p>This HTML code represents a form used for editing quote details in our application. It contains various form fields and elements for updating quote information. Let's break down the structure and purpose of this code:</p>
<ol>
<li>
<p><strong>Row and Columns Structure:</strong></p>
</li>
<li>
<p>The form is organized within a Bootstrap-based grid system. It uses rows and columns to structure the content on the page.</p>
</li>
<li>
<p><strong>Client Selection (col-lg-4):</strong></p>
</li>
<li>
<p>A column with a label and a select input for choosing a client. The label includes the translation for "messages.quote.client."</p>
</li>
<li>A select input populated with client options from the <code>$clients</code> variable. It has a placeholder, 'Select Client,' and is required.</li>
<li>
<p>Another column for displaying the quote ID, followed by a hidden input storing the quote ID.</p>
</li>
<li>
<p><strong>Status Selection (col-lg-4):</strong></p>
</li>
<li>
<p>A column for selecting the quote status, with a label for "messages.common.status."</p>
</li>
<li>
<p>A select input populated with status options from the <code>$statusArr</code> variable.</p>
</li>
<li>
<p><strong>Date Inputs (col-lg-4):</strong></p>
</li>
<li>
<p>Two columns for selecting the quote date and due date, both labeled accordingly.</p>
</li>
<li>
<p>Text inputs for entering date values with 'autocomplete' attributes set to 'off' and marked as required.</p>
</li>
<li>
<p><strong>Template Selection (mb-5 col-lg-4):</strong></p>
</li>
<li>
<p>A column for selecting an invoice template, labeled as "messages.setting.invoice_template."</p>
</li>
<li>
<p>A select input populated with template options.</p>
</li>
<li>
<p><strong>Quote Items Table:</strong></p>
</li>
<li>
<p>A button for adding quote items.</p>
</li>
<li>A table for displaying quote items with columns for item number, product selection, quantity, unit price, total amount, and actions (delete button).</li>
<li>
<p>Rows are populated with data from the <code>$quote-&gt;quoteItems</code> variable, which presumably represents quote items. Loops through each quote item and displays its details in a row.</p>
</li>
<li>
<p><strong>Discount Input:</strong></p>
</li>
<li>
<p>An input for entering a discount value, along with a select input to choose the discount type (e.g., percentage or fixed).</p>
</li>
<li>
<p>Both inputs are contained within an input group.</p>
</li>
<li>
<p><strong>Summary Information:</strong></p>
</li>
<li>
<p>Displays sub-total, discount amount, and final total amount for the quote.</p>
</li>
<li>
<p>Values are populated dynamically based on the quote data and calculations.</p>
</li>
<li>
<p><strong>Note and Terms Textareas:</strong></p>
</li>
<li>
<p>Textareas for entering quote notes and terms.</p>
</li>
<li>
<p>Buttons for adding/removing note and terms are included.</p>
</li>
<li>
<p><strong>Hidden Fields:</strong></p>
<ul>
<li>Hidden input fields for storing various data, such as the total amount, client data, product data, and more.</li>
</ul>
</li>
<li>
<p><strong>Submit and Cancel Buttons:</strong></p>
<ul>
<li>Buttons for saving changes and canceling the editing process. The "editSaveQuote" button has a 'data-status' attribute that seems to be related to the quote's status.</li>
</ul>
</li>
</ol>
<p>Overall, this code represents a comprehensive form for editing quote details. It includes inputs for various quote attributes, a table for managing quote items, and fields for calculating and displaying summary information. The form is designed to provide a user-friendly interface for editing and updating quotes in the application.</p>
<h3 id="show-quote">Show Quote</h3>
<p>The view of the 'show quote' page located in <strong>ressources&gt;views&gt;quote&gt;show_fields.blade.php</strong>.</p>
<div class="highlight"><pre><span></span><code><span class="x">@php</span>
<span class="x">    $auth =  Auth::check();</span>
<span class="x">@endphp</span>
<span class="x">&lt;div&gt;</span>
<span class="x">    @if($auth &amp;&amp; $isPublicView)</span>
<span class="x">        &lt;div class=&quot;d-flex overflow-auto h-55px&quot;&gt;</span>
<span class="x">            &lt;ul class=&quot;nav nav-tabs mb-5 pb-1 overflow-auto flex-nowrap text-nowrap&quot;&gt;</span>
<span class="x">                &lt;li class=&quot;nav-item position-relative me-7 mb-3&quot; role=&quot;presentation&quot;&gt;</span>
<span class="x">                    &lt;button class=&quot;nav-link active p-0&quot; id=&quot;overview-tab&quot; data-bs-toggle=&quot;tab&quot;</span>
<span class="x">                            data-bs-target=&quot;#overview&quot;</span>
<span class="x">                            type=&quot;button&quot; role=&quot;tab&quot; aria-controls=&quot;overview&quot; aria-selected=&quot;true&quot;&gt;</span>
<span class="x">                        {{ __(&#39;messages.quote.overview&#39;) }}</span>
<span class="x">                    &lt;/button&gt;</span>
<span class="x">                &lt;/li&gt;</span>
<span class="x">                &lt;li class=&quot;nav-item position-relative me-7 mb-3&quot; role=&quot;presentation&quot;&gt;</span>
<span class="x">                    &lt;button class=&quot;nav-link p-0&quot; id=&quot;note_terms-tab&quot; data-bs-toggle=&quot;tab&quot; data-bs-target=&quot;#note_terms&quot;</span>
<span class="x">                            type=&quot;button&quot; role=&quot;tab&quot; aria-controls=&quot;note_terms&quot; aria-selected=&quot;false&quot;&gt;</span>
<span class="x">                        {{ __(&#39;messages.quote.note_terms&#39;) }}</span>
<span class="x">                    &lt;/button&gt;</span>
<span class="x">                &lt;/li&gt;</span>
<span class="x">            &lt;/ul&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    @endif</span>
<span class="x">    &lt;div class=&quot;tab-content&quot; id=&quot;myTabContent&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;tab-pane fade show active&quot; id=&quot;overview&quot; role=&quot;tabpanel&quot;&gt;</span>
<span class="x">            &lt;div class=&quot;card&quot;&gt;</span>
<span class="x">                &lt;div class=&quot;d-flex flex-column&quot;&gt;</span>
<span class="x">                    &lt;div class=&quot;card-body&quot;&gt;</span>
<span class="x">                        &lt;div class=&quot;row&quot;&gt;</span>
<span class="x">                            &lt;div class=&quot;col-xxl-9&quot;&gt;</span>
<span class="x">                                &lt;div class=&quot;row&quot;&gt;</span>
<span class="x">                                    &lt;div class=&quot;col-lg-4 col-md-6&quot;&gt;</span>
<span class="x">                                        &lt;div class=&quot;d-flex mb-md-10 mb-5&quot;&gt;</span>
<span class="x">                                            &lt;div class=&quot;image image-circle image-lg-small width-100px&quot;&gt;</span>
<span class="x">                                                &lt;img src=&quot;{{ getLogoUrl() }}&quot; alt=&quot;user&quot; class=&quot;object-contain&quot;&gt;</span>
<span class="x">                                            &lt;/div&gt;</span>
<span class="x">                                            &lt;h3 class=&quot;ps-7&quot;&gt;{{ __(&#39;messages.quote.quote&#39;) }}</span>
<span class="x">                                                #{{ $quote-&gt;quote_id }}</span>
<span class="x">                                            &lt;/h3&gt;</span>
<span class="x">                                        &lt;/div&gt;</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                    &lt;div class=&quot;col-lg-3 col-md-3 col-6&quot;&gt;</span>
<span class="x">                                        &lt;div class=&quot;d-flex flex-column mb-md-10 mb-5 mt-3 mt-md-0&quot;&gt;</span>
<span class="x">                                            &lt;label for=&quot;name&quot;</span>
<span class="x">                                                   class=&quot;pb-2 fs-4 text-gray-600&quot;&gt;{{ __(&#39;messages.quote.quote_date&#39;).&#39;:&#39; }}&lt;/label&gt;</span>
<span class="x">                                            &lt;span class=&quot;fs-4 text-gray-800&quot;&gt;{{ \Carbon\Carbon::parse($quote-&gt;quote_date)-&gt;translatedFormat(currentDateFormat()) }}&lt;/span&gt;</span>
<span class="x">                                        &lt;/div&gt;</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                    &lt;div class=&quot;col-lg-3 col-md-3 col-6&quot;&gt;</span>
<span class="x">                                        &lt;div class=&quot;d-flex flex-column mb-md-10 mb-5 mt-3 mt-md-0&quot;&gt;</span>
<span class="x">                                            &lt;label for=&quot;name&quot;</span>
<span class="x">                                                   class=&quot;pb-2 fs-4 text-gray-600&quot;&gt;{{ __(&#39;messages.quote.due_date&#39;).&#39;:&#39; }}&lt;/label&gt;</span>
<span class="x">                                            &lt;span class=&quot;fs-4 text-gray-800&quot;&gt;{{ \Carbon\Carbon::parse($quote-&gt;due_date)-&gt;translatedFormat(currentDateFormat()) }}&lt;/span&gt;</span>
<span class="x">                                        &lt;/div&gt;</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                    &lt;div class=&quot;col-md-2 col-6 mb-3 mb-sm-0&quot;&gt;</span>
<span class="x">                                        @if($isPublicView)</span>
<span class="x">                                            &lt;a target=&quot;_blank&quot;</span>
<span class="x">                                               href=&quot;{{ route(&#39;quotes.pdf&#39;,[&#39;quote&#39; =&gt; $quote-&gt;id]) }}&quot;</span>
<span class="x">                                               class=&quot;btn btn-sm btn-success text-white&quot;&gt;{{ __(&#39;messages.quote.print_quote&#39;) }}&lt;/a&gt;</span>
<span class="x">                                        @else</span>
<span class="x">                                            &lt;a target=&quot;_blank&quot;</span>
<span class="x">                                               href=&quot;{{ route(&#39;public-view-quote.pdf&#39;,[&#39;quote&#39; =&gt; $quote-&gt;quote_id]) }}&quot;</span>
<span class="x">                                               class=&quot;btn btn-sm btn-success text-white&quot;&gt;{{ __(&#39;messages.quote.print_quote&#39;) }}&lt;/a&gt;</span>
<span class="x">                                        @endif</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                    &lt;div class=&quot;col-lg-5 col-md-6&quot;&gt;</span>
<span class="x">                                        &lt;div class=&quot;d-flex flex-column mb-md-10 mb-5&quot;&gt;</span>
<span class="x">                                            &lt;label for=&quot;name&quot;</span>
<span class="x">                                                   class=&quot;pb-2 fs-4 text-gray-600&quot;&gt;{{ __(&#39;messages.quote.issue_for&#39;).&#39;:&#39; }}&lt;/label&gt;</span>
<span class="x">                                            &lt;span class=&quot;fs-4 text-gray-800 mb-3&quot;&gt;{{ $quote-&gt;client-&gt;user-&gt;full_name }}&lt;/span&gt;</span>
<span class="x">                                            &lt;p class=&quot;text-gray-700 fs-4 mb-0&quot;&gt;</span>
<span class="x">                                                @if(isset($quote-&gt;client-&gt;address) &amp;&amp; !empty($quote-&gt;client-&gt;address))</span>
<span class="x">                                                    {{ ucfirst($quote-&gt;client-&gt;address) }}</span>
<span class="x">                                                @else</span>
<span class="x">                                                    {{ &quot;N/A&quot; }}</span>
<span class="x">                                                @endif</span>
<span class="x">                                            &lt;/p&gt;</span>
<span class="x">                                        &lt;/div&gt;</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                    &lt;div class=&quot;col-md-2 col-md-6&quot;&gt;</span>
<span class="x">                                        &lt;div class=&quot;d-flex flex-column mb-md-10 mb-5&quot;&gt;</span>
<span class="x">                                            &lt;label for=&quot;name&quot;</span>
<span class="x">                                                   class=&quot;pb-2 fs-4 text-gray-600&quot;&gt;{{ __(&#39;messages.quote.issue_by&#39;).&#39;:&#39; }}&lt;/label&gt;</span>
<span class="x">                                            &lt;span class=&quot;fs-4 text-gray-800 mb-3&quot;&gt;{{ getAppName() }}&lt;/span&gt;</span>
<span class="x">                                            &lt;p class=&quot;text-gray-700 fs-4 mb-0&quot;&gt;</span>
<span class="x">                                                {!! getSettingValue(&#39;company_address&#39;) !!}&lt;/p&gt;</span>
<span class="x">                                        &lt;/div&gt;</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                    &lt;div class=&quot;col-12 table-responsive&quot;&gt;</span>
<span class="x">                                        &lt;table class=&quot;table table-striped box-shadow-none mt-4&quot;&gt;</span>
<span class="x">                                            &lt;thead&gt;</span>
<span class="x">                                            &lt;tr&gt;</span>
<span class="x">                                                &lt;th scope=&quot;col&quot;&gt;{{ __(&#39;messages.product.product&#39;) }}&lt;/th&gt;</span>
<span class="x">                                                &lt;th scope=&quot;col&quot;&gt;{{ __(&#39;messages.quote.qty&#39;) }}&lt;/th&gt;</span>
<span class="x">                                                &lt;th scope=&quot;col&quot; class=&quot;text-end&quot;&gt;{{ __(&#39;messages.quote.price&#39;) }}&lt;/th&gt;</span>
<span class="x">                                                &lt;th scope=&quot;col&quot; class=&quot;text-end&quot;&gt;{{ __(&#39;messages.quote.amount&#39;) }}&lt;/th&gt;</span>
<span class="x">                                            &lt;/tr&gt;</span>
<span class="x">                                            &lt;/thead&gt;</span>
<span class="x">                                            &lt;tbody&gt;</span>
<span class="x">                                            @foreach($quote-&gt;quoteItems as $index =&gt; $quoteItem)</span>
<span class="x">                                                &lt;tr&gt;</span>
<span class="x">                                                    &lt;td class=&quot;py-4&quot;&gt;{{ isset($quoteItem-&gt;product-&gt;name)?$quoteItem-&gt;product-&gt;name:$quoteItem-&gt;product_name??&#39;N/A&#39; }}&lt;/td&gt;</span>
<span class="x">                                                    &lt;td class=&quot;py-4&quot;&gt;{{ $quoteItem-&gt;quantity }}&lt;/td&gt;</span>
<span class="x">                                                    &lt;td class=&quot;py-4 text-end min-width-130px&quot;&gt;{{  isset($quoteItem-&gt;price) ? getCurrencyAmount($quoteItem-&gt;price,true) : &#39;N/A&#39; }}&lt;/td&gt;</span>
<span class="x">                                                    &lt;td class=&quot;py-4 text-end min-width-130px&quot;&gt;{{ isset($quoteItem-&gt;total) ? getCurrencyAmount($quoteItem-&gt;total,true) : &#39;N/A&#39; }}&lt;/td&gt;</span>
<span class="x">                                                &lt;/tr&gt;</span>
<span class="x">                                            @endforeach</span>
<span class="x">                                            &lt;/tbody&gt;</span>
<span class="x">                                        &lt;/table&gt;</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                    &lt;div class=&quot;col-lg-5 ms-lg-auto mt-4&quot;&gt;</span>
<span class="x">                                        &lt;div class=&quot;border-top&quot;&gt;</span>
<span class="x">                                            &lt;table class=&quot;table table-borderless box-shadow-none mb-0 mt-5&quot;&gt;</span>
<span class="x">                                                &lt;tbody&gt;</span>
<span class="x">                                                &lt;tr&gt;</span>
<span class="x">                                                    &lt;td class=&quot;ps-0&quot;&gt;{{ __(&#39;messages.quote.sub_total&#39;).(&#39;:&#39;) }}&lt;/td&gt;</span>
<span class="x">                                                    &lt;td class=&quot;text-gray-900 text-end pe-0&quot;&gt;{{ isset($quote-&gt;amount) ? getCurrencyAmount($quote-&gt;amount,true) : &#39;N/A&#39; }}&lt;/td&gt;</span>
<span class="x">                                                &lt;/tr&gt;</span>
<span class="x">                                                &lt;tr&gt;</span>
<span class="x">                                                    &lt;td class=&quot;ps-0&quot;&gt;{{ __(&#39;messages.quote.discount&#39;).(&#39;:&#39;) }}&lt;/td&gt;</span>
<span class="x">                                                    &lt;td class=&quot;text-gray-900 text-end pe-0&quot;&gt;</span>
<span class="x">                                                        @if($quote-&gt;discount == 0 || !isset($quote))</span>
<span class="x">                                                            &lt;span&gt;N/A&lt;/span&gt;</span>
<span class="x">                                                        @else</span>
<span class="x">                                                            @if( $quote-&gt;discount_type == \App\Models\Quote::FIXED)</span>
<span class="x">                                                                {{ getCurrencyAmount($quote-&gt;discount,true) }}</span>
<span class="x">                                                            @else</span>
<span class="x">                                                                {{ getCurrencyAmount($quote-&gt;amount * $quote-&gt;discount / 100,true)}}</span>
<span class="x">                                                            @endif</span>
<span class="x">                                                        @endif</span>
<span class="x">                                                    &lt;/td&gt;</span>
<span class="x">                                                &lt;/tr&gt;</span>
<span class="x">                                                &lt;tr&gt;</span>
<span class="x">                                                    &lt;td class=&quot;ps-0&quot;&gt;{{ __(&#39;messages.quote.total&#39;).(&#39;:&#39;) }}&lt;/td&gt;</span>
<span class="x">                                                    &lt;td class=&quot;text-gray-900 text-end pe-0&quot;&gt;</span>
<span class="x">                                                        {{ getCurrencyAmount($quote-&gt;final_amount,true) }}</span>
<span class="x">                                                    &lt;/td&gt;</span>
<span class="x">                                                &lt;/tr&gt;</span>
<span class="x">                                                &lt;/tbody&gt;</span>
<span class="x">                                            &lt;/table&gt;</span>
<span class="x">                                        &lt;/div&gt;</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                &lt;/div&gt;</span>
<span class="x">                            &lt;/div&gt;</span>
<span class="x">                            &lt;div class=&quot;col-xxl-3 mb-5 mb-lg-0&quot;&gt;</span>
<span class="x">                                &lt;div class=&quot;bg-gray-100 rounded-15 p-md-7 p-5 h-100 mt-xxl-0 mt-5 col-xxl-9 ms-xxl-auto w-100&quot;&gt;</span>
<span class="x">                                    &lt;div class=&quot;mb-8&quot;&gt;</span>
<span class="x">                                        @if($quote-&gt;status == \App\Models\Quote::DRAFT)</span>
<span class="x">                                            &lt;span class=&quot;badge bg-light-warning me-5&quot;&gt;Draft&lt;/span&gt;</span>
<span class="x">                                        @elseif($quote-&gt;status == \App\Models\Quote::CONVERTED)</span>
<span class="x">                                            &lt;span class=&quot;badge bg-light-success me-5&quot;&gt;Converted&lt;/span&gt;</span>
<span class="x">                                        @endif</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                    &lt;h3 class=&quot;mb-5&quot;&gt;{{ __(&#39;messages.quote.client_overview&#39;) }}&lt;/h3&gt;</span>
<span class="x">                                    &lt;div class=&quot;row&quot;&gt;</span>
<span class="x">                                        &lt;div class=&quot;col-xxl-12 col-lg-4 col-sm-6 d-flex flex-column mb-xxl-7 mb-lg-0 mb-4&quot;&gt;</span>
<span class="x">                                            &lt;label for=&quot;name&quot; class=&quot;pb-2 fs-4 text-gray-600&quot;&gt;{{ __(&#39;messages.quote.client_name&#39;) }}&lt;/label&gt;</span>
<span class="x">                                            @if($auth)</span>
<span class="x">                                                &lt;a href=&quot;{{ route(&#39;clients.show&#39;, [&#39;client&#39; =&gt; $quote-&gt;client-&gt;id]) }}&quot;</span>
<span class="x">                                                   class=&quot;link-primary text-decoration-none&quot;&gt;{{ $quote-&gt;client-&gt;user-&gt;full_name }}&lt;/a&gt;</span>

<span class="x">                                            @else</span>
<span class="x">                                                &lt;a href=&quot;#&quot; class=&quot;link-primary fs-4 text-decoration-none&quot;&gt;{{ $quote-&gt;client-&gt;user-&gt;full_name }}&lt;/a&gt;</span>
<span class="x">                                            @endif</span>
<span class="x">                                        &lt;/div&gt;</span>
<span class="x">                                        &lt;div class=&quot;col-xxl-12 col-lg-4 col-sm-6 d-flex flex-column mb-xxl-7 mb-lg-0 mb-4&quot;&gt;</span>
<span class="x">                                            &lt;label for=&quot;name&quot; class=&quot;pb-2 fs-4 text-gray-600&quot;&gt;{{ __(&#39;messages.quote.client_email&#39;) }}&lt;/label&gt;</span>
<span class="x">                                            &lt;span class=&quot;fs-4 text-gray-900&quot;&gt;{{ $quote-&gt;client-&gt;user-&gt;email }}&lt;/span&gt;</span>
<span class="x">                                        &lt;/div&gt;</span>
<span class="x">                                    &lt;/div&gt;</span>
<span class="x">                                &lt;/div&gt;</span>
<span class="x">                            &lt;/div&gt;</span>
<span class="x">                        &lt;/div&gt;</span>
<span class="x">                    &lt;/div&gt;</span>
<span class="x">                &lt;/div&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">        &lt;div class=&quot;tab-pane fade show&quot; id=&quot;note_terms&quot; role=&quot;tabpanel&quot;&gt;</span>
<span class="x">            &lt;div class=&quot;card&quot;&gt;</span>
<span class="x">                &lt;div class=&quot;card-body pt-5&quot;&gt;</span>
<span class="x">                    &lt;div class=&quot;row&quot;&gt;</span>
<span class="x">                        &lt;div class=&quot;col-lg-12 mb-5&quot;&gt;</span>
<span class="x">                            &lt;div class=&quot;fw-bold text-gray-600 fs-7&quot;&gt;{{ __(&#39;messages.quote.note&#39;).&#39;:&#39; }}&lt;/div&gt;</span>
<span class="x">                            &lt;div class=&quot;fs-6&quot;&gt;{!! $quote-&gt;note ?? __(&#39;messages.quote.note_not_found&#39;) !!}&lt;/div&gt;</span>
<span class="x">                        &lt;/div&gt;</span>
<span class="x">                        &lt;div class=&quot;col-lg-12 mb-5&quot;&gt;</span>
<span class="x">                            &lt;div class=&quot;fw-bold text-gray-600 fs-7&quot;&gt;{{ __(&#39;messages.quote.terms&#39;).&#39;:&#39; }}&lt;/div&gt;</span>
<span class="x">                            &lt;div</span>
<span class="x">                                    class=&quot;fs-6&quot;&gt;{!! $quote-&gt;term ?? __(&#39;messages.quote.terms_not_found&#39;) !!}&lt;/div&gt;</span>
<span class="x">                        &lt;/div&gt;</span>
<span class="x">                    &lt;/div&gt;</span>
<span class="x">                &lt;/div&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">&lt;/div&gt;</span>
</code></pre></div>
<p>This is a Blade template for displaying a quote's details our application. The template is conditionally structured to show different sections based on the user's authentication status and whether it's a public view.</p>
<p>Here's an explanation of the Blade template:</p>
<ol>
<li>
<p><strong>Authentication Check:</strong></p>
</li>
<li>
<p>PHP code block (<code>@php</code>) checks if the user is authenticated using <code>Auth::check()</code>. The result is stored in the <code>$auth</code> variable.</p>
</li>
<li>
<p><strong>Tab Navigation (<code>@if($auth &amp;&amp; $isPublicView) ... @endif</code>):</strong></p>
</li>
<li>
<p>If the user is authenticated (<code>$auth</code>) and it's a public view (<code>$isPublicView</code>), a tab navigation section is displayed.</p>
</li>
<li>
<p>Two tabs are created: "Overview" and "Note &amp; Terms."</p>
</li>
<li>
<p><strong>Overview Tab (<code>&lt;div class="tab-pane fade show active" id="overview" role="tabpanel"&gt; ... &lt;/div&gt;</code>):</strong></p>
</li>
<li>
<p>This section displays an overview of the quote.</p>
</li>
<li>It includes details such as the quote ID, quote date, due date, client information, quote items, and summary.</li>
<li>
<p>Buttons for printing the quote in PDF format are also provided.</p>
</li>
<li>
<p><strong>Note &amp; Terms Tab (<code>&lt;div class="tab-pane fade show" id="note_terms" role="tabpanel"&gt; ... &lt;/div&gt;</code>):</strong></p>
</li>
<li>
<p>This section displays the note and terms associated with the quote.</p>
</li>
<li>
<p><strong>Overview Content:</strong></p>
</li>
<li>
<p>Quote information is displayed within this section, including the company logo, quote ID, dates, client details, and a table of quote items.</p>
</li>
<li>Discount and total amount information is also displayed.</li>
<li>
<p>The content dynamically populates with data from the <code>$quote</code> variable.</p>
</li>
<li>
<p><strong>Note &amp; Terms Content:</strong></p>
</li>
<li>
<p>This section displays the note and terms associated with the quote. If no note or terms are available, default messages are shown.</p>
</li>
<li>
<p><strong>Conditional Badge:</strong></p>
</li>
<li>
<p>A badge indicating the quote status (e.g., "Draft" or "Converted") is displayed based on the quote's status.</p>
</li>
<li>
<p><strong>Client Overview:</strong></p>
</li>
<li>Client-related information is displayed in a separate card, including the client's name, email, and a link to the client's details page (if the user is authenticated).</li>
</ol>
<p><strong>The quote.show view:</strong></p>
<div class="highlight"><pre><span></span><code><span class="x">@extends(&#39;layouts.app&#39;)</span>
<span class="x">@section(&#39;title&#39;)</span>
<span class="x">    {{ __(&#39;messages.quote.quote_details&#39;)}}</span>
<span class="x">@endsection</span>
<span class="x">@section(&#39;header_toolbar&#39;)</span>
<span class="x">    &lt;div class=&quot;container-fluid&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;d-md-flex align-items-center justify-content-between mb-5&quot;&gt;</span>
<span class="x">            &lt;h1 class=&quot;mb-0&quot;&gt;@yield(&#39;title&#39;)&lt;/h1&gt;</span>
<span class="x">            &lt;div class=&quot;text-end mt-4 mt-md-0&quot;&gt;</span>
<span class="x">                @if($quote-&gt;status != \App\Models\Quote::CONVERTED)</span>
<span class="x">                    &lt;a href=&quot;{{ route(&#39;quotes.edit&#39;, [&#39;quote&#39; =&gt; $quote-&gt;id]) }}&quot;</span>
<span class="x">                       class=&quot;btn btn-primary me-4&quot;&gt;{{__(&#39;messages.common.edit&#39;)}}&lt;/a&gt;</span>
<span class="x">                @endif</span>
<span class="x">                &lt;a href=&quot;{{ url()-&gt;previous() }}&quot;</span>
<span class="x">                   class=&quot;btn btn-outline-primary&quot;&gt;{{ __(&#39;messages.common.back&#39;) }}&lt;/a&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">@endsection</span>
<span class="x">@section(&#39;content&#39;)</span>
<span class="x">    &lt;div class=&quot;container-fluid&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;d-flex flex-column&quot;&gt;</span>
<span class="x">            @include(&#39;flash::message&#39;)</span>
<span class="x">            @include(&#39;quotes.show_fields&#39;,[&#39;isPublicView&#39;=&gt; true])</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">@endsection</span>
</code></pre></div>
<p>This Blade template is displaying the details of a quote in our application. Here's an explanation of its structure and content:</p>
<ol>
<li>
<p><strong>Layout and Title:</strong></p>
</li>
<li>
<p>The template extends a layout named "app" (<code>@extends('layouts.app')</code>).</p>
</li>
<li>
<p>It sets the title of the page to "Quote Details" in the page's <code>&lt;title&gt;</code> element (<code>@section('title')</code>).</p>
</li>
<li>
<p><strong>Header Toolbar:</strong></p>
</li>
<li>This section contains a container with a flexible (flex) layout for aligning and justifying content.</li>
<li>It displays a page heading with the title set in the previous section.</li>
<li>On the right side, there is a "Back" button (<code>{{ __('messages.common.back') }}</code>) that navigates back to the previous page.</li>
<li>Additionally, there is an "Edit" button (<code>{{__('messages.common.edit')}}</code>) displayed conditionally based on the quote's status. If the quote's status is not "CONVERTED," the "Edit" button is shown.</li>
<li><strong>Content:</strong></li>
<li>The main content section is contained within a fluid container.</li>
<li>It includes a flex-column layout to stack content vertically.</li>
<li>The <code>flash::message</code> directive is used to display any flash messages that may have been set.</li>
<li>The <code>quotes.show_fields</code> view is included, passing the <code>isPublicView</code> parameter as <code>true</code>. This includes the detailed information about the quote, such as client information, quote items, and summary.</li>
</ol>
<p>This template follows a typical structure for displaying the details of a quote. It provides a user-friendly interface with a title, header toolbar with navigation options, and the main content area for displaying the quote's details. The ability to edit the quote is also available if the quote's status allows for it.</p>
<h3 id="buttons-blade">Buttons blade</h3>
<p>we find this code in : <strong>resources&gt;views&gt;quotes&gt;components&gt;add-button.blade.php</strong></p>
<div class="highlight"><pre><span></span><code><span class="x">&lt;div class=&quot;my-3 my-sm-3&quot;&gt;</span>
<span class="x">    &lt;a href=&quot;{{ route(&#39;admin.quotesExcel&#39;) }}&quot; type=&quot;button&quot; class=&quot;btn btn-outline-success me-2&quot; data-turbo=&quot;false&quot;&gt;</span>
<span class="x">        &lt;i class=&quot;fas fa-file-excel me-1&quot;&gt;&lt;/i&gt; {{__(&#39;messages.quote.excel_export&#39;)}}</span>
<span class="x">    &lt;/a&gt;</span>
<span class="x">&lt;/div&gt;</span>
<span class="x">&lt;div class=&quot;my-3 my-sm-3&quot;&gt;</span>
<span class="x">    &lt;a href=&quot;{{ route(&#39;admin.quotes.pdf&#39;) }}&quot; type=&quot;button&quot; class=&quot;btn btn-outline-info me-2&quot; data-turbo=&quot;false&quot;&gt;</span>
<span class="x">        &lt;i class=&quot;fas fa-file-pdf me-1&quot;&gt;&lt;/i&gt; {{__(&#39;messages.pdf_export&#39;)}}</span>
<span class="x">    &lt;/a&gt;</span>
<span class="x">&lt;/div&gt;</span>
<span class="x">&lt;div class=&quot;my-3 my-sm-3&quot;&gt;</span>
<span class="x">    &lt;a href=&quot;{{ route(&#39;quotes.create&#39;) }}&quot; data-turbo=&quot;false&quot;</span>
<span class="x">       class=&quot;btn btn-primary&quot;&gt;{{__(&#39;messages.quote.new_quote&#39;)}}&lt;/a&gt;</span>
<span class="x">&lt;/div&gt;</span>
</code></pre></div>
<p>This code is used for creating buttons or links in our application, related to generating exports. Here's a breakdown of each code snippet:</p>
<ol>
<li><strong>Excel Export Button:</strong></li>
</ol>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;my-3 my-sm-3&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">a</span>
    <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;admin.quotesExcel&#39;) }}&quot;</span>
    <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span>
    <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-outline-success me-2&quot;</span>
    <span class="na">data-turbo</span><span class="o">=</span><span class="s">&quot;false&quot;</span>
  <span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;fas fa-file-excel me-1&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
    {{__(&#39;messages.quote.excel_export&#39;)}}
  <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
<ul>
<li>This code creates a button or link that, when clicked, will navigate to the <code>admin.quotesExcel</code> route.</li>
<li>The button has a green outline (<code>btn-outline-success</code>) and an Excel icon (<code>fas fa-file-excel</code>) with the text "Excel Export."</li>
<li>
<p>It includes the <code>data-turbo="false"</code> attribute, which may be used to disable Turbo Links in a TurboFrames-enabled application.</p>
</li>
<li>
<p><strong>PDF Export Button:</strong></p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;my-3 my-sm-3&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">a</span>
    <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;admin.quotes.pdf&#39;) }}&quot;</span>
    <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span>
    <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-outline-info me-2&quot;</span>
    <span class="na">data-turbo</span><span class="o">=</span><span class="s">&quot;false&quot;</span>
  <span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;fas fa-file-pdf me-1&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span> {{__(&#39;messages.pdf_export&#39;)}}
  <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
<ul>
<li>This code creates a button or link that, when clicked, will navigate to the <code>admin.quotes.pdf</code> route.</li>
<li>The button has a blue outline (<code>btn-outline-info</code>) and a PDF icon (<code>fas fa-file-pdf</code>) with the text "PDF Export."</li>
<li>
<p>It also includes the <code>data-turbo="false"</code> attribute, possibly for disabling Turbo Links.</p>
</li>
<li>
<p><strong>Create New Quote Button:</strong>
   <div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;my-3 my-sm-3&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">a</span>
    <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;quotes.create&#39;) }}&quot;</span>
    <span class="na">data-turbo</span><span class="o">=</span><span class="s">&quot;false&quot;</span>
    <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-primary&quot;</span>
    <span class="p">&gt;</span>{{__(&#39;messages.quote.new_quote&#39;)}}<span class="p">&lt;/</span><span class="nt">a</span>
  <span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div></p>
</li>
<li>
<p>This code creates a button that, when clicked, will navigate to the <code>quotes.create</code> route, it is used for creating a new quote.</p>
</li>
<li>The button has a blue background (<code>btn-primary</code>) and displays the text "New Quote."</li>
</ul>
<p>These code snippets are typically used to enhance the user interface of our application, providing users with clickable buttons for actions such as exporting data or creating new quotes. The <code>route</code> function is used to generate URLs for specific routes defined in the application's routing system.
<strong>filter-blade:</strong></p>
<div class="highlight"><pre><span></span><code><span class="x">&lt;div class=&quot;ms-auto&quot; wire:ignore&gt;</span>
<span class="x">    &lt;div class=&quot;ms-0 ms-md-2&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;dropdown d-flex align-items-center me-2&quot;&gt;</span>
<span class="x">            &lt;button class=&quot;btn btn btn-icon btn-primary text-white dropdown-toggle hide-arrow ps-2 pe-0&quot;</span>
<span class="x">                    type=&quot;button&quot; data-bs-auto-close=&quot;outside&quot;</span>
<span class="x">                    data-bs-toggle=&quot;dropdown&quot; aria-expanded=&quot;false&quot;</span>
<span class="x">                    id=&quot;quoteFilterBtn&quot;&gt;</span>
<span class="x">                &lt;i class=&#39;fas fa-filter&#39;&gt;&lt;/i&gt;</span>
<span class="x">            &lt;/button&gt;</span>
<span class="x">            &lt;div class=&quot;dropdown-menu py-0&quot; aria-labelledby=&quot;quoteFilterBtn&quot;&gt;</span>
<span class="x">                &lt;div class=&quot;text-start border-bottom py-4 px-7&quot;&gt;</span>
<span class="x">                    &lt;h3 class=&quot;text-gray-900 mb-0&quot;&gt;{{ __(&#39;messages.common.filter_option&#39;) }}&lt;/h3&gt;</span>
<span class="x">                &lt;/div&gt;</span>
<span class="x">                &lt;div class=&quot;p-5&quot;&gt;</span>
<span class="x">                    &lt;div class=&quot;mb-5&quot;&gt;</span>
<span class="x">                        &lt;label for=&quot;exampleInputSelect2&quot;</span>
<span class="x">                               class=&quot;form-label&quot;&gt;{{ __(&#39;messages.common.status&#39;).&#39;:&#39; }}&lt;/label&gt;</span>
<span class="x">                        {{ Form::select(&#39;status&#39;, collect($filterHeads[0])-&gt;sortBy(&#39;key&#39;)-&gt;reverse()-&gt;toArray(),\App\Models\Quote::STATUS_ALL, [&#39;id&#39; =&gt; &#39;quoteStatus&#39;,&#39;class&#39; =&gt; &#39;form-select&#39;]) }}</span>
<span class="x">                    &lt;/div&gt;</span>
<span class="x">                    &lt;div class=&quot;d-flex justify-content-end&quot;&gt;</span>
<span class="x">                        &lt;button type=&quot;reset&quot; id=&quot;resetQuoteStatusFilter&quot;</span>
<span class="x">                                class=&quot;btn btn-secondary&quot;&gt;{{ __(&#39;messages.common.reset&#39;) }}&lt;/button&gt;</span>
<span class="x">                    &lt;/div&gt;</span>
<span class="x">                &lt;/div&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">&lt;/div&gt;</span>
</code></pre></div>
<p>This HTML code create a dropdown filter control our application, used for filtering a list of quotes. Let's break down the code:</p>
<ol>
<li><strong>Dropdown Trigger Button:</strong></li>
</ol>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">button</span>
  <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn btn-icon btn-primary text-white dropdown-toggle hide-arrow ps-2 pe-0&quot;</span>
  <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span>
  <span class="na">data-bs-auto-close</span><span class="o">=</span><span class="s">&quot;outside&quot;</span>
  <span class="na">data-bs-toggle</span><span class="o">=</span><span class="s">&quot;dropdown&quot;</span>
  <span class="na">aria-expanded</span><span class="o">=</span><span class="s">&quot;false&quot;</span>
  <span class="na">id</span><span class="o">=</span><span class="s">&quot;quoteFilterBtn&quot;</span>
<span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;fas fa-filter&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</code></pre></div>
<ul>
<li>This button is styled as a primary button (<code>btn btn-primary</code>) and has an icon of a filter (<code>fas fa-filter</code>).</li>
<li>
<p>It's used to trigger the dropdown menu when clicked. The dropdown menu will appear below this button.</p>
</li>
<li>
<p><strong>Dropdown Menu:</strong></p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;dropdown-menu py-0&quot;</span> <span class="na">aria-labelledby</span><span class="o">=</span><span class="s">&quot;quoteFilterBtn&quot;</span><span class="p">&gt;</span>
  <span class="cm">&lt;!-- Content of the dropdown menu --&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
<ul>
<li>This <code>&lt;div&gt;</code> represents the dropdown menu.</li>
<li>
<p><code>py-0</code> and <code>aria-labelledby</code> attributes are set for styling and accessibility.</p>
</li>
<li>
<p><strong>Dropdown Menu Content:</strong></p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-start border-bottom py-4 px-7&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-900 mb-0&quot;</span><span class="p">&gt;</span>
    {{ __(&#39;messages.common.filter_option&#39;) }}
  <span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;p-5&quot;</span><span class="p">&gt;</span>
  <span class="cm">&lt;!-- Filter options and controls go here --&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
<ul>
<li>The dropdown menu starts with a heading displaying "Filter Options."</li>
<li>
<p>Inside the <code>p-5</code> (padding) section, filter options and controls will be placed.</p>
</li>
<li>
<p><strong>Filter Options:</strong></p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;exampleInputSelect2&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-label&quot;</span>
  <span class="p">&gt;</span>{{ __(&#39;messages.common.status&#39;).&#39;:&#39; }}<span class="p">&lt;/</span><span class="nt">label</span>
<span class="p">&gt;</span>
{{ Form::select(&#39;status&#39;,
collect($filterHeads[0])-&gt;sortBy(&#39;key&#39;)-&gt;reverse()-&gt;toArray(),\App\Models\Quote::STATUS_ALL,
[&#39;id&#39; =&gt; &#39;quoteStatus&#39;,&#39;class&#39; =&gt; &#39;form-select&#39;]) }}
</code></pre></div>
<ul>
<li>This code segment is a filter option for the "status" of quotes.</li>
<li>It includes a label with the text "Status:" and a <code>&lt;select&gt;</code> dropdown input element. The options for this dropdown are generated dynamically using PHP (<code>collect($filterHeads[0])-&gt;sortBy('key')-&gt;reverse()-&gt;toArray()</code>).</li>
<li>
<p>The selected value in the dropdown is set to <code>\App\Models\Quote::STATUS_ALL</code>, and the dropdown has an <code>id</code> of "quoteStatus" and a class of "form-select."</p>
</li>
<li>
<p><strong>Reset Button:</strong>
   <div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;d-flex justify-content-end&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;reset&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;resetQuoteStatusFilter&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-secondary&quot;</span><span class="p">&gt;</span>
    {{ __(&#39;messages.common.reset&#39;) }}
  <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div></p>
</li>
<li>
<p>This button, labeled "Reset," is positioned at the bottom of the dropdown menu.</p>
</li>
<li>It has an <code>id</code> of "resetQuoteStatusFilter" and is styled as a secondary button (<code>btn btn-secondary</code>).</li>
</ul>
<p>This code creates a filter dropdown menu for quotes, allowing users to filter quotes by their status. When the filter button is clicked, the dropdown menu appears, and users can make selections or reset the filter using the provided options.</p>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>